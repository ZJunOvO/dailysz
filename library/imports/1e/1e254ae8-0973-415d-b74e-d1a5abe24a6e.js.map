{"version":3,"sources":["assets\\scripts\\jigsaw.js"],"names":["n","Object","defineProperty","exports","value","_evts","require","_idx","_res","_sound","_time","_vb","_cfgMgr","_lang","_global","_bagMgr","_festivalMgr","_jigsawMgr","_newJigMgr","_panelMgr","_pInfo","_loading","_main","T","cc","_decorator","I","ccclass","D","property","P","Math","tan","PI","k","t","e","apply","arguments","ringNode","tilePre","shadow0","tilesNode","menuNode","scrollView","finImg","dragTag","lockNode","timeLb","bgBtn","getLb","timeAd","lockImg","tileLbNode","cellNode","cellSpr","hintNum","bgNum","bgNode","tipLb","bgBtnNode","getPieceSp","btnReset","jig_2d","tile_a","tile_p","tiles","tiles_idle","isAllRight","is_hinting","idle_tile_select","tileSelect","tilePosId","scroll_dir","drag_tile","dragPutPosId","guideF","isUnlock","theme_id","is_init","jigTiles","defaultShowTime","showBgEndTime","adMaxTime","adMaxTime2","themeType","eventFunc","__extends","prototype","onLoad","o","serverCfg","lock_rules","main_line_lock","puzzle_line_val","string","lang","format","i","r","props","set","length","s","key","limit_time","node","active","daily_limit_times","Number","onOperTap","bind","opE","on","_registerEvent","_unregisterEvent","chgVisItems","action","UPDJIGSAWGAME","updateView","UPD_PANEL","UPD_MAIN_RED","upItemNum","start","zIndex","onEnable","onDisable","initGetTime","initGetTime2","ins","getItemCount","getJigsawTilesByIdx","content","removeAllChildren","RefreshIdleItems","isItemUnlock","initUnLock","initLocked","getIsUnlock","initItem","a","getJigsawBgEndTimesByIdx","getNewJigBgEndTimesByIdx","isPieceEnough","getBundleByString","then","load","SpriteFrame","isValid","spriteFrame","console","error","assetManager","loadRemote","OssConfig","jigswawUrl","ext","headImgExt","getJigsawAdTimes","getNewJigAdTimes","y","height","Texture2D","initUnlockWithImg","IsJigsawCompleted","initComplete","initUnComplete","parent","checkSetFin","initTilePos","initAroundTiles","InitTiles","isShowBging","serverTime","floor","Date","getTime","enabled","unschedule","beginShow","schedule","lockedToUnlock","cTile","addAroundTiles","Node","addComponent","Sprite","position","v3","cTileSprite","scale","getTilePos","x","cIdleTile","toString","setContentSize","size","addTileShadow","g","name","c","l","u","p","f","d","opacity","tween","to","setPosition","push","h","max","getContentSize","width","destroy","children","ttIdleTile","getWorldPointByTouch","convertToNodeSpaceAR","tileFlyView","cDragTile","VEnum3","SHORT","setTileVis","di","img","getTileByPos","tile_id","playTrueAni","reGuide","delTile","moveTile","instantiate","getComponent","getMaterial","setProperty","color","b","v2","Label","font","DEFAULTFONT","tTilePosID","Vec2","distance","onTBe","touch","getBoundingBox","contains","_onTouchBegan","onTM","getStartLocationInView","getLocationInView","sub","atan2","_onTouchMoved","convertToWorldSpaceAR","onTE","_onTouchEnded","putDragTile","onTC","_onTouchCancelled","call","modJigTile","checkAllR","OnBtnHint","useItem","_doHint","open","itemId","onBtnGet","ZERO","getCanHint","updPro","fesTaskKey","finishPuzzle","play","FINISH_PUZZLE","platform","reportEvent","ERepEvt","partJigsaw","fesJigNum","finishHoleJigsaw","idx","setFinfishJigsaw","themeId","checkHasFin","ShowGuide","onBtnBg","setJigsawBgEndTimesByIdx","setNewJigBgEndTimesByIdx","onBtnLb","onBtnReset","okCb","resetItem","resetJigByIdx","clearTiles","emit","setJigsawTilesByIdx","onDestroy","off","__decorate","Prefab","ScrollView","Button","Component"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", { value: !0 });\nvar _evts = require(\"evts\");\nvar _idx = require(\"idx\");\nvar _res = require(\"res\");\nvar _sound = require(\"sound\");\nvar _time = require(\"time\");\nvar _vb = require(\"vb\");\nvar _cfgMgr = require(\"cfgMgr\");\nvar _lang = require(\"lang\");\nvar _global = require(\"global\");\nvar _bagMgr = require(\"bagMgr\");\nvar _festivalMgr = require(\"festivalMgr\");\nvar _jigsawMgr = require(\"jigsawMgr\");\nvar _newJigMgr = require(\"newJigMgr\");\nvar _panelMgr = require(\"panelMgr\");\nvar _pInfo = require(\"pInfo\");\nvar _loading = require(\"loading\");\nvar _main = require(\"main\");\nvar T = cc._decorator;\nvar I = T.ccclass;\nvar D = T.property;\nvar P = 79 - 34.5 * Math.tan((Math.PI / 180) * 30) + 0.4;\nvar k = (function(t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.ringNode = null;\n        e.tilePre = null;\n        e.shadow0 = null;\n        e.tilesNode = null;\n        e.menuNode = null;\n        e.scrollView = null;\n        e.finImg = null;\n        e.dragTag = null;\n        e.lockNode = null;\n        e.timeLb = null;\n        e.bgBtn = null;\n        e.getLb = null;\n        e.timeAd = null;\n        e.lockImg = null;\n        e.tileLbNode = null;\n        e.cellNode = null;\n        e.cellSpr = null;\n        e.hintNum = null;\n        e.bgNum = null;\n        e.bgNode = null;\n        e.tipLb = null;\n        e.bgBtnNode = null;\n        e.getPieceSp = null;\n        e.btnReset = null;\n        e.jig_2d = null;\n        e.tile_a = null;\n        e.tile_p = [];\n        e.tiles = {};\n        e.tiles_idle = [];\n        e.isAllRight = !1;\n        e.is_hinting = !1;\n        e.idle_tile_select = null;\n        e.tileSelect = null;\n        e.tilePosId = -1;\n        e.scroll_dir = 0;\n        e.drag_tile = null;\n        e.dragPutPosId = -1;\n        e.guideF = null;\n        e.isUnlock = !1;\n        e.theme_id = -1;\n        e.is_init = !1;\n        e.jigTiles = [];\n        e.defaultShowTime = 30;\n        e.showBgEndTime = 0;\n        e.adMaxTime = 5;\n        e.adMaxTime2 = 5;\n        e.themeType = 1;\n        e.eventFunc = null;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function() {\n        var t;\n        var e;\n        var o = _cfgMgr.default.serverCfg;\n        var n =\n            (null ===\n                (e = null === (t = null == o ? void 0 : o.lock_rules) || void 0 === t ? void 0 : t.main_line_lock) ||\n                void 0 === e ?\n                void 0 :\n                e.puzzle_line_val) || 0;\n        this.tipLb.string = _lang.lang[30001].format(n);\n        for (var i = 0, r = o.props.set; i < r.length; i++) {\n            var s = r[i];\n            \"puzzle_background\" == s.key ?\n                s.limit_time &&\n                ((this.defaultShowTime = s.limit_time), (this.timeLb.node.active = !1), (this.timeAd.active = !0)) :\n                \"puzzle_pieces\" == s.key ?\n                s.daily_limit_times && (this.adMaxTime = Number(s.daily_limit_times) || 5) :\n                \"newYear_pieces\" == s.key &&\n                s.daily_limit_times &&\n                (this.adMaxTime2 = Number(s.daily_limit_times) || 5);\n        }\n        this.eventFunc = this.onOperTap.bind(this);\n        _evts.default.opE.on(this.eventFunc);\n        this.scrollView._registerEvent = function() {};\n        this.scrollView._unregisterEvent = function() {};\n        this.tile_a = this.tilesNode;\n        this.scrollView.node.on(\"scrolling\", this.chgVisItems, this);\n        this.tileLbNode.active = !1;\n        this.btnReset.active = !1;\n    };\n    e.prototype.onOperTap = function(t) {\n        var e = null == t ? void 0 : t.action;\n        if (e)\n            switch (e) {\n                case _evts.default.UPDJIGSAWGAME:\n                    this.updateView();\n                    break;\n                case _evts.default.UPD_PANEL:\n                case _evts.default.UPD_MAIN_RED:\n                    this.upItemNum();\n            }\n    };\n    e.prototype.start = function() {\n        this.dragTag.zIndex = -1e3;\n        this.dragTag.active = !1;\n    };\n    e.prototype.onEnable = function() {};\n    e.prototype.onDisable = function() {};\n    e.prototype.upItemNum = function() {\n        1 === this.themeType ? this.initGetTime() : 2 === this.themeType && this.initGetTime2();\n        this.hintNum.string = _bagMgr.default.ins.getItemCount(\"puzzle_notice\") + \"\";\n        this.bgNum.string = _bagMgr.default.ins.getItemCount(\"puzzle_background\") + \"\";\n    };\n    e.prototype.updateView = function() {\n        var t;\n        1 === this.themeType ? (t = _jigsawMgr.default.ins) : 2 === this.themeType && (t = _newJigMgr.default.ins);\n        this.jigTiles = t.getJigsawTilesByIdx(this.theme_id);\n        this.scrollView.content.removeAllChildren();\n        this.tiles_idle = [];\n        this.RefreshIdleItems(!0);\n        this.isUnlock = t.isItemUnlock(this.theme_id);\n        this.isUnlock ? this.initUnLock() : this.initLocked();\n        this.upItemNum();\n    };\n    e.prototype.getIsUnlock = function() {\n        return this.isUnlock;\n    };\n    e.prototype.initItem = function(t, e) {\n        var o = this;\n        this.themeType = e;\n        this.theme_id = t;\n        var n;\n        var i = t + 1;\n        var r = \"puzzle_pieces\";\n        var a = \"pintu_\" + i + \"_1\";\n        1 === e ?\n            ((n = _jigsawMgr.default.ins),\n                (this.showBgEndTime = _pInfo.default.ins.getJigsawBgEndTimesByIdx(t)),\n                (this.bgBtnNode.active = !0)) :\n            2 === e &&\n            ((n = _newJigMgr.default.ins),\n                (this.showBgEndTime = _pInfo.default.ins.getNewJigBgEndTimesByIdx(t)),\n                (r = \"newYear_pieces\"),\n                (a = \"fes_\" + i + \"_1\"),\n                (this.bgBtnNode.active = !1));\n        this.jigTiles = n.getJigsawTilesByIdx(t);\n        this.isUnlock = n.isItemUnlock(t);\n        this.isUnlock ? this.initUnLock() : this.initLocked();\n        !this.isUnlock && n.isPieceEnough(t) ? (this.tipLb.node.active = !0) : (this.tipLb.node.active = !1);\n        this.upItemNum();\n        1 === e &&\n            (i < 61 ?\n                _res.default.ins\n                .getBundleByString(\"jigsaw\")\n                .then(function(t) {\n                    t.load(a, cc.SpriteFrame, function(t, e) {\n                        !t && o.node && o.node.isValid && (o.lockImg.spriteFrame = e);\n                    });\n                })\n                .catch(function(t) {\n                    console.error(\"RTool.ins.getBundleByString('jigsaw')\", t);\n                }) :\n                cc.assetManager.loadRemote(\n                    _global.OssConfig.jigswawUrl + \"pintu_\" + i + \"_1.jpg\", { ext: _global.headImgExt },\n                    function(t, e) {\n                        !t && o.node && o.node.isValid && (o.lockImg.spriteFrame = new cc.SpriteFrame(e));\n                    }\n                ));\n        _res.default.ins\n            .getBundleByString(\"resSps\")\n            .then(function(t) {\n                t.load(\"item/\" + r, cc.SpriteFrame, function(t, e) {\n                    !t && o.node && o.node.isValid && (o.getPieceSp.spriteFrame = e);\n                });\n            })\n            .catch(function(t) {\n                console.error(\"RTool.ins.getBundleByString('resSps')\", t);\n            });\n    };\n    e.prototype.initGetTime = function() {\n        var t = _pInfo.default.ins.getJigsawAdTimes();\n        var e = this.adMaxTime - t;\n        this.getLb.string = e + \"\";\n    };\n    e.prototype.initGetTime2 = function() {\n        var t = _pInfo.default.ins.getNewJigAdTimes();\n        var e = this.adMaxTime2 - t;\n        this.getLb.string = e + \"\";\n    };\n    e.prototype.initLocked = function() {\n        this.finImg.node.active = !0;\n        this.menuNode.active = !1;\n        this.lockNode.active = !0;\n        this.lockImg.node.active = !0;\n        this.bgNode.y = 326;\n        this.bgNode.height = 790;\n    };\n    e.prototype.initUnLock = function() {\n        var t = this;\n        var e = this.theme_id + 1;\n        var o = \"pintu_\" + e;\n        1 === this.themeType ?\n            e < 61 ?\n            _res.default.ins\n            .getBundleByString(\"jigsaw\")\n            .then(function(e) {\n                e.load(o, cc.Texture2D, function(e, o) {\n                    !e && t.node && t.node.isValid && t.initUnlockWithImg(o);\n                });\n            })\n            .catch(function(t) {\n                console.error(\"RTool.ins.getBundleByString('jigsaw')\", t);\n            }) :\n            cc.assetManager.loadRemote(\n                _global.OssConfig.jigswawUrl + \"pintu_\" + e + \".jpg\", { ext: _global.headImgExt },\n                function(e, o) {\n                    !e && t.node && t.node.isValid && t.initUnlockWithImg(o);\n                }\n            ) :\n            2 === this.themeType &&\n            ((o = \"fes_\" + e),\n                _res.default.ins\n                .getBundleByString(\"jigsaw\")\n                .then(function(e) {\n                    e.load(o, cc.Texture2D, function(e, o) {\n                        !e && t.node && t.node.isValid && t.initUnlockWithImg(o);\n                    });\n                })\n                .catch(function(t) {\n                    console.error(\"RTool.ins.getBundleByString('jigsaw')\", t);\n                }));\n    };\n    e.prototype.initUnlockWithImg = function(t) {\n        this.jig_2d = t;\n        this.finImg.spriteFrame = new cc.SpriteFrame(t);\n        this.lockNode.active = !1;\n        this.menuNode.active = !0;\n        this.lockImg.node.active = !1;\n        this.isAllRight = this.IsJigsawCompleted(this.theme_id);\n        this.isAllRight ? this.initComplete() : this.initUnComplete();\n    };\n    e.prototype.initComplete = function() {\n        var t;\n        this.lockImg.node.active = !1;\n        this.finImg.node.active = !0;\n        this.scrollView.node.parent.active = !1;\n        this.menuNode.active = !1;\n        this.lockNode.active = !1;\n        this.btnReset.active = !0;\n        this.bgNode.y = 326;\n        this.bgNode.height = 790;\n        1 === this.themeType ? (t = _jigsawMgr.default.ins) : 2 === this.themeType && (t = _newJigMgr.default.ins);\n        t.checkSetFin(this.theme_id);\n    };\n    e.prototype.initUnComplete = function() {\n        this.is_init ||\n            ((this.lockImg.node.active = !1),\n                (this.scrollView.node.parent.active = !0),\n                (this.menuNode.active = !0),\n                (this.lockNode.active = !1),\n                this.initTilePos(),\n                this.initAroundTiles(),\n                this.InitTiles(),\n                this.RefreshIdleItems(!0),\n                this.isShowBging(),\n                (this.is_init = !0),\n                (this.bgNode.y = 396),\n                (this.bgNode.height = 960));\n        var t = this.showBgEndTime - _time.default.ins.serverTime || Math.floor(new Date().getTime() / 1e3);\n        this.lockNode.active = !(t < 0);\n    };\n    e.prototype.isShowBging = function() {\n        (this.showBgEndTime - _time.default.ins.serverTime || Math.floor(new Date().getTime() / 1e3)) < 0\n            ?\n            ((this.finImg.node.active = !1),\n                (this.lockNode.active = !1),\n                (this.bgBtn.enabled = !0),\n                (this.timeLb.string = this.defaultShowTime + \"s\"),\n                (this.timeLb.node.active = !1),\n                (this.timeAd.active = !0),\n                this.unschedule(this.beginShow)) :\n            ((this.bgBtn.enabled = !1),\n                (this.finImg.node.active = !0),\n                (this.lockNode.active = !0),\n                (this.timeAd.active = !1),\n                (this.timeLb.node.active = !0),\n                this.schedule(this.beginShow, 1),\n                this.beginShow());\n    };\n    e.prototype.lockedToUnlock = function() {\n        this.isUnlock || ((this.isUnlock = !0), (this.lockNode.active = !1), this.initUnLock());\n    };\n    e.prototype.InitTiles = function() {\n        for (var t = 0, e = this.jigTiles; t < e.length; t++) {\n            var o = e[t];\n            var n = o[0];\n            var i = o[1]; -\n            1 != i && this.cTile(n, i, !1);\n        }\n    };\n    e.prototype.addAroundTiles = function(t, e, o, n) {\n        var i = new cc.Node();\n        i.addComponent(cc.Sprite).spriteFrame = this.shadow0;\n        i.position = cc.v3(t + -4, e + -9);\n        i.zIndex = -1;\n        i.parent = this.tile_a;\n        var r = this.cTileSprite(o, n);\n        r.position = cc.v3(t, e);\n        r.scale = 1.02;\n        r.zIndex = 1;\n        r.parent = this.tile_a;\n    };\n    e.prototype.initAroundTiles = function() {\n        for (var t = 0; t < 11; t++) {\n            var e = this.getTilePos(t);\n            this.addAroundTiles(e.x + 49.5, -e.y - 44.5 + 69, e.x, e.y - 69);\n        }\n        for (var o = [99, 89, 100, 91, 101, 93, 102, 95, 103, 97, 104], n = 0; n < 11; n++)\n            (t = o[n]), (e = this.getTilePos(t)), this.addAroundTiles(e.x + 49.5, -e.y - 44.5 - 69, e.x, e.y + 69);\n        var i = [0, 11, 22, 33, 44, 55, 66, 77, 88, 99, 99];\n        for (n = 0; n < 11; n++)\n            (t = i[n]),\n            (e = this.getTilePos(t)),\n            10 == n ?\n            this.addAroundTiles(e.x + 49.5 - P, -e.y - 44.5 - 34.5, e.x - P, e.y + 34.5) :\n            this.addAroundTiles(e.x + 49.5 - P, -e.y - 44.5 + 34.5, e.x - P, e.y - 34.5);\n        var r = [10, 21, 32, 43, 54, 65, 76, 87, 98, 104, 104];\n        for (n = 0; n < 11; n++)\n            (t = r[n]),\n            (e = this.getTilePos(t)),\n            10 == n ?\n            this.addAroundTiles(e.x + 49.5 + P, -e.y - 44.5 - 34.5, e.x + P, e.y + 34.5) :\n            this.addAroundTiles(e.x + 49.5 + P, -e.y - 44.5 + 34.5, e.x + P, e.y - 34.5);\n    };\n    e.prototype.cIdleTile = function(t) {\n        var e = new cc.Node(t.toString());\n        e.scale = 1.01;\n        e.setContentSize(cc.size(79, 69));\n        this.addTileShadow(e);\n        var o = this.getTilePos(t);\n        this.cTileSprite(o.x, o.y).parent = e;\n        return e;\n    };\n    e.prototype.RefreshIdleItems = function(t, e) {\n        if ((void 0 === e && (e = !1), !this.isAllRight && this.jig_2d)) {\n            for (var o = this.jigTiles, n = {}, i = 0, r = this.tiles_idle; i < r.length; i++) n[(g = r[i]).name] = g;\n            this.tiles_idle = [];\n            for (var a = 0, s = 0, c = o; s < c.length; s++) {\n                var l = c[s];\n                var u = l[0];\n                if (-1 == l[1]) {\n                    var p = n[(f = u.toString())];\n                    var d = null;\n                    p\n                        ?\n                        ((d = p), (n[f] = void 0)) :\n                        ((d = this.cIdleTile(u)),\n                            t || ((d.opacity = 0), cc.tween(d).to(0.5, { opacity: 255 }).start()),\n                            (d.parent = this.scrollView.content));\n                    d.setPosition(50 + 100 * a++, 0);\n                    this.tiles_idle.push(d);\n                }\n            }\n            var h = Math.max(100 * this.tiles_idle.length, this.scrollView.node.getContentSize().width + 1);\n            for (var f in (this.scrollView.content.setContentSize(cc.size(h, 110)), n)) {\n                var g;\n                (g = n[f]) && g.destroy();\n            }\n            this.chgVisItems();\n        }\n    };\n    e.prototype.chgVisItems = function() {\n        var t = this.scrollView.content;\n        var e = t.children;\n        if (0 != e.length)\n            for (\n                var o = t.parent.getContentSize(), n = -o.width / 2 - 50, i = o.width / 2 + 50, r = t.x, a = 0, s = e; a < s.length; a++\n            ) {\n                var c = s[a];\n                var l = c.x + r;\n                var u = l >= n && l <= i;\n                c.active = u;\n            }\n    };\n    e.prototype.ttIdleTile = function(t) {\n        if (this.tiles_idle.length <= 0) return null;\n        var e = _main.default.ins.getWorldPointByTouch(t);\n        var o = this.scrollView.content.convertToNodeSpaceAR(e);\n        if (o.y < -45 || o.y > 45) return null;\n        for (var n = 0, i = this.tiles_idle; n < i.length; n++) {\n            var r = i[n];\n            var a = r.position;\n            if (o.x > a.x - 45 && o.x < a.x + 45) return r;\n        }\n        return null;\n    };\n    e.prototype.tileFlyView = function(t, e) {\n        var o = this.cDragTile(e);\n        o.position = t;\n        o.parent = this.node;\n        var n = this.scrollView.node.parent.position;\n        cc.tween(o).to(0.5, { position: n }).to(0.15, { opacity: 0 }).start();\n    };\n    e.prototype.cDragTile = function(t) {\n        _vb.default.p(_vb.VEnum3.SHORT);\n        var e = new cc.Node(t.toString());\n        e.scale = 1.01;\n        e.setContentSize(cc.size(79, 69));\n        this.addTileShadow(e);\n        var o = this.getTilePos(t);\n        this.cTileSprite(o.x, o.y).parent = e;\n        return e;\n    };\n    e.prototype.setTileVis = function(t, e) {\n        t.di.active = e;\n        t.img.active = e;\n    };\n    e.prototype.cTile = function(t, e, o) {\n        if ((void 0 === o && (o = !0), !this.getTileByPos(e))) {\n            var n = this.tile_p[e];\n            var i = new cc.Node();\n            i.addComponent(cc.Sprite).spriteFrame = this.shadow0;\n            i.position = cc.v3(n.x, n.y - 7);\n            i.parent = this.tile_a;\n            var r = this.getTilePos(t);\n            var a = this.cTileSprite(r.x, r.y);\n            a.position = cc.v3(n.x, n.y);\n            a.scale = 1.02;\n            a.zIndex = 1;\n            a.parent = this.tile_a;\n            this.tiles[e] = { di: i, img: a, tile_id: t };\n            o && e == t && (this.playTrueAni(n), _vb.default.p(_vb.VEnum3.SHORT));\n            this.reGuide();\n        }\n    };\n    e.prototype.delTile = function(t) {\n        var e = this.tiles[t];\n        e && (e.di.destroy(), e.img.destroy(), (this.tiles[t] = null));\n    };\n    e.prototype.moveTile = function(t, e, o) {\n        var n = this.tiles[t];\n        if (n && n.tile_id == o) {\n            var i = this.tile_p[e];\n            n.di.position = cc.v3(i.x, i.y - 7);\n            n.img.position = cc.v3(i.x, i.y);\n            this.tiles[e] = n;\n            this.tiles[t] = null;\n            e == o && (this.playTrueAni(i), _vb.default.p(_vb.VEnum3.SHORT));\n        }\n    };\n    e.prototype.getTileByPos = function(t) {\n        return this.tiles[t];\n    };\n    e.prototype.cTileSprite = function(t, e) {\n        var o = this.jig_2d.width;\n        var n = this.jig_2d.height;\n        var i = t + 10;\n        var r = e + 10;\n        var a = cc.instantiate(this.tilePre);\n        a.getComponent(cc.Sprite).getMaterial(0).setProperty(\"texture2\", this.jig_2d);\n        var s = (i / o) * 255;\n        var c = (r / n) * 255;\n        var l = cc.color();\n        l.r = s > 0 ? s : 0;\n        l.g = c > 0 ? c : 0;\n        var u = 0;\n        s > 0 && c <= -21 ?\n            (u = 51) :\n            s > 0 && c <= -8 ?\n            (u = 102) :\n            s <= -18 && c <= -8 ?\n            (u = 153) :\n            s <= -18 && c > 0 && (u = 204);\n        l.b = u + 5;\n        a.color = l;\n        return a;\n    };\n    e.prototype.getTilePos = function(t) {\n        var e = Math.floor(t / 11);\n        var o = t % 11;\n        t > 99 && (o += t - 99);\n        var n = P * o;\n        var i = 69 * e;\n        o % 2 == 1 && (i += 34.5);\n        return cc.v2(n, i);\n    };\n    e.prototype.initTilePos = function() {\n        if (!(this.tile_p.length > 0))\n            for (var t = 0; t < 105; t++) {\n                var e = this.getTilePos(t);\n                var o = e.x + 49.5;\n                var n = -e.y - 44.5;\n                var i = new cc.Node();\n                i.color = cc.color(52, 156, 193);\n                var r = i.addComponent(cc.Label);\n                r.string = t + \"\";\n                r.font = _loading.DEFAULTFONT;\n                i.parent = this.tileLbNode;\n                i.position = cc.v3(o, n + 3);\n                var a = new cc.Node();\n                a.addComponent(cc.Sprite).spriteFrame = this.cellSpr;\n                a.scale = 0.93;\n                a.parent = this.cellNode;\n                a.position = cc.v3(o, n, 0);\n                this.tile_p.push(cc.v2(o, n));\n            }\n    };\n    e.prototype.tTilePosID = function(t) {\n        var e = _main.default.ins.getWorldPointByTouch(t);\n        var o = this.tilesNode.convertToNodeSpaceAR(e);\n        if (o.x <= 0 || o.x >= 694 || o.y >= 0 || o.y <= -711) return -1;\n        for (var n = 0; n < this.tile_p.length; n++)\n            if (cc.Vec2.distance(o, this.tile_p[n]) <= 34.5) return n;\n        return -1;\n    };\n    e.prototype.onTBe = function(t) {\n        if (this.isAllRight || this.is_hinting) return !0;\n        this.tileSelect = null;\n        this.tilePosId = -1;\n        this.idle_tile_select = null;\n        this.drag_tile = null;\n        this.scroll_dir = 0;\n        var e = this.tTilePosID(t.touch);\n        if (-1 != e) {\n            var o = this.getTileByPos(e);\n            if (o && o.tile_id != e) return (this.tileSelect = o), (this.tilePosId = e), !1;\n        }\n        if (this.tiles_idle.length > 0) {\n            var n = _main.default.ins.getWorldPointByTouch(t.touch);\n            var i = this.scrollView.node.parent.convertToNodeSpaceAR(n);\n            if (this.scrollView.node.getBoundingBox().contains(i))\n                return (\n                    this.scrollView._onTouchBegan(t),\n                    (this.idle_tile_select = this.ttIdleTile(t.touch)),\n                    this.idle_tile_select && (this.idle_tile_select.scale = 1.01 * 1.1), !1\n                );\n        }\n        return !0;\n    };\n    e.prototype.onTM = function(t) {\n        if (this.isAllRight || this.is_hinting) return !0;\n        if (0 == this.scroll_dir) {\n            var e = t.touch;\n            var o = e.getStartLocationInView();\n            var n = e.getLocationInView();\n            if (cc.Vec2.distance(o, n) > 5) {\n                var i = n.sub(o);\n                var r = 57.2957 * Math.atan2(i.y, i.x);\n                r > 30 && r < 150 ?\n                    (this.scroll_dir = 2) :\n                    r < -30 && r > -150 ?\n                    (this.scroll_dir = 2) :\n                    r >= -30 && r <= 30 ?\n                    (this.scroll_dir = 1) :\n                    (r <= -150 || r >= 150) && (this.scroll_dir = 1);\n                this.tileSelect ?\n                    this.drag_tile ||\n                    0 == this.scroll_dir ||\n                    ((this.drag_tile = this.cDragTile(this.tileSelect.tile_id)),\n                        (this.drag_tile.scale = 0.88),\n                        (this.drag_tile.parent = this.node),\n                        this.setTileVis(this.tileSelect, !1)) :\n                    1 == this.scroll_dir ?\n                    this.idle_tile_select && (this.idle_tile_select.scale = 1.01) :\n                    2 == this.scroll_dir &&\n                    this.idle_tile_select &&\n                    !this.drag_tile &&\n                    ((this.drag_tile = this.cDragTile(Number(this.idle_tile_select.name))),\n                        (this.drag_tile.parent = this.node),\n                        (this.idle_tile_select.active = !1));\n            }\n        }\n        var a = _main.default.ins.getWorldPointByTouch(t.touch);\n        var s = this.scrollView.node.parent.convertToNodeSpaceAR(a);\n        var c = this.scrollView.node.getBoundingBox().contains(s);\n        if ((this.tileSelect || 1 != this.scroll_dir || !c || this.scrollView._onTouchMoved(t), this.drag_tile)) {\n            var l = _main.default.ins.getWorldPointByTouch(t.touch);\n            var u = this.node.convertToNodeSpaceAR(l);\n            this.drag_tile.position = cc.v3(u.x, u.y + 195);\n            var p = this.node.convertToWorldSpaceAR(this.drag_tile.position);\n            var d = ((o = this.tilesNode.convertToNodeSpaceAR(p)), 0);\n            var h = -1;\n            var f = cc.v3();\n            if (o.x > 0 && o.x < 694 && o.y < 0 && o.y > -711) {\n                for (var g = this.tile_p.length - 1; g >= 0; g--)\n                    if (((f.x = this.tile_p[g].x), (f.y = this.tile_p[g].y), -1 == h))\n                        (h = g), (d = cc.Vec2.distance(o, f));\n                    else {\n                        var y = cc.Vec2.distance(o, f);\n                        y < d && ((d = y), (h = g));\n                    } -\n                1 != h && d > 50 && (h = -1);\n            }\n            this.dragPutPosId = h; -\n            1 == h ?\n                (this.dragTag.active = !1) :\n                ((this.dragTag.active = !0), (this.dragTag.position = cc.v3(this.tile_p[h].x, this.tile_p[h].y)));\n        }\n    };\n    e.prototype.onTE = function(t) {\n        if (this.isAllRight || this.is_hinting) return !0;\n        this.tileSelect || 1 != this.scroll_dir || this.scrollView._onTouchEnded(t);\n        this.putDragTile();\n        this.idle_tile_select && ((this.idle_tile_select.scale = 1.01), (this.idle_tile_select = null));\n    };\n    e.prototype.onTC = function(t) {\n        if (this.isAllRight || this.is_hinting) return !0;\n        this.tileSelect || 1 != this.scroll_dir || this.scrollView._onTouchCancelled(t);\n        this.putDragTile();\n        this.idle_tile_select && ((this.idle_tile_select.scale = 1.01), (this.idle_tile_select = null));\n    };\n    e.prototype.putDragTile = function() {\n        if (this.drag_tile) {\n            var t = Number(this.drag_tile.name);\n            this.dragTag.active = !1;\n            var e = this.drag_tile;\n            if (\n                (cc\n                    .tween(this.drag_tile)\n                    .to(0.15, { opacity: 0 })\n                    .call(function() {\n                        e.destroy();\n                    })\n                    .start(),\n                    (this.drag_tile = null),\n                    (this.is_hinting = !1),\n                    this.idle_tile_select)\n            ) {\n                if (\n                    ((this.idle_tile_select.scale = 1.01),\n                        (this.idle_tile_select.active = !0),\n                        (this.idle_tile_select.opacity = 0),\n                        cc.tween(this.idle_tile_select).to(0.3, { opacity: 255 }).start(),\n                        (this.idle_tile_select = null), -1 == this.dragPutPosId)\n                )\n                    return;\n                var o = this.getTileByPos(this.dragPutPosId);\n                return o ?\n                    void(\n                        o.tile_id == this.dragPutPosId ||\n                        (this.modJigTile(this.theme_id, o.tile_id, -1, !1),\n                            this.delTile(this.dragPutPosId),\n                            this.modJigTile(this.theme_id, t, this.dragPutPosId),\n                            this.cTile(t, this.dragPutPosId),\n                            this.RefreshIdleItems(!1, !0))\n                    ) :\n                    (this.modJigTile(this.theme_id, t, this.dragPutPosId),\n                        this.cTile(t, this.dragPutPosId),\n                        this.RefreshIdleItems(!1),\n                        void(t == this.dragPutPosId && this.checkAllR()));\n            }\n            if (\n                this.tileSelect &&\n                (this.setTileVis(this.tileSelect, !0), (this.tileSelect = null), this.tilePosId != this.dragPutPosId)\n            ) {\n                var n = this.getTileByPos(this.dragPutPosId);\n                if (-1 == this.dragPutPosId || (n && n.tile_id == this.dragPutPosId))\n                    return (\n                        this.modJigTile(this.theme_id, t, -1),\n                        this.delTile(this.tilePosId),\n                        void this.RefreshIdleItems(!1)\n                    );\n                if (n && n.tile_id != this.dragPutPosId) {\n                    var i = n.tile_id;\n                    this.modJigTile(this.theme_id, n.tile_id, -1, !1);\n                    this.delTile(this.dragPutPosId);\n                    this.modJigTile(this.theme_id, t, this.dragPutPosId, !1);\n                    this.moveTile(this.tilePosId, this.dragPutPosId, t);\n                    this.modJigTile(this.theme_id, i, this.tilePosId);\n                    this.cTile(i, this.tilePosId);\n                    return void this.checkAllR();\n                } -\n                1 != this.tilePosId &&\n                    this.tilePosId != this.dragPutPosId &&\n                    (this.modJigTile(this.theme_id, t, this.dragPutPosId),\n                        this.moveTile(this.tilePosId, this.dragPutPosId, t),\n                        t == this.dragPutPosId && this.checkAllR());\n            }\n        }\n    };\n    e.prototype.OnBtnHint = function() {\n        if (!(this.is_hinting || this.isAllRight || this.tileSelect || this.idle_tile_select)) {\n            var t = this.tiles_idle.length > 0;\n            if (!t)\n                for (var e in this.tiles) {\n                    var o = this.tiles[e];\n                    if (o && Number(e) != o.tile_id) {\n                        t = !0;\n                        break;\n                    }\n                }\n            t\n                ?\n                _bagMgr.default.ins.getItemCount(\"puzzle_notice\") > 0 ?\n                (_bagMgr.default.ins.useItem(\"puzzle_notice\"), this._doHint()) :\n                _panelMgr.default.ins.open(\"ui/ui_getItem\", { itemId: \"puzzle_notice\" }) :\n                this.onBtnGet();\n        }\n    };\n    e.prototype._doHint = function() {\n        var t = this;\n        for (var e in ((this.is_hinting = !1), this.tiles))\n            if ((l = this.tiles[e])) {\n                var o = Number(e);\n                if (o != l.tile_id) {\n                    this.tilePosId = o;\n                    this.tileSelect = l;\n                    this.dragPutPosId = l.tile_id;\n                    break;\n                }\n            }\n        if (this.tileSelect) {\n            this.drag_tile = this.cDragTile(this.tileSelect.tile_id);\n            this.drag_tile.parent = this.node;\n            this.setTileVis(this.tileSelect, !1);\n            var n = this.tilesNode.convertToWorldSpaceAR(this.tile_p[this.tilePosId]);\n            var i = this.node.convertToNodeSpaceAR(n);\n            var r = this.tilesNode.convertToWorldSpaceAR(this.tile_p[this.dragPutPosId]);\n            var a = this.node.convertToNodeSpaceAR(r);\n            this.drag_tile.position = cc.v3(i.x, i.y);\n            cc.tween(this.drag_tile)\n                .to(0.5, { x: a.x, y: a.y })\n                .call(function() {\n                    t.putDragTile();\n                })\n                .start();\n            return void(this.is_hinting = !0);\n        }\n        for (var s = 0, c = this.tiles_idle; s < c.length; s++) {\n            var l = c[s];\n            this.idle_tile_select = l;\n            var u = Number(l.name);\n            this.dragPutPosId = u;\n            this.drag_tile = this.cDragTile(u);\n            this.drag_tile.parent = this.node;\n            i = this.node.convertToNodeSpaceAR(l.convertToWorldSpaceAR(cc.Vec2.ZERO));\n            l.active || ((i.x = this.scrollView.node.parent.x), (i.y = this.scrollView.node.parent.y));\n            a = this.node.convertToNodeSpaceAR(this.tilesNode.convertToWorldSpaceAR(this.tile_p[this.dragPutPosId]));\n            this.drag_tile.setPosition(i.x, i.y);\n            cc.tween(this.drag_tile)\n                .to(0.5, { x: a.x, y: a.y })\n                .call(function() {\n                    t.putDragTile();\n                })\n                .start();\n            this.is_hinting = !0;\n            l.active = !1;\n            break;\n        }\n    };\n    e.prototype.getCanHint = function() {\n        for (var t in this.tiles) {\n            var e = this.tiles[t];\n            if (e && Number(t) != e.tile_id) break;\n        }\n    };\n    e.prototype.addTileShadow = function(t) {\n        var e = new cc.Node();\n        e.addComponent(cc.Sprite).spriteFrame = this.shadow0;\n        e.position = cc.v3(0, -5);\n        e.parent = t;\n    };\n    e.prototype.playTrueAni = function(t) {\n        _festivalMgr.default.ins.updPro(_festivalMgr.fesTaskKey.finishPuzzle, 1);\n        _sound.default.ins.play(_sound.default.FINISH_PUZZLE);\n        1 === this.themeType ?\n            _idx.platform.reportEvent(_idx.ERepEvt.partJigsaw) :\n            2 === this.themeType && _idx.platform.reportEvent(_idx.ERepEvt.fesJigNum);\n        var e = this.ringNode;\n        var o = this.tilesNode.convertToWorldSpaceAR(t);\n        var n = this.node.convertToNodeSpaceAR(o);\n        e.active = !0;\n        e.setPosition(n);\n        e.parent = this.node;\n        cc.tween(e)\n            .set({ scale: 0.88, opacity: 255 })\n            .to(0.2, { scale: 1.2, opacity: 0 })\n            .call(function() {\n                e.active = !1;\n            })\n            .start();\n    };\n    e.prototype.checkAllR = function() {\n        if (!this.isAllRight && ((this.isAllRight = this.IsJigsawCompleted(this.theme_id)), this.isAllRight)) {\n            this.tilesNode.active = !1;\n            this.finImg.node.active = !0;\n            this.finImg.node.opacity = 0;\n            cc.tween(this.finImg.node).to(1, { opacity: 255 }).start();\n            this.scrollView.node.active = !1;\n            this.menuNode.active = !1;\n            this.lockNode.active = !1;\n            this.btnReset.active = !0;\n            this.bgNode.y = 326;\n            this.bgNode.height = 790;\n            var t = this.theme_id + \"\";\n            _idx.platform.reportEvent(_idx.ERepEvt.finishHoleJigsaw, { idx: t });\n            var e = void 0;\n            1 === this.themeType ? (e = _jigsawMgr.default.ins) : 2 === this.themeType && (e = _newJigMgr.default.ins);\n            e.setFinfishJigsaw(this.theme_id);\n            _panelMgr.default.ins.open(\"ui/ui_jigFinish\", { themeId: this.theme_id, themeType: this.themeType });\n        }\n    };\n    e.prototype.IsJigsawCompleted = function(t) {\n        var e;\n        1 === this.themeType ? (e = _jigsawMgr.default.ins) : 2 === this.themeType && (e = _newJigMgr.default.ins);\n        var o = e.checkHasFin(t);\n        if (o) return o;\n        var n = e.getJigsawTilesByIdx(t);\n        if (105 == n.length) {\n            for (var i = 0, r = n; i < r.length; i++) {\n                var a = r[i];\n                if (a[0] != a[1]) return !1;\n            }\n            return !0;\n        }\n        return !1;\n    };\n    e.prototype.ShowGuide = function() {};\n    e.prototype.reGuide = function() {\n        this.guideF && (this.guideF.destroy(), (this.guideF = null));\n    };\n    e.prototype.onBtnBg = function() {\n        if (_bagMgr.default.ins.getItemCount(\"puzzle_background\") > 0) {\n            _bagMgr.default.ins.useItem(\"puzzle_background\");\n            var t = _time.default.ins.serverTime || Math.floor(new Date().getTime() / 1e3);\n            this.showBgEndTime = this.defaultShowTime + t;\n            1 === this.themeType ?\n                _pInfo.default.ins.setJigsawBgEndTimesByIdx(this.theme_id, this.showBgEndTime) :\n                2 === this.themeType &&\n                _pInfo.default.ins.setNewJigBgEndTimesByIdx(this.theme_id, this.showBgEndTime);\n            this.bgBtn.enabled = !1;\n            this.finImg.node.active = !0;\n            this.lockNode.active = !0;\n            this.timeAd.active = !1;\n            this.timeLb.node.active = !0;\n            this.schedule(this.beginShow, 1);\n        } else _panelMgr.default.ins.open(\"ui/ui_getItem\", { itemId: \"puzzle_background\" });\n    };\n    e.prototype.beginShow = function() {\n        var t = _time.default.ins.serverTime || Math.floor(new Date().getTime() / 1e3);\n        var e = this.showBgEndTime - t;\n        if (e < 0)\n            return (\n                (this.finImg.node.active = !1),\n                (this.lockNode.active = !1),\n                (e = 30),\n                (this.bgBtn.enabled = !0),\n                (this.timeLb.string = this.defaultShowTime + \"s\"),\n                (this.timeLb.node.active = !1),\n                (this.timeAd.active = !0),\n                void this.unschedule(this.beginShow)\n            );\n        this.timeLb.string = e + \"s\";\n    };\n    e.prototype.onBtnGet = function() {\n        1 === this.themeType ?\n            _panelMgr.default.ins.open(\"ui/ui_getItem\", { itemId: \"puzzle_pieces\" }) :\n            2 === this.themeType && _panelMgr.default.ins.open(\"ui/ui_getItem\", { itemId: \"newYear_pieces\" });\n    };\n    e.prototype.onBtnLb = function() {\n        this.tileLbNode.active = !this.tileLbNode.active;\n    };\n    e.prototype.onBtnReset = function() {\n        _panelMgr.default.ins.open(\"ui/ui_jigTip\", { okCb: this.resetItem.bind(this) });\n    };\n    e.prototype.resetItem = function() {\n        var t;\n        1 === this.themeType ? (t = _jigsawMgr.default.ins) : 2 === this.themeType && (t = _newJigMgr.default.ins);\n        t.resetJigByIdx(this.theme_id);\n        this.is_init || (this.initTilePos(), this.initAroundTiles(), (this.is_init = !0));\n        this.clearTiles();\n        this.isAllRight = !1;\n        this.tilesNode.active = !0;\n        this.jigTiles = t.getJigsawTilesByIdx(this.theme_id);\n        this.scrollView.content.removeAllChildren();\n        this.tiles_idle.length = 0;\n        this.RefreshIdleItems(!0);\n        this.lockImg.node.active = !1;\n        this.scrollView.node.active = !0;\n        this.scrollView.node.parent.active = !0;\n        this.menuNode.active = !0;\n        this.lockNode.active = !1;\n        this.btnReset.active = !1;\n        this.finImg.node.active = !1;\n        this.bgNode.y = 396;\n        this.bgNode.height = 960;\n        this.upItemNum();\n    };\n    e.prototype.clearTiles = function() {\n        for (var t in this.tiles) this.delTile(t);\n    };\n    e.prototype.modJigTile = function(t, e, o, n) {\n        if ((void 0 === n && (n = !0), void 0 === n && (n = !0), !(e < 0 || e >= 105 || o < -1 || o >= 105))) {\n            for (var i = this.jigTiles, r = 0, s = i; r < s.length; r++)\n                if ((u = s[r])[1] == o && -1 != o) {\n                    o = -1;\n                    break;\n                }\n            for (var c = 0, l = i; c < l.length; c++) {\n                var u;\n                if ((u = l[c])[0] == e) {\n                    u[1] = o;\n                    break;\n                }\n            }\n            if (n) {\n                _evts.default.opE.emit({ action: _evts.default.UPD_MAIN_RED });\n                var p = void 0;\n                1 === this.themeType ?\n                    (p = _jigsawMgr.default.ins) :\n                    2 === this.themeType && (p = _newJigMgr.default.ins);\n                p.setJigsawTilesByIdx(this.theme_id, this.jigTiles);\n            }\n        }\n    };\n    e.prototype.onDestroy = function() {\n        _evts.default.opE.off(this.eventFunc);\n        this.eventFunc = null;\n    };\n    __decorate([D(cc.Node)], e.prototype, \"ringNode\", void 0);\n    __decorate([D(cc.Prefab)], e.prototype, \"tilePre\", void 0);\n    __decorate([D(cc.SpriteFrame)], e.prototype, \"shadow0\", void 0);\n    __decorate([D(cc.Node)], e.prototype, \"tilesNode\", void 0);\n    __decorate([D(cc.Node)], e.prototype, \"menuNode\", void 0);\n    __decorate([D(cc.ScrollView)], e.prototype, \"scrollView\", void 0);\n    __decorate([D(cc.Sprite)], e.prototype, \"finImg\", void 0);\n    __decorate([D(cc.Node)], e.prototype, \"dragTag\", void 0);\n    __decorate([D(cc.Node)], e.prototype, \"lockNode\", void 0);\n    __decorate([D(cc.Label)], e.prototype, \"timeLb\", void 0);\n    __decorate([D(cc.Button)], e.prototype, \"bgBtn\", void 0);\n    __decorate([D(cc.Label)], e.prototype, \"getLb\", void 0);\n    __decorate([D(cc.Node)], e.prototype, \"timeAd\", void 0);\n    __decorate([D(cc.Sprite)], e.prototype, \"lockImg\", void 0);\n    __decorate([D(cc.Node)], e.prototype, \"tileLbNode\", void 0);\n    __decorate([D(cc.Node)], e.prototype, \"cellNode\", void 0);\n    __decorate([D(cc.SpriteFrame)], e.prototype, \"cellSpr\", void 0);\n    __decorate([D(cc.Label)], e.prototype, \"hintNum\", void 0);\n    __decorate([D(cc.Label)], e.prototype, \"bgNum\", void 0);\n    __decorate([D(cc.Node)], e.prototype, \"bgNode\", void 0);\n    __decorate([D(cc.Label)], e.prototype, \"tipLb\", void 0);\n    __decorate([D(cc.Node)], e.prototype, \"bgBtnNode\", void 0);\n    __decorate([D(cc.Sprite)], e.prototype, \"getPieceSp\", void 0);\n    __decorate([D(cc.Node)], e.prototype, \"btnReset\", void 0);\n    return __decorate([I], e);\n})(cc.Component);\nexports.default = k;"]}