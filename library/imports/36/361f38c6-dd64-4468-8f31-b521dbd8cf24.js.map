{"version":3,"sources":["assets\\scripts\\ui_chapter.js"],"names":["n","Object","defineProperty","exports","value","_mySafeArea","require","_chapterItem","_global","_pInfo","_baseUI","_chaptBtn","d","cc","_decorator","h","ccclass","f","property","g","t","e","apply","arguments","scrollView","chaptPfb","btnView","btnPre","bgNode","bookNode","lineNode","lineNode1","topNode","closeNode","chapterJigsawPos","itemHeight","swBtns","endChapterCount","startIdx","chapterItem","lastScrollPosition","__extends","prototype","onLoad","node","height","winSize","padScale","scale","view","getVisibleSize","width","x","onResize","content","removeAllChildren","loadBtns","initChpaterPos","then","initData","console","error","getSafeAreaRect","yMin","parent","start","scheduleOnce","y","removeComponent","Widget","init","hideThis","hide","chapterCount","o","Math","ceil","i","instantiate","r","active","a","getComponent","s","c","l","setLb","setState","push","on","btnClick","ins","getPuzzleLvl","u","scrollToOffset","v2","min","m","setContentSize","size","getState","length","stopAutoScroll","scrollToTop","children","forEach","loadItem","shift","addChild","name","opacity","position","v3","bind","showChgAni","pageScroll","getScrollOffset","abs","convertToWorldSpaceAR","Vec2","ZERO","convertToNodeSpaceAR","Promise","assetManager","loadRemote","OssConfig","chapterUrl","JsonAsset","json","Array","isArray","showLoadAni","tween","to","easing","showChangegAni","__decorate","ScrollView","Prefab","Node"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _mySafeArea = require(\"mySafeArea\");\nvar _chapterItem = require(\"chapterItem\");\nvar _global = require(\"global\");\nvar _pInfo = require(\"pInfo\");\nvar _baseUI = require(\"baseUI\");\nvar _chaptBtn = require(\"chaptBtn\");\nvar d = cc._decorator;\nvar h = d.ccclass;\nvar f = d.property;\nvar g = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.scrollView = null;\n        e.chaptPfb = null;\n        e.btnView = null;\n        e.btnPre = null;\n        e.bgNode = null;\n        e.bookNode = null;\n        e.lineNode = null;\n        e.lineNode1 = null;\n        e.topNode = null;\n        e.closeNode = null;\n        e.chapterJigsawPos = {};\n        e.itemHeight = 460;\n        e.swBtns = [];\n        e.endChapterCount = 0;\n        e.startIdx = 1;\n        e.chapterItem = [];\n        e.lastScrollPosition = 0;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {\n        var t = this;\n        if (((this.node.height = cc.winSize.height), _global.default.padScale)) {\n            this.bgNode.scale = _global.default.padScale;\n            var e = (cc.view.getVisibleSize().width - 720) / 2;\n            this.closeNode.x -= e;\n        }\n        this.onResize();\n        this.btnView.content.removeAllChildren();\n        this.loadBtns();\n        this.initChpaterPos()\n            .then(function () {\n                return t.initData();\n            })\n            .catch(function (t) {\n                console.error(\"initChpaterPosErr\", t);\n            });\n    };\n    e.prototype.onResize = function () {\n        this.node.height = cc.winSize.height;\n        var t = _mySafeArea.getSafeAreaRect().yMin;\n        var e = cc.winSize.height - 1280 - t;\n        this.bookNode.height += e;\n        this.lineNode.height += e;\n        this.lineNode1.height += e;\n        this.btnView.content.height += e;\n        this.scrollView.content.height += e;\n        this.btnView.node.height += e;\n        this.scrollView.node.height += e;\n        this.btnView.content.parent.height += e;\n        this.scrollView.content.parent.height += e;\n    };\n    e.prototype.start = function () {\n        var t = this;\n        this.scheduleOnce(function () {\n            t.topNode.y -= _mySafeArea.getSafeAreaRect().yMin / 2;\n            t.topNode.removeComponent(cc.Widget);\n        });\n    };\n    e.prototype.init = function () {};\n    e.prototype.hideThis = function () {\n        this.hide();\n    };\n    e.prototype.loadBtns = function () {\n        for (\n            var t = this,\n                e = _global.default.chapterCount,\n                o = Math.ceil(e / 10),\n                n = e % 10,\n                i = function (e) {\n                    var i = cc.instantiate(r.btnPre);\n                    i.parent = r.btnView.content;\n                    i.active = !0;\n                    var a = i.getComponent(_chaptBtn.default);\n                    var s = 1 + 10 * e;\n                    var c = 10 * (e + 1);\n                    n && (c = s + n - 1);\n                    var l = s + \"-\" + (e === o - 1 ? c : 10 * (e + 1));\n                    a.setLb(l);\n                    a.setState(!1);\n                    r.swBtns.push(a);\n                    i.on(\n                        \"click\",\n                        function () {\n                            t.btnClick(e);\n                        },\n                        r\n                    );\n                },\n                r = this,\n                a = 0;\n            a < o;\n            a++\n        )\n            i(a);\n        var s = _pInfo.default.ins.getPuzzleLvl();\n        var u = Math.ceil(s / 54);\n        var d = Math.ceil(u / 10);\n        this.startIdx = 1 + 10 * (d - 1);\n        this.swBtns[d - 1].setState(!0);\n        var h = 10;\n        var f = u % 10;\n        f && (h = f);\n        var g = (h - 1) * this.itemHeight;\n        this.scrollView.scrollToOffset(cc.v2(0, g));\n        var y = 10 * d;\n        this.endChapterCount = Math.min(y, e);\n        var m = this.endChapterCount - this.startIdx + 1;\n        this.scrollView.content.setContentSize(cc.size(560, this.itemHeight * m));\n    };\n    e.prototype.btnClick = function (t) {\n        if (!this.swBtns[t].getState()) {\n            for (var e = 0, o = this.swBtns.length; e < o; e++) this.swBtns[e].setState(!1);\n            this.swBtns[t].setState(!0);\n            this.startIdx = 1 + 10 * t;\n            var n = 10 * (t + 1);\n            this.endChapterCount = Math.min(n, _global.default.chapterCount);\n            var i = this.endChapterCount - this.startIdx + 1;\n            this.scrollView.content.setContentSize(cc.size(560, this.itemHeight * i));\n            this.scrollView.stopAutoScroll();\n            this.scrollView.scrollToTop();\n            this.initData();\n        }\n    };\n    e.prototype.initData = function () {\n        var t = this;\n        this.scrollView.content.children.forEach(function (e) {\n            t.chapterItem.push(e);\n        });\n        this.scrollView.content.removeAllChildren();\n        this.loadItem(this.startIdx, 0);\n    };\n    e.prototype.loadItem = function (t, e) {\n        if (t <= this.endChapterCount) {\n            var o = this.chapterItem.shift();\n            o || (o = cc.instantiate(this.chaptPfb));\n            this.scrollView.content.addChild(o);\n            o.name = \"chapter_\" + t;\n            o.opacity = 0;\n            o.position = cc.v3(0, -this.itemHeight * e);\n            o.getComponent(_chapterItem.default).init(t, this.chapterJigsawPos);\n            t++;\n            e++;\n            this.scheduleOnce(this.loadItem.bind(this, t, e), 0);\n        } else {\n            for (var n = this.scrollView.content, i = 0; i < n.children.length; i++) {\n                var r = n.children[i];\n                r.active = !0;\n                r.opacity = 255;\n                this.showChgAni;\n            }\n            this.lastScrollPosition = 0;\n            this.pageScroll(!1);\n            this.showChgAni || (this.showChgAni = !0);\n        }\n    };\n    e.prototype.pageScroll = function (t) {\n        void 0 === t && (t = !0);\n        var e = this.scrollView.content.children;\n        var o = this.scrollView.getScrollOffset().y;\n        if (!(t && Math.abs(o - this.lastScrollPosition) < 1)) {\n            for (var n = this.itemHeight, i = this.scrollView.content.parent.height, r = 0; r < e.length; r++) {\n                var a = e[r];\n                var s = a.convertToWorldSpaceAR(cc.Vec2.ZERO);\n                (s = this.scrollView.content.parent.convertToNodeSpaceAR(s)).y + n < -i || s.y - n > 0\n                    ? (a.children[0].active = !1)\n                    : (a.children[0].active = !0);\n            }\n            this.lastScrollPosition = o;\n        }\n    };\n    e.prototype.initChpaterPos = function () {\n        var t;\n        var e = this;\n        var o = new Promise(function (e) {\n            t = e;\n        });\n        cc.assetManager.loadRemote(_global.OssConfig.chapterUrl + \"pos.json\", cc.JsonAsset, function (o, n) {\n            var i = [\n                [\n                    [-40, 127],\n                    [129, 127],\n                    [-88, -28],\n                    [195, -60],\n                    [-224, -128],\n                    [49, -128]\n                ],\n                [\n                    [-195, 134],\n                    [192, 119],\n                    [144, -71],\n                    [53, 34],\n                    [-40, -81],\n                    [-209, -44]\n                ],\n                [\n                    [-133, 59],\n                    [40, 62],\n                    [210, 95],\n                    [-191, -104],\n                    [-28, -98],\n                    [181, -95]\n                ],\n                [\n                    [-167, 122],\n                    [-24, 39],\n                    [136, 122],\n                    [-198, -42],\n                    [35, -80],\n                    [191, -112]\n                ],\n                [\n                    [20, 98],\n                    [-89, -44],\n                    [22, -40],\n                    [149, -75],\n                    [-193, -128],\n                    [15, -138]\n                ],\n                [\n                    [-80, 30],\n                    [101, 132],\n                    [-216, -72],\n                    [-95, -123],\n                    [32, -91],\n                    [184, -66]\n                ],\n                [\n                    [-90, 29],\n                    [76, 126],\n                    [79, -22],\n                    [-199, -112],\n                    [-51, -122],\n                    [197, -95]\n                ],\n                [\n                    [-117, 125],\n                    [162, 110],\n                    [-217, -119],\n                    [-79, -101],\n                    [57, -118],\n                    [162, -126]\n                ],\n                [\n                    [-129, 71],\n                    [162, 62],\n                    [-2, -37],\n                    [150.5, -101.6],\n                    [-9, -136.4],\n                    [-177, -136]\n                ],\n                [\n                    [-183, -56],\n                    [22, -70],\n                    [-81, -121],\n                    [188, -130],\n                    [-74, 114],\n                    [73, -149]\n                ],\n                [\n                    [-135, 96],\n                    [14, 51],\n                    [188, 58],\n                    [-169, -134],\n                    [-3, -97],\n                    [187, -124]\n                ],\n                [\n                    [209, -84],\n                    [-205, 97],\n                    [-173, -136],\n                    [172, 56],\n                    [68, -21],\n                    [-118, -15]\n                ],\n                [\n                    [-198, -108],\n                    [32, -139],\n                    [183, -107],\n                    [-159, 133],\n                    [15, -14],\n                    [180, 97]\n                ],\n                [\n                    [-7, -51],\n                    [-35, 121],\n                    [-196, 24],\n                    [-159, -117],\n                    [154, -136],\n                    [149, 99]\n                ],\n                [\n                    [172, -116],\n                    [13, 42],\n                    [-152, 98],\n                    [-145, -127],\n                    [164, 124],\n                    [31, -122]\n                ],\n                [\n                    [121, -115],\n                    [-5, 80],\n                    [-165, -122],\n                    [202, 28],\n                    [-183, 116],\n                    [-173, -8.4]\n                ],\n                [\n                    [156, -25],\n                    [-206, -126],\n                    [-21.5, 103.4],\n                    [5, -114],\n                    [-92, -34],\n                    [-198, 3]\n                ],\n                [\n                    [-112, 84],\n                    [142, 93],\n                    [-189, -97],\n                    [185, -57],\n                    [53, -99],\n                    [-58, -90]\n                ]\n            ];\n            !o && n && n.json && Array.isArray(n.json) && e.node && i.push.apply(i, n.json);\n            var r = e.chapterJigsawPos;\n            var a = 1;\n            i.forEach(function (t) {\n                t.forEach(function (t) {\n                    (r[9 * a] = cc.v2(t[0], t[1])), a++;\n                });\n            });\n            t(1);\n        });\n        return o;\n    };\n    e.prototype.showLoadAni = function (t) {\n        cc.tween(t).to(0.5, {x: 0}, {easing: \"backInOut\"}).start();\n    };\n    e.prototype.showChangegAni = function (t) {\n        cc.tween(t).to(0.2, {opacity: 255}).start();\n    };\n    __decorate([f(cc.ScrollView)], e.prototype, \"scrollView\", void 0);\n    __decorate([f(cc.Prefab)], e.prototype, \"chaptPfb\", void 0);\n    __decorate([f(cc.ScrollView)], e.prototype, \"btnView\", void 0);\n    __decorate([f(cc.Node)], e.prototype, \"btnPre\", void 0);\n    __decorate([f(cc.Node)], e.prototype, \"bgNode\", void 0);\n    __decorate([f(cc.Node)], e.prototype, \"bookNode\", void 0);\n    __decorate([f(cc.Node)], e.prototype, \"lineNode\", void 0);\n    __decorate([f(cc.Node)], e.prototype, \"lineNode1\", void 0);\n    __decorate([f(cc.Node)], e.prototype, \"topNode\", void 0);\n    __decorate([f(cc.Node)], e.prototype, \"closeNode\", void 0);\n    return __decorate([h], e);\n})(_baseUI.default);\nexports.default = g;\n"]}