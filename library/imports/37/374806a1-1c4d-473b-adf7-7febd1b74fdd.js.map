{"version":3,"sources":["assets\\scripts\\ui_save.js"],"names":["n","Object","defineProperty","exports","value","_idx","require","_request","_time","_uData","_panelMgr","_tipMgr","_baseUI","h","cc","_decorator","f","ccclass","g","property","y","t","e","apply","arguments","timeLb","__extends","prototype","onLoad","init","string","ins","getServerData","then","rePanel","userDatas","data","o","i","update_at","r","a","Math","max","s","formatDate","hideThis","hide","onBtnSave","platform","showLoading","updateServerData","getLocalData","hideLoading","status","showTip","onBtnBack","open","__decorate","Label"],"mappings":";;;;;;AAAA,IAAIA,CAAJ;AACAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAACC,KAAK,EAAE,CAAC;AAAT,CAA7C;;AACA,IAAIC,IAAI,GAAGC,OAAO,CAAC,KAAD,CAAlB;;AACA,IAAIC,QAAQ,GAAGD,OAAO,CAAC,SAAD,CAAtB;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,MAAD,CAAnB;;AACA,IAAIG,MAAM,GAAGH,OAAO,CAAC,OAAD,CAApB;;AACA,IAAII,SAAS,GAAGJ,OAAO,CAAC,UAAD,CAAvB;;AACA,IAAIK,OAAO,GAAGL,OAAO,CAAC,QAAD,CAArB;;AACA,IAAIM,OAAO,GAAGN,OAAO,CAAC,QAAD,CAArB;;AACA,IAAIO,CAAC,GAAGC,EAAE,CAACC,UAAX;AACA,IAAIC,CAAC,GAAGH,CAAC,CAACI,OAAV;AACA,IAAIC,CAAC,GAAGL,CAAC,CAACM,QAAV;;AACA,IAAIC,CAAC,GAAI,UAAUC,CAAV,EAAa;EAClB,SAASC,CAAT,GAAa;IACT,IAAIA,CAAC,GAAI,SAASD,CAAT,IAAcA,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAf,IAA4C,IAApD;IACAF,CAAC,CAACG,MAAF,GAAW,IAAX;IACA,OAAOH,CAAP;EACH;;EACDI,SAAS,CAACJ,CAAD,EAAID,CAAJ,CAAT;;EACAC,CAAC,CAACK,SAAF,CAAYC,MAAZ,GAAqB,YAAY,CAAE,CAAnC;;EACAN,CAAC,CAACK,SAAF,CAAYE,IAAZ,GAAmB,YAAY;IAC3B,IAAIR,CAAC,GAAG,IAAR;IACA,KAAKI,MAAL,CAAYK,MAAZ,GAAqB,MAArB;;IACAvB,QAAQ,WAAR,CAAiBwB,GAAjB,CACKC,aADL,CACmB,EADnB,EAEKC,IAFL,CAEU,UAAUX,CAAV,EAAa;MACfD,CAAC,CAACa,OAAF,CAAUZ,CAAV;IACH,CAJL,WAKW,YAAY;MACfD,CAAC,CAACa,OAAF,CAAU,IAAV;IACH,CAPL;EAQH,CAXD;;EAYAZ,CAAC,CAACK,SAAF,CAAYO,OAAZ,GAAsB,UAAUb,CAAV,EAAa;IAC/B,IAAM,KAAKc,SAAL,GAAiBd,CAAlB,EAAsBA,CAAC,IAAIA,CAAC,CAACe,IAAlC,EAAyC;MACrC,IAAId,CAAC,GAAGD,CAAC,CAACe,IAAV;MACA,IAAIC,CAAC,GAAGf,CAAC,CAAC,CAAD,CAAT;MACA,IAAItB,CAAC,GAAGsB,CAAC,CAAC,CAAD,CAAT;MACA,IAAIgB,CAAC,GAAG,CAAC,QAAQD,CAAR,GAAY,KAAK,CAAjB,GAAqBA,CAAC,CAACE,SAAxB,KAAsC,CAA9C;MACA,IAAIC,CAAC,GAAG,CAAC,QAAQxC,CAAR,GAAY,KAAK,CAAjB,GAAqBA,CAAC,CAACuC,SAAxB,KAAsC,CAA9C;MACA,IAAIE,CAAC,GAAGC,IAAI,CAACC,GAAL,CAASL,CAAT,EAAYE,CAAZ,CAAR;;MACA,IAAIC,CAAJ,EAAO;QACH,IAAIG,CAAC,GAAGpC,KAAK,WAAL,CAAcuB,GAAd,CAAkBc,UAAlB,CAA6BJ,CAA7B,CAAR;;QACA,KAAKhB,MAAL,CAAYK,MAAZ,GAAqBc,CAArB;MACH,CAHD,MAGO,KAAKnB,MAAL,CAAYK,MAAZ,GAAqB,MAArB;IACV,CAXD,MAWO,KAAKL,MAAL,CAAYK,MAAZ,GAAqB,MAArB;EACV,CAbD;;EAcAR,CAAC,CAACK,SAAF,CAAYmB,QAAZ,GAAuB,YAAY;IAC/B,KAAKC,IAAL;EACH,CAFD;;EAGAzB,CAAC,CAACK,SAAF,CAAYqB,SAAZ,GAAwB,YAAY;IAChC3C,IAAI,CAAC4C,QAAL,CAAcC,WAAd,CAA0B,QAA1B;;IACA3C,QAAQ,WAAR,CAAiBwB,GAAjB,CACKoB,gBADL,CACsB1C,MAAM,WAAN,CAAesB,GAAf,CAAmBqB,YAAnB,EADtB,EACyD,UADzD,EAEKnB,IAFL,CAEU,UAAUZ,CAAV,EAAa;MACfhB,IAAI,CAAC4C,QAAL,CAAcI,WAAd;;MACAhC,CAAC,CAACiC,MAAF,GACM3C,OAAO,WAAP,CAAgBoB,GAAhB,CAAoBwB,OAApB,CAA4B,MAA5B,EAAoC,CAAC,CAArC,CADN,GAEM5C,OAAO,WAAP,CAAgBoB,GAAhB,CAAoBwB,OAApB,CAA4B,aAA5B,EAA2C,CAAC,CAA5C,CAFN;IAGH,CAPL,WAQW,YAAY;MACflD,IAAI,CAAC4C,QAAL,CAAcI,WAAd;;MACA1C,OAAO,WAAP,CAAgBoB,GAAhB,CAAoBwB,OAApB,CAA4B,aAA5B,EAA2C,CAAC,CAA5C;IACH,CAXL;EAYH,CAdD;;EAeAjC,CAAC,CAACK,SAAF,CAAY6B,SAAZ,GAAwB,YAAY;IAChC,KAAKrB,SAAL,GACMzB,SAAS,WAAT,CAAkBqB,GAAlB,CAAsB0B,IAAtB,CAA2B,mBAA3B,EAAgD;MAACtB,SAAS,EAAE,KAAKA,SAAL,CAAeC;IAA3B,CAAhD,CADN,GAEMzB,OAAO,WAAP,CAAgBoB,GAAhB,CAAoBwB,OAApB,CAA4B,MAA5B,EAAoC,CAAC,CAArC,CAFN;EAGH,CAJD;;EAKAG,UAAU,CAAC,CAACxC,CAAC,CAACJ,EAAE,CAAC6C,KAAJ,CAAF,CAAD,EAAgBrC,CAAC,CAACK,SAAlB,EAA6B,QAA7B,EAAuC,KAAK,CAA5C,CAAV;;EACA,OAAO+B,UAAU,CAAC,CAAC1C,CAAD,CAAD,EAAMM,CAAN,CAAjB;AACH,CA3DO,CA2DLV,OAAO,WA3DF,CAAR;;AA4DAT,OAAO,WAAP,GAAkBiB,CAAlB","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _idx = require(\"idx\");\nvar _request = require(\"request\");\nvar _time = require(\"time\");\nvar _uData = require(\"uData\");\nvar _panelMgr = require(\"panelMgr\");\nvar _tipMgr = require(\"tipMgr\");\nvar _baseUI = require(\"baseUI\");\nvar h = cc._decorator;\nvar f = h.ccclass;\nvar g = h.property;\nvar y = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.timeLb = null;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {};\n    e.prototype.init = function () {\n        var t = this;\n        this.timeLb.string = \"暂无数据\";\n        _request.default.ins\n            .getServerData(\"\")\n            .then(function (e) {\n                t.rePanel(e);\n            })\n            .catch(function () {\n                t.rePanel(null);\n            });\n    };\n    e.prototype.rePanel = function (t) {\n        if (((this.userDatas = t), t && t.data)) {\n            var e = t.data;\n            var o = e[0];\n            var n = e[1];\n            var i = (null == o ? void 0 : o.update_at) || 0;\n            var r = (null == n ? void 0 : n.update_at) || 0;\n            var a = Math.max(i, r);\n            if (a) {\n                var s = _time.default.ins.formatDate(a);\n                this.timeLb.string = s;\n            } else this.timeLb.string = \"暂无数据\";\n        } else this.timeLb.string = \"暂无数据\";\n    };\n    e.prototype.hideThis = function () {\n        this.hide();\n    };\n    e.prototype.onBtnSave = function () {\n        _idx.platform.showLoading(\"存档中...\");\n        _request.default.ins\n            .updateServerData(_uData.default.ins.getLocalData(), \"backData\")\n            .then(function (t) {\n                _idx.platform.hideLoading();\n                t.status\n                    ? _tipMgr.default.ins.showTip(\"存档成功\", !0)\n                    : _tipMgr.default.ins.showTip(\"网络拥堵，请稍后再试！\", !0);\n            })\n            .catch(function () {\n                _idx.platform.hideLoading();\n                _tipMgr.default.ins.showTip(\"网络拥堵，请稍后再试！\", !0);\n            });\n    };\n    e.prototype.onBtnBack = function () {\n        this.userDatas\n            ? _panelMgr.default.ins.open(\"ui/ui_saveRestore\", {userDatas: this.userDatas.data})\n            : _tipMgr.default.ins.showTip(\"暂无数据\", !0);\n    };\n    __decorate([g(cc.Label)], e.prototype, \"timeLb\", void 0);\n    return __decorate([f], e);\n})(_baseUI.default);\nexports.default = y;\n"]}