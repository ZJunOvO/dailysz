{"version":3,"sources":["assets\\scripts\\ui_quest.js"],"names":["n","Object","defineProperty","exports","value","_evts","require","_mySafeArea","_time","_cfgMgr","_lang","_questItem","_global","_taskMgr","_tipMgr","_loading","_baseUI","m","cc","_decorator","v","ccclass","_","property","b","t","e","apply","arguments","content","questItem","tLable","btnspf","btnsp","scrollView","top","bgNode","topBgSp","topBgSp1","_taskTyp","taskChannel","daily","questPool","NodePool","lastScrollPosition","__extends","prototype","onLoad","node","height","winSize","taskTyp","font","DEFAULTFONT","padScale","scale","on","pageScroll","onResize","start","loadItem","o","length","i","a","get","instantiate","addChild","active","zIndex","getComponent","init","key","scheduleOnce","bind","children","sort","taskData","data","state","taskState","Finish","Rewared","r","showChgAni","opacity","showChangegAni","initView","countTaskUpdTime","serverCfg","getTaskByType","forEach","despawnNode","removeAllChildren","rules","updTask","ins","nextZeroTime","string","getFormatHMS","onEnable","opE","onOperTap","schedule","macro","REPEAT_FOREVER","y","getSafeAreaRect","yMin","onDisable","off","unschedule","action","UPD_PANEL","pageSwitch","achieve","showTip","lang","set","spriteFrame","enumerable","configurable","put","parent","getScrollOffset","Math","abs","convertToWorldSpaceAR","Vec2","ZERO","convertToNodeSpaceAR","tween","to","hideThis","hide","__decorate","Node","Prefab","Label","SpriteFrame","Sprite","ScrollView"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _evts = require(\"evts\");\nvar _mySafeArea = require(\"mySafeArea\");\nvar _time = require(\"time\");\nvar _cfgMgr = require(\"cfgMgr\");\nvar _lang = require(\"lang\");\nvar _questItem = require(\"questItem\");\nvar _global = require(\"global\");\nvar _taskMgr = require(\"taskMgr\");\nvar _tipMgr = require(\"tipMgr\");\nvar _loading = require(\"loading\");\nvar _baseUI = require(\"baseUI\");\nvar m = cc._decorator;\nvar v = m.ccclass;\nvar _ = m.property;\nvar b = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.content = null;\n        e.questItem = null;\n        e.tLable = null;\n        e.btnspf = [];\n        e.btnsp = [];\n        e.scrollView = null;\n        e.top = null;\n        e.bgNode = null;\n        e.topBgSp = null;\n        e.topBgSp1 = null;\n        e._taskTyp = _taskMgr.taskChannel.daily;\n        e.questPool = new cc.NodePool(_questItem.default);\n        e.lastScrollPosition = 0;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {\n        var t = this;\n        this.node.height = cc.winSize.height;\n        this.taskTyp = _taskMgr.taskChannel.daily;\n        this.tLable.font = _loading.DEFAULTFONT;\n        _global.default.padScale && (this.bgNode.scale = _global.default.padScale);\n        this.scrollView.node.on(\n            \"scrolling\",\n            function () {\n                t.pageScroll(!0);\n            },\n            this\n        );\n        this.onResize();\n    };\n    e.prototype.start = function () {};\n    e.prototype.loadItem = function (t, e, o) {\n        var n = this.questItem;\n        if (t < o.length) {\n            var i = o[t];\n            (a = this.questPool.get()) || (a = cc.instantiate(n));\n            this.content.addChild(a);\n            a.active = !1;\n            a.zIndex = 0;\n            a.getComponent(_questItem.default).init(e[i.key]);\n            t++;\n            this.scheduleOnce(this.loadItem.bind(this, t, e, o), 0);\n        } else {\n            this.content.children.sort(function (t, e) {\n                var o = t.getComponent(_questItem.default).taskData.data.state;\n                var n = e.getComponent(_questItem.default).taskData.data.state;\n                return o == n\n                    ? 0\n                    : o == _taskMgr.taskState.Finish\n                    ? -1\n                    : n == _taskMgr.taskState.Finish\n                    ? 1\n                    : o == _taskMgr.taskState.Rewared\n                    ? 1\n                    : n == _taskMgr.taskState.Rewared\n                    ? -1\n                    : void 0;\n            });\n            for (var r = 0; r < this.content.children.length; r++) {\n                var a;\n                (a = this.content.children[r]).active = !0;\n                this.showChgAni ||\n                    ((a.opacity = 0), this.scheduleOnce(this.showChangegAni.bind(this, a), 0.1 * (r + 1)));\n            }\n            this.lastScrollPosition = 0;\n            this.scheduleOnce(this.pageScroll.bind(this, !1), 0);\n            this.showChgAni || (this.showChgAni = !0);\n        }\n    };\n    e.prototype.initView = function () {\n        var t = this;\n        this.countTaskUpdTime();\n        var e = _cfgMgr.default.serverCfg[this._taskTyp];\n        var o = _taskMgr.default.getTaskByType(this._taskTyp);\n        this.content.children.forEach(function (e) {\n            t.despawnNode(e);\n        });\n        this.content.removeAllChildren();\n        var n = null == e ? void 0 : e.rules;\n        this.loadItem(0, o, n);\n    };\n    e.prototype.updTask = function () {\n        this.initView();\n    };\n    e.prototype.countTaskUpdTime = function () {\n        var t = _time.default.ins.nextZeroTime / 1e3;\n        this.tLable.string = _time.default.getFormatHMS(t);\n        t <= 0 && this.initView();\n    };\n    e.prototype.onEnable = function () {\n        var t = this;\n        _evts.default.opE.on(this.onOperTap.bind(this));\n        this.schedule(this.countTaskUpdTime, 1, cc.macro.REPEAT_FOREVER);\n        this.initView();\n        this.scheduleOnce(function () {\n            t.top.y -= _mySafeArea.getSafeAreaRect().yMin;\n        });\n    };\n    e.prototype.onDisable = function () {\n        _evts.default.opE.off(this.onOperTap.bind(this));\n        this.unschedule(this.countTaskUpdTime);\n    };\n    e.prototype.onOperTap = function (t) {\n        var e = null == t ? void 0 : t.action;\n        if (e)\n            switch (e) {\n                case _evts.default.UPD_PANEL:\n                    this.updTask();\n            }\n    };\n    e.prototype.pageSwitch = function (t, e) {\n        this._taskTyp != e &&\n            (e != _taskMgr.taskChannel.achieve\n                ? ((this.taskTyp = e), this.initView())\n                : _tipMgr.default.ins.showTip(_lang.lang[10004]));\n    };\n    Object.defineProperty(e.prototype, \"taskTyp\", {\n        set: function (t) {\n            this._taskTyp = t;\n            var e = t == _taskMgr.taskChannel.daily ? 0 : 1;\n            this.btnsp[0].spriteFrame = this.btnspf[e];\n            this.btnsp[1].spriteFrame = this.btnspf[1 ^ e];\n        },\n        enumerable: !1,\n        configurable: !0\n    });\n    e.prototype.despawnNode = function (t) {\n        this.questPool.put(t);\n    };\n    e.prototype.onResize = function () {\n        this.node.height = cc.winSize.height;\n        var t = _mySafeArea.getSafeAreaRect().yMin;\n        var e = cc.winSize.height - 1280 - t;\n        this.scrollView.node.height += e;\n        this.scrollView.content.height += e;\n        this.scrollView.content.parent.height += e;\n        this.topBgSp.height += e;\n        this.topBgSp1.height += e;\n    };\n    e.prototype.pageScroll = function (t) {\n        void 0 === t && (t = !0);\n        var e = this.content.children;\n        var o = this.scrollView.getScrollOffset().y;\n        if (!(t && Math.abs(o - this.lastScrollPosition) < 1)) {\n            for (var n = this.content.parent.height, i = 0; i < e.length; i++) {\n                var r = e[i];\n                var a = r.convertToWorldSpaceAR(cc.Vec2.ZERO);\n                (a = this.content.parent.convertToNodeSpaceAR(a)).y + 110 < -n || a.y - 110 > 0\n                    ? (r.children[0].active = !1)\n                    : (r.children[0].active = !0);\n            }\n            this.lastScrollPosition = o;\n        }\n    };\n    e.prototype.showChangegAni = function (t) {\n        cc.tween(t).to(0.2, {opacity: 255}).start();\n    };\n    e.prototype.hideThis = function () {\n        this.hide();\n    };\n    __decorate([_(cc.Node)], e.prototype, \"content\", void 0);\n    __decorate([_(cc.Prefab)], e.prototype, \"questItem\", void 0);\n    __decorate([_(cc.Label)], e.prototype, \"tLable\", void 0);\n    __decorate([_(cc.SpriteFrame)], e.prototype, \"btnspf\", void 0);\n    __decorate([_(cc.Sprite)], e.prototype, \"btnsp\", void 0);\n    __decorate([_(cc.ScrollView)], e.prototype, \"scrollView\", void 0);\n    __decorate([_(cc.Node)], e.prototype, \"top\", void 0);\n    __decorate([_(cc.Node)], e.prototype, \"bgNode\", void 0);\n    __decorate([_(cc.Node)], e.prototype, \"topBgSp\", void 0);\n    __decorate([_(cc.Node)], e.prototype, \"topBgSp1\", void 0);\n    return __decorate([v], e);\n})(_baseUI.default);\nexports.default = b;\n"]}