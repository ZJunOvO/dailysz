{"version":3,"sources":["assets\\scripts\\ui_reiGift.js"],"names":["n","Object","defineProperty","exports","value","_cfgMgr","require","_item","_bagMgr","_pInfo","_baseUI","p","cc","_decorator","d","ccclass","h","property","f","t","e","apply","arguments","itemSc","itemPre","__extends","prototype","init","o","i","r","u","serPacks","serverCfg","shop_config","gift","g","y","m","key","v","buy_stamina","stamina","b","_","buy_gold_coins","gold_coins","node","width","w","S","length","T","I","gift_id","D","P","ins","addShopRecord","addShopUnreset","props","k","gift_num","R","is_double","addItem","N","instantiate","active","content","addChild","getComponent","initByData","C","children","childrenCount","x","Math","min","scrollToLeft","hideThis","hide","__decorate","ScrollView","Node"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _cfgMgr = require(\"cfgMgr\");\nvar _item = require(\"item\");\nvar _bagMgr = require(\"bagMgr\");\nvar _pInfo = require(\"pInfo\");\nvar _baseUI = require(\"baseUI\");\nvar p = cc._decorator;\nvar d = p.ccclass;\nvar h = p.property;\nvar f = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.itemSc = null;\n        e.itemPre = null;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.init = function (t) {\n        var e;\n        var o;\n        var n;\n        var i;\n        var r;\n        var u;\n        var p = t.serPacks;\n        var d = {};\n        var h = {};\n        var f =\n            null === (o = null === (e = _cfgMgr.default.serverCfg) || void 0 === e ? void 0 : e.shop_config) ||\n            void 0 === o\n                ? void 0\n                : o.gift;\n        var g = {};\n        if (f)\n            for (var y in f) {\n                var m = f[y];\n                g[m.key] = m;\n                d[m.key] = m;\n            }\n        var v =\n            null === (i = null === (n = _cfgMgr.default.serverCfg) || void 0 === n ? void 0 : n.buy_stamina) ||\n            void 0 === i\n                ? void 0\n                : i.stamina;\n        if (v) for (var y in v) (b = v[y]) && ((g[b.key] = b), (h[b.key] = b));\n        var _ =\n            null === (u = null === (r = _cfgMgr.default.serverCfg) || void 0 === r ? void 0 : r.buy_gold_coins) ||\n            void 0 === u\n                ? void 0\n                : u.gold_coins;\n        if (_)\n            for (var y in _) {\n                var b;\n                (b = _[y]) && ((g[b.key] = b), (h[b.key] = b));\n            }\n        this.itemSc.node.width = 530;\n        for (var w = 0, S = p.length; w < S; w++) {\n            var T = p[w];\n            if (T) {\n                var I = g[null == T ? void 0 : T.gift_id];\n                var D = d[null == T ? void 0 : T.gift_id];\n                var P = h[null == T ? void 0 : T.gift_id];\n                if (\n                    (D && _pInfo.default.ins.addShopRecord(null == T ? void 0 : T.gift_id),\n                    P && _pInfo.default.ins.addShopUnreset(null == T ? void 0 : T.gift_id),\n                    I && I.props)\n                )\n                    for (var k = 0; k < T.gift_num; k++)\n                        for (var y in I.props) {\n                            var R = I.props[y];\n                            T.is_double && (R *= 2);\n                            _bagMgr.default.ins.addItem(y, R);\n                            var N = cc.instantiate(this.itemPre);\n                            N.active = !0;\n                            this.itemSc.content.addChild(N);\n                            N.getComponent(_item.default).initByData(y, R);\n                        }\n            }\n        }\n        var C = this.itemSc.content.children[0].width * this.itemSc.content.childrenCount;\n        this.itemSc.node.x = C > this.itemSc.node.width ? -262 : (this.itemSc.node.width - C) / 2 - 262;\n        C = Math.min(C, 530);\n        this.itemSc.node.width = C;\n        this.itemSc.scrollToLeft();\n    };\n    e.prototype.hideThis = function () {\n        this.hide();\n    };\n    __decorate([h(cc.ScrollView)], e.prototype, \"itemSc\", void 0);\n    __decorate([h(cc.Node)], e.prototype, \"itemPre\", void 0);\n    return __decorate([d], e);\n})(_baseUI.default);\nexports.default = f;\n"]}