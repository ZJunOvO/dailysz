{"version":3,"sources":["assets\\scripts\\ui_sevenDay.js"],"names":["n","Object","defineProperty","exports","value","_evts","require","_idx","_pConst","_request","_cfgMgr","_bagMgr","_panelMgr","_tipMgr","_pInfo","_baseUI","_dayReward","m","cc","_decorator","v","ccclass","_","property","b","t","e","apply","arguments","dayNodes","getBtnNode","hasGetNode","reciveReward","aniData","canRecive","__extends","prototype","onLoad","init","ins","getSevenDays","getSevenReward","o","serverCfg","seven_day_reward","rules","i","r","length","a","val","s","initItem","setDefault","setCanRecive","setRecived","c","concat","aniDatas","l","checkBtns","active","onBtnGet","u","itemId","g","Number","worldPos","itemNode","parent","convertToWorldSpaceAR","position","push","addItem","y","setSevenReward","opE","emit","action","SIGN_RED","platform","string","PFCode","Bytedance","getSystemData","appName","w","system","indexOf","sendSevenCard","open","itemDatas","hideCb","hideThis","showTip","hide","__decorate","Node"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _evts = require(\"evts\");\nvar _idx = require(\"idx\");\nvar _pConst = require(\"pConst\");\nvar _request = require(\"request\");\nvar _cfgMgr = require(\"cfgMgr\");\nvar _bagMgr = require(\"bagMgr\");\nvar _panelMgr = require(\"panelMgr\");\nvar _tipMgr = require(\"tipMgr\");\nvar _pInfo = require(\"pInfo\");\nvar _baseUI = require(\"baseUI\");\nvar _dayReward = require(\"dayReward\");\nvar m = cc._decorator;\nvar v = m.ccclass;\nvar _ = m.property;\nvar b = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.dayNodes = [];\n        e.getBtnNode = null;\n        e.hasGetNode = null;\n        e.reciveReward = {};\n        e.aniData = [];\n        e.canRecive = !1;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {};\n    e.prototype.init = function () {\n        for (\n            var t = _pInfo.default.ins.getSevenDays(),\n                e = _pInfo.default.ins.getSevenReward(),\n                o = _cfgMgr.default.serverCfg.seven_day_reward.rules,\n                n = {},\n                i = 0,\n                r = this.dayNodes.length;\n            i < r;\n            i++\n        ) {\n            var a = o[i].val;\n            var s = this.dayNodes[i];\n            if (\n                (s.initItem(a),\n                s.setDefault(),\n                6 === i && s.setCanRecive(),\n                i < t && (s.setCanRecive(), i < e && s.setRecived()),\n                t > i && i >= e)\n            )\n                for (var c in ((this.aniData = this.aniData.concat(s.aniDatas)), (this.canRecive = !0), a)) {\n                    var l = a[c];\n                    n[c] ? (n[c] += l) : (n[c] = l);\n                }\n        }\n        this.reciveReward = n;\n        this.checkBtns();\n    };\n    e.prototype.checkBtns = function () {\n        this.getBtnNode.active = this.canRecive;\n        this.hasGetNode.active = !this.canRecive;\n    };\n    e.prototype.onBtnGet = function () {\n        var t = this;\n        if (this.canRecive) {\n            this.canRecive = !1;\n            this.checkBtns();\n            for (var e = [], o = 0, n = this.aniData.length; o < n; o++) {\n                var i = this.aniData[o];\n                var r = {};\n                var u = i.itemId;\n                var g = Number(i.value);\n                r.itemId = u;\n                r.worldPos = i.itemNode.parent.convertToWorldSpaceAR(i.itemNode.position);\n                r.value = g;\n                e.push(r);\n                _bagMgr.default.ins.addItem(u, g);\n            }\n            var y = _pInfo.default.ins.getSevenDays();\n            _pInfo.default.ins.setSevenReward(y);\n            _evts.default.opE.emit({action: _evts.default.SIGN_RED});\n            var m = _pInfo.default.ins.getSevenReward();\n            for (o = 0, n = this.dayNodes.length; o < n; o++) {\n                var v = this.dayNodes[o];\n                v.setDefault();\n                6 === o && v.setCanRecive();\n                o < y && (v.setCanRecive(), o < m && v.setRecived());\n            }\n            if (_idx.platform.string() == _pConst.PFCode.Bytedance) {\n                var _ = _idx.platform.getSystemData();\n                if (_) {\n                    var b = 0;\n                    switch (_.appName) {\n                        case \"Douyin\":\n                            b = 1;\n                            break;\n                        case \"douyin_lite\":\n                            b = 2;\n                    }\n                    var w = -1 != _.system.indexOf(\"iOS\");\n                    b && y < 7 && !w && _request.default.ins.sendSevenCard(b, y + 1);\n                }\n            }\n            _panelMgr.default.ins.open(\"ui/ui_flyAni\", {\n                itemDatas: e,\n                hideCb: function () {\n                    t.hideThis();\n                }\n            });\n        } else _tipMgr.default.ins.showTip(\"已领取\");\n    };\n    e.prototype.hideThis = function () {\n        this.hide();\n    };\n    __decorate([_([_dayReward.default])], e.prototype, \"dayNodes\", void 0);\n    __decorate([_(cc.Node)], e.prototype, \"getBtnNode\", void 0);\n    __decorate([_(cc.Node)], e.prototype, \"hasGetNode\", void 0);\n    return __decorate([v], e);\n})(_baseUI.default);\nexports.default = b;\n"]}