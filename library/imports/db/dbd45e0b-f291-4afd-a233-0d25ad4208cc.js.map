{"version":3,"sources":["assets\\scripts\\ui_backReward.js"],"names":["n","Object","defineProperty","exports","value","_cfgMgr","require","_item","_bagMgr","_panelMgr","_skinMgr","_pInfo","_baseUI","g","cc","_decorator","y","ccclass","m","property","v","t","e","apply","arguments","rewardItem","rewards","spineNode","__extends","prototype","onLoad","init","o","serverCfg","seven_day_reward","backtrack","times","i","r","Number","a","children","instantiate","parent","s","getComponent","initByData","p","itemId","itemNode","ins","addItem","loadGirl","__awaiter","__generator","updateRole","getUsingSkin","role","hideThis","hide","onBtnGet","childrenCount","key","worldPos","convertToWorldSpaceAR","position","count","push","open","itemDatas","hideCb","__decorate","Node"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _cfgMgr = require(\"cfgMgr\");\nvar _item = require(\"item\");\nvar _bagMgr = require(\"bagMgr\");\nvar _panelMgr = require(\"panelMgr\");\nvar _skinMgr = require(\"skinMgr\");\nvar _pInfo = require(\"pInfo\");\nvar _baseUI = require(\"baseUI\");\nvar g = cc._decorator;\nvar y = g.ccclass;\nvar m = g.property;\nvar v = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.rewardItem = null;\n        e.rewards = null;\n        e.spineNode = null;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {};\n    e.prototype.init = function () {\n        var t;\n        var e;\n        var o = (null ===\n            (e = null === (t = _cfgMgr.default.serverCfg) || void 0 === t ? void 0 : t.seven_day_reward) || void 0 === e\n            ? void 0\n            : e.backtrack) || {times: 50};\n        var n = 0;\n        for (var i in o) {\n            var r = Number(o[i]);\n            var a = this.rewards.children[n];\n            a || (a = cc.instantiate(this.rewardItem));\n            a.parent = this.rewards;\n            var s = a.getComponent(_item.default);\n            s && s.initByData(i, r);\n            var p = {};\n            p.itemId = i;\n            p.itemNode = a;\n            p.value = r;\n            _bagMgr.default.ins.addItem(i, r);\n            n++;\n        }\n        this.loadGirl();\n    };\n    e.prototype.loadGirl = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function () {\n                _skinMgr.default.ins.updateRole(_pInfo.default.ins.getUsingSkin().role, this.spineNode);\n                return [2];\n            });\n        });\n    };\n    e.prototype.hideThis = function () {\n        this.hide();\n    };\n    e.prototype.onBtnGet = function () {\n        for (var t = this, e = [], o = 0, n = this.rewards.childrenCount; o < n; o++) {\n            var i = this.rewards.children[o];\n            var r = i.getComponent(_item.default);\n            var a = {};\n            a.itemId = r.key;\n            a.worldPos = i.parent.convertToWorldSpaceAR(i.position);\n            a.value = r.count;\n            e.push(a);\n        }\n        _panelMgr.default.ins.open(\"ui/ui_flyAni\", {\n            itemDatas: e,\n            hideCb: function () {\n                t.hideThis();\n            }\n        });\n    };\n    __decorate([m(cc.Node)], e.prototype, \"rewardItem\", void 0);\n    __decorate([m(cc.Node)], e.prototype, \"rewards\", void 0);\n    __decorate([m(cc.Node)], e.prototype, \"spineNode\", void 0);\n    return __decorate([y], e);\n})(_baseUI.default);\nexports.default = v;\n"]}