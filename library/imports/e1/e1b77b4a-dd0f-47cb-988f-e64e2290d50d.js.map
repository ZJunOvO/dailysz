{"version":3,"sources":["assets\\scripts\\ui_lvInfo.js"],"names":["n","Object","defineProperty","exports","value","_global","require","_festivalMgr","_levelMgr","_panelMgr","_pInfo","_main","_baseUI","h","cc","_decorator","f","ccclass","g","property","y","t","e","apply","arguments","lvLB","numLv","diffLb","curLB","costLBL","costLBR","jigsawSp","kuangSp","matArr","aniSpr","boomSpine","isShow","__extends","prototype","start","init","o","length","setMaterial","showLvInfo","ins","getPuzzleLvl","i","Math","ceil","string","r","getPuzzleInfo","size","getLevelDiffStr","getConsWinTimes","getLevelCost","getPower","a","Color","node","color","RED","s","l","updJigsaw","scheduleOnce","showPopAni","getPuzzleLvlCount","getJigsawIcon","then","spriteFrame","console","error","getMaterial","setProperty","getPuzzleSprFrame","floor","x","scale","tween","to","delay","call","active","onBtnStart","open","itemId","convertToWorldSpaceAR","Vec3","ZERO","blockComp","enabled","usePower","puzzlv","updPro","fesTaskKey","costPower","hideThis","hide","__decorate","Label","Sprite","Material","sp","Skeleton"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _global = require(\"global\");\nvar _festivalMgr = require(\"festivalMgr\");\nvar _levelMgr = require(\"levelMgr\");\nvar _panelMgr = require(\"panelMgr\");\nvar _pInfo = require(\"pInfo\");\nvar _main = require(\"main\");\nvar _baseUI = require(\"baseUI\");\nvar h = cc._decorator;\nvar f = h.ccclass;\nvar g = h.property;\nvar y = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.lvLB = null;\n        e.numLv = null;\n        e.diffLb = null;\n        e.curLB = null;\n        e.costLBL = null;\n        e.costLBR = null;\n        e.jigsawSp = null;\n        e.kuangSp = null;\n        e.matArr = [];\n        e.aniSpr = null;\n        e.boomSpine = null;\n        e.isShow = !1;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.start = function () {};\n    e.prototype.init = function () {\n        for (var t, e = [], o = 0; o < arguments.length; o++) e[o] = arguments[o];\n        this.isShow = (null === (t = e[0]) || void 0 === t ? void 0 : t.isShow) || !1;\n        this.kuangSp.setMaterial(0, this.matArr[0]);\n        this.showLvInfo();\n    };\n    e.prototype.showLvInfo = function () {\n        var t = this;\n        var e = _pInfo.default.ins;\n        var o = _levelMgr.default.ins;\n        var n = e.getPuzzleLvl();\n        var i = n - 54 * (Math.ceil(n / 54) - 1);\n        this.lvLB.string = \"第\" + i + \"关\";\n        var r = o.getPuzzleInfo().size;\n        this.numLv.string = r + \"x\" + r;\n        this.diffLb.string = o.getLevelDiffStr();\n        this.curLB.string = e.getConsWinTimes() + \"\";\n        this.costLBL.string = o.getLevelCost() + \"/\";\n        this.costLBR.string = \"\" + e.getPower();\n        var a = new cc.Color(251, 234, 168);\n        this.costLBR.node.color = o.getLevelCost() > e.getPower() ? cc.Color.RED : a;\n        var s = _pInfo.default.ins.getPuzzleLvl();\n        if ((s % 9 == 1 && (this.isShow = !1), this.isShow)) {\n            var l = this.updJigsaw(s - 1);\n            this.scheduleOnce(function () {\n                t.showPopAni(l);\n            }, 0.34);\n        } else this.updJigsaw(s);\n    };\n    e.prototype.updJigsaw = function (t) {\n        var e;\n        var o = this;\n        var n = (t - 1) % _levelMgr.default.ins.getPuzzleLvlCount();\n        var i = Math.ceil(n / 9) || 1;\n        e = 9 == (e = n >= 9 * i ? 9 : n > 9 * i - 9 ? n % 9 : 0) ? 0 : e;\n        _levelMgr.default.ins\n            .getJigsawIcon(i)\n            .then(function (t) {\n                t && (o.jigsawSp.spriteFrame = t);\n            })\n            .catch(function () {\n                console.error(\"getIconErr\");\n            });\n        this.jigsawSp.getMaterial(0).setProperty(\"height\", e);\n        return e;\n    };\n    e.prototype.showPopAni = function (t) {\n        var e = this;\n        _levelMgr.default.ins.getPuzzleSprFrame(_pInfo.default.ins.getPuzzleLvl() - 1).then(function (o) {\n            if (e.node) {\n                e.aniSpr.spriteFrame = o;\n                var n = t % 3;\n                var i = Math.floor(t / 3);\n                var r = e.aniSpr.node;\n                r.x += 40 * n;\n                r.y -= 40 * i;\n                r.scale = 0.1;\n                cc.tween(r)\n                    .to(0.02, {scale: 1.1})\n                    .to(0.06, {scale: 0.7})\n                    .to(0.1, {scale: 1})\n                    .delay(0.7)\n                    .call(function () {\n                        e.boomSpine.node.active = !0;\n                        e.aniSpr.spriteFrame = null;\n                        var t = _pInfo.default.ins.getPuzzleLvl();\n                        e.updJigsaw(t);\n                    })\n                    .start();\n            }\n        });\n    };\n    e.prototype.onBtnStart = function () {\n        var t = _levelMgr.default.ins.getLevelCost();\n        if (_pInfo.default.ins.getPower() < t) _panelMgr.default.ins.open(\"ui/ui_getRes\", {itemId: \"times\"});\n        else {\n            var e = this.costLBL.node.convertToWorldSpaceAR(cc.Vec3.ZERO);\n            var o = _main.default.ins;\n            o && (o.blockComp.enabled = !0);\n            o.usePower(-t, e);\n            _global.default.puzzlv = _pInfo.default.ins.getPuzzleLvl() - 1;\n            _festivalMgr.default.ins.updPro(_festivalMgr.fesTaskKey.costPower, t);\n        }\n    };\n    e.prototype.hideThis = function () {\n        this.kuangSp.setMaterial(0, this.matArr[1]);\n        this.hide();\n    };\n    __decorate([g(cc.Label)], e.prototype, \"lvLB\", void 0);\n    __decorate([g(cc.Label)], e.prototype, \"numLv\", void 0);\n    __decorate([g(cc.Label)], e.prototype, \"diffLb\", void 0);\n    __decorate([g(cc.Label)], e.prototype, \"curLB\", void 0);\n    __decorate([g(cc.Label)], e.prototype, \"costLBL\", void 0);\n    __decorate([g(cc.Label)], e.prototype, \"costLBR\", void 0);\n    __decorate([g(cc.Sprite)], e.prototype, \"jigsawSp\", void 0);\n    __decorate([g(cc.Sprite)], e.prototype, \"kuangSp\", void 0);\n    __decorate([g(cc.Material)], e.prototype, \"matArr\", void 0);\n    __decorate([g(cc.Sprite)], e.prototype, \"aniSpr\", void 0);\n    __decorate([g(sp.Skeleton)], e.prototype, \"boomSpine\", void 0);\n    return __decorate([f], e);\n})(_baseUI.default);\nexports.default = y;\n"]}