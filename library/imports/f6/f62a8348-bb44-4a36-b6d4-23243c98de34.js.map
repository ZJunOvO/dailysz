{"version":3,"sources":["assets\\scripts\\cfgMgr.js"],"names":["Object","defineProperty","exports","value","_evts","require","_res","s","t","syncServerCfg","e","serverCfg","times","assign","opE","emit","action","REFRESH_CFGDATA","init","__awaiter","__generator","o","label","ins","l","cc","JsonAsset","sent","json"],"mappings":";;;;;;AAAAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAACC,KAAK,EAAE,CAAC;AAAT,CAA7C;;AACA,IAAIC,KAAK,GAAGC,OAAO,CAAC,MAAD,CAAnB;;AACA,IAAIC,IAAI,GAAGD,OAAO,CAAC,KAAD,CAAlB;;AACA,IAAIE,CAAC,GAAI,YAAY;EACjB,SAASC,CAAT,GAAa,CAAE;;EACfA,CAAC,CAACC,aAAF,GAAkB,UAAUC,CAAV,EAAa;IAC3BF,CAAC,CAACG,SAAF,GAAcD,CAAC,CAACE,KAAF,GAAUF,CAAV,GAAcV,MAAM,CAACa,MAAP,CAAcb,MAAM,CAACa,MAAP,CAAc,EAAd,EAAkB,KAAKF,SAAvB,CAAd,EAAiDD,CAAjD,CAA5B;;IACAN,KAAK,WAAL,CAAcU,GAAd,CAAkBC,IAAlB,CAAuB;MAACC,MAAM,EAAEZ,KAAK,WAAL,CAAca;IAAvB,CAAvB;EACH,CAHD;;EAIAT,CAAC,CAACU,IAAF,GAAS,YAAY;IACjB,OAAOC,SAAS,CAAC,IAAD,EAAO,KAAK,CAAZ,EAAe,KAAK,CAApB,EAAuB,YAAY;MAC/C,IAAIT,CAAJ;MACA,OAAOU,WAAW,CAAC,IAAD,EAAO,UAAUC,CAAV,EAAa;QAClC,QAAQA,CAAC,CAACC,KAAV;UACI,KAAK,CAAL;YACI,OAAOd,CAAC,CAACG,SAAF,GAAc,CAAC,CAAD,EAAI,CAAJ,CAAd,GAAuB,CAAC,CAAD,EAAIL,IAAI,WAAJ,CAAaiB,GAAb,CAAiBC,CAAjB,CAAmB,sBAAnB,EAA2CC,EAAE,CAACC,SAA9C,CAAJ,CAA9B;;UACJ,KAAK,CAAL;YACI,CAAChB,CAAC,GAAGW,CAAC,CAACM,IAAF,EAAL,MAAmBnB,CAAC,CAACG,SAAF,GAAcD,CAAC,CAACkB,IAAnC,GAA2CP,CAAC,CAACC,KAAF,GAAU,CAArD;;UACJ,KAAK,CAAL;YACI,OAAO,CAAC,CAAD,CAAP;QANR;MAQH,CATiB,CAAlB;IAUH,CAZe,CAAhB;EAaH,CAdD;;EAeA,OAAOd,CAAP;AACH,CAtBO,EAAR;;AAuBAN,OAAO,WAAP,GAAkBK,CAAlB","sourceRoot":"/","sourcesContent":["Object.defineProperty(exports, \"__esModule\", {value: !0});\nvar _evts = require(\"evts\");\nvar _res = require(\"res\");\nvar s = (function () {\n    function t() {}\n    t.syncServerCfg = function (e) {\n        t.serverCfg = e.times ? e : Object.assign(Object.assign({}, this.serverCfg), e);\n        _evts.default.opE.emit({action: _evts.default.REFRESH_CFGDATA});\n    };\n    t.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var e;\n            return __generator(this, function (o) {\n                switch (o.label) {\n                    case 0:\n                        return t.serverCfg ? [3, 2] : [4, _res.default.ins.l(\"json/serverCfgBackup\", cc.JsonAsset)];\n                    case 1:\n                        (e = o.sent()) && (t.serverCfg = e.json), (o.label = 2);\n                    case 2:\n                        return [2];\n                }\n            });\n        });\n    };\n    return t;\n})();\nexports.default = s;\n"]}