
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/0/request.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'c853fD3v1xDPam4tdNFLok2', 'request');
// scripts/0/request.js

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _cfgMgr = require("cfgMgr");

var _idx = require("idx");

var _uData = require("uData");

var _pConst = require("pConst");

var _time = require("time");

var _evts = require("evts");

var _flyio = require("flyio");

var _errorCode = require("errorCode");

var h = window.fly || _flyio["default"];

var f = function () {
  function t() {
    this._urlCache = {};
    this.APPID = _idx.platform.appId;
  }

  Object.defineProperty(t, "ins", {
    get: function get() {
      this._ins || (this._ins = new t());
      return this._ins;
    },
    enumerable: !1,
    configurable: !0
  });

  t.prototype.getUserToken = function () {
    return __awaiter(this, void 0, void 0, function () {
      return __generator(this, function (t) {
        switch (t.label) {
          case 0:
            return this._userToken ? [3, 2] : [4, this.desynclogin()];

          case 1:
            t.sent(), t.label = 2;

          case 2:
            return [2, this._userToken];
        }
      });
    });
  };

  Object.defineProperty(t.prototype, "userToken", {
    set: function set(t) {
      this._userToken = t;
    },
    enumerable: !1,
    configurable: !0
  });

  t.prototype._post = function (t, e, o, n, i, r) {
    return;
    void 0 === n && (n = !1);
    void 0 === i && (i = 5e3);
    void 0 === r && (r = "https://adapi.tjkj300.com");
    var s = {
      Authorization: e
    };
    n && (s["X-Fc-Invocation-Type"] = "Async", s["X-Fc-Stateful-Async-Invocation-Id"] = Date.now().toString());
    return new Promise(function (e, l) {
      var u = {
        headers: s,
        timeout: i
      };
      (_pConst.PFCode.Alipay === _idx.platform.string() || _idx.platform.isNative) && (u.responseType = "json");
      h.post(r + t, o, u).then(function (t) {
        var o = "string" != typeof t.data || n ? t.data : JSON.parse(t.data);
        e(o);
      })["catch"](function (t) {
        console.warn("[reason]", JSON.stringify(t));
        l(_errorCode.errorCode.HTTP_ERR);
      });
    });
  };

  t.prototype.desynclogin = function () {
    return __awaiter(this, void 0, void 0, function () {
      var e;
      var o;
      var n;
      var r;
      var s;
      var c;
      return __generator(this, function (i) {
        switch (i.label) {
          case 0:
            return [4, _idx.platform.login()];

          case 1:
            return e = i.sent(), o = e.code, n = e.anonymous_code, o ? [4, t.ins.login(o, n)] : [2];

          case 2:
            if (0 == (r = i.sent()).state) throw new Error("登录状态吗错误：" + r.state);
            return s = t.ins, c = r.data, _time["default"].ins.sync(r.server_time), s.userToken = c.token, s.openId = c.openid, [2];
        }
      });
    });
  };

  t.prototype.getJson = function () {
    var t = {};
    t.appid = this.APPID;
    return this._post("/v1/GameConfigApi/get_game_init_config", "N644UF9VMU9OFTTYHOV3DEGY7L2DMMVP", t, !1);
  };

  t.prototype.login = function (t, e, o, n) {
    var i = {};
    i.appid = this.APPID;
    i.system_info = _idx.platform.getSystemData();
    i.code = t;
    i.openid = o;
    i.unionid = n;
    _pConst.PFCode.Alipay === _idx.platform.string() && (i.grant_type = "authorization_code");
    i.anonymous_code = e;
    i.launch_options = _uData["default"].ins.getLaunchOption();
    return this._post("/v1/GameConfigApi/game_user_login", "N644UF9VMU9OFTTYHOV3DEGY7L2DMMVP", i, void 0, 2e3);
  };

  t.prototype.getTime = function () {
    return this._post("/v1/GameConfigApi/game_user_login", "123456", {}, void 0, 2e3);
  };

  t.prototype.updateUserInfo = function (t) {
    var e = this;
    this.getUserToken().then(function (o) {
      if (o && t) {
        var n = _uData["default"].ins;
        n.setHeadImg(t.avatar || t.avatarUrl);
        n.setName(t.nickName || t.nickname);

        e._post("/v1/GameApi/update_game_user", o, {
          user_info: t
        });

        _evts["default"].opE.emit({
          action: _evts["default"].UPD_TOP_HEADINFO
        });
      }
    })["catch"](function (t) {
      console.error("updateUserInfoErr", t);
    });
  };

  t.prototype.addHomepageConsult = function () {
    return __awaiter(this, void 0, void 0, function () {
      var t;
      var e;
      var o;
      return __generator(this, function (n) {
        switch (n.label) {
          case 0:
            return t = "/v1/GameApi/get_addHome", (e = {}).alipay_user_id = this.openId, [4, this.getUserToken()];

          case 1:
            return o = n.sent(), [2, this._post(t, o, e, !1)];
        }
      });
    });
  };

  t.prototype.uploadRank = function (t, e) {
    var o = this;
    this.getUserToken().then(function (n) {
      if (n) {
        var i = {};
        i.client_data = [t];
        i.type = e;

        o._post("/v1/GameApi/upload_gamer_score", n, i, !0);
      }
    })["catch"](function (t) {
      console.error("uploadRankErr", t);
    });
  };

  t.prototype.getRank = function (t, e, o, n, i, r) {
    var a = this;
    return Promise.resolve(function (res) {
      cc.resources.load('rank', function (err, json) {
        res(json.json);
      });
    }); // return this.getUserToken()
    //     .then(function(s) {
    //         if (!s) return Promise.reject("no auth");
    //         var c = {};
    //         c.rank_tag = t;
    //         c.sort_type = o;
    //         c.sec_sort_type = r;
    //         c.type = e;
    //         c.limit = i || 100;
    //         c.date = n;
    //         return a._post("/v1/GameApi/get_rank_list", s, c);
    //     })
    //     .catch(function(t) {
    //         console.error("getRankErr", t);
    //     });
  };

  t.prototype.adDot = function (t, e, o, n) {
    var i = this;
    void 0 === o && (o = 1);
    void 0 === n && (n = 1);
    this.getUserToken().then(function (a) {
      if (a) {
        var s = _cfgMgr["default"].serverCfg.upload_ad_result;

        if (s && 1 == s.val) {
          var c = {};
          c.type = o;
          c.path = t;
          c.ad_nums = n;
          c.status = e;

          i._post("/v1/GameApi/upload_gamer_ad_recode", a, c, !0);
        }
      }
    })["catch"](function (t) {
      console.error("adDotErr", t);
    });
  };

  t.prototype.userFeedBack = function (t) {
    var e = this;
    return this.getUserToken().then(function (o) {
      if (o) {
        var n = {};
        n.content = t;
        return e._post("/v1/GameApi/add_reply", o, n);
      }
    })["catch"](function (t) {
      console.error("userFeedBackErr", t);
    });
  };

  t.prototype.updateServerData = function (t, e, o, n) {
    var i = this;
    return this.getUserToken().then(function (r) {
      if (r) {
        var a = {};
        a.user_data = t;
        a.save_tag = e;
        a.title = o;
        a.extra_data = n;
        var s = "backData" != e;
        return i._post("/v1/GameApi/backup_user_data", r, a, s, 5500);
      }
    })["catch"](function (t) {
      console.error("updateServerDataErr", t);
    });
  };

  t.prototype.getServerData = function (t) {
    return __awaiter(this, void 0, void 0, function () {
      var e;
      var o;
      var n;
      return __generator(this, function (i) {
        switch (i.label) {
          case 0:
            return e = "/v1/GameApi/get_user_backup", [4, this.getUserToken()];

          case 1:
            return (o = i.sent()) ? ((n = {}).save_tag = t, [2, this._post(e, o, n)]) : [2];
        }
      });
    });
  };

  t.prototype.getMailData = function (t, e) {
    var o = this;
    return this.getUserToken().then(function (n) {
      if (n) {
        var i = {};
        i.type = t;
        i.exp_ids = e;
        return o._post("/v1/GameApi/get_mail", n, i);
      }
    })["catch"](function (t) {
      console.error("getMailDataErr", t);
    });
  };

  t.prototype.updateChallengeData = function (t) {
    var e = this;
    this.getUserToken().then(function (o) {
      if (o && t) {
        var n = {};
        n.level = t;

        e._post("/v1/GameApi/passLevel", o, n);
      }
    })["catch"](function (t) {
      console.error("updateUserInfoErr", t);
    });
  };

  t.prototype.getChallengeData = function (t) {
    var e = this;
    return this.getUserToken().then(function (o) {
      if (o && t) {
        var n = {};
        n.level = t;
        return e._post("/v1/GameApi/getCompletionInfo", o, n);
      }
    })["catch"](function (t) {
      console.error("updateUserInfoErr", t);
    });
  };

  t.prototype.getUserDataByUid = function (t) {
    var e = this;
    return this.getUserToken().then(function (o) {
      if (o && t) {
        var n = {};
        n.game_uid = t;
        return e._post("/v1/GameApi/getUserData", o, n);
      }
    })["catch"](function (t) {
      console.error("getUserDataByUid", t);
    });
  };

  t.prototype.sendSevenCard = function (t, e) {
    var o = this;
    this.getUserToken().then(function (n) {
      if (n && e) {
        var i = {};
        i.aid = t;
        i.open_id = o.openId;
        i.reward_index = e;
        return o._post("/v1/GameApi/saveUserAlienCard", n, i);
      }
    })["catch"](function (t) {
      console.error("sendSevenCard", t);
    });
  };

  t.prototype.paymentResult = function (t) {
    var e = this;
    return this.getUserToken().then(function (o) {
      if (o) {
        var n = t;
        return e._post("/v1/GameApi/get_delivery_status", o, n);
      }
    })["catch"](function (t) {
      console.error("get_delivery_status", t);
    });
  };

  t.prototype.getPayGamecoins = function () {
    var t = this;
    return this.getUserToken().then(function (e) {
      if (e) {
        var o = {};
        o.open_id = t.openId;
        console.log("获取游戏币参数", o);
        return t._post("/v1/GameApi/get_balance", e, o);
      }
    });
  };

  t.prototype.getUnshippedOrders = function () {
    var t = this;
    return this.getUserToken().then(function (e) {
      if (e) {
        var o = {};
        o.open_id = t.openId;
        return t._post("/v1/GameApi/get_unshipped_orders", e, o);
      }
    })["catch"](function (t) {
      console.error("get_unshipped_orders", t);
    });
  };

  return t;
}();

exports["default"] = f;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcMFxccmVxdWVzdC5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl9jZmdNZ3IiLCJyZXF1aXJlIiwiX2lkeCIsIl91RGF0YSIsIl9wQ29uc3QiLCJfdGltZSIsIl9ldnRzIiwiX2ZseWlvIiwiX2Vycm9yQ29kZSIsImgiLCJ3aW5kb3ciLCJmbHkiLCJmIiwidCIsIl91cmxDYWNoZSIsIkFQUElEIiwicGxhdGZvcm0iLCJhcHBJZCIsImdldCIsIl9pbnMiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwicHJvdG90eXBlIiwiZ2V0VXNlclRva2VuIiwiX19hd2FpdGVyIiwiX19nZW5lcmF0b3IiLCJsYWJlbCIsIl91c2VyVG9rZW4iLCJkZXN5bmNsb2dpbiIsInNlbnQiLCJzZXQiLCJfcG9zdCIsImUiLCJvIiwibiIsImkiLCJyIiwicyIsIkF1dGhvcml6YXRpb24iLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJQcm9taXNlIiwibCIsInUiLCJoZWFkZXJzIiwidGltZW91dCIsIlBGQ29kZSIsIkFsaXBheSIsInN0cmluZyIsImlzTmF0aXZlIiwicmVzcG9uc2VUeXBlIiwicG9zdCIsInRoZW4iLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwiY29uc29sZSIsIndhcm4iLCJzdHJpbmdpZnkiLCJlcnJvckNvZGUiLCJIVFRQX0VSUiIsImMiLCJsb2dpbiIsImNvZGUiLCJhbm9ueW1vdXNfY29kZSIsImlucyIsInN0YXRlIiwiRXJyb3IiLCJzeW5jIiwic2VydmVyX3RpbWUiLCJ1c2VyVG9rZW4iLCJ0b2tlbiIsIm9wZW5JZCIsIm9wZW5pZCIsImdldEpzb24iLCJhcHBpZCIsInN5c3RlbV9pbmZvIiwiZ2V0U3lzdGVtRGF0YSIsInVuaW9uaWQiLCJncmFudF90eXBlIiwibGF1bmNoX29wdGlvbnMiLCJnZXRMYXVuY2hPcHRpb24iLCJnZXRUaW1lIiwidXBkYXRlVXNlckluZm8iLCJzZXRIZWFkSW1nIiwiYXZhdGFyIiwiYXZhdGFyVXJsIiwic2V0TmFtZSIsIm5pY2tOYW1lIiwibmlja25hbWUiLCJ1c2VyX2luZm8iLCJvcEUiLCJlbWl0IiwiYWN0aW9uIiwiVVBEX1RPUF9IRUFESU5GTyIsImVycm9yIiwiYWRkSG9tZXBhZ2VDb25zdWx0IiwiYWxpcGF5X3VzZXJfaWQiLCJ1cGxvYWRSYW5rIiwiY2xpZW50X2RhdGEiLCJ0eXBlIiwiZ2V0UmFuayIsImEiLCJyZXNvbHZlIiwicmVzIiwiY2MiLCJyZXNvdXJjZXMiLCJsb2FkIiwiZXJyIiwianNvbiIsImFkRG90Iiwic2VydmVyQ2ZnIiwidXBsb2FkX2FkX3Jlc3VsdCIsInZhbCIsInBhdGgiLCJhZF9udW1zIiwic3RhdHVzIiwidXNlckZlZWRCYWNrIiwiY29udGVudCIsInVwZGF0ZVNlcnZlckRhdGEiLCJ1c2VyX2RhdGEiLCJzYXZlX3RhZyIsInRpdGxlIiwiZXh0cmFfZGF0YSIsImdldFNlcnZlckRhdGEiLCJnZXRNYWlsRGF0YSIsImV4cF9pZHMiLCJ1cGRhdGVDaGFsbGVuZ2VEYXRhIiwibGV2ZWwiLCJnZXRDaGFsbGVuZ2VEYXRhIiwiZ2V0VXNlckRhdGFCeVVpZCIsImdhbWVfdWlkIiwic2VuZFNldmVuQ2FyZCIsImFpZCIsIm9wZW5faWQiLCJyZXdhcmRfaW5kZXgiLCJwYXltZW50UmVzdWx0IiwiZ2V0UGF5R2FtZWNvaW5zIiwibG9nIiwiZ2V0VW5zaGlwcGVkT3JkZXJzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0VBQUVDLEtBQUssRUFBRSxDQUFDO0FBQVYsQ0FBN0M7O0FBQ0EsSUFBSUMsT0FBTyxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFyQjs7QUFDQSxJQUFJQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxLQUFELENBQWxCOztBQUNBLElBQUlFLE1BQU0sR0FBR0YsT0FBTyxDQUFDLE9BQUQsQ0FB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ZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiAhMCB9KTtcbnZhciBfY2ZnTWdyID0gcmVxdWlyZShcImNmZ01nclwiKTtcbnZhciBfaWR4ID0gcmVxdWlyZShcImlkeFwiKTtcbnZhciBfdURhdGEgPSByZXF1aXJlKFwidURhdGFcIik7XG52YXIgX3BDb25zdCA9IHJlcXVpcmUoXCJwQ29uc3RcIik7XG52YXIgX3RpbWUgPSByZXF1aXJlKFwidGltZVwiKTtcbnZhciBfZXZ0cyA9IHJlcXVpcmUoXCJldnRzXCIpO1xudmFyIF9mbHlpbyA9IHJlcXVpcmUoXCJmbHlpb1wiKTtcbnZhciBfZXJyb3JDb2RlID0gcmVxdWlyZShcImVycm9yQ29kZVwiKTtcbnZhciBoID0gd2luZG93LmZseSB8fCBfZmx5aW8uZGVmYXVsdDtcbnZhciBmID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgIHRoaXMuX3VybENhY2hlID0ge307XG4gICAgICAgIHRoaXMuQVBQSUQgPSBfaWR4LnBsYXRmb3JtLmFwcElkO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgXCJpbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5faW5zIHx8ICh0aGlzLl9pbnMgPSBuZXcgdCgpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgfSk7XG4gICAgdC5wcm90b3R5cGUuZ2V0VXNlclRva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHQubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJUb2tlbiA/IFszLCAyXSA6IFs0LCB0aGlzLmRlc3luY2xvZ2luKCldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICB0LnNlbnQoKSwgKHQubGFiZWwgPSAyKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyLCB0aGlzLl91c2VyVG9rZW5dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwgXCJ1c2VyVG9rZW5cIiwge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3VzZXJUb2tlbiA9IHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgfSk7XG4gICAgdC5wcm90b3R5cGUuX3Bvc3QgPSBmdW5jdGlvbih0LCBlLCBvLCBuLCBpLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gITEpO1xuICAgICAgICB2b2lkIDAgPT09IGkgJiYgKGkgPSA1ZTMpO1xuICAgICAgICB2b2lkIDAgPT09IHIgJiYgKHIgPSBcImh0dHBzOi8vYWRhcGkudGprajMwMC5jb21cIik7XG4gICAgICAgIHZhciBzID0geyBBdXRob3JpemF0aW9uOiBlIH07XG4gICAgICAgIG4gJiYgKChzW1wiWC1GYy1JbnZvY2F0aW9uLVR5cGVcIl0gPSBcIkFzeW5jXCIpLCAoc1tcIlgtRmMtU3RhdGVmdWwtQXN5bmMtSW52b2NhdGlvbi1JZFwiXSA9IERhdGUubm93KCkudG9TdHJpbmcoKSkpO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSwgbCkge1xuICAgICAgICAgICAgdmFyIHUgPSB7IGhlYWRlcnM6IHMsIHRpbWVvdXQ6IGkgfTtcbiAgICAgICAgICAgIChfcENvbnN0LlBGQ29kZS5BbGlwYXkgPT09IF9pZHgucGxhdGZvcm0uc3RyaW5nKCkgfHwgX2lkeC5wbGF0Zm9ybS5pc05hdGl2ZSkgJiYgKHUucmVzcG9uc2VUeXBlID0gXCJqc29uXCIpO1xuICAgICAgICAgICAgaC5wb3N0KHIgKyB0LCBvLCB1KVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBcInN0cmluZ1wiICE9IHR5cGVvZiB0LmRhdGEgfHwgbiA/IHQuZGF0YSA6IEpTT04ucGFyc2UodC5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgZShvKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIltyZWFzb25dXCIsIEpTT04uc3RyaW5naWZ5KHQpKTtcbiAgICAgICAgICAgICAgICAgICAgbChfZXJyb3JDb2RlLmVycm9yQ29kZS5IVFRQX0VSUik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZGVzeW5jbG9naW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIHZhciBvO1xuICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICB2YXIgcjtcbiAgICAgICAgICAgIHZhciBzO1xuICAgICAgICAgICAgdmFyIGM7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoaS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQsIF9pZHgucGxhdGZvcm0ubG9naW4oKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZSA9IGkuc2VudCgpKSwgKG8gPSBlLmNvZGUpLCAobiA9IGUuYW5vbnltb3VzX2NvZGUpLCBvID8gWzQsIHQuaW5zLmxvZ2luKG8sIG4pXSA6IFsyXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT0gKHIgPSBpLnNlbnQoKSkuc3RhdGUpIHRocm93IG5ldyBFcnJvcihcIueZu+W9leeKtuaAgeWQl+mUmeivr++8mlwiICsgci5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzID0gdC5pbnMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjID0gci5kYXRhKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGltZS5kZWZhdWx0Lmlucy5zeW5jKHIuc2VydmVyX3RpbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzLnVzZXJUb2tlbiA9IGMudG9rZW4pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzLm9wZW5JZCA9IGMub3BlbmlkKSwgWzJdXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldEpzb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHQgPSB7fTtcbiAgICAgICAgdC5hcHBpZCA9IHRoaXMuQVBQSUQ7XG4gICAgICAgIHJldHVybiB0aGlzLl9wb3N0KFwiL3YxL0dhbWVDb25maWdBcGkvZ2V0X2dhbWVfaW5pdF9jb25maWdcIiwgXCJONjQ0VUY5Vk1VOU9GVFRZSE9WM0RFR1k3TDJETU1WUFwiLCB0LCAhMSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5sb2dpbiA9IGZ1bmN0aW9uKHQsIGUsIG8sIG4pIHtcbiAgICAgICAgdmFyIGkgPSB7fTtcbiAgICAgICAgaS5hcHBpZCA9IHRoaXMuQVBQSUQ7XG4gICAgICAgIGkuc3lzdGVtX2luZm8gPSBfaWR4LnBsYXRmb3JtLmdldFN5c3RlbURhdGEoKTtcbiAgICAgICAgaS5jb2RlID0gdDtcbiAgICAgICAgaS5vcGVuaWQgPSBvO1xuICAgICAgICBpLnVuaW9uaWQgPSBuO1xuICAgICAgICBfcENvbnN0LlBGQ29kZS5BbGlwYXkgPT09IF9pZHgucGxhdGZvcm0uc3RyaW5nKCkgJiYgKGkuZ3JhbnRfdHlwZSA9IFwiYXV0aG9yaXphdGlvbl9jb2RlXCIpO1xuICAgICAgICBpLmFub255bW91c19jb2RlID0gZTtcbiAgICAgICAgaS5sYXVuY2hfb3B0aW9ucyA9IF91RGF0YS5kZWZhdWx0Lmlucy5nZXRMYXVuY2hPcHRpb24oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc3QoXCIvdjEvR2FtZUNvbmZpZ0FwaS9nYW1lX3VzZXJfbG9naW5cIiwgXCJONjQ0VUY5Vk1VOU9GVFRZSE9WM0RFR1k3TDJETU1WUFwiLCBpLCB2b2lkIDAsIDJlMyk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5nZXRUaW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wb3N0KFwiL3YxL0dhbWVDb25maWdBcGkvZ2FtZV91c2VyX2xvZ2luXCIsIFwiMTIzNDU2XCIsIHt9LCB2b2lkIDAsIDJlMyk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS51cGRhdGVVc2VySW5mbyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICB0aGlzLmdldFVzZXJUb2tlbigpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihvKSB7XG4gICAgICAgICAgICAgICAgaWYgKG8gJiYgdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IF91RGF0YS5kZWZhdWx0LmlucztcbiAgICAgICAgICAgICAgICAgICAgbi5zZXRIZWFkSW1nKHQuYXZhdGFyIHx8IHQuYXZhdGFyVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgbi5zZXROYW1lKHQubmlja05hbWUgfHwgdC5uaWNrbmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGUuX3Bvc3QoXCIvdjEvR2FtZUFwaS91cGRhdGVfZ2FtZV91c2VyXCIsIG8sIHsgdXNlcl9pbmZvOiB0IH0pO1xuICAgICAgICAgICAgICAgICAgICBfZXZ0cy5kZWZhdWx0Lm9wRS5lbWl0KHsgYWN0aW9uOiBfZXZ0cy5kZWZhdWx0LlVQRF9UT1BfSEVBRElORk8gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInVwZGF0ZVVzZXJJbmZvRXJyXCIsIHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5hZGRIb21lcGFnZUNvbnN1bHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgdmFyIG87XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24obikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAobi5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gXCIvdjEvR2FtZUFwaS9nZXRfYWRkSG9tZVwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGUgPSB7fSkuYWxpcGF5X3VzZXJfaWQgPSB0aGlzLm9wZW5JZCksIFs0LCB0aGlzLmdldFVzZXJUb2tlbigpXVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvID0gbi5zZW50KCkpLCBbMiwgdGhpcy5fcG9zdCh0LCBvLCBlLCAhMSldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnVwbG9hZFJhbmsgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHZhciBvID0gdGhpcztcbiAgICAgICAgdGhpcy5nZXRVc2VyVG9rZW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24obikge1xuICAgICAgICAgICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0ge307XG4gICAgICAgICAgICAgICAgICAgIGkuY2xpZW50X2RhdGEgPSBbdF07XG4gICAgICAgICAgICAgICAgICAgIGkudHlwZSA9IGU7XG4gICAgICAgICAgICAgICAgICAgIG8uX3Bvc3QoXCIvdjEvR2FtZUFwaS91cGxvYWRfZ2FtZXJfc2NvcmVcIiwgbiwgaSwgITApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJ1cGxvYWRSYW5rRXJyXCIsIHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5nZXRSYW5rID0gZnVuY3Rpb24odCwgZSwgbywgbiwgaSwgcikge1xuICAgICAgICB2YXIgYSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzID0+IHtcbiAgICAgICAgICAgICAgICBjYy5yZXNvdXJjZXMubG9hZCgncmFuaycsIChlcnIsIGpzb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzKGpzb24uanNvbik7XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC8vIHJldHVybiB0aGlzLmdldFVzZXJUb2tlbigpXG4gICAgICAgICAgICAvLyAgICAgLnRoZW4oZnVuY3Rpb24ocykge1xuICAgICAgICAgICAgLy8gICAgICAgICBpZiAoIXMpIHJldHVybiBQcm9taXNlLnJlamVjdChcIm5vIGF1dGhcIik7XG4gICAgICAgICAgICAvLyAgICAgICAgIHZhciBjID0ge307XG4gICAgICAgICAgICAvLyAgICAgICAgIGMucmFua190YWcgPSB0O1xuICAgICAgICAgICAgLy8gICAgICAgICBjLnNvcnRfdHlwZSA9IG87XG4gICAgICAgICAgICAvLyAgICAgICAgIGMuc2VjX3NvcnRfdHlwZSA9IHI7XG4gICAgICAgICAgICAvLyAgICAgICAgIGMudHlwZSA9IGU7XG4gICAgICAgICAgICAvLyAgICAgICAgIGMubGltaXQgPSBpIHx8IDEwMDtcbiAgICAgICAgICAgIC8vICAgICAgICAgYy5kYXRlID0gbjtcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuIGEuX3Bvc3QoXCIvdjEvR2FtZUFwaS9nZXRfcmFua19saXN0XCIsIHMsIGMpO1xuICAgICAgICAgICAgLy8gICAgIH0pXG4gICAgICAgICAgICAvLyAgICAgLmNhdGNoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5lcnJvcihcImdldFJhbmtFcnJcIiwgdCk7XG4gICAgICAgICAgICAvLyAgICAgfSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5hZERvdCA9IGZ1bmN0aW9uKHQsIGUsIG8sIG4pIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzO1xuICAgICAgICB2b2lkIDAgPT09IG8gJiYgKG8gPSAxKTtcbiAgICAgICAgdm9pZCAwID09PSBuICYmIChuID0gMSk7XG4gICAgICAgIHRoaXMuZ2V0VXNlclRva2VuKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoYSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IF9jZmdNZ3IuZGVmYXVsdC5zZXJ2ZXJDZmcudXBsb2FkX2FkX3Jlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMgJiYgMSA9PSBzLnZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGMudHlwZSA9IG87XG4gICAgICAgICAgICAgICAgICAgICAgICBjLnBhdGggPSB0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYy5hZF9udW1zID0gbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGMuc3RhdHVzID0gZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkuX3Bvc3QoXCIvdjEvR2FtZUFwaS91cGxvYWRfZ2FtZXJfYWRfcmVjb2RlXCIsIGEsIGMsICEwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJhZERvdEVyclwiLCB0KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUudXNlckZlZWRCYWNrID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFVzZXJUb2tlbigpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihvKSB7XG4gICAgICAgICAgICAgICAgaWYgKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgbi5jb250ZW50ID0gdDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuX3Bvc3QoXCIvdjEvR2FtZUFwaS9hZGRfcmVwbHlcIiwgbywgbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInVzZXJGZWVkQmFja0VyclwiLCB0KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUudXBkYXRlU2VydmVyRGF0YSA9IGZ1bmN0aW9uKHQsIGUsIG8sIG4pIHtcbiAgICAgICAgdmFyIGkgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRVc2VyVG9rZW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0ge307XG4gICAgICAgICAgICAgICAgICAgIGEudXNlcl9kYXRhID0gdDtcbiAgICAgICAgICAgICAgICAgICAgYS5zYXZlX3RhZyA9IGU7XG4gICAgICAgICAgICAgICAgICAgIGEudGl0bGUgPSBvO1xuICAgICAgICAgICAgICAgICAgICBhLmV4dHJhX2RhdGEgPSBuO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IFwiYmFja0RhdGFcIiAhPSBlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5fcG9zdChcIi92MS9HYW1lQXBpL2JhY2t1cF91c2VyX2RhdGFcIiwgciwgYSwgcywgNTUwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInVwZGF0ZVNlcnZlckRhdGFFcnJcIiwgdCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldFNlcnZlckRhdGEgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICB2YXIgbztcbiAgICAgICAgICAgIHZhciBuO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGkubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlID0gXCIvdjEvR2FtZUFwaS9nZXRfdXNlcl9iYWNrdXBcIiksIFs0LCB0aGlzLmdldFVzZXJUb2tlbigpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvID0gaS5zZW50KCkpID8gKCgobiA9IHt9KS5zYXZlX3RhZyA9IHQpLCBbMiwgdGhpcy5fcG9zdChlLCBvLCBuKV0pIDogWzJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldE1haWxEYXRhID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB2YXIgbyA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFVzZXJUb2tlbigpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihuKSB7XG4gICAgICAgICAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgaS50eXBlID0gdDtcbiAgICAgICAgICAgICAgICAgICAgaS5leHBfaWRzID0gZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uX3Bvc3QoXCIvdjEvR2FtZUFwaS9nZXRfbWFpbFwiLCBuLCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZ2V0TWFpbERhdGFFcnJcIiwgdCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnVwZGF0ZUNoYWxsZW5nZURhdGEgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgdGhpcy5nZXRVc2VyVG9rZW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24obykge1xuICAgICAgICAgICAgICAgIGlmIChvICYmIHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgbi5sZXZlbCA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIGUuX3Bvc3QoXCIvdjEvR2FtZUFwaS9wYXNzTGV2ZWxcIiwgbywgbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInVwZGF0ZVVzZXJJbmZvRXJyXCIsIHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5nZXRDaGFsbGVuZ2VEYXRhID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFVzZXJUb2tlbigpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihvKSB7XG4gICAgICAgICAgICAgICAgaWYgKG8gJiYgdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBuLmxldmVsID0gdDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuX3Bvc3QoXCIvdjEvR2FtZUFwaS9nZXRDb21wbGV0aW9uSW5mb1wiLCBvLCBuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwidXBkYXRlVXNlckluZm9FcnJcIiwgdCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldFVzZXJEYXRhQnlVaWQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlclRva2VuKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKG8pIHtcbiAgICAgICAgICAgICAgICBpZiAobyAmJiB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuID0ge307XG4gICAgICAgICAgICAgICAgICAgIG4uZ2FtZV91aWQgPSB0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5fcG9zdChcIi92MS9HYW1lQXBpL2dldFVzZXJEYXRhXCIsIG8sIG4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJnZXRVc2VyRGF0YUJ5VWlkXCIsIHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5zZW5kU2V2ZW5DYXJkID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB2YXIgbyA9IHRoaXM7XG4gICAgICAgIHRoaXMuZ2V0VXNlclRva2VuKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgICAgICAgICBpZiAobiAmJiBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0ge307XG4gICAgICAgICAgICAgICAgICAgIGkuYWlkID0gdDtcbiAgICAgICAgICAgICAgICAgICAgaS5vcGVuX2lkID0gby5vcGVuSWQ7XG4gICAgICAgICAgICAgICAgICAgIGkucmV3YXJkX2luZGV4ID0gZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uX3Bvc3QoXCIvdjEvR2FtZUFwaS9zYXZlVXNlckFsaWVuQ2FyZFwiLCBuLCBpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwic2VuZFNldmVuQ2FyZFwiLCB0KTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUucGF5bWVudFJlc3VsdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRVc2VyVG9rZW4oKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24obykge1xuICAgICAgICAgICAgICAgIGlmIChvKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuID0gdDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuX3Bvc3QoXCIvdjEvR2FtZUFwaS9nZXRfZGVsaXZlcnlfc3RhdHVzXCIsIG8sIG4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJnZXRfZGVsaXZlcnlfc3RhdHVzXCIsIHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5nZXRQYXlHYW1lY29pbnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRVc2VyVG9rZW4oKS50aGVuKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG8gPSB7fTtcbiAgICAgICAgICAgICAgICBvLm9wZW5faWQgPSB0Lm9wZW5JZDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuiOt+WPlua4uOaIj+W4geWPguaVsFwiLCBvKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5fcG9zdChcIi92MS9HYW1lQXBpL2dldF9iYWxhbmNlXCIsIGUsIG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldFVuc2hpcHBlZE9yZGVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFVzZXJUb2tlbigpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgby5vcGVuX2lkID0gdC5vcGVuSWQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0Ll9wb3N0KFwiL3YxL0dhbWVBcGkvZ2V0X3Vuc2hpcHBlZF9vcmRlcnNcIiwgZSwgbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImdldF91bnNoaXBwZWRfb3JkZXJzXCIsIHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCk7XG5leHBvcnRzLmRlZmF1bHQgPSBmOyJdfQ==