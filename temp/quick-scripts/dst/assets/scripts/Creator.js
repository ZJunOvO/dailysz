
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/Creator.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '77b848PH0BISYS7vYKq3Ogo', 'Creator');
// scripts/Creator.js

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _solver = require("Solver");

var _puzzle = require("Puzzle");

var _puzzleCell = require("PuzzleCell");

var a = function () {
  function t(t) {
    t && (this.seed = t);
  }

  t.prototype.seedRandom = function () {
    return null == this.seed ? Math.random() : (this.seed = (9301 * this.seed + 49297) % 233280, this.seed / 233280);
  };

  t.prototype.getRandomIntBetween = function (t, e) {
    var o = Math.ceil(t);
    var n = Math.floor(e);
    return Math.floor(this.seedRandom() * (n - o + 1)) + o;
  };

  t.prototype.getRandomData = function (t, e, o) {
    void 0 === o && (o = 3);
    var n = this.createRandom(t, t, e, o - 1);
    var i = [];
    n.cells.forEach(function (t) {
      i.push(t.solution);
    });
    return i;
  };

  t.prototype.createRandom = function (e, o, r, a) {
    var s;
    var c;
    var l;
    var u;
    var p = !1;
    var d = "number" == typeof r && r >= 0 && r <= 1;
    var h = [];
    var f = [];
    var g = 0;
    var y = 1;

    for (this.puzzle = new _puzzle["default"](e, o); !1 === p;) {
      for (c = d ? r : this.getRandomIntBetween(200, 800) / 1e3, h.length = 0, f.length = 0, s = 0, u = 0; u < this.puzzle.totalCells; u++) {
        l = this.seedRandom() < c ? 1 : 0, a && (0 == l && 1 == y && g++, g > a && (l = 1, g--), y = l), s += l, u % this.puzzle.width == 0 && u > 0 && (y = 1, g = 0, h.push(f), f = []), f.push(l);
      }

      0 !== s && s !== this.puzzle.totalCells && (h.push(f), this.puzzle = t._populatePuzzleFromGrid(this.puzzle, h), new _solver["default"](this.puzzle).solve() && (p = !0));
    }

    this.puzzle.creator = this;
    return this.puzzle;
  };

  t.prototype.createFromGrid = function (e) {
    new Date();
    var o;
    var r = 0;
    var a = 0;
    if (!(e instanceof Array)) throw "grid is not an array";
    e.forEach(function (t, e) {
      if (!(t instanceof Array)) throw "grid is not a multi-dimensional array";
      if (0 === r) r = t.length;else if (t.length !== r) throw "row " + e + " has an invalid length (" + t.length + ") - expecting " + r;
      a++;
    });
    o = new _puzzle["default"](r, a);
    this.puzzle = t._populatePuzzleFromGrid(o, e);
    this.puzzle.creator = this;
    return !!new _solver["default"](this.puzzle).solve() && this.puzzle;
  };

  t.prototype.createFromHints = function (t) {
    var e;
    var o;
    var a;
    var s;
    var c = this;
    if ("object" != typeof t || !t.row || !t.column) throw 'parameter passed to createFromHints() must be an object containing "row" and "column" properties';
    if (!(t.row instanceof Array && t.column instanceof Array)) throw "hints.row or hints.column must be an array.";
    e = t.column.length;
    o = t.row.length;
    (a = new _puzzle["default"](e, o)).rowHints = t.row;
    a.columnHints = t.column;
    a.creator = this;
    a.grid.forEach(function (t, e) {
      t.forEach(function (t, o) {
        a.cells.push(new _puzzleCell["default"]({
          index: e * a.width + o,
          column: o,
          row: e
        }));
      });
    });
    this.puzzle = a;
    return !!(s = new _solver["default"](this.puzzle)).solve() && (s.puzzle.cells.forEach(function (t, e) {
      var o = c.puzzle.getCellByIndex(e);
      o.aiSolution = t.aiSolution;
      o.solution = t.aiSolution;
    }), this.puzzle);
  };

  t._populatePuzzleFromGrid = function (t, e) {
    var o;
    var n;
    var i;
    var a;
    var s;
    var c;
    var l;
    var u;
    var p;
    var d;
    var h;

    for (t.reset(), t.grid = e, n = 0; n < t.grid.length; n++) {
      for (i = t.grid[n], p = [], t.rowHints[n] = [], a = 0; a < i.length; a++) {
        l = s = i[a], u = a > 0 ? t.grid[n][a - 1] : 0, t.cells.push(new _puzzleCell["default"]({
          index: n * t.width + a,
          column: a,
          row: n,
          solution: s
        })), 1 === l && 0 === u ? p.push(1) : 0 === l && 1 === u ? p.push(0) : 1 === l && 1 === u && p[p.length - 1]++;
      }

      for (d = 0; d < p.length; d++) {
        (h = p[d]) > 0 && t.rowHints[n].push(h);
      }
    }

    for (a = 0; a < t.width; a++) {
      for (t.columnHints[a] = [], o = [], c = a; c < t.totalCells; c += t.width) {
        i = Math.floor(c / t.width), l = t.grid[i][a], u = i > 0 ? t.grid[i - 1][a] : 0, 1 === l && 0 === u ? o.push(1) : 0 === l && 1 === u ? o.push(0) : 1 === l && 1 === u && o[o.length - 1]++;
      }

      for (d = 0; d < o.length; d++) {
        (h = o[d]) > 0 && t.columnHints[a].push(h);
      }
    }

    return t;
  };

  return t;
}();

exports["default"] = a;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcQ3JlYXRvci5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl9zb2x2ZXIiLCJyZXF1aXJlIiwiX3B1enpsZSIsIl9wdXp6bGVDZWxsIiwiYSIsInQiLCJzZWVkIiwicHJvdG90eXBlIiwic2VlZFJhbmRvbSIsIk1hdGgiLCJyYW5kb20iLCJnZXRSYW5kb21JbnRCZXR3ZWVuIiwiZSIsIm8iLCJjZWlsIiwibiIsImZsb29yIiwiZ2V0UmFuZG9tRGF0YSIsImNyZWF0ZVJhbmRvbSIsImkiLCJjZWxscyIsImZvckVhY2giLCJwdXNoIiwic29sdXRpb24iLCJyIiwicyIsImMiLCJsIiwidSIsInAiLCJkIiwiaCIsImYiLCJnIiwieSIsInB1enpsZSIsImxlbmd0aCIsInRvdGFsQ2VsbHMiLCJ3aWR0aCIsIl9wb3B1bGF0ZVB1enpsZUZyb21HcmlkIiwic29sdmUiLCJjcmVhdG9yIiwiY3JlYXRlRnJvbUdyaWQiLCJEYXRlIiwiQXJyYXkiLCJjcmVhdGVGcm9tSGludHMiLCJyb3ciLCJjb2x1bW4iLCJyb3dIaW50cyIsImNvbHVtbkhpbnRzIiwiZ3JpZCIsImluZGV4IiwiZ2V0Q2VsbEJ5SW5kZXgiLCJhaVNvbHV0aW9uIiwicmVzZXQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7RUFBQ0MsS0FBSyxFQUFFLENBQUM7QUFBVCxDQUE3Qzs7QUFDQSxJQUFJQyxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxRQUFELENBQXJCOztBQUNBLElBQUlDLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFFBQUQsQ0FBckI7O0FBQ0EsSUFBSUUsV0FBVyxHQUFHRixPQUFPLENBQUMsWUFBRCxDQUF6Qjs7QUFDQSxJQUFJRyxDQUFDLEdBQUksWUFBWTtFQUNqQixTQUFTQyxDQUFULENBQVdBLENBQVgs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LCJzb3VyY2VzQ29udGVudCI6WyJPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHt2YWx1ZTogITB9KTtcbnZhciBfc29sdmVyID0gcmVxdWlyZShcIlNvbHZlclwiKTtcbnZhciBfcHV6emxlID0gcmVxdWlyZShcIlB1enpsZVwiKTtcbnZhciBfcHV6emxlQ2VsbCA9IHJlcXVpcmUoXCJQdXp6bGVDZWxsXCIpO1xudmFyIGEgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHQodCkge1xuICAgICAgICB0ICYmICh0aGlzLnNlZWQgPSB0KTtcbiAgICB9XG4gICAgdC5wcm90b3R5cGUuc2VlZFJhbmRvbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gdGhpcy5zZWVkXG4gICAgICAgICAgICA/IE1hdGgucmFuZG9tKClcbiAgICAgICAgICAgIDogKCh0aGlzLnNlZWQgPSAoOTMwMSAqIHRoaXMuc2VlZCArIDQ5Mjk3KSAlIDIzMzI4MCksIHRoaXMuc2VlZCAvIDIzMzI4MCk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5nZXRSYW5kb21JbnRCZXR3ZWVuID0gZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgdmFyIG8gPSBNYXRoLmNlaWwodCk7XG4gICAgICAgIHZhciBuID0gTWF0aC5mbG9vcihlKTtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5zZWVkUmFuZG9tKCkgKiAobiAtIG8gKyAxKSkgKyBvO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0UmFuZG9tRGF0YSA9IGZ1bmN0aW9uICh0LCBlLCBvKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gbyAmJiAobyA9IDMpO1xuICAgICAgICB2YXIgbiA9IHRoaXMuY3JlYXRlUmFuZG9tKHQsIHQsIGUsIG8gLSAxKTtcbiAgICAgICAgdmFyIGkgPSBbXTtcbiAgICAgICAgbi5jZWxscy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBpLnB1c2godC5zb2x1dGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmNyZWF0ZVJhbmRvbSA9IGZ1bmN0aW9uIChlLCBvLCByLCBhKSB7XG4gICAgICAgIHZhciBzO1xuICAgICAgICB2YXIgYztcbiAgICAgICAgdmFyIGw7XG4gICAgICAgIHZhciB1O1xuICAgICAgICB2YXIgcCA9ICExO1xuICAgICAgICB2YXIgZCA9IFwibnVtYmVyXCIgPT0gdHlwZW9mIHIgJiYgciA+PSAwICYmIHIgPD0gMTtcbiAgICAgICAgdmFyIGggPSBbXTtcbiAgICAgICAgdmFyIGYgPSBbXTtcbiAgICAgICAgdmFyIGcgPSAwO1xuICAgICAgICB2YXIgeSA9IDE7XG4gICAgICAgIGZvciAodGhpcy5wdXp6bGUgPSBuZXcgX3B1enpsZS5kZWZhdWx0KGUsIG8pOyAhMSA9PT0gcDsgKSB7XG4gICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgIGMgPSBkID8gciA6IHRoaXMuZ2V0UmFuZG9tSW50QmV0d2VlbigyMDAsIDgwMCkgLyAxZTMsIGgubGVuZ3RoID0gMCwgZi5sZW5ndGggPSAwLCBzID0gMCwgdSA9IDA7XG4gICAgICAgICAgICAgICAgdSA8IHRoaXMucHV6emxlLnRvdGFsQ2VsbHM7XG4gICAgICAgICAgICAgICAgdSsrXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgKGwgPSB0aGlzLnNlZWRSYW5kb20oKSA8IGMgPyAxIDogMCksXG4gICAgICAgICAgICAgICAgICAgIGEgJiYgKDAgPT0gbCAmJiAxID09IHkgJiYgZysrLCBnID4gYSAmJiAoKGwgPSAxKSwgZy0tKSwgKHkgPSBsKSksXG4gICAgICAgICAgICAgICAgICAgIChzICs9IGwpLFxuICAgICAgICAgICAgICAgICAgICB1ICUgdGhpcy5wdXp6bGUud2lkdGggPT0gMCAmJiB1ID4gMCAmJiAoKHkgPSAxKSwgKGcgPSAwKSwgaC5wdXNoKGYpLCAoZiA9IFtdKSksXG4gICAgICAgICAgICAgICAgICAgIGYucHVzaChsKTtcbiAgICAgICAgICAgIDAgIT09IHMgJiZcbiAgICAgICAgICAgICAgICBzICE9PSB0aGlzLnB1enpsZS50b3RhbENlbGxzICYmXG4gICAgICAgICAgICAgICAgKGgucHVzaChmKSxcbiAgICAgICAgICAgICAgICAodGhpcy5wdXp6bGUgPSB0Ll9wb3B1bGF0ZVB1enpsZUZyb21HcmlkKHRoaXMucHV6emxlLCBoKSksXG4gICAgICAgICAgICAgICAgbmV3IF9zb2x2ZXIuZGVmYXVsdCh0aGlzLnB1enpsZSkuc29sdmUoKSAmJiAocCA9ICEwKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wdXp6bGUuY3JlYXRvciA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLnB1enpsZTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmNyZWF0ZUZyb21HcmlkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgbmV3IERhdGUoKTtcbiAgICAgICAgdmFyIG87XG4gICAgICAgIHZhciByID0gMDtcbiAgICAgICAgdmFyIGEgPSAwO1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgQXJyYXkpKSB0aHJvdyBcImdyaWQgaXMgbm90IGFuIGFycmF5XCI7XG4gICAgICAgIGUuZm9yRWFjaChmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIEFycmF5KSkgdGhyb3cgXCJncmlkIGlzIG5vdCBhIG11bHRpLWRpbWVuc2lvbmFsIGFycmF5XCI7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcikgciA9IHQubGVuZ3RoO1xuICAgICAgICAgICAgZWxzZSBpZiAodC5sZW5ndGggIT09IHIpIHRocm93IFwicm93IFwiICsgZSArIFwiIGhhcyBhbiBpbnZhbGlkIGxlbmd0aCAoXCIgKyB0Lmxlbmd0aCArIFwiKSAtIGV4cGVjdGluZyBcIiArIHI7XG4gICAgICAgICAgICBhKys7XG4gICAgICAgIH0pO1xuICAgICAgICBvID0gbmV3IF9wdXp6bGUuZGVmYXVsdChyLCBhKTtcbiAgICAgICAgdGhpcy5wdXp6bGUgPSB0Ll9wb3B1bGF0ZVB1enpsZUZyb21HcmlkKG8sIGUpO1xuICAgICAgICB0aGlzLnB1enpsZS5jcmVhdG9yID0gdGhpcztcbiAgICAgICAgcmV0dXJuICEhbmV3IF9zb2x2ZXIuZGVmYXVsdCh0aGlzLnB1enpsZSkuc29sdmUoKSAmJiB0aGlzLnB1enpsZTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmNyZWF0ZUZyb21IaW50cyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB2YXIgbztcbiAgICAgICAgdmFyIGE7XG4gICAgICAgIHZhciBzO1xuICAgICAgICB2YXIgYyA9IHRoaXM7XG4gICAgICAgIGlmIChcIm9iamVjdFwiICE9IHR5cGVvZiB0IHx8ICF0LnJvdyB8fCAhdC5jb2x1bW4pXG4gICAgICAgICAgICB0aHJvdyAncGFyYW1ldGVyIHBhc3NlZCB0byBjcmVhdGVGcm9tSGludHMoKSBtdXN0IGJlIGFuIG9iamVjdCBjb250YWluaW5nIFwicm93XCIgYW5kIFwiY29sdW1uXCIgcHJvcGVydGllcyc7XG4gICAgICAgIGlmICghKHQucm93IGluc3RhbmNlb2YgQXJyYXkgJiYgdC5jb2x1bW4gaW5zdGFuY2VvZiBBcnJheSkpIHRocm93IFwiaGludHMucm93IG9yIGhpbnRzLmNvbHVtbiBtdXN0IGJlIGFuIGFycmF5LlwiO1xuICAgICAgICBlID0gdC5jb2x1bW4ubGVuZ3RoO1xuICAgICAgICBvID0gdC5yb3cubGVuZ3RoO1xuICAgICAgICAoYSA9IG5ldyBfcHV6emxlLmRlZmF1bHQoZSwgbykpLnJvd0hpbnRzID0gdC5yb3c7XG4gICAgICAgIGEuY29sdW1uSGludHMgPSB0LmNvbHVtbjtcbiAgICAgICAgYS5jcmVhdG9yID0gdGhpcztcbiAgICAgICAgYS5ncmlkLmZvckVhY2goZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgICAgIHQuZm9yRWFjaChmdW5jdGlvbiAodCwgbykge1xuICAgICAgICAgICAgICAgIGEuY2VsbHMucHVzaChuZXcgX3B1enpsZUNlbGwuZGVmYXVsdCh7aW5kZXg6IGUgKiBhLndpZHRoICsgbywgY29sdW1uOiBvLCByb3c6IGV9KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHV6emxlID0gYTtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICEhKHMgPSBuZXcgX3NvbHZlci5kZWZhdWx0KHRoaXMucHV6emxlKSkuc29sdmUoKSAmJlxuICAgICAgICAgICAgKHMucHV6emxlLmNlbGxzLmZvckVhY2goZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbyA9IGMucHV6emxlLmdldENlbGxCeUluZGV4KGUpO1xuICAgICAgICAgICAgICAgIG8uYWlTb2x1dGlvbiA9IHQuYWlTb2x1dGlvbjtcbiAgICAgICAgICAgICAgICBvLnNvbHV0aW9uID0gdC5haVNvbHV0aW9uO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0aGlzLnB1enpsZSlcbiAgICAgICAgKTtcbiAgICB9O1xuICAgIHQuX3BvcHVsYXRlUHV6emxlRnJvbUdyaWQgPSBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICB2YXIgbztcbiAgICAgICAgdmFyIG47XG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIgYTtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIHZhciBjO1xuICAgICAgICB2YXIgbDtcbiAgICAgICAgdmFyIHU7XG4gICAgICAgIHZhciBwO1xuICAgICAgICB2YXIgZDtcbiAgICAgICAgdmFyIGg7XG4gICAgICAgIGZvciAodC5yZXNldCgpLCB0LmdyaWQgPSBlLCBuID0gMDsgbiA8IHQuZ3JpZC5sZW5ndGg7IG4rKykge1xuICAgICAgICAgICAgZm9yIChpID0gdC5ncmlkW25dLCBwID0gW10sIHQucm93SGludHNbbl0gPSBbXSwgYSA9IDA7IGEgPCBpLmxlbmd0aDsgYSsrKVxuICAgICAgICAgICAgICAgIChsID0gcyA9IGlbYV0pLFxuICAgICAgICAgICAgICAgICAgICAodSA9IGEgPiAwID8gdC5ncmlkW25dW2EgLSAxXSA6IDApLFxuICAgICAgICAgICAgICAgICAgICB0LmNlbGxzLnB1c2gobmV3IF9wdXp6bGVDZWxsLmRlZmF1bHQoe2luZGV4OiBuICogdC53aWR0aCArIGEsIGNvbHVtbjogYSwgcm93OiBuLCBzb2x1dGlvbjogc30pKSxcbiAgICAgICAgICAgICAgICAgICAgMSA9PT0gbCAmJiAwID09PSB1XG4gICAgICAgICAgICAgICAgICAgICAgICA/IHAucHVzaCgxKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAwID09PSBsICYmIDEgPT09IHVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gcC5wdXNoKDApXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDEgPT09IGwgJiYgMSA9PT0gdSAmJiBwW3AubGVuZ3RoIC0gMV0rKztcbiAgICAgICAgICAgIGZvciAoZCA9IDA7IGQgPCBwLmxlbmd0aDsgZCsrKSAoaCA9IHBbZF0pID4gMCAmJiB0LnJvd0hpbnRzW25dLnB1c2goaCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChhID0gMDsgYSA8IHQud2lkdGg7IGErKykge1xuICAgICAgICAgICAgZm9yICh0LmNvbHVtbkhpbnRzW2FdID0gW10sIG8gPSBbXSwgYyA9IGE7IGMgPCB0LnRvdGFsQ2VsbHM7IGMgKz0gdC53aWR0aClcbiAgICAgICAgICAgICAgICAoaSA9IE1hdGguZmxvb3IoYyAvIHQud2lkdGgpKSxcbiAgICAgICAgICAgICAgICAgICAgKGwgPSB0LmdyaWRbaV1bYV0pLFxuICAgICAgICAgICAgICAgICAgICAodSA9IGkgPiAwID8gdC5ncmlkW2kgLSAxXVthXSA6IDApLFxuICAgICAgICAgICAgICAgICAgICAxID09PSBsICYmIDAgPT09IHVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gby5wdXNoKDEpXG4gICAgICAgICAgICAgICAgICAgICAgICA6IDAgPT09IGwgJiYgMSA9PT0gdVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBvLnB1c2goMClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogMSA9PT0gbCAmJiAxID09PSB1ICYmIG9bby5sZW5ndGggLSAxXSsrO1xuICAgICAgICAgICAgZm9yIChkID0gMDsgZCA8IG8ubGVuZ3RoOyBkKyspIChoID0gb1tkXSkgPiAwICYmIHQuY29sdW1uSGludHNbYV0ucHVzaChoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKTtcbmV4cG9ydHMuZGVmYXVsdCA9IGE7XG4iXX0=