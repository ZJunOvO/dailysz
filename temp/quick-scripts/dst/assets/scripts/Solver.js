
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/Solver.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'f4a76CUybNNl5+41191uovc', 'Solver');
// scripts/Solver.js

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _puzzleLine = require("PuzzleLine");

var _utility = require("Utility");

var r = function () {
  function t(t) {
    this.puzzle = t;

    this._reset();
  }

  t.prototype.solve = function () {
    var t;
    var e;
    var o;
    var n;
    var i = new Date().getTime();
    var r = -1;

    for (this.isReset || this._reset(), this.isReset = !1; this._getProgress() > r && this._getTotalSolved() < this.puzzle.cells.length;) {
      for (new Date().getTime(), r = this._getProgress(), o = 0; o < this.lines.length; o++) {
        (n = this.lines[o]).solved || this.eliminateImpossibleFits(n), n.solved || this.findKnownPositivesAndNegatives(n), n.solved || this.findSectionDefiningChains(n), n.solved || this.findAnchoredSections(n), n.solved || this.findCompletedSections(n), n.solved || this.findCompletedLines(n);
      }

      new Date().getTime();
    }

    t = this._getTotalSolved() === this.puzzle.cells.length;
    e = (new Date().getTime() - i) / 1e3;
    this.elapsedTime = e;
    return t;
  };

  t.prototype.eliminateImpossibleFits = function (t) {
    var e;
    var o;
    var n;
    var r;
    var a;
    var s;
    var c;
    var l;
    var u;
    var p;
    var d = 0;
    var h = t.length - t.minimumSectionLength;
    if (0 === t.sections.length) for (u = 0; u < t.cells.length; u++) {
      this._setCellSolution(t.cells[u], 0);
    }

    for (p = 0; p < t.length && 0 === t.cells[p].aiSolution; p++) {
      d++;
    }

    for (p = t.length - 1; p >= 0 && 0 === t.cells[p].aiSolution; p--) {
      h--;
    }

    for (a = 0; a < t.sections.length; a++) {
      for (o = t.sections[a], r = _utility["default"].cloneArray(o.possibleStartIndexes), s = 0; s < o.possibleStartIndexes.length; s++) {
        for (n = o.possibleStartIndexes[s], c = t.cells[n + o.length], (n < d || n > h) && (r = _utility["default"].removeFromArray(r, n)), c && 1 === c.aiSolution && (r = _utility["default"].removeFromArray(r, n)), l = (l = n + o.length - 1) > t.length - 1 ? t.length - 1 : l, e = n; e <= l; e++) {
          (e > t.length - 1 || 0 === t.cells[e].aiSolution) && (r = _utility["default"].removeFromArray(r, n));
        }
      }

      d += o.length + 1;
      h += o.length + 1;
      o.possibleStartIndexes = r;
    }
  };

  t.prototype.findKnownPositivesAndNegatives = function (t) {
    var e;
    var o;
    var n;
    var r;
    var a;
    var s;
    var c;
    var l;
    var u;
    var p;

    var d = _utility["default"].getZeroFilledArray(t.length);

    for (e = 0; e < t.sections.length; e++) {
      for (o = t.sections[e], n = _utility["default"].getZeroFilledArray(t.length), r = 0; r < o.possibleStartIndexes.length; r++) {
        for (s = (a = o.possibleStartIndexes[r]) + o.length - 1, c = a; c <= s; c++) {
          n[c]++, d[c]++;
        }
      }

      for (l = 0; l < n.length; l++) {
        u = n[l], (p = t.cells[l]) && null === p.aiSolution && u === o.possibleStartIndexes.length && this._setCellSolution(p, 1);
      }
    }

    for (l = 0; l < d.length; l++) {
      u = d[l], (p = t.cells[l]) && null === p.aiSolution && 0 === u && this._setCellSolution(p, 0);
    }
  };

  t.prototype.findAnchoredSections = function (t) {
    var e;
    var o;
    var n;
    var i;

    if (t.sections.length > 0) {
      for (n = t.sections[0], i = t.sections[t.sections.length - 1], o = null, e = 0; e < t.cells.length && null !== t.cells[e].aiSolution; e++) {
        if (1 === t.cells[e].aiSolution) {
          o = [e, e + n.length - 1];
          break;
        }
      }

      if (null !== o) {
        for (e = o[0]; e <= o[1]; e++) {
          t.cells[e] && this._setCellSolution(t.cells[e], 1);
        }

        t.cells[e] && this._setCellSolution(t.cells[e], 0);
      }

      for (o = null, e = t.cells.length - 1; e >= 0 && null !== t.cells[e].aiSolution; e--) {
        if (1 === t.cells[e].aiSolution) {
          o = [e - i.length + 1, e];
          break;
        }
      }

      if (null !== o) {
        for (e = o[0]; e <= o[1]; e++) {
          t.cells[e] && this._setCellSolution(t.cells[e], 1);
        }

        t.cells[o[0] - 1] && this._setCellSolution(t.cells[o[0] - 1], 0);
      }
    }
  };

  t.prototype.findSectionDefiningChains = function (t) {
    var e;
    var o;
    var n;
    var r;
    var a;
    var s = [];
    var c = 0;

    for (a = _utility["default"].cloneArray(t.sections).sort(function (t, e) {
      return t.length > e.length ? -1 : 1;
    })[0], e = 0; e < t.cells.length; e++) {
      1 === (o = t.cells[e]).aiSolution && (1 !== c ? (n = {
        start: e,
        length: 1
      }, s.push(n)) : n && n.length++), c = o.aiSolution;
    }

    for (r = 0; r < s.length; r++) {
      (n = s[r]).length === a.length && (t.cells[n.start - 1] && this._setCellSolution(t.cells[n.start - 1], 0), t.cells[n.start + a.length] && this._setCellSolution(t.cells[n.start + a.length], 0), a.solved = !0);
    }
  };

  t.prototype.findCompletedSections = function (t) {
    var e;
    var o;
    var n;
    var i;

    for (e = 0; e < t.sections.length; e++) {
      (o = t.sections[e]).solved || 1 !== o.possibleStartIndexes.length || (n = o.possibleStartIndexes[0] - 1, i = o.possibleStartIndexes[0] + o.length, t.cells[n] && null === t.cells[n].aiSolution && this._setCellSolution(t.cells[n], 0), t.cells[i] && null === t.cells[i].aiSolution && this._setCellSolution(t.cells[i], 0), o.solved = !0);
    }
  };

  t.prototype.findCompletedLines = function (t) {
    var e;
    var o;
    var n;
    var i = 0;
    var r = 0;

    for (e = 0; e < t.sections.length; e++) {
      i += t.sections[e].length;
    }

    for (o = 0; o < t.cells.length; o++) {
      r += 1 === (n = t.cells[o]).aiSolution ? 1 : 0;
    }

    if (i === r) for (o = 0; o < t.cells.length; o++) {
      null === (n = t.cells[o]).aiSolution && this._setCellSolution(n, 0);
    }
  };

  t.prototype._reset = function () {
    var t;
    var e;
    var o;
    var i;
    var r;
    var a;
    var s;
    var c;
    var l;
    var u;
    var p = [];
    var d = [];

    for (this.isReset = !0, this.elapsedTime = 0, this.solutionLog = [], this.lines = [], e = 0; e < this.puzzle.cells.length; e++) {
      this.puzzle.cells[e].aiSolution = null;
    }

    for (t = 0; t < this.puzzle.width; t++) {
      p.push(t);
    }

    for (t = 0; t < this.puzzle.height; t++) {
      d.push(t);
    }

    for (o = 0; o < this.puzzle.rowHints.length; o++) {
      if (i = this.puzzle.rowHints[o], r = this.puzzle.getRowCells(o)) {
        for (a = new _puzzleLine["default"]({
          type: "row",
          index: o,
          length: this.puzzle.width,
          cells: r
        }), s = 0; s < i.length; s++) {
          c = i[s], a.sections.push({
            index: s,
            length: c,
            possibleStartIndexes: p,
            knownIndexes: [],
            solved: !1
          }), a.minimumSectionLength += c + 1;
        }

        a.minimumSectionLength--;
        this.lines.push(a);
      }
    }

    for (l = 0; l < this.puzzle.columnHints.length; l++) {
      for (u = this.puzzle.columnHints[l], a = new _puzzleLine["default"]({
        type: "column",
        index: l,
        length: this.puzzle.height,
        cells: this.puzzle.getColumnCells(l)
      }), s = 0; s < u.length; s++) {
        c = u[s], a.sections.push({
          index: s,
          length: c,
          possibleStartIndexes: d,
          knownIndexes: [],
          solved: !1
        }), a.minimumSectionLength += c + 1;
      }

      a.minimumSectionLength--;
      this.lines.push(a);
    }
  };

  t.prototype._setCellSolution = function (t, e) {
    var o;
    var n;
    var i;
    var r;
    var a;
    var s;
    var c;
    if (null === t.aiSolution) for (o = 0; o < this.lines.length; o++) {
      if (i = "row" === (n = this.lines[o]).type && n.index === t.row, r = "column" === n.type && n.index === t.column, a = 0, i || r) {
        for (s = 0; s < n.cells.length; s++) {
          (c = n.cells[s]).index === t.index ? (c.aiSolution = e, a++) : null !== c.aiSolution && a++;
        }

        a === n.length && (n.solved = !0);
      }
    }
  };

  t.prototype._getTotalSolved = function () {
    var t;
    var e = 0;

    for (t = 0; t < this.puzzle.cells.length; t++) {
      e += null !== this.puzzle.cells[t].aiSolution ? 1 : 0;
    }

    return e;
  };

  t.prototype._getProgress = function () {
    var t;
    var e;
    var o;
    var n = 0;
    var i = 0;

    for (t = 0; t < this.lines.length; t++) {
      for (n += (e = this.lines[t]).sections.length * ("row" === e.type ? this.puzzle.width : this.puzzle.height), o = 0; o < e.sections.length; o++) {
        i += e.sections[o].possibleStartIndexes.length;
      }
    }

    return n - i;
  };

  return t;
}();

exports["default"] = r;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcU29sdmVyLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiX3B1enpsZUxpbmUiLCJyZXF1aXJlIiwiX3V0aWxpdHkiLCJyIiwidCIsInB1enpsZSIsIl9yZXNldCIsInByb3RvdHlwZSIsInNvbHZlIiwiZSIsIm8iLCJuIiwiaSIsIkRhdGUiLCJnZXRUaW1lIiwiaXNSZXNldCIsIl9nZXRQcm9ncmVzcyIsIl9nZXRUb3RhbFNvbHZlZCIsImNlbGxzIiwibGVuZ3RoIiwibGluZXMiLCJzb2x2ZWQiLCJlbGltaW5hdGVJbXBvc3NpYmxlRml0cyIsImZpbmRLbm93blBvc2l0aXZlc0FuZE5lZ2F0aXZlcyIsImZpbmRTZWN0aW9uRGVmaW5pbmdDaGFpbnMiLCJmaW5kQW5jaG9yZWRTZWN0aW9ucyIsImZpbmRDb21wbGV0ZWRTZWN0aW9ucyIsImZpbmRDb21wbGV0ZWRMaW5lcyIsImVsYXBzZWRUaW1lIiwiYSIsInMiLCJjIiwibCIsInUiLCJwIiwiZCIsImgiLCJtaW5pbXVtU2VjdGlvbkxlbmd0aCIsInNlY3Rpb25zIiwiX3NldENlbGxTb2x1dGlvbiIsImFpU29sdXRpb24iLCJjbG9uZUFycmF5IiwicG9zc2libGVTdGFydEluZGV4ZXMiLCJyZW1vdmVGcm9tQXJyYXkiLCJnZXRaZXJvRmlsbGVkQXJyYXkiLCJzb3J0Iiwic3RhcnQiLCJwdXNoIiwic29sdXRpb25Mb2ciLCJ3aWR0aCIsImhlaWdodCIsInJvd0hpbnRzIiwiZ2V0Um93Q2VsbHMiLCJ0eXBlIiwiaW5kZXgiLCJrbm93bkluZGV4ZXMiLCJjb2x1bW5IaW50cyIsImdldENvbHVtbkNlbGxzIiwicm93IiwiY29sdW1uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0VBQUNDLEtBQUssRUFBRSxDQUFDO0FB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LE1BQTNCLEVBQW1DZixDQUFDLEVBQXBDO01BQ0ksS0FDSU8sQ0FBQyxJQUFJLENBQUNGLENBQUMsR0FBRyxLQUFLVyxLQUFMLENBQVdoQixDQUFYLENBQUwsRUFBb0JrQyxRQUFwQixDQUE2Qm5CLE1BQTdCLElBQXVDLFVBQVVWLENBQUMsQ0FBQzRDLElBQVosR0FBbUIsS0FBS2hELE1BQUwsQ0FBWTRDLEtBQS9CLEdBQXVDLEtBQUs1QyxNQUFMLENBQVk2QyxNQUExRixDQUFMLEVBQ0l4QyxDQUFDLEdBQUcsQ0FGWixFQUdJQSxDQUFDLEdBQUdELENBQUMsQ0FBQzZCLFFBQUYsQ0FBV25CLE1BSG5CLEVBSUlULENBQUMsRUFKTDtRQU1JRSxDQUFDLElBQUlILENBQUMsQ0FBQzZCLFFBQUYsQ0FBVzVCLENBQVgsRUFBY2dDLG9CQUFkLENBQW1DdkIsTUFBeEM7TUFOSjtJQURKOztJQVFBLE9BQU9SLENBQUMsR0FBR0MsQ0FBWDtFQUNILENBZkQ7O0VBZ0JBLE9BQU9SLENBQVA7QUFDSCxDQW5STyxFQUFSOztBQW9SQU4sT0FBTyxXQUFQLEdBQWtCSyxDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7dmFsdWU6ICEwfSk7XG52YXIgX3B1enpsZUxpbmUgPSByZXF1aXJlKFwiUHV6emxlTGluZVwiKTtcbnZhciBfdXRpbGl0eSA9IHJlcXVpcmUoXCJVdGlsaXR5XCIpO1xudmFyIHIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHQodCkge1xuICAgICAgICB0aGlzLnB1enpsZSA9IHQ7XG4gICAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgfVxuICAgIHQucHJvdG90eXBlLnNvbHZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHZhciBvO1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgdmFyIGkgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgdmFyIHIgPSAtMTtcbiAgICAgICAgZm9yIChcbiAgICAgICAgICAgIHRoaXMuaXNSZXNldCB8fCB0aGlzLl9yZXNldCgpLCB0aGlzLmlzUmVzZXQgPSAhMTtcbiAgICAgICAgICAgIHRoaXMuX2dldFByb2dyZXNzKCkgPiByICYmIHRoaXMuX2dldFRvdGFsU29sdmVkKCkgPCB0aGlzLnB1enpsZS5jZWxscy5sZW5ndGg7XG5cbiAgICAgICAgKSB7XG4gICAgICAgICAgICBmb3IgKG5ldyBEYXRlKCkuZ2V0VGltZSgpLCByID0gdGhpcy5fZ2V0UHJvZ3Jlc3MoKSwgbyA9IDA7IG8gPCB0aGlzLmxpbmVzLmxlbmd0aDsgbysrKVxuICAgICAgICAgICAgICAgIChuID0gdGhpcy5saW5lc1tvXSkuc29sdmVkIHx8IHRoaXMuZWxpbWluYXRlSW1wb3NzaWJsZUZpdHMobiksXG4gICAgICAgICAgICAgICAgICAgIG4uc29sdmVkIHx8IHRoaXMuZmluZEtub3duUG9zaXRpdmVzQW5kTmVnYXRpdmVzKG4pLFxuICAgICAgICAgICAgICAgICAgICBuLnNvbHZlZCB8fCB0aGlzLmZpbmRTZWN0aW9uRGVmaW5pbmdDaGFpbnMobiksXG4gICAgICAgICAgICAgICAgICAgIG4uc29sdmVkIHx8IHRoaXMuZmluZEFuY2hvcmVkU2VjdGlvbnMobiksXG4gICAgICAgICAgICAgICAgICAgIG4uc29sdmVkIHx8IHRoaXMuZmluZENvbXBsZXRlZFNlY3Rpb25zKG4pLFxuICAgICAgICAgICAgICAgICAgICBuLnNvbHZlZCB8fCB0aGlzLmZpbmRDb21wbGV0ZWRMaW5lcyhuKTtcbiAgICAgICAgICAgIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICAgIHQgPSB0aGlzLl9nZXRUb3RhbFNvbHZlZCgpID09PSB0aGlzLnB1enpsZS5jZWxscy5sZW5ndGg7XG4gICAgICAgIGUgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBpKSAvIDFlMztcbiAgICAgICAgdGhpcy5lbGFwc2VkVGltZSA9IGU7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZWxpbWluYXRlSW1wb3NzaWJsZUZpdHMgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgdmFyIG87XG4gICAgICAgIHZhciBuO1xuICAgICAgICB2YXIgcjtcbiAgICAgICAgdmFyIGE7XG4gICAgICAgIHZhciBzO1xuICAgICAgICB2YXIgYztcbiAgICAgICAgdmFyIGw7XG4gICAgICAgIHZhciB1O1xuICAgICAgICB2YXIgcDtcbiAgICAgICAgdmFyIGQgPSAwO1xuICAgICAgICB2YXIgaCA9IHQubGVuZ3RoIC0gdC5taW5pbXVtU2VjdGlvbkxlbmd0aDtcbiAgICAgICAgaWYgKDAgPT09IHQuc2VjdGlvbnMubGVuZ3RoKSBmb3IgKHUgPSAwOyB1IDwgdC5jZWxscy5sZW5ndGg7IHUrKykgdGhpcy5fc2V0Q2VsbFNvbHV0aW9uKHQuY2VsbHNbdV0sIDApO1xuICAgICAgICBmb3IgKHAgPSAwOyBwIDwgdC5sZW5ndGggJiYgMCA9PT0gdC5jZWxsc1twXS5haVNvbHV0aW9uOyBwKyspIGQrKztcbiAgICAgICAgZm9yIChwID0gdC5sZW5ndGggLSAxOyBwID49IDAgJiYgMCA9PT0gdC5jZWxsc1twXS5haVNvbHV0aW9uOyBwLS0pIGgtLTtcbiAgICAgICAgZm9yIChhID0gMDsgYSA8IHQuc2VjdGlvbnMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgbyA9IHQuc2VjdGlvbnNbYV0sIHIgPSBfdXRpbGl0eS5kZWZhdWx0LmNsb25lQXJyYXkoby5wb3NzaWJsZVN0YXJ0SW5kZXhlcyksIHMgPSAwO1xuICAgICAgICAgICAgICAgIHMgPCBvLnBvc3NpYmxlU3RhcnRJbmRleGVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBzKytcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgICAgICBuID0gby5wb3NzaWJsZVN0YXJ0SW5kZXhlc1tzXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSB0LmNlbGxzW24gKyBvLmxlbmd0aF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAobiA8IGQgfHwgbiA+IGgpICYmIChyID0gX3V0aWxpdHkuZGVmYXVsdC5yZW1vdmVGcm9tQXJyYXkociwgbikpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYyAmJiAxID09PSBjLmFpU29sdXRpb24gJiYgKHIgPSBfdXRpbGl0eS5kZWZhdWx0LnJlbW92ZUZyb21BcnJheShyLCBuKSksXG4gICAgICAgICAgICAgICAgICAgICAgICBsID0gKGwgPSBuICsgby5sZW5ndGggLSAxKSA+IHQubGVuZ3RoIC0gMSA/IHQubGVuZ3RoIC0gMSA6IGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBlID0gbjtcbiAgICAgICAgICAgICAgICAgICAgZSA8PSBsO1xuICAgICAgICAgICAgICAgICAgICBlKytcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIChlID4gdC5sZW5ndGggLSAxIHx8IDAgPT09IHQuY2VsbHNbZV0uYWlTb2x1dGlvbikgJiYgKHIgPSBfdXRpbGl0eS5kZWZhdWx0LnJlbW92ZUZyb21BcnJheShyLCBuKSk7XG4gICAgICAgICAgICBkICs9IG8ubGVuZ3RoICsgMTtcbiAgICAgICAgICAgIGggKz0gby5sZW5ndGggKyAxO1xuICAgICAgICAgICAgby5wb3NzaWJsZVN0YXJ0SW5kZXhlcyA9IHI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmZpbmRLbm93blBvc2l0aXZlc0FuZE5lZ2F0aXZlcyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB2YXIgbztcbiAgICAgICAgdmFyIG47XG4gICAgICAgIHZhciByO1xuICAgICAgICB2YXIgYTtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIHZhciBjO1xuICAgICAgICB2YXIgbDtcbiAgICAgICAgdmFyIHU7XG4gICAgICAgIHZhciBwO1xuICAgICAgICB2YXIgZCA9IF91dGlsaXR5LmRlZmF1bHQuZ2V0WmVyb0ZpbGxlZEFycmF5KHQubGVuZ3RoKTtcbiAgICAgICAgZm9yIChlID0gMDsgZSA8IHQuc2VjdGlvbnMubGVuZ3RoOyBlKyspIHtcbiAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgbyA9IHQuc2VjdGlvbnNbZV0sIG4gPSBfdXRpbGl0eS5kZWZhdWx0LmdldFplcm9GaWxsZWRBcnJheSh0Lmxlbmd0aCksIHIgPSAwO1xuICAgICAgICAgICAgICAgIHIgPCBvLnBvc3NpYmxlU3RhcnRJbmRleGVzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICByKytcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBmb3IgKHMgPSAoYSA9IG8ucG9zc2libGVTdGFydEluZGV4ZXNbcl0pICsgby5sZW5ndGggLSAxLCBjID0gYTsgYyA8PSBzOyBjKyspIG5bY10rKywgZFtjXSsrO1xuICAgICAgICAgICAgZm9yIChsID0gMDsgbCA8IG4ubGVuZ3RoOyBsKyspXG4gICAgICAgICAgICAgICAgKHUgPSBuW2xdKSxcbiAgICAgICAgICAgICAgICAgICAgKHAgPSB0LmNlbGxzW2xdKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCA9PT0gcC5haVNvbHV0aW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICB1ID09PSBvLnBvc3NpYmxlU3RhcnRJbmRleGVzLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0Q2VsbFNvbHV0aW9uKHAsIDEpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAobCA9IDA7IGwgPCBkLmxlbmd0aDsgbCsrKVxuICAgICAgICAgICAgKHUgPSBkW2xdKSwgKHAgPSB0LmNlbGxzW2xdKSAmJiBudWxsID09PSBwLmFpU29sdXRpb24gJiYgMCA9PT0gdSAmJiB0aGlzLl9zZXRDZWxsU29sdXRpb24ocCwgMCk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5maW5kQW5jaG9yZWRTZWN0aW9ucyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB2YXIgbztcbiAgICAgICAgdmFyIG47XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpZiAodC5zZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgIG4gPSB0LnNlY3Rpb25zWzBdLCBpID0gdC5zZWN0aW9uc1t0LnNlY3Rpb25zLmxlbmd0aCAtIDFdLCBvID0gbnVsbCwgZSA9IDA7XG4gICAgICAgICAgICAgICAgZSA8IHQuY2VsbHMubGVuZ3RoICYmIG51bGwgIT09IHQuY2VsbHNbZV0uYWlTb2x1dGlvbjtcbiAgICAgICAgICAgICAgICBlKytcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBpZiAoMSA9PT0gdC5jZWxsc1tlXS5haVNvbHV0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG8gPSBbZSwgZSArIG4ubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChudWxsICE9PSBvKSB7XG4gICAgICAgICAgICAgICAgZm9yIChlID0gb1swXTsgZSA8PSBvWzFdOyBlKyspIHQuY2VsbHNbZV0gJiYgdGhpcy5fc2V0Q2VsbFNvbHV0aW9uKHQuY2VsbHNbZV0sIDEpO1xuICAgICAgICAgICAgICAgIHQuY2VsbHNbZV0gJiYgdGhpcy5fc2V0Q2VsbFNvbHV0aW9uKHQuY2VsbHNbZV0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChvID0gbnVsbCwgZSA9IHQuY2VsbHMubGVuZ3RoIC0gMTsgZSA+PSAwICYmIG51bGwgIT09IHQuY2VsbHNbZV0uYWlTb2x1dGlvbjsgZS0tKVxuICAgICAgICAgICAgICAgIGlmICgxID09PSB0LmNlbGxzW2VdLmFpU29sdXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbyA9IFtlIC0gaS5sZW5ndGggKyAxLCBlXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgIT09IG8pIHtcbiAgICAgICAgICAgICAgICBmb3IgKGUgPSBvWzBdOyBlIDw9IG9bMV07IGUrKykgdC5jZWxsc1tlXSAmJiB0aGlzLl9zZXRDZWxsU29sdXRpb24odC5jZWxsc1tlXSwgMSk7XG4gICAgICAgICAgICAgICAgdC5jZWxsc1tvWzBdIC0gMV0gJiYgdGhpcy5fc2V0Q2VsbFNvbHV0aW9uKHQuY2VsbHNbb1swXSAtIDFdLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZmluZFNlY3Rpb25EZWZpbmluZ0NoYWlucyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB2YXIgbztcbiAgICAgICAgdmFyIG47XG4gICAgICAgIHZhciByO1xuICAgICAgICB2YXIgYTtcbiAgICAgICAgdmFyIHMgPSBbXTtcbiAgICAgICAgdmFyIGMgPSAwO1xuICAgICAgICBmb3IgKFxuICAgICAgICAgICAgYSA9IF91dGlsaXR5LmRlZmF1bHQuY2xvbmVBcnJheSh0LnNlY3Rpb25zKS5zb3J0KGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQubGVuZ3RoID4gZS5sZW5ndGggPyAtMSA6IDE7XG4gICAgICAgICAgICB9KVswXSxcbiAgICAgICAgICAgICAgICBlID0gMDtcbiAgICAgICAgICAgIGUgPCB0LmNlbGxzLmxlbmd0aDtcbiAgICAgICAgICAgIGUrK1xuICAgICAgICApXG4gICAgICAgICAgICAxID09PSAobyA9IHQuY2VsbHNbZV0pLmFpU29sdXRpb24gJiYgKDEgIT09IGMgPyAoKG4gPSB7c3RhcnQ6IGUsIGxlbmd0aDogMX0pLCBzLnB1c2gobikpIDogbiAmJiBuLmxlbmd0aCsrKSxcbiAgICAgICAgICAgICAgICAoYyA9IG8uYWlTb2x1dGlvbik7XG4gICAgICAgIGZvciAociA9IDA7IHIgPCBzLmxlbmd0aDsgcisrKVxuICAgICAgICAgICAgKG4gPSBzW3JdKS5sZW5ndGggPT09IGEubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgKHQuY2VsbHNbbi5zdGFydCAtIDFdICYmIHRoaXMuX3NldENlbGxTb2x1dGlvbih0LmNlbGxzW24uc3RhcnQgLSAxXSwgMCksXG4gICAgICAgICAgICAgICAgdC5jZWxsc1tuLnN0YXJ0ICsgYS5sZW5ndGhdICYmIHRoaXMuX3NldENlbGxTb2x1dGlvbih0LmNlbGxzW24uc3RhcnQgKyBhLmxlbmd0aF0sIDApLFxuICAgICAgICAgICAgICAgIChhLnNvbHZlZCA9ICEwKSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5maW5kQ29tcGxldGVkU2VjdGlvbnMgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgdmFyIG87XG4gICAgICAgIHZhciBuO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgZm9yIChlID0gMDsgZSA8IHQuc2VjdGlvbnMubGVuZ3RoOyBlKyspXG4gICAgICAgICAgICAobyA9IHQuc2VjdGlvbnNbZV0pLnNvbHZlZCB8fFxuICAgICAgICAgICAgICAgIDEgIT09IG8ucG9zc2libGVTdGFydEluZGV4ZXMubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgKChuID0gby5wb3NzaWJsZVN0YXJ0SW5kZXhlc1swXSAtIDEpLFxuICAgICAgICAgICAgICAgIChpID0gby5wb3NzaWJsZVN0YXJ0SW5kZXhlc1swXSArIG8ubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICB0LmNlbGxzW25dICYmIG51bGwgPT09IHQuY2VsbHNbbl0uYWlTb2x1dGlvbiAmJiB0aGlzLl9zZXRDZWxsU29sdXRpb24odC5jZWxsc1tuXSwgMCksXG4gICAgICAgICAgICAgICAgdC5jZWxsc1tpXSAmJiBudWxsID09PSB0LmNlbGxzW2ldLmFpU29sdXRpb24gJiYgdGhpcy5fc2V0Q2VsbFNvbHV0aW9uKHQuY2VsbHNbaV0sIDApLFxuICAgICAgICAgICAgICAgIChvLnNvbHZlZCA9ICEwKSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5maW5kQ29tcGxldGVkTGluZXMgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgdmFyIG87XG4gICAgICAgIHZhciBuO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIHZhciByID0gMDtcbiAgICAgICAgZm9yIChlID0gMDsgZSA8IHQuc2VjdGlvbnMubGVuZ3RoOyBlKyspIGkgKz0gdC5zZWN0aW9uc1tlXS5sZW5ndGg7XG4gICAgICAgIGZvciAobyA9IDA7IG8gPCB0LmNlbGxzLmxlbmd0aDsgbysrKSByICs9IDEgPT09IChuID0gdC5jZWxsc1tvXSkuYWlTb2x1dGlvbiA/IDEgOiAwO1xuICAgICAgICBpZiAoaSA9PT0gcilcbiAgICAgICAgICAgIGZvciAobyA9IDA7IG8gPCB0LmNlbGxzLmxlbmd0aDsgbysrKSBudWxsID09PSAobiA9IHQuY2VsbHNbb10pLmFpU29sdXRpb24gJiYgdGhpcy5fc2V0Q2VsbFNvbHV0aW9uKG4sIDApO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHZhciBvO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgdmFyIHI7XG4gICAgICAgIHZhciBhO1xuICAgICAgICB2YXIgcztcbiAgICAgICAgdmFyIGM7XG4gICAgICAgIHZhciBsO1xuICAgICAgICB2YXIgdTtcbiAgICAgICAgdmFyIHAgPSBbXTtcbiAgICAgICAgdmFyIGQgPSBbXTtcbiAgICAgICAgZm9yIChcbiAgICAgICAgICAgIHRoaXMuaXNSZXNldCA9ICEwLCB0aGlzLmVsYXBzZWRUaW1lID0gMCwgdGhpcy5zb2x1dGlvbkxvZyA9IFtdLCB0aGlzLmxpbmVzID0gW10sIGUgPSAwO1xuICAgICAgICAgICAgZSA8IHRoaXMucHV6emxlLmNlbGxzLmxlbmd0aDtcbiAgICAgICAgICAgIGUrK1xuICAgICAgICApXG4gICAgICAgICAgICB0aGlzLnB1enpsZS5jZWxsc1tlXS5haVNvbHV0aW9uID0gbnVsbDtcbiAgICAgICAgZm9yICh0ID0gMDsgdCA8IHRoaXMucHV6emxlLndpZHRoOyB0KyspIHAucHVzaCh0KTtcbiAgICAgICAgZm9yICh0ID0gMDsgdCA8IHRoaXMucHV6emxlLmhlaWdodDsgdCsrKSBkLnB1c2godCk7XG4gICAgICAgIGZvciAobyA9IDA7IG8gPCB0aGlzLnB1enpsZS5yb3dIaW50cy5sZW5ndGg7IG8rKylcbiAgICAgICAgICAgIGlmICgoKGkgPSB0aGlzLnB1enpsZS5yb3dIaW50c1tvXSksIChyID0gdGhpcy5wdXp6bGUuZ2V0Um93Q2VsbHMobykpKSkge1xuICAgICAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgICAgIGEgPSBuZXcgX3B1enpsZUxpbmUuZGVmYXVsdCh7dHlwZTogXCJyb3dcIiwgaW5kZXg6IG8sIGxlbmd0aDogdGhpcy5wdXp6bGUud2lkdGgsIGNlbGxzOiByfSksIHMgPSAwO1xuICAgICAgICAgICAgICAgICAgICBzIDwgaS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHMrK1xuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgKGMgPSBpW3NdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGEuc2VjdGlvbnMucHVzaCh7aW5kZXg6IHMsIGxlbmd0aDogYywgcG9zc2libGVTdGFydEluZGV4ZXM6IHAsIGtub3duSW5kZXhlczogW10sIHNvbHZlZDogITF9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChhLm1pbmltdW1TZWN0aW9uTGVuZ3RoICs9IGMgKyAxKTtcbiAgICAgICAgICAgICAgICBhLm1pbmltdW1TZWN0aW9uTGVuZ3RoLS07XG4gICAgICAgICAgICAgICAgdGhpcy5saW5lcy5wdXNoKGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICBmb3IgKGwgPSAwOyBsIDwgdGhpcy5wdXp6bGUuY29sdW1uSGludHMubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgdSA9IHRoaXMucHV6emxlLmNvbHVtbkhpbnRzW2xdLFxuICAgICAgICAgICAgICAgICAgICBhID0gbmV3IF9wdXp6bGVMaW5lLmRlZmF1bHQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjb2x1bW5cIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiBsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuZ3RoOiB0aGlzLnB1enpsZS5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsczogdGhpcy5wdXp6bGUuZ2V0Q29sdW1uQ2VsbHMobClcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIHMgPSAwO1xuICAgICAgICAgICAgICAgIHMgPCB1Lmxlbmd0aDtcbiAgICAgICAgICAgICAgICBzKytcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAoYyA9IHVbc10pLFxuICAgICAgICAgICAgICAgICAgICBhLnNlY3Rpb25zLnB1c2goe2luZGV4OiBzLCBsZW5ndGg6IGMsIHBvc3NpYmxlU3RhcnRJbmRleGVzOiBkLCBrbm93bkluZGV4ZXM6IFtdLCBzb2x2ZWQ6ICExfSksXG4gICAgICAgICAgICAgICAgICAgIChhLm1pbmltdW1TZWN0aW9uTGVuZ3RoICs9IGMgKyAxKTtcbiAgICAgICAgICAgIGEubWluaW11bVNlY3Rpb25MZW5ndGgtLTtcbiAgICAgICAgICAgIHRoaXMubGluZXMucHVzaChhKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdC5wcm90b3R5cGUuX3NldENlbGxTb2x1dGlvbiA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgIHZhciBvO1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIHZhciByO1xuICAgICAgICB2YXIgYTtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIHZhciBjO1xuICAgICAgICBpZiAobnVsbCA9PT0gdC5haVNvbHV0aW9uKVxuICAgICAgICAgICAgZm9yIChvID0gMDsgbyA8IHRoaXMubGluZXMubGVuZ3RoOyBvKyspXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICAoKGkgPSBcInJvd1wiID09PSAobiA9IHRoaXMubGluZXNbb10pLnR5cGUgJiYgbi5pbmRleCA9PT0gdC5yb3cpLFxuICAgICAgICAgICAgICAgICAgICAociA9IFwiY29sdW1uXCIgPT09IG4udHlwZSAmJiBuLmluZGV4ID09PSB0LmNvbHVtbiksXG4gICAgICAgICAgICAgICAgICAgIChhID0gMCksXG4gICAgICAgICAgICAgICAgICAgIGkgfHwgcilcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChzID0gMDsgcyA8IG4uY2VsbHMubGVuZ3RoOyBzKyspXG4gICAgICAgICAgICAgICAgICAgICAgICAoYyA9IG4uY2VsbHNbc10pLmluZGV4ID09PSB0LmluZGV4ID8gKChjLmFpU29sdXRpb24gPSBlKSwgYSsrKSA6IG51bGwgIT09IGMuYWlTb2x1dGlvbiAmJiBhKys7XG4gICAgICAgICAgICAgICAgICAgIGEgPT09IG4ubGVuZ3RoICYmIChuLnNvbHZlZCA9ICEwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5fZ2V0VG90YWxTb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICB2YXIgZSA9IDA7XG4gICAgICAgIGZvciAodCA9IDA7IHQgPCB0aGlzLnB1enpsZS5jZWxscy5sZW5ndGg7IHQrKykgZSArPSBudWxsICE9PSB0aGlzLnB1enpsZS5jZWxsc1t0XS5haVNvbHV0aW9uID8gMSA6IDA7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuX2dldFByb2dyZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHZhciBvO1xuICAgICAgICB2YXIgbiA9IDA7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgZm9yICh0ID0gMDsgdCA8IHRoaXMubGluZXMubGVuZ3RoOyB0KyspXG4gICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgIG4gKz0gKGUgPSB0aGlzLmxpbmVzW3RdKS5zZWN0aW9ucy5sZW5ndGggKiAoXCJyb3dcIiA9PT0gZS50eXBlID8gdGhpcy5wdXp6bGUud2lkdGggOiB0aGlzLnB1enpsZS5oZWlnaHQpLFxuICAgICAgICAgICAgICAgICAgICBvID0gMDtcbiAgICAgICAgICAgICAgICBvIDwgZS5zZWN0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbysrXG4gICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaSArPSBlLnNlY3Rpb25zW29dLnBvc3NpYmxlU3RhcnRJbmRleGVzLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIG4gLSBpO1xuICAgIH07XG4gICAgcmV0dXJuIHQ7XG59KSgpO1xuZXhwb3J0cy5kZWZhdWx0ID0gcjtcbiJdfQ==