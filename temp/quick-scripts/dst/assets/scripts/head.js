
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/head.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'bd3b6EvuhVISo+Thy3/ym09', 'head');
// scripts/head.js

"use strict";

//电子邮件puhalskijsemen@gmail.com
//源码网站 开vpn全局模式打开 http://web3incubators.com/
//电报https://t.me/gamecode999
//网页客服 http://web3incubators.com/kefu.html
var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _evts = require("evts");

var _res = require("res");

var _global = require("global");

var _skinMgr = require("skinMgr");

var _pInfo = require("pInfo");

var p = cc._decorator;
var d = p.ccclass;
var h = p.property;

var f = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.bg = null;
    e.headIcon = null;
    return e;
  }

  __extends(e, t);

  e.prototype.onLoad = function () {
    this.eventFunc = this.onOperTap.bind(this);

    _evts["default"].opE.on(this.eventFunc);
  };

  e.prototype.onDestroy = function () {
    _evts["default"].opE.off(this.eventFunc);

    this.eventFunc = null;
  };

  e.prototype.onOperTap = function (t) {
    var e;
    (null == t ? void 0 : t.action) === _evts["default"].SKIN_CHG && (null === (e = t.data) || void 0 === e ? void 0 : e.skinId) === _skinMgr.SkinIdEnum.headFrame && t.data.isUse && this.updateHeadFrame();
  };

  e.prototype.updateHeadFrame = function (t) {
    var e = t || _pInfo["default"].ins.getUsingSkin()[_skinMgr.SkinIdEnum.headFrame];

    _skinMgr["default"].ins.updateHeadFrame(e, this.bg);
  };

  e.prototype.loadHeadImg = function (t, e) {
    var o = this;
    t ? cc.assetManager.loadRemote(t, {
      ext: _global.headImgExt
    }, function (t, e) {
      o.node && o.node.isValid && (t ? o.setDefaultHead() : o.headIcon.spriteFrame = new cc.SpriteFrame(e));
    }) : this.setDefaultHead();
    this.updateHeadFrame(e);
  };

  e.prototype.setDefaultHead = function () {
    var t = this;
    var e = this;

    _res["default"].ins.getBundleByString("resSps").then(function (o) {
      o.load("common/head_1", cc.SpriteFrame, function (o, n) {
        !o && t.node && t.node.isValid && (e.headIcon.spriteFrame = n);
      });
    })["catch"](function (t) {
      console.error("RTool.ins.getBundleByString('resSps')", t);
    });
  };

  __decorate([h(cc.Sprite)], e.prototype, "bg", void 0);

  __decorate([h(cc.Sprite)], e.prototype, "headIcon", void 0);

  return __decorate([d], e);
}(cc.Component);

exports["default"] = f;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcaGVhZC5qcyJdLCJuYW1lcyI6WyJuIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJfZXZ0cyIsInJlcXVpcmUiLCJfcmVzIiwiX2dsb2JhbCIsIl9za2luTWdyIiwiX3BJbmZvIiwicCIsImNjIiwiX2RlY29yYXRvciIsImQiLCJjY2NsYXNzIiwiaCIsInByb3BlcnR5IiwiZiIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJiZyIsImhlYWRJY29uIiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwib25Mb2FkIiwiZXZlbnRGdW5jIiwib25PcGVyVGFwIiwiYmluZCIsIm9wRSIsIm9uIiwib25EZXN0cm95Iiwib2ZmIiwiYWN0aW9uIiwiU0tJTl9DSEciLCJkYXRhIiwic2tpbklkIiwiU2tpbklkRW51bSIsImhlYWRGcmFtZSIsImlzVXNlIiwidXBkYXRlSGVhZEZyYW1lIiwiaW5zIiwiZ2V0VXNpbmdTa2luIiwibG9hZEhlYWRJbWciLCJvIiwiYXNzZXRNYW5hZ2VyIiwibG9hZFJlbW90ZSIsImV4dCIsImhlYWRJbWdFeHQiLCJub2RlIiwiaXNWYWxpZCIsInNldERlZmF1bHRIZWFkIiwic3ByaXRlRnJhbWUiLCJTcHJpdGVGcmFtZSIsImdldEJ1bmRsZUJ5U3RyaW5nIiwidGhlbiIsImxvYWQiLCJjb25zb2xlIiwiZXJyb3IiLCJfX2RlY29yYXRlIiwiU3ByaXRlIiwiQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSUEsQ0FBSjtBQUNBQyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0VBQUNDLEtBQUssRUFBRSxDQUFDO0FBQVQsQ0FBN0M7O0FBQ0EsSUFBSUMsS0FBSyxHQUFHQyxPQUFPLENBQUMsTUFBRCxDQUFuQjs7QUFDQSxJQUFJQyxJQUFJLEdBQUdELE9BQU8s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QUFKLENBQUYsQ0FBRCxFQUFpQjFDLENBQUMsQ0FBQ00sU0FBbkIsRUFBOEIsVUFBOUIsRUFBMEMsS0FBSyxDQUEvQyxDQUFWOztFQUNBLE9BQU9tQyxVQUFVLENBQUMsQ0FBQy9DLENBQUQsQ0FBRCxFQUFNTSxDQUFOLENBQWpCO0FBQ0gsQ0F2RE8sQ0F1RExSLEVBQUUsQ0FBQ21ELFNBdkRFLENBQVI7O0FBd0RBNUQsT0FBTyxXQUFQLEdBQWtCZSxDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiLy/nlLXlrZDpgq7ku7ZwdWhhbHNraWpzZW1lbkBnbWFpbC5jb21cbi8v5rqQ56CB572R56uZIOW8gHZwbuWFqOWxgOaooeW8j+aJk+W8gCBodHRwOi8vd2ViM2luY3ViYXRvcnMuY29tL1xuLy/nlLXmiqVodHRwczovL3QubWUvZ2FtZWNvZGU5OTlcbi8v572R6aG15a6i5pyNIGh0dHA6Ly93ZWIzaW5jdWJhdG9ycy5jb20va2VmdS5odG1sXG52YXIgbjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge3ZhbHVlOiAhMH0pO1xudmFyIF9ldnRzID0gcmVxdWlyZShcImV2dHNcIik7XG52YXIgX3JlcyA9IHJlcXVpcmUoXCJyZXNcIik7XG52YXIgX2dsb2JhbCA9IHJlcXVpcmUoXCJnbG9iYWxcIik7XG52YXIgX3NraW5NZ3IgPSByZXF1aXJlKFwic2tpbk1nclwiKTtcbnZhciBfcEluZm8gPSByZXF1aXJlKFwicEluZm9cIik7XG52YXIgcCA9IGNjLl9kZWNvcmF0b3I7XG52YXIgZCA9IHAuY2NjbGFzcztcbnZhciBoID0gcC5wcm9wZXJ0eTtcbnZhciBmID0gKGZ1bmN0aW9uICh0KSB7XG4gICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgdmFyIGUgPSAobnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XG4gICAgICAgIGUuYmcgPSBudWxsO1xuICAgICAgICBlLmhlYWRJY29uID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIF9fZXh0ZW5kcyhlLCB0KTtcbiAgICBlLnByb3RvdHlwZS5vbkxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRGdW5jID0gdGhpcy5vbk9wZXJUYXAuYmluZCh0aGlzKTtcbiAgICAgICAgX2V2dHMuZGVmYXVsdC5vcEUub24odGhpcy5ldmVudEZ1bmMpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUub25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfZXZ0cy5kZWZhdWx0Lm9wRS5vZmYodGhpcy5ldmVudEZ1bmMpO1xuICAgICAgICB0aGlzLmV2ZW50RnVuYyA9IG51bGw7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbk9wZXJUYXAgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuYWN0aW9uKSA9PT0gX2V2dHMuZGVmYXVsdC5TS0lOX0NIRyAmJlxuICAgICAgICAgICAgKG51bGwgPT09IChlID0gdC5kYXRhKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnNraW5JZCkgPT09IF9za2luTWdyLlNraW5JZEVudW0uaGVhZEZyYW1lICYmXG4gICAgICAgICAgICB0LmRhdGEuaXNVc2UgJiZcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSGVhZEZyYW1lKCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS51cGRhdGVIZWFkRnJhbWUgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IHQgfHwgX3BJbmZvLmRlZmF1bHQuaW5zLmdldFVzaW5nU2tpbigpW19za2luTWdyLlNraW5JZEVudW0uaGVhZEZyYW1lXTtcbiAgICAgICAgX3NraW5NZ3IuZGVmYXVsdC5pbnMudXBkYXRlSGVhZEZyYW1lKGUsIHRoaXMuYmcpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUubG9hZEhlYWRJbWcgPSBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICB2YXIgbyA9IHRoaXM7XG4gICAgICAgIHRcbiAgICAgICAgICAgID8gY2MuYXNzZXRNYW5hZ2VyLmxvYWRSZW1vdGUodCwge2V4dDogX2dsb2JhbC5oZWFkSW1nRXh0fSwgZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgIG8ubm9kZSAmJlxuICAgICAgICAgICAgICAgICAgICAgIG8ubm9kZS5pc1ZhbGlkICYmXG4gICAgICAgICAgICAgICAgICAgICAgKHQgPyBvLnNldERlZmF1bHRIZWFkKCkgOiAoby5oZWFkSWNvbi5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZShlKSkpO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgOiB0aGlzLnNldERlZmF1bHRIZWFkKCk7XG4gICAgICAgIHRoaXMudXBkYXRlSGVhZEZyYW1lKGUpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuc2V0RGVmYXVsdEhlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICBfcmVzLmRlZmF1bHQuaW5zXG4gICAgICAgICAgICAuZ2V0QnVuZGxlQnlTdHJpbmcoXCJyZXNTcHNcIilcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgby5sb2FkKFwiY29tbW9uL2hlYWRfMVwiLCBjYy5TcHJpdGVGcmFtZSwgZnVuY3Rpb24gKG8sIG4pIHtcbiAgICAgICAgICAgICAgICAgICAgIW8gJiYgdC5ub2RlICYmIHQubm9kZS5pc1ZhbGlkICYmIChlLmhlYWRJY29uLnNwcml0ZUZyYW1lID0gbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJUb29sLmlucy5nZXRCdW5kbGVCeVN0cmluZygncmVzU3BzJylcIiwgdCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW2goY2MuU3ByaXRlKV0sIGUucHJvdG90eXBlLCBcImJnXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbaChjYy5TcHJpdGUpXSwgZS5wcm90b3R5cGUsIFwiaGVhZEljb25cIiwgdm9pZCAwKTtcbiAgICByZXR1cm4gX19kZWNvcmF0ZShbZF0sIGUpO1xufSkoY2MuQ29tcG9uZW50KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGY7XG4iXX0=