
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/levelMgr.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '14951A6fINDx7WHHNNcam8b', 'levelMgr');
// scripts/levelMgr.js

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _evts = require("evts");

var _res = require("res");

var _uData = require("uData");

var _cfgMgr = require("cfgMgr");

var _global = require("global");

var _pInfo = require("pInfo");

var d = cc._decorator;
var h = d.ccclass;
var f = (d.property, function () {
  function t() {
    this._bgId = 0;
    this.oneChapLvlCount = 54;
  }

  var e;
  e = t;
  Object.defineProperty(t, "ins", {
    get: function get() {
      return this._ins || (this._ins = new e());
    },
    enumerable: !1,
    configurable: !0
  });

  t.prototype.getBgId = function () {
    return 0;
  };

  t.prototype.init = function () {
    return Promise.all([this.updateData(), this.updatePracticeData()]);
  };

  t.prototype.updateData = function () {
    var t = this;

    var e = _pInfo["default"].ins.getPuzzleLvl();

    var o = Math.ceil(e / this.oneChapLvlCount);

    if (o != this.bundleId) {
      this.bundleId = o;
      this.bundle && (this.bundle.releaseAll(), _uData["default"].ins._setLocalAndCloudData());
      var n = Math.floor((e - 1) / 54 % 4);
      (isNaN(n) || n < 0 || n > 3) && (n = 0);
      this._bgId = n;
      cc.assetManager.loadBundle("resSps", function (t, e) {
        var o = _global["default"].padScale ? "ipad/" : "";
        !t && e.load("pages/page_level/" + o + "bg" + n, cc.SpriteFrame);
      });
      var i = this.bundleName = 100 + this.bundleId + "";
      return new Promise(function (e, n) {
        var r = function r() {
          cc.assetManager.loadBundle(i, function (o, i) {
            o ? n() : (t.bundle = i, i.load("data", cc.BufferAsset, function (o, i) {
              o && n();
              t.data = new Uint32Array(i._buffer);
              e(1);
            }));
          });
        };

        o > 18 ? cc.assetManager.loadRemote(_global.OssConfig.levelUrl + i + "/data.bin", cc.BufferAsset, function (n, a) {
          n ? t.data || (i = 101 + (o - 1) % 18 + "", r()) : (t.data = new Uint32Array(a._buffer), e(1));
        }) : r();
      });
    }
  };

  t.prototype.updatePracticeData = function () {
    var t = this;
    return new Promise(function (e, o) {
      cc.assetManager.loadBundle("practice", function (n, i) {
        n ? o() : (i.load("data", cc.BufferAsset, function (e, n) {
          e && o();
          t.practiceData = new Uint32Array(n._buffer);
        }), e(i));
      });
    });
  };

  t.prototype.updateTmpData = function (t) {
    var e = this;
    this.tmpBundleId = t;
    var o = this.tmpBundleName = 100 + t + "";
    return new Promise(function (n, i) {
      var r = function r() {
        cc.assetManager.loadBundle(o, function (t, o) {
          t ? i() : (e.tmpBundle = o, o.load("data", cc.BufferAsset, function (t, o) {
            t && i();
            e.tmpData = new Uint32Array(o._buffer);
            n(1);
          }));
        });
      };

      t > 18 ? cc.assetManager.loadRemote(_global.OssConfig.levelUrl + o + "/data.bin", cc.BufferAsset, function (i, a) {
        i ? e.tmpData || (o = 101 + (t - 1) % 18 + "", r()) : (e.tmpData = new Uint32Array(a._buffer), n(1));
      }) : r();
    });
  };

  t.prototype.getPracticeData = function () {
    var t = this;
    this.practiceData || _res["default"].ins.getBundleByString("practice").then(function (e) {
      var o = e.get("data", cc.BufferAsset);
      t.practiceData = new Uint32Array(o._buffer);
    })["catch"](function (t) {
      console.error("RTool.ins.getBundleByString('practice')", t);
    });
    return this.practiceData;
  };

  t.prototype.getPracticeId = function () {
    this.practiceId ? (this.practiceId++, this.practiceId > this.getPuzzleLvlCount(!0) && (this.practiceId = 2)) : this.practiceId = 2;
    return this.practiceId;
  };

  t.prototype.clearPrcitceId = function () {
    this.practiceId = null;
  };

  t.prototype.getPuzzleSprFrame = function (t) {
    var e = this;
    return new Promise(function (o, n) {
      var i = t;
      var r = (i - 1) % e.oneChapLvlCount + 1 + "";
      i > 972 ? cc.assetManager.loadRemote(_global.OssConfig.levelUrl + (100 + e.bundleId + "/") + r + ".png", cc.SpriteFrame, function (t, e) {
        t ? n() : o(new cc.SpriteFrame(e));
      }) : e.bundle.load(r, cc.SpriteFrame, function (t, e) {
        t ? n() : o(e);
      });
    });
  };

  t.prototype.getPracitceSprfFrame = function (t) {
    return new Promise(function (e, o) {
      _res["default"].ins.getBundleByString("practice").then(function (n) {
        n.load(t + "", cc.SpriteFrame, function (t, n) {
          t ? o() : e(n);
        });
      })["catch"](function (t) {
        console.error("RTool.ins.getBundleByString('resSps')", t);
      });
    });
  };

  t.prototype.getPuzzleDiff = function () {
    return this.getPuzzleInfo().diff;
  };

  t.prototype.getPuzzleLvlCount = function (t) {
    return t ? this.getPracticeData()[1] : this.oneChapLvlCount;
  };

  t.prototype.getPuzzleInfo = function (t, e) {
    var o = t ? this.getPracticeData() : this.data;
    var n = o[0];
    var i = o[1];
    var r = t && e ? e - 1 : (_pInfo["default"].ins.getPuzzleLvl() - 1) % this.oneChapLvlCount;
    var a = o[2 + i + (0 == r ? 0 : o[2 + r - 1] + r)];
    return {
      id: r,
      type: n,
      size: 255 & a,
      diff: a >> 8 & 255
    };
  };

  t.prototype.getPuzzleData = function (t, e) {
    for (var o = t ? this.getPracticeData() : this.data, n = o[1], i = t && e ? e - 1 : (_pInfo["default"].ins.getPuzzleLvl() - 1) % this.oneChapLvlCount, r = 0 == i ? 0 : o[2 + i - 1] + i, a = o[2 + i] + i, s = o[2 + n + r], c = Math.pow(255 & s, 2), l = 2 + n + a + 1, u = [], d = 0, h = 2 + n + r + 1; h < l; h++) {
      for (var f = o[h], g = 0; g < 32; g++) {
        var y = 1 << g & 4294967295;
        if (u[d++] = (f & y) == y ? 1 : 0, d == c) break;
      }

      if (d == c) break;
    }

    return u;
  };

  Object.defineProperty(t.prototype, "levelBundle", {
    get: function get() {
      return this.bundle;
    },
    enumerable: !1,
    configurable: !0
  });

  t.prototype.getJigsawIcon = function (t, e) {
    var o = this;
    void 0 === e && (e = this.bundleName);
    return new Promise(function (n, i) {
      e > "118" ? cc.assetManager.loadRemote(_global.OssConfig.chapterUrl + (e + "/") + t + ".jpg", cc.SpriteFrame, function (t, e) {
        t ? i() : (e.packable = !1, n(new cc.SpriteFrame(e)));
      }) : o.getchapterBunder().then(function (o) {
        o.load(e + "/" + t, cc.SpriteFrame, function (t, e) {
          t ? i() : n(e);
        });
      })["catch"](function (t) {
        console.error("getchapterBunderErr", t);
      });
    });
  };

  t.prototype.releaseJigsawIcon = function (t, e) {
    if (void 0 === e && (e = this.bundleName), !(e > "118")) {
      var o = cc.assetManager.getBundle("chapter");

      if (o) {
        var n = o.get(e + "/" + t, cc.SpriteFrame);
        n && cc.assetManager.releaseAsset(n);
      }
    }
  };

  t.prototype.updateJigsaw = function (t) {
    setTimeout(function () {
      _evts["default"].opE.emit({
        action: _evts["default"].UPDJIGSAW
      });
    }, t);
  };

  t.prototype.updJigAndPop = function (t) {
    setTimeout(function () {
      _evts["default"].opE.emit({
        action: _evts["default"].FINISH_PUZZLELV
      });
    }, t);
  };

  t.prototype.popFestival = function (t) {
    setTimeout(function () {
      _evts["default"].opE.emit({
        action: _evts["default"].POP_FESTIVAL
      });
    }, t);
  };

  t.prototype.getchapterBunder = function () {
    return __awaiter(this, void 0, void 0, function () {
      var t;
      return __generator(this, function (e) {
        switch (e.label) {
          case 0:
            return (t = cc.assetManager.getBundle("chapter")) ? [3, 2] : [4, new Promise(function (t, e) {
              cc.assetManager.loadBundle("chapter", function (o, n) {
                o ? e() : t(n);
              });
            })];

          case 1:
            return [2, e.sent()];

          case 2:
            return [2, t];
        }
      });
    });
  };

  t.prototype.getLevelCost = function () {
    var t = e.ins.getPuzzleDiff();
    var o = _cfgMgr["default"].serverCfg.difficulty_rules.rules;
    var n = 10;
    var i = 1;

    for (var r in o) {
      var a = o[r];
      if (n = Number(a.times_val), i === t) break;
      i++;
    }

    return n;
  };

  t.prototype.getLevelDiffStr = function () {
    var t = e.ins.getPuzzleDiff();
    var o = _cfgMgr["default"].serverCfg.difficulty_rules.rules;
    var n = "入门难度";
    var i = 1;

    for (var r in o) {
      if (n = o[r].title, i === t) break;
      i++;
    }

    return n.slice(0, -2);
  };

  return e = __decorate([h], t);
}());
exports["default"] = f;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcbGV2ZWxNZ3IuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJfZXZ0cyIsInJlcXVpcmUiLCJfcmVzIiwiX3VEYXRhIiwiX2NmZ01nciIsIl9nbG9iYWwiLCJfcEluZm8iLCJkIiwiY2MiLCJfZGVjb3JhdG9yIiwiaCIsImNjY2xhc3MiLCJmIiwicHJvcGVydHkiLCJ0IiwiX2JnSWQiLCJvbmVDaGFwTHZsQ291bnQiLCJlIiwiZ2V0IiwiX2lucyIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJwcm90b3R5cGUiLCJnZXRCZ0lkIiwiaW5pdCIsIlByb21pc2UiLCJhbGwiLCJ1cGRhdGVEYXRhIiwidXBkYXRlUHJhY3RpY2VEYXRhIiwiaW5zIiwiZ2V0UHV6emxlTHZsIiwibyIsIk1hdGgiLCJjZWlsIiwiYnVuZGxlSWQiLCJidW5kbGUiLCJyZWxlYXNlQWxsIiwiX3NldExvY2FsQW5kQ2xvdWREYXRhIiwibiIsImZsb29yIiwiaXNOYU4iLCJhc3NldE1hbmFnZXIiLCJsb2FkQnVuZGxlIiwicGFkU2NhbGUiLCJsb2FkIiwiU3ByaXRlRnJhbWUiLCJpIiwiYnVuZGxlTmFtZSIsInIiLCJCdWZmZXJBc3NldCIsImRhdGEiLCJVaW50MzJBcnJheSIsIl9idWZmZXIiLCJsb2FkUmVtb3RlIiwiT3NzQ29uZmlnIiwibGV2ZWxVcmwiLCJhIiwicHJhY3RpY2VEYXRhIiwidXBkYXRlVG1wRGF0YSIsInRtcEJ1bmRsZUlkIiwidG1wQnVuZGxlTmFtZSIsInRtcEJ1bmRsZSIsInRtcERhdGEiLCJnZXRQcmFjdGljZURhdGEiLCJnZXRCdW5kbGVCeVN0cmluZyIsInRoZW4iLCJjb25zb2xlIiwiZXJyb3IiLCJnZXRQcmFjdGljZUlkIiwicHJhY3RpY2VJZCIsImdldFB1enpsZUx2bENvdW50IiwiY2xlYXJQcmNpdGNlSWQiLCJnZXRQdXp6bGVTcHJGcmFtZSIsImdldFByYWNpdGNlU3ByZkZyYW1lIiwiZ2V0UHV6emxlRGlmZiIsImdldFB1enpsZUluZm8iLCJkaWZmIiwiaWQiLCJ0eXBlIiwic2l6ZSIsImdldFB1enpsZURhdGEiLCJzIiwiYyIsInBvdyIsImwiLCJ1IiwiZyIsInkiLCJnZXRKaWdzYXdJY29uIiwiY2hhcHRlclVybCIsInBhY2thYmxlIiwiZ2V0Y2hhcHRlckJ1bmRlciIsInJlbGVhc2VKaWdzYXdJY29uIiwiZ2V0QnVuZGxlIiwicmVsZWFzZUFzc2V0IiwidXBkYXRlSmlnc2F3Iiwic2V0VGltZW91dCIsIm9wRSIsImVtaXQiLCJhY3Rpb24iLCJVUERKSUdTQVciLCJ1cGRKaWdBbmRQb3AiLCJGSU5JU0hfUFVaWkxFTFYiLCJwb3BGZXN0aXZhbCIsIlBPUF9GRVNUSVZBTCIsIl9fYXdhaXRlciIsIl9fZ2VuZXJhdG9yIiwibGFiZWwiLCJzZW50IiwiZ2V0TGV2ZWxDb3N0Iiwic2VydmVyQ2ZnIiwiZGlmZmljdWx0eV9ydWxlcyIsInJ1bGVzIiwiTnVtYmVyIiwidGltZXNfdmFsIiwiZ2V0TGV2ZWxEaWZmU3RyIiwidGl0bGUiLCJzbGljZSIsIl9fZGVjb3JhdGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7RUFBQ0MsS0FBSyxFQUFFLENBQUM7QUFBVCxDQUE3Qzs7QUFDQSxJQUFJQyxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxNQUFELENBQW5COztBQUNBLElBQUlDLElBQUksR0FBR0QsT0FBTyxDQUFDLEtBQUQsQ0FBbEI7O0FBQ0EsSUFBSUUsTUFBTSxHQUFHRixPQUFPLENBQUMsT0FBRCxDQUFwQjs7QUFDQSxJQUFJRyxPQUFPLEdBQUdILE9BQU8sQ0FBQyxRQUFELENBQXJCOztBQUNBLElBQUlJLE9BQU8sR0FBR0osT0FBTyxDQUFDLFFBQUQsQ0FBckI7O0FBQ0EsSUFBSUssTUFBTSxHQUFHTCxPQUFPLENBQUMsT0FBRCxDQUFwQjs7QUFDQSxJQUFJ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Q0o7O0lBQ0QsT0FBT1IsQ0FBUDtFQUNILENBWEQ7O0VBWUF4QixDQUFDLENBQUNRLFNBQUYsQ0FBWTZGLGVBQVosR0FBOEIsWUFBWTtJQUN0QyxJQUFJckcsQ0FBQyxHQUFHRyxDQUFDLENBQUNZLEdBQUYsQ0FBTTZDLGFBQU4sRUFBUjtJQUNBLElBQUkzQyxDQUFDLEdBQUczQixPQUFPLFdBQVAsQ0FBZ0IwRyxTQUFoQixDQUEwQkMsZ0JBQTFCLENBQTJDQyxLQUFuRDtJQUNBLElBQUkxRSxDQUFDLEdBQUcsTUFBUjtJQUNBLElBQUlRLENBQUMsR0FBRyxDQUFSOztJQUNBLEtBQUssSUFBSUUsQ0FBVCxJQUFjakIsQ0FBZCxFQUFpQjtNQUNiLElBQU1PLENBQUMsR0FBR1AsQ0FBQyxDQUFDaUIsQ0FBRCxDQUFELENBQUtvRSxLQUFWLEVBQWtCdEUsQ0FBQyxLQUFLaEMsQ0FBN0IsRUFBaUM7TUFDakNnQyxDQUFDO0lBQ0o7O0lBQ0QsT0FBT1IsQ0FBQyxDQUFDK0UsS0FBRixDQUFRLENBQVIsRUFBVyxDQUFDLENBQVosQ0FBUDtFQUNILENBVkQ7O0VBV0EsT0FBUXBHLENBQUMsR0FBR3FHLFVBQVUsQ0FBQyxDQUFDNUcsQ0FBRCxDQUFELEVBQU1JLENBQU4sQ0FBdEI7QUFDSCxDQTlTRCxFQUZDLENBQUw7QUFpVEFoQixPQUFPLFdBQVAsR0FBa0JjLENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHt2YWx1ZTogITB9KTtcbnZhciBfZXZ0cyA9IHJlcXVpcmUoXCJldnRzXCIpO1xudmFyIF9yZXMgPSByZXF1aXJlKFwicmVzXCIpO1xudmFyIF91RGF0YSA9IHJlcXVpcmUoXCJ1RGF0YVwiKTtcbnZhciBfY2ZnTWdyID0gcmVxdWlyZShcImNmZ01nclwiKTtcbnZhciBfZ2xvYmFsID0gcmVxdWlyZShcImdsb2JhbFwiKTtcbnZhciBfcEluZm8gPSByZXF1aXJlKFwicEluZm9cIik7XG52YXIgZCA9IGNjLl9kZWNvcmF0b3I7XG52YXIgaCA9IGQuY2NjbGFzcztcbnZhciBmID1cbiAgICAoZC5wcm9wZXJ0eSxcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICAgICAgdGhpcy5fYmdJZCA9IDA7XG4gICAgICAgICAgICB0aGlzLm9uZUNoYXBMdmxDb3VudCA9IDU0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBlO1xuICAgICAgICBlID0gdDtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIFwiaW5zXCIsIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnMgfHwgKHRoaXMuX2lucyA9IG5ldyBlKCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgdC5wcm90b3R5cGUuZ2V0QmdJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9O1xuICAgICAgICB0LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLnVwZGF0ZURhdGEoKSwgdGhpcy51cGRhdGVQcmFjdGljZURhdGEoKV0pO1xuICAgICAgICB9O1xuICAgICAgICB0LnByb3RvdHlwZS51cGRhdGVEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIGUgPSBfcEluZm8uZGVmYXVsdC5pbnMuZ2V0UHV6emxlTHZsKCk7XG4gICAgICAgICAgICB2YXIgbyA9IE1hdGguY2VpbChlIC8gdGhpcy5vbmVDaGFwTHZsQ291bnQpO1xuICAgICAgICAgICAgaWYgKG8gIT0gdGhpcy5idW5kbGVJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnVuZGxlSWQgPSBvO1xuICAgICAgICAgICAgICAgIHRoaXMuYnVuZGxlICYmICh0aGlzLmJ1bmRsZS5yZWxlYXNlQWxsKCksIF91RGF0YS5kZWZhdWx0Lmlucy5fc2V0TG9jYWxBbmRDbG91ZERhdGEoKSk7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSBNYXRoLmZsb29yKCgoZSAtIDEpIC8gNTQpICUgNCk7XG4gICAgICAgICAgICAgICAgKGlzTmFOKG4pIHx8IG4gPCAwIHx8IG4gPiAzKSAmJiAobiA9IDApO1xuICAgICAgICAgICAgICAgIHRoaXMuX2JnSWQgPSBuO1xuICAgICAgICAgICAgICAgIGNjLmFzc2V0TWFuYWdlci5sb2FkQnVuZGxlKFwicmVzU3BzXCIsIGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvID0gX2dsb2JhbC5kZWZhdWx0LnBhZFNjYWxlID8gXCJpcGFkL1wiIDogXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgIXQgJiYgZS5sb2FkKFwicGFnZXMvcGFnZV9sZXZlbC9cIiArIG8gKyBcImJnXCIgKyBuLCBjYy5TcHJpdGVGcmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAodGhpcy5idW5kbGVOYW1lID0gMTAwICsgdGhpcy5idW5kbGVJZCArIFwiXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoZSwgbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmFzc2V0TWFuYWdlci5sb2FkQnVuZGxlKGksIGZ1bmN0aW9uIChvLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG4oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgodC5idW5kbGUgPSBpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmxvYWQoXCJkYXRhXCIsIGNjLkJ1ZmZlckFzc2V0LCBmdW5jdGlvbiAobywgaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvICYmIG4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5kYXRhID0gbmV3IFVpbnQzMkFycmF5KGkuX2J1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUoMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIG8gPiAxOFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBjYy5hc3NldE1hbmFnZXIubG9hZFJlbW90ZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9nbG9iYWwuT3NzQ29uZmlnLmxldmVsVXJsICsgaSArIFwiL2RhdGEuYmluXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5CdWZmZXJBc3NldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChuLCBhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHQuZGF0YSB8fCAoKGkgPSAxMDEgKyAoKG8gLSAxKSAlIDE4KSArIFwiXCIpLCByKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCh0LmRhdGEgPSBuZXcgVWludDMyQXJyYXkoYS5fYnVmZmVyKSksIGUoMSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHIoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdC5wcm90b3R5cGUudXBkYXRlUHJhY3RpY2VEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChlLCBvKSB7XG4gICAgICAgICAgICAgICAgY2MuYXNzZXRNYW5hZ2VyLmxvYWRCdW5kbGUoXCJwcmFjdGljZVwiLCBmdW5jdGlvbiAobiwgaSkge1xuICAgICAgICAgICAgICAgICAgICBuXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG8oKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiAoaS5sb2FkKFwiZGF0YVwiLCBjYy5CdWZmZXJBc3NldCwgZnVuY3Rpb24gKGUsIG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgJiYgbygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wcmFjdGljZURhdGEgPSBuZXcgVWludDMyQXJyYXkobi5fYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGUoaSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHQucHJvdG90eXBlLnVwZGF0ZVRtcERhdGEgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdmFyIGUgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy50bXBCdW5kbGVJZCA9IHQ7XG4gICAgICAgICAgICB2YXIgbyA9ICh0aGlzLnRtcEJ1bmRsZU5hbWUgPSAxMDAgKyB0ICsgXCJcIik7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKG4sIGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2MuYXNzZXRNYW5hZ2VyLmxvYWRCdW5kbGUobywgZnVuY3Rpb24gKHQsIG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGkoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKChlLnRtcEJ1bmRsZSA9IG8pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5sb2FkKFwiZGF0YVwiLCBjYy5CdWZmZXJBc3NldCwgZnVuY3Rpb24gKHQsIG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIGkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRtcERhdGEgPSBuZXcgVWludDMyQXJyYXkoby5fYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuKDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHQgPiAxOFxuICAgICAgICAgICAgICAgICAgICA/IGNjLmFzc2V0TWFuYWdlci5sb2FkUmVtb3RlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsLk9zc0NvbmZpZy5sZXZlbFVybCArIG8gKyBcIi9kYXRhLmJpblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5CdWZmZXJBc3NldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGksIGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGUudG1wRGF0YSB8fCAoKG8gPSAxMDEgKyAoKHQgLSAxKSAlIDE4KSArIFwiXCIpLCByKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoKGUudG1wRGF0YSA9IG5ldyBVaW50MzJBcnJheShhLl9idWZmZXIpKSwgbigxKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIDogcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHQucHJvdG90eXBlLmdldFByYWN0aWNlRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucHJhY3RpY2VEYXRhIHx8XG4gICAgICAgICAgICAgICAgX3Jlcy5kZWZhdWx0Lmluc1xuICAgICAgICAgICAgICAgICAgICAuZ2V0QnVuZGxlQnlTdHJpbmcoXCJwcmFjdGljZVwiKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBlLmdldChcImRhdGFcIiwgY2MuQnVmZmVyQXNzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5wcmFjdGljZURhdGEgPSBuZXcgVWludDMyQXJyYXkoby5fYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUlRvb2wuaW5zLmdldEJ1bmRsZUJ5U3RyaW5nKCdwcmFjdGljZScpXCIsIHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnByYWN0aWNlRGF0YTtcbiAgICAgICAgfTtcbiAgICAgICAgdC5wcm90b3R5cGUuZ2V0UHJhY3RpY2VJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJhY3RpY2VJZFxuICAgICAgICAgICAgICAgID8gKHRoaXMucHJhY3RpY2VJZCsrLCB0aGlzLnByYWN0aWNlSWQgPiB0aGlzLmdldFB1enpsZUx2bENvdW50KCEwKSAmJiAodGhpcy5wcmFjdGljZUlkID0gMikpXG4gICAgICAgICAgICAgICAgOiAodGhpcy5wcmFjdGljZUlkID0gMik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmFjdGljZUlkO1xuICAgICAgICB9O1xuICAgICAgICB0LnByb3RvdHlwZS5jbGVhclByY2l0Y2VJZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMucHJhY3RpY2VJZCA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHQucHJvdG90eXBlLmdldFB1enpsZVNwckZyYW1lID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAobywgbikge1xuICAgICAgICAgICAgICAgIHZhciBpID0gdDtcbiAgICAgICAgICAgICAgICB2YXIgciA9ICgoaSAtIDEpICUgZS5vbmVDaGFwTHZsQ291bnQpICsgMSArIFwiXCI7XG4gICAgICAgICAgICAgICAgaSA+IDk3MlxuICAgICAgICAgICAgICAgICAgICA/IGNjLmFzc2V0TWFuYWdlci5sb2FkUmVtb3RlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsLk9zc0NvbmZpZy5sZXZlbFVybCArICgxMDAgKyBlLmJ1bmRsZUlkICsgXCIvXCIpICsgciArIFwiLnBuZ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5TcHJpdGVGcmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPyBuKCkgOiBvKG5ldyBjYy5TcHJpdGVGcmFtZShlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIDogZS5idW5kbGUubG9hZChyLCBjYy5TcHJpdGVGcmFtZSwgZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdCA/IG4oKSA6IG8oZSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdC5wcm90b3R5cGUuZ2V0UHJhY2l0Y2VTcHJmRnJhbWUgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChlLCBvKSB7XG4gICAgICAgICAgICAgICAgX3Jlcy5kZWZhdWx0Lmluc1xuICAgICAgICAgICAgICAgICAgICAuZ2V0QnVuZGxlQnlTdHJpbmcoXCJwcmFjdGljZVwiKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbi5sb2FkKHQgKyBcIlwiLCBjYy5TcHJpdGVGcmFtZSwgZnVuY3Rpb24gKHQsIG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID8gbygpIDogZShuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSVG9vbC5pbnMuZ2V0QnVuZGxlQnlTdHJpbmcoJ3Jlc1NwcycpXCIsIHQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0LnByb3RvdHlwZS5nZXRQdXp6bGVEaWZmID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHV6emxlSW5mbygpLmRpZmY7XG4gICAgICAgIH07XG4gICAgICAgIHQucHJvdG90eXBlLmdldFB1enpsZUx2bENvdW50ID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0ID8gdGhpcy5nZXRQcmFjdGljZURhdGEoKVsxXSA6IHRoaXMub25lQ2hhcEx2bENvdW50O1xuICAgICAgICB9O1xuICAgICAgICB0LnByb3RvdHlwZS5nZXRQdXp6bGVJbmZvID0gZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgICAgIHZhciBvID0gdCA/IHRoaXMuZ2V0UHJhY3RpY2VEYXRhKCkgOiB0aGlzLmRhdGE7XG4gICAgICAgICAgICB2YXIgbiA9IG9bMF07XG4gICAgICAgICAgICB2YXIgaSA9IG9bMV07XG4gICAgICAgICAgICB2YXIgciA9IHQgJiYgZSA/IGUgLSAxIDogKF9wSW5mby5kZWZhdWx0Lmlucy5nZXRQdXp6bGVMdmwoKSAtIDEpICUgdGhpcy5vbmVDaGFwTHZsQ291bnQ7XG4gICAgICAgICAgICB2YXIgYSA9IG9bMiArIGkgKyAoMCA9PSByID8gMCA6IG9bMiArIHIgLSAxXSArIHIpXTtcbiAgICAgICAgICAgIHJldHVybiB7aWQ6IHIsIHR5cGU6IG4sIHNpemU6IDI1NSAmIGEsIGRpZmY6IChhID4+IDgpICYgMjU1fTtcbiAgICAgICAgfTtcbiAgICAgICAgdC5wcm90b3R5cGUuZ2V0UHV6emxlRGF0YSA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgIHZhciBvID0gdCA/IHRoaXMuZ2V0UHJhY3RpY2VEYXRhKCkgOiB0aGlzLmRhdGEsXG4gICAgICAgICAgICAgICAgICAgIG4gPSBvWzFdLFxuICAgICAgICAgICAgICAgICAgICBpID0gdCAmJiBlID8gZSAtIDEgOiAoX3BJbmZvLmRlZmF1bHQuaW5zLmdldFB1enpsZUx2bCgpIC0gMSkgJSB0aGlzLm9uZUNoYXBMdmxDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgciA9IDAgPT0gaSA/IDAgOiBvWzIgKyBpIC0gMV0gKyBpLFxuICAgICAgICAgICAgICAgICAgICBhID0gb1syICsgaV0gKyBpLFxuICAgICAgICAgICAgICAgICAgICBzID0gb1syICsgbiArIHJdLFxuICAgICAgICAgICAgICAgICAgICBjID0gTWF0aC5wb3coMjU1ICYgcywgMiksXG4gICAgICAgICAgICAgICAgICAgIGwgPSAyICsgbiArIGEgKyAxLFxuICAgICAgICAgICAgICAgICAgICB1ID0gW10sXG4gICAgICAgICAgICAgICAgICAgIGQgPSAwLFxuICAgICAgICAgICAgICAgICAgICBoID0gMiArIG4gKyByICsgMTtcbiAgICAgICAgICAgICAgICBoIDwgbDtcbiAgICAgICAgICAgICAgICBoKytcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGYgPSBvW2hdLCBnID0gMDsgZyA8IDMyOyBnKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSAoMSA8PCBnKSAmIDQyOTQ5NjcyOTU7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoKHVbZCsrXSA9IChmICYgeSkgPT0geSA/IDEgOiAwKSwgZCA9PSBjKSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkID09IGMpIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHU7XG4gICAgICAgIH07XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwgXCJsZXZlbEJ1bmRsZVwiLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idW5kbGU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICB0LnByb3RvdHlwZS5nZXRKaWdzYXdJY29uID0gZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgICAgIHZhciBvID0gdGhpcztcbiAgICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IHRoaXMuYnVuZGxlTmFtZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKG4sIGkpIHtcbiAgICAgICAgICAgICAgICBlID4gXCIxMThcIlxuICAgICAgICAgICAgICAgICAgICA/IGNjLmFzc2V0TWFuYWdlci5sb2FkUmVtb3RlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBfZ2xvYmFsLk9zc0NvbmZpZy5jaGFwdGVyVXJsICsgKGUgKyBcIi9cIikgKyB0ICsgXCIuanBnXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNjLlNwcml0ZUZyYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA/IGkoKSA6ICgoZS5wYWNrYWJsZSA9ICExKSwgbihuZXcgY2MuU3ByaXRlRnJhbWUoZSkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgOiBvXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRjaGFwdGVyQnVuZGVyKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ubG9hZChlICsgXCIvXCIgKyB0LCBjYy5TcHJpdGVGcmFtZSwgZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID8gaSgpIDogbihlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJnZXRjaGFwdGVyQnVuZGVyRXJyXCIsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0LnByb3RvdHlwZS5yZWxlYXNlSmlnc2F3SWNvbiA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgICAgICBpZiAoKHZvaWQgMCA9PT0gZSAmJiAoZSA9IHRoaXMuYnVuZGxlTmFtZSksICEoZSA+IFwiMTE4XCIpKSkge1xuICAgICAgICAgICAgICAgIHZhciBvID0gY2MuYXNzZXRNYW5hZ2VyLmdldEJ1bmRsZShcImNoYXB0ZXJcIik7XG4gICAgICAgICAgICAgICAgaWYgKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBvLmdldChlICsgXCIvXCIgKyB0LCBjYy5TcHJpdGVGcmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIG4gJiYgY2MuYXNzZXRNYW5hZ2VyLnJlbGVhc2VBc3NldChuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHQucHJvdG90eXBlLnVwZGF0ZUppZ3NhdyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfZXZ0cy5kZWZhdWx0Lm9wRS5lbWl0KHthY3Rpb246IF9ldnRzLmRlZmF1bHQuVVBESklHU0FXfSk7XG4gICAgICAgICAgICB9LCB0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdC5wcm90b3R5cGUudXBkSmlnQW5kUG9wID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9ldnRzLmRlZmF1bHQub3BFLmVtaXQoe2FjdGlvbjogX2V2dHMuZGVmYXVsdC5GSU5JU0hfUFVaWkxFTFZ9KTtcbiAgICAgICAgICAgIH0sIHQpO1xuICAgICAgICB9O1xuICAgICAgICB0LnByb3RvdHlwZS5wb3BGZXN0aXZhbCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfZXZ0cy5kZWZhdWx0Lm9wRS5lbWl0KHthY3Rpb246IF9ldnRzLmRlZmF1bHQuUE9QX0ZFU1RJVkFMfSk7XG4gICAgICAgICAgICB9LCB0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdC5wcm90b3R5cGUuZ2V0Y2hhcHRlckJ1bmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChlLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0ID0gY2MuYXNzZXRNYW5hZ2VyLmdldEJ1bmRsZShcImNoYXB0ZXJcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gWzMsIDJdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuYXNzZXRNYW5hZ2VyLmxvYWRCdW5kbGUoXCJjaGFwdGVyXCIsIGZ1bmN0aW9uIChvLCBuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA/IGUoKSA6IHQobik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgZS5zZW50KCldO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiwgdF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0LnByb3RvdHlwZS5nZXRMZXZlbENvc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdCA9IGUuaW5zLmdldFB1enpsZURpZmYoKTtcbiAgICAgICAgICAgIHZhciBvID0gX2NmZ01nci5kZWZhdWx0LnNlcnZlckNmZy5kaWZmaWN1bHR5X3J1bGVzLnJ1bGVzO1xuICAgICAgICAgICAgdmFyIG4gPSAxMDtcbiAgICAgICAgICAgIHZhciBpID0gMTtcbiAgICAgICAgICAgIGZvciAodmFyIHIgaW4gbykge1xuICAgICAgICAgICAgICAgIHZhciBhID0gb1tyXTtcbiAgICAgICAgICAgICAgICBpZiAoKChuID0gTnVtYmVyKGEudGltZXNfdmFsKSksIGkgPT09IHQpKSBicmVhaztcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfTtcbiAgICAgICAgdC5wcm90b3R5cGUuZ2V0TGV2ZWxEaWZmU3RyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHQgPSBlLmlucy5nZXRQdXp6bGVEaWZmKCk7XG4gICAgICAgICAgICB2YXIgbyA9IF9jZmdNZ3IuZGVmYXVsdC5zZXJ2ZXJDZmcuZGlmZmljdWx0eV9ydWxlcy5ydWxlcztcbiAgICAgICAgICAgIHZhciBuID0gXCLlhaXpl6jpmr7luqZcIjtcbiAgICAgICAgICAgIHZhciBpID0gMTtcbiAgICAgICAgICAgIGZvciAodmFyIHIgaW4gbykge1xuICAgICAgICAgICAgICAgIGlmICgoKG4gPSBvW3JdLnRpdGxlKSwgaSA9PT0gdCkpIGJyZWFrO1xuICAgICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuLnNsaWNlKDAsIC0yKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIChlID0gX19kZWNvcmF0ZShbaF0sIHQpKTtcbiAgICB9KSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IGY7XG4iXX0=