
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/newJigMgr.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '76747ryvSJFDajgaJVMHyti', 'newJigMgr');
// scripts/newJigMgr.js

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _idx = require("idx");

var _pInfo = require("pInfo");

var _bagMgr = require("bagMgr");

var _festivalMgr = require("festivalMgr");

var s = function () {
  function t() {
    this.jigsawTileTotal = 105;
    this.jigsawThemeNum = _festivalMgr["default"].ins.getJigsawNum();
    this.localData = null;
    this.seed = 5;
  }

  Object.defineProperty(t, "ins", {
    get: function get() {
      return this._ins || (this._ins = new t());
    },
    enumerable: !1,
    configurable: !0
  });

  t.prototype.getJigsawTilesByIdx = function (t) {
    var e = this.getJigsawTiles()[t] || [];

    var o = _bagMgr["default"].ins.getItemCount("newYear_pieces");

    var n = t + 1;
    this.seed = 21 + n;
    var i = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 22, 33, 44, 55, 66, 77, 88, 99, 89, 100, 91, 101, 93, 102, 95, 103, 97, 104, 98, 87, 76, 65, 54, 43, 32, 21];
    this.shuffleArray(i);
    i.length = 10;

    for (var a = [], s = 0; s < 105; s++) {
      -1 == i.indexOf(s) && a.push(s);
    }

    this.shuffleArray(a);
    var c = i.concat(a);

    if (e.length < this.jigsawTileTotal) {
      var l = e.length;
      var u = this.jigsawTileTotal - e.length;
      var p = o - ((n - 1) * this.jigsawTileTotal + l);

      if (p > 0) {
        var d = Math.min(u, p);

        for (s = 0; s < d; s++) {
          var h = c[l + s];
          e.push([h, -1]);
        }
      }
    }

    this.setJigsawTilesByIdx(t, e);
    return e;
  };

  t.prototype.setJigsawTilesByIdx = function (t, e) {
    var o = this.getJigsawTiles();
    o[t] = e;
    this.setJigsawTiles(o);
  };

  t.prototype.isItemUnlock = function () {
    return !0;
  };

  t.prototype.isPieceEnough = function (t) {
    var e = t * this.jigsawTileTotal;
    return _bagMgr["default"].ins.getItemCount("newYear_pieces") > e;
  };

  t.prototype.getNowJigsawLv = function () {
    for (var t = 0, e = this.getJigsawTiles().length; t < e; t++) {
      if (!this.IsJigsawCompletedByIdx(t)) return t + 1;
    }
  };

  t.prototype.IsJigsawCompletedByIdx = function (t) {
    var e = this.getJigsawTiles()[t];

    if (105 == e.length) {
      for (var o = 0, n = e; o < n.length; o++) {
        var i = n[o];
        if (i[0] != i[1]) return !1;
      }

      return !0;
    }

    return !1;
  };

  t.prototype.getAllTiles = function () {
    for (var t = 0, e = this.jigsawThemeNum; t < e; t++) {
      this.getJigsawTilesByIdx(t);
    }
  };

  t.prototype.getUnPlacedNum = function () {
    this.getAllTiles();

    for (var t = this.getJigsawTiles(), e = 0, o = 0, n = t.length; o < n; o++) {
      var i = t[o];
      if (!this.checkHasFin(o)) for (var r = 0, a = i.length; r < a; r++) {
        var s = i[r];
        s[1] != s[0] && e++;
      }
    }

    return e;
  };

  t.prototype.seedRandom = function () {
    this.seed = (9301 * this.seed + 49297) % 233280;
    return this.seed / 233280;
  };

  t.prototype.shuffleArray = function (t) {
    for (var e, o = t.length - 1; o > 0; o--) {
      var n = Math.floor(this.seedRandom() * (o + 1));
      e = [t[n], t[o]];
      t[o] = e[0];
      t[n] = e[1];
    }
  };

  t.prototype.getJigsawTiles = function () {
    var t = this.getLocalJigData().tiles;
    return null == t ? [] : t;
  };

  t.prototype.setJigsawTiles = function (t) {
    this.setLocalJigData({
      tiles: t
    });
  };

  t.prototype.setLocalJigData = function (t) {
    var e = this.getLocalJigData();
    this.localData = Object.assign(Object.assign({}, e), t);

    _idx.platform.setStorage("newJigsaw", this.localData);
  };

  t.prototype.getLocalJigData = function () {
    null == this.localData && (this.localData = _idx.platform.getStorage("newJigsaw") || {});
    return this.localData;
  };

  t.prototype.checkClearData = function () {
    _pInfo["default"].ins.getIsClearJigsawData() && (_pInfo["default"].ins.setIsClearJigsawData(!1), this.clearJigsawData());
  };

  t.prototype.clearJigsawData = function () {
    this.localData = {};

    _idx.platform.setStorage("newJigsaw", this.localData);
  };

  t.prototype.checkSetFin = function (t) {
    this.checkHasFin(t) || this.setFinfishJigsaw(t);
  };

  t.prototype.checkHasFin = function (t) {
    return _pInfo["default"].ins.getHasFinFesJig()[t] || !1;
  };

  t.prototype.setFinfishJigsaw = function (t) {
    var e = _pInfo["default"].ins.getHasFinFesJig();

    e[t] = !0;

    _pInfo["default"].ins.setHasFinFesJig(e);
  };

  t.prototype.clearFinJig = function (t) {
    var e = _pInfo["default"].ins.getHasFinFesJig();

    e[t] = !1;

    _pInfo["default"].ins.setHasFinFesJig(e);
  };

  t.prototype.resetJigByIdx = function (t) {
    for (var e = this.getJigsawTilesByIdx(t), o = [], n = 0, i = e.length; n < i; n++) {
      var r = e[n];
      r[1] = -1;
      o.push(r);
    }

    this.setJigsawTilesByIdx(t, o);
    this.clearFinJig(t);
  };

  return t;
}();

exports["default"] = s;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcbmV3SmlnTWdyLmpzIl0sIm5hbWVzIjpbIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiX2lkeCIsInJlcXVpcmUiLCJfcEluZm8iLCJfYmFnTWdyIiwiX2Zlc3RpdmFsTWdyIiwicyIsInQiLCJqaWdzYXdUaWxlVG90YWwiLCJqaWdzYXdUaGVtZU51bSIsImlucyIsImdldEppZ3Nhd051bSIsImxvY2FsRGF0YSIsInNlZWQiLCJnZXQiLCJfaW5zIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsInByb3RvdHlwZSIsImdldEppZ3Nhd1RpbGVzQnlJZHgiLCJlIiwiZ2V0Smlnc2F3VGlsZXMiLCJvIiwiZ2V0SXRlbUNvdW50IiwibiIsImkiLCJzaHVmZmxlQXJyYXkiLCJsZW5ndGgiLCJhIiwiaW5kZXhPZiIsInB1c2giLCJjIiwiY29uY2F0IiwibCIsInUiLCJwIiwiZCIsIk1hdGgiLCJtaW4iLCJoIiwic2V0Smlnc2F3VGlsZXNCeUlkeCIsInNldEppZ3Nhd1RpbGVzIiwiaXNJdGVtVW5sb2NrIiwiaXNQaWVjZUVub3VnaCIsImdldE5vd0ppZ3Nhd0x2IiwiSXNKaWdzYXdDb21wbGV0ZWRCeUlkeCIsImdldEFsbFRpbGVzIiwiZ2V0VW5QbGFjZWROdW0iLCJjaGVja0hhc0ZpbiIsInIiLCJzZWVkUmFuZG9tIiwiZmxvb3IiLCJnZXRMb2NhbEppZ0RhdGEiLCJ0aWxlcyIsInNldExvY2FsSmlnRGF0YSIsImFzc2lnbiIsInBsYXRmb3JtIiwic2V0U3RvcmFnZSIsImdldFN0b3JhZ2UiLCJjaGVja0NsZWFyRGF0YSIsImdldElzQ2xlYXJKaWdzYXdEYXRhIiwic2V0SXNDbGVhckppZ3Nhd0RhdGEiLCJjbGVhckppZ3Nhd0RhdGEiLCJjaGVja1NldEZpbiIsInNldEZpbmZpc2hKaWdzYXciLCJnZXRIYXNGaW5GZXNKaWciLCJzZXRIYXNGaW5GZXNKaWciLCJjbGVhckZpbkppZyIsInJlc2V0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QUNBLEtBQUs2QyxXQUFMLENBQWlCNUQsQ0FBakI7RUFDSCxDQVJEOztFQVNBLE9BQU9BLENBQVA7QUFDSCxDQWxKTyxFQUFSOztBQW1KQVIsT0FBTyxXQUFQLEdBQWtCTyxDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7dmFsdWU6ICEwfSk7XG52YXIgX2lkeCA9IHJlcXVpcmUoXCJpZHhcIik7XG52YXIgX3BJbmZvID0gcmVxdWlyZShcInBJbmZvXCIpO1xudmFyIF9iYWdNZ3IgPSByZXF1aXJlKFwiYmFnTWdyXCIpO1xudmFyIF9mZXN0aXZhbE1nciA9IHJlcXVpcmUoXCJmZXN0aXZhbE1nclwiKTtcbnZhciBzID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICB0aGlzLmppZ3Nhd1RpbGVUb3RhbCA9IDEwNTtcbiAgICAgICAgdGhpcy5qaWdzYXdUaGVtZU51bSA9IF9mZXN0aXZhbE1nci5kZWZhdWx0Lmlucy5nZXRKaWdzYXdOdW0oKTtcbiAgICAgICAgdGhpcy5sb2NhbERhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLnNlZWQgPSA1O1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgXCJpbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnMgfHwgKHRoaXMuX2lucyA9IG5ldyB0KCkpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgIH0pO1xuICAgIHQucHJvdG90eXBlLmdldEppZ3Nhd1RpbGVzQnlJZHggPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IHRoaXMuZ2V0Smlnc2F3VGlsZXMoKVt0XSB8fCBbXTtcbiAgICAgICAgdmFyIG8gPSBfYmFnTWdyLmRlZmF1bHQuaW5zLmdldEl0ZW1Db3VudChcIm5ld1llYXJfcGllY2VzXCIpO1xuICAgICAgICB2YXIgbiA9IHQgKyAxO1xuICAgICAgICB0aGlzLnNlZWQgPSAyMSArIG47XG4gICAgICAgIHZhciBpID0gW1xuICAgICAgICAgICAgMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAyMiwgMzMsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDg5LCAxMDAsIDkxLCAxMDEsIDkzLCAxMDIsIDk1LCAxMDMsXG4gICAgICAgICAgICA5NywgMTA0LCA5OCwgODcsIDc2LCA2NSwgNTQsIDQzLCAzMiwgMjFcbiAgICAgICAgXTtcbiAgICAgICAgdGhpcy5zaHVmZmxlQXJyYXkoaSk7XG4gICAgICAgIGkubGVuZ3RoID0gMTA7XG4gICAgICAgIGZvciAodmFyIGEgPSBbXSwgcyA9IDA7IHMgPCAxMDU7IHMrKykgLTEgPT0gaS5pbmRleE9mKHMpICYmIGEucHVzaChzKTtcbiAgICAgICAgdGhpcy5zaHVmZmxlQXJyYXkoYSk7XG4gICAgICAgIHZhciBjID0gaS5jb25jYXQoYSk7XG4gICAgICAgIGlmIChlLmxlbmd0aCA8IHRoaXMuamlnc2F3VGlsZVRvdGFsKSB7XG4gICAgICAgICAgICB2YXIgbCA9IGUubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHUgPSB0aGlzLmppZ3Nhd1RpbGVUb3RhbCAtIGUubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIHAgPSBvIC0gKChuIC0gMSkgKiB0aGlzLmppZ3Nhd1RpbGVUb3RhbCArIGwpO1xuICAgICAgICAgICAgaWYgKHAgPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGQgPSBNYXRoLm1pbih1LCBwKTtcbiAgICAgICAgICAgICAgICBmb3IgKHMgPSAwOyBzIDwgZDsgcysrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoID0gY1tsICsgc107XG4gICAgICAgICAgICAgICAgICAgIGUucHVzaChbaCwgLTFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRKaWdzYXdUaWxlc0J5SWR4KHQsIGUpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnNldEppZ3Nhd1RpbGVzQnlJZHggPSBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICB2YXIgbyA9IHRoaXMuZ2V0Smlnc2F3VGlsZXMoKTtcbiAgICAgICAgb1t0XSA9IGU7XG4gICAgICAgIHRoaXMuc2V0Smlnc2F3VGlsZXMobyk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5pc0l0ZW1VbmxvY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmlzUGllY2VFbm91Z2ggPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IHQgKiB0aGlzLmppZ3Nhd1RpbGVUb3RhbDtcbiAgICAgICAgcmV0dXJuIF9iYWdNZ3IuZGVmYXVsdC5pbnMuZ2V0SXRlbUNvdW50KFwibmV3WWVhcl9waWVjZXNcIikgPiBlO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0Tm93Smlnc2F3THYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIHQgPSAwLCBlID0gdGhpcy5nZXRKaWdzYXdUaWxlcygpLmxlbmd0aDsgdCA8IGU7IHQrKykgaWYgKCF0aGlzLklzSmlnc2F3Q29tcGxldGVkQnlJZHgodCkpIHJldHVybiB0ICsgMTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLklzSmlnc2F3Q29tcGxldGVkQnlJZHggPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IHRoaXMuZ2V0Smlnc2F3VGlsZXMoKVt0XTtcbiAgICAgICAgaWYgKDEwNSA9PSBlLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yICh2YXIgbyA9IDAsIG4gPSBlOyBvIDwgbi5sZW5ndGg7IG8rKykge1xuICAgICAgICAgICAgICAgIHZhciBpID0gbltvXTtcbiAgICAgICAgICAgICAgICBpZiAoaVswXSAhPSBpWzFdKSByZXR1cm4gITE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0QWxsVGlsZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIHQgPSAwLCBlID0gdGhpcy5qaWdzYXdUaGVtZU51bTsgdCA8IGU7IHQrKykgdGhpcy5nZXRKaWdzYXdUaWxlc0J5SWR4KHQpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0VW5QbGFjZWROdW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZ2V0QWxsVGlsZXMoKTtcbiAgICAgICAgZm9yICh2YXIgdCA9IHRoaXMuZ2V0Smlnc2F3VGlsZXMoKSwgZSA9IDAsIG8gPSAwLCBuID0gdC5sZW5ndGg7IG8gPCBuOyBvKyspIHtcbiAgICAgICAgICAgIHZhciBpID0gdFtvXTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jaGVja0hhc0ZpbihvKSlcbiAgICAgICAgICAgICAgICBmb3IgKHZhciByID0gMCwgYSA9IGkubGVuZ3RoOyByIDwgYTsgcisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gaVtyXTtcbiAgICAgICAgICAgICAgICAgICAgc1sxXSAhPSBzWzBdICYmIGUrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5zZWVkUmFuZG9tID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNlZWQgPSAoOTMwMSAqIHRoaXMuc2VlZCArIDQ5Mjk3KSAlIDIzMzI4MDtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VlZCAvIDIzMzI4MDtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnNodWZmbGVBcnJheSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIGZvciAodmFyIGUsIG8gPSB0Lmxlbmd0aCAtIDE7IG8gPiAwOyBvLS0pIHtcbiAgICAgICAgICAgIHZhciBuID0gTWF0aC5mbG9vcih0aGlzLnNlZWRSYW5kb20oKSAqIChvICsgMSkpO1xuICAgICAgICAgICAgZSA9IFt0W25dLCB0W29dXTtcbiAgICAgICAgICAgIHRbb10gPSBlWzBdO1xuICAgICAgICAgICAgdFtuXSA9IGVbMV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldEppZ3Nhd1RpbGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXMuZ2V0TG9jYWxKaWdEYXRhKCkudGlsZXM7XG4gICAgICAgIHJldHVybiBudWxsID09IHQgPyBbXSA6IHQ7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5zZXRKaWdzYXdUaWxlcyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHRoaXMuc2V0TG9jYWxKaWdEYXRhKHt0aWxlczogdH0pO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuc2V0TG9jYWxKaWdEYXRhID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgdmFyIGUgPSB0aGlzLmdldExvY2FsSmlnRGF0YSgpO1xuICAgICAgICB0aGlzLmxvY2FsRGF0YSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZSksIHQpO1xuICAgICAgICBfaWR4LnBsYXRmb3JtLnNldFN0b3JhZ2UoXCJuZXdKaWdzYXdcIiwgdGhpcy5sb2NhbERhdGEpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0TG9jYWxKaWdEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBudWxsID09IHRoaXMubG9jYWxEYXRhICYmICh0aGlzLmxvY2FsRGF0YSA9IF9pZHgucGxhdGZvcm0uZ2V0U3RvcmFnZShcIm5ld0ppZ3Nhd1wiKSB8fCB7fSk7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsRGF0YTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmNoZWNrQ2xlYXJEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfcEluZm8uZGVmYXVsdC5pbnMuZ2V0SXNDbGVhckppZ3Nhd0RhdGEoKSAmJlxuICAgICAgICAgICAgKF9wSW5mby5kZWZhdWx0Lmlucy5zZXRJc0NsZWFySmlnc2F3RGF0YSghMSksIHRoaXMuY2xlYXJKaWdzYXdEYXRhKCkpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuY2xlYXJKaWdzYXdEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmxvY2FsRGF0YSA9IHt9O1xuICAgICAgICBfaWR4LnBsYXRmb3JtLnNldFN0b3JhZ2UoXCJuZXdKaWdzYXdcIiwgdGhpcy5sb2NhbERhdGEpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuY2hlY2tTZXRGaW4gPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB0aGlzLmNoZWNrSGFzRmluKHQpIHx8IHRoaXMuc2V0RmluZmlzaEppZ3Nhdyh0KTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmNoZWNrSGFzRmluID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgcmV0dXJuIF9wSW5mby5kZWZhdWx0Lmlucy5nZXRIYXNGaW5GZXNKaWcoKVt0XSB8fCAhMTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnNldEZpbmZpc2hKaWdzYXcgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IF9wSW5mby5kZWZhdWx0Lmlucy5nZXRIYXNGaW5GZXNKaWcoKTtcbiAgICAgICAgZVt0XSA9ICEwO1xuICAgICAgICBfcEluZm8uZGVmYXVsdC5pbnMuc2V0SGFzRmluRmVzSmlnKGUpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuY2xlYXJGaW5KaWcgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IF9wSW5mby5kZWZhdWx0Lmlucy5nZXRIYXNGaW5GZXNKaWcoKTtcbiAgICAgICAgZVt0XSA9ICExO1xuICAgICAgICBfcEluZm8uZGVmYXVsdC5pbnMuc2V0SGFzRmluRmVzSmlnKGUpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUucmVzZXRKaWdCeUlkeCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIGZvciAodmFyIGUgPSB0aGlzLmdldEppZ3Nhd1RpbGVzQnlJZHgodCksIG8gPSBbXSwgbiA9IDAsIGkgPSBlLmxlbmd0aDsgbiA8IGk7IG4rKykge1xuICAgICAgICAgICAgdmFyIHIgPSBlW25dO1xuICAgICAgICAgICAgclsxXSA9IC0xO1xuICAgICAgICAgICAgby5wdXNoKHIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0Smlnc2F3VGlsZXNCeUlkeCh0LCBvKTtcbiAgICAgICAgdGhpcy5jbGVhckZpbkppZyh0KTtcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKTtcbmV4cG9ydHMuZGVmYXVsdCA9IHM7XG4iXX0=