
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/page_jigsaw.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '502baxKlExFebmxN98W6bhx', 'page_jigsaw');
// scripts/page_jigsaw.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _evts = require("evts");

var _mySafeArea = require("mySafeArea");

var _global = require("global");

var _jigsawMgr = require("jigsawMgr");

var _newJigMgr = require("newJigMgr");

var _tipMgr = require("tipMgr");

var _jigMenu = require("jigMenu");

var h = cc._decorator;
var f = h.ccclass;
var g = h.property;

var y = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.jigsawItem = null;
    e.menuView = null;
    e.newView = null;
    e.btnsNode = null;
    e.pageNodes = null;
    e.jigsawNum = null;
    e.jigsawNum1 = null;
    e.jigTypes = [];
    e.bgNode = null;
    e.menuItem = null;
    e.THEME_H = 276;
    e.themeSpace = 10;
    e.top_offest = 30;
    e.bottom_offest = 200;
    e.last_view_inner_y = -1;
    e.themes = {};
    e.newThemes = {};
    e.touching_theme_id = 0;
    e.jigBID = 1;
    e.jigEID = 27;
    e.jigCount = 27;
    e.newJigBID = 1;
    e.newJigEID = 18;
    e.newJigCount = 18;
    e.designContH = 1100;
    e.btnsComp = [];
    e.curPageIdx = 0;
    e.isAni = !1;
    e.isFirstLoad = !0;
    return e;
  }

  __extends(e, t);

  e.prototype.onLoad = function () {
    this.jigEID = this.jigCount = _global["default"].jisawCount;
    this.newJigEID = this.newJigCount = _newJigMgr["default"].ins.jigsawThemeNum;
    this.node.height = cc.winSize.height;
    _global["default"].padScale && (this.bgNode.scale = _global["default"].padScale);

    _evts["default"].opE.on(this.onOperTap.bind(this));

    this.upNewJigRed();
  };

  e.prototype.onOperTap = function (t) {
    var e = null == t ? void 0 : t.action;
    if (e) switch (e) {
      case _evts["default"].FINISH_PUZZLE:
        break;

      case _evts["default"].UPD_MAIN_RED:
        this.upNewJigRed();
    }
  };

  e.prototype.upNewJigRed = function () {
    this.jigsawNum1.node.parent.active = !1;

    var t = _newJigMgr["default"].ins.getUnPlacedNum();

    if (t > 0) {
      var e = t > 99 ? "99+" : t + "";
      this.jigsawNum.node.parent.active = !0;
      this.jigsawNum.string = e + "";
      this.jigsawNum.node.x = _global["default"].getCharXOffset(this.jigsawNum.string);
    } else this.jigsawNum.node.parent.active = !1, this.jigsawNum1.node.parent.active = !1;
  };

  e.prototype.start = function () {
    var t = this;
    this.scheduleOnce(function () {
      t.adapter();

      var e = _mySafeArea.getSafeAreaRect().yMin;

      var o = t.node.height - 1280 - e;
      t.newView.node.height = t.menuView.node.height = t.designContH + o;
      t.newView.node.getChildByName("view").height = t.menuView.node.getChildByName("view").height = t.designContH + o;
      t.menuView.node.y -= e / 2;
      t.newView.node.y -= e / 2;
      t.initMenuView();
    });
  };

  e.prototype.adapter = function () {
    var t = _mySafeArea.getSafeAreaRect().yMin;

    this.btnsNode.y -= t;
  };

  e.prototype.onEnable = function () {
    var t = this;
    this.isFirstLoad || this.scheduleOnce(function () {
      t.adapter();
    });
    this.isFirstLoad = !1;
  };

  e.prototype.initMenuView = function () {
    var t = (Math.ceil(this.jigCount / 3) + 1) * (this.themeSpace + this.THEME_H);
    this.menuView.content.setContentSize(cc.size(cc.winSize.width, t));
    this.initItemView1();
    this.loadMenuItem(0);
  };

  e.prototype.loadMenuItem = function (t) {
    if (t < this.jigCount) {
      var e = this.jigBID + t;
      var o = cc.instantiate(this.menuItem);
      var n = o.getComponent(_jigMenu["default"]);
      n.node.active = !0;
      o.opacity = 0;
      cc.tween(o).to(0.5, {
        opacity: 255
      }).start();
      var i = t % 3;
      var r = Math.ceil(e / 3);
      var a = 128 + 232 * i;
      var s = -this.top_offest - this.THEME_H / 2 + (r - 1) * -(this.THEME_H + this.themeSpace);
      n.node.parent = this.menuView.content;
      n.node.position = cc.v3(a, s);
      this.themes[e] = n;
      n.init(t, 1);
      t++;
      this.scheduleOnce(this.loadMenuItem.bind(this, t), 0);
    } else this.reItemVis1(), this.loadNewItem(0);
  };

  e.prototype.loadNewItem = function (t) {
    if (t < this.newJigCount) {
      var e = this.newJigBID + t;
      var o = cc.instantiate(this.menuItem).getComponent(_jigMenu["default"]);
      o.node.active = !0;
      var n = t % 3;
      var i = Math.ceil(e / 3);
      var r = 128 + 232 * n;
      var a = -this.top_offest - this.THEME_H / 2 + (i - 1) * -(this.THEME_H + this.themeSpace);
      o.node.parent = this.newView.content;
      o.node.position = cc.v3(r, a);
      this.newThemes[e] = o;
      o.init(t, 2);
      t++;
      this.scheduleOnce(this.loadNewItem.bind(this, t), 0);
    } else this.initItemView2();
  };

  e.prototype.initItemView1 = function () {
    var t = this;
    this.menuView.node.on("scrolling", function () {
      t.reItemVis1();
    }, this);

    var e = _jigsawMgr["default"].ins.getNowJigsawLv();

    e >= this.jigBID && e <= this.jigEID ? this.ScrollToItem1(e) : this.ScrollToItem1(this.jigBID);
  };

  e.prototype.initItemView2 = function () {
    var t = this;
    this.newView.node.on("scrolling", function () {
      t.reItemVis2();
    }, this);

    var e = _newJigMgr["default"].ins.getNowJigsawLv();

    e >= this.newJigBID && e <= this.newJigEID ? this.ScrollToItem2(e) : this.ScrollToItem2(this.newJigBID);
  };

  e.prototype.ScrollToItem1 = function (t) {
    if (this.last_view_inner_y = -1, !(t < this.jigBID || t > this.jigEID)) {
      var e = Math.ceil(t / 3);
      var o = Math.abs(-279 * (e - 1));
      var n = Math.max(o, 0);
      var i = this.menuView.getScrollOffset();
      Math.abs(n - i.y) < Number.EPSILON || this.menuView.scrollToOffset(cc.v2(0, n), 0.5);
    }
  };

  e.prototype.ScrollToItem2 = function (t) {
    if (this.last_view_inner_y = -1, !(t < this.newJigBID || t > this.newJigEID)) {
      var e = Math.ceil(t / 3);
      var o = Math.abs((e - 1) * -this.THEME_H);
      var n = Math.max(o, 0);
      var i = this.newView.getScrollOffset();
      Math.abs(n - i.y) < Number.EPSILON || this.newView.scrollToOffset(cc.v2(0, n));
    }

    this.reItemVis2();
  };

  e.prototype.reItemVis1 = function () {
    var t = this.menuView.getContentPosition();

    if (!(Math.abs(this.last_view_inner_y - t.y) < 0.01)) {
      this.last_view_inner_y = t.y;

      for (var e = this.menuView.node, o = e.height / 2, n = e.parent.convertToWorldSpaceAR(e.position), i = n.y + o, r = n.y - o, a = this.menuView.content.children, s = 0, c = a.length; s < c; s++) {
        var l = a[s];
        var u = l.parent.convertToWorldSpaceAR(l.position);
        var p = u.y - 125 > i || u.y + 125 < r;
        l.active = !p;
      }
    }
  };

  e.prototype.reItemVis2 = function () {};

  e.prototype.chgToFes = function () {};

  e.prototype.onBtnChgJigType = function () {
    var t = this;

    if (0 !== this.curPageIdx) {
      var e = this.curPageIdx;
      var o = 0 === e ? 1 : 0;

      if (!this.isAni) {
        this.isAni = !0;
        this.jigTypes[e].active = !1;
        this.jigTypes[o].active = !0;
        this.curPageIdx = 0 === e ? 1 : 0;
        var n = this.pageNodes.children[o];
        var i = this.pageNodes.children[e];
        cc.Tween.stopAllByTarget(this.pageNodes);
        var r = o > e ? -1 : 1;
        var a = this.pageNodes.x + cc.view.getVisibleSize().width * r;
        n.x = -a;
        n && (n.active = !0);
        cc.tween(this.pageNodes).to(0.5, {
          x: a
        }, {
          easing: this.customEaseInOut
        }).call(function () {
          i && (i.active = !1);
          t.isAni = !1;
        }).start();
      }
    } else _tipMgr["default"].ins.showTip("暂未开启");
  };

  e.prototype.customEaseInOut = function (t) {
    return t < 0.5 ? 8 * t * t * t * t : 1 - Math.pow(-2 * t + 2, 4) / 2;
  };

  __decorate([g(cc.Prefab)], e.prototype, "jigsawItem", void 0);

  __decorate([g(cc.ScrollView)], e.prototype, "menuView", void 0);

  __decorate([g(cc.ScrollView)], e.prototype, "newView", void 0);

  __decorate([g(cc.Node)], e.prototype, "btnsNode", void 0);

  __decorate([g(cc.Node)], e.prototype, "pageNodes", void 0);

  __decorate([g(cc.Label)], e.prototype, "jigsawNum", void 0);

  __decorate([g(cc.Label)], e.prototype, "jigsawNum1", void 0);

  __decorate([g([cc.Node])], e.prototype, "jigTypes", void 0);

  __decorate([g(cc.Node)], e.prototype, "bgNode", void 0);

  __decorate([g(cc.Node)], e.prototype, "menuItem", void 0);

  return __decorate([f], e);
}(cc.Component);

exports["default"] = y;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xccGFnZV9qaWdzYXcuanMiXSwibmFtZXMiOlsibiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiX2V2dHMiLCJyZXF1aXJlIiwiX215U2FmZUFyZWEiLCJfZ2xvYmFsIiwiX2ppZ3Nhd01nciIsIl9uZXdKaWdNZ3IiLCJfdGlwTWdyIiwiX2ppZ01lbnUiLCJoIiwiY2MiLCJfZGVjb3JhdG9yIiwiZiIsImNjY2xhc3MiLCJnIiwicHJvcGVydHkiLCJ5IiwidCIsImUiLCJhcHBseSIsImFyZ3VtZW50cyIsImppZ3Nhd0l0ZW0iLCJtZW51VmlldyIsIm5ld1ZpZXciLCJidG5zTm9kZSIsInBhZ2VOb2RlcyIsImppZ3Nhd051bSIsImppZ3Nhd051bTEiLCJqaWdUeXBlcyIsImJnTm9kZSIsIm1lbnVJdGVtIiwiVEhFTUVfSCIsInRoZW1lU3BhY2UiLCJ0b3Bfb2ZmZXN0IiwiYm90dG9tX29mZmVzdCIsImxhc3Rfdmlld19pbm5lcl95IiwidGhlbWVzIiwibmV3VGhlbWVzIiwidG91Y2hpbmdfdGhlbWVfaWQiLCJqaWdCSUQiLCJqaWdFSUQiLCJqaWdDb3VudCIsIm5ld0ppZ0JJRCIsIm5ld0ppZ0VJRCIsIm5ld0ppZ0NvdW50IiwiZGVzaWduQ29udEgiLCJidG5zQ29tcCIsImN1clBhZ2VJZHgiLCJpc0FuaSIsImlzRmlyc3RMb2FkIiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwib25Mb2FkIiwiamlzYXdDb3VudCIsImlucyIsImppZ3Nhd1RoZW1lTnVtIiwibm9kZSIsImhlaWdodCIsIndpblNpemUiLCJwYWRTY2FsZSIsInNjYWxlIiwib3BFIiwib24iLCJvbk9wZXJUYXAiLCJiaW5kIiwidXBOZXdKaWdSZWQiLCJhY3Rpb24iLCJGSU5JU0hfUFVaWkxFIiwiVVBEX01BSU5fUkVEIiwicGFyZW50IiwiYWN0aXZlIiwiZ2V0VW5QbGFjZWROdW0iLCJzdHJpbmciLCJ4IiwiZ2V0Q2hhclhPZmZzZXQiLCJzdGFydCIsInNjaGVkdWxlT25jZSIsImFkYXB0ZXIiLCJnZXRTYWZlQXJlYVJlY3QiLCJ5TWluIiwibyIsImdldENoaWxkQnlOYW1lIiwiaW5pdE1lbnVWaWV3Iiwib25FbmFibGUiLCJNYXRoIiwiY2VpbCIsImNvbnRlbnQiLCJzZXRDb250ZW50U2l6ZSIsInNpemUiLCJ3aWR0aCIsImluaXRJdGVtVmlldzEiLCJsb2FkTWVudUl0ZW0iLCJpbnN0YW50aWF0ZSIsImdldENvbXBvbmVudCIsIm9wYWNpdHkiLCJ0d2VlbiIsInRvIiwiaSIsInIiLCJhIiwicyIsInBvc2l0aW9uIiwidjMiLCJpbml0IiwicmVJdGVtVmlzMSIsImxvYWROZXdJdGVtIiwiaW5pdEl0ZW1WaWV3MiIsImdldE5vd0ppZ3Nhd0x2IiwiU2Nyb2xsVG9JdGVtMSIsInJlSXRlbVZpczIiLCJTY3JvbGxUb0l0ZW0yIiwiYWJzIiwibWF4IiwiZ2V0U2Nyb2xsT2Zmc2V0IiwiTnVtYmVyIiwiRVBTSUxPTiIsInNjcm9sbFRvT2Zmc2V0IiwidjIiLCJnZXRDb250ZW50UG9zaXRpb24iLCJjb252ZXJ0VG9Xb3JsZFNwYWNlQVIiLCJjaGlsZHJlbiIsImMiLCJsZW5ndGgiLCJsIiwidSIsInAiLCJjaGdUb0ZlcyIsIm9uQnRuQ2hnSmlnVHlwZSIsIlR3ZWVuIiwic3RvcEFsbEJ5VGFyZ2V0IiwidmlldyIsImdldFZpc2libGVTaXplIiwiZWFzaW5nIiwiY3VzdG9tRWFzZUluT3V0IiwiY2FsbCIsInNob3dUaXAiLCJwb3ciLCJfX2RlY29yYXRlIiwiUHJlZmFiIiwiU2Nyb2xsVmlldyIsIk5vZGUiLCJMYWJlbCIsIkNvbXBvbmVudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxDQUFKO0FBQ0FDLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7RUFBQ0MsS0FBSyxFQUFFLENBQUM7QUFBVCxDQUE3Qzs7QUFDQSxJQUFJQyxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxN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Q0FBQyxDQUFDN0gsQ0FBRCxDQUFELEVBQU1NLENBQU4sQ0FBakI7QUFDSCxDQWpQTyxDQWlQTFIsRUFBRSxDQUFDb0ksU0FqUEUsQ0FBUjs7QUFrUEEvSSxPQUFPLFdBQVAsR0FBa0JpQixDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG47XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHt2YWx1ZTogITB9KTtcbnZhciBfZXZ0cyA9IHJlcXVpcmUoXCJldnRzXCIpO1xudmFyIF9teVNhZmVBcmVhID0gcmVxdWlyZShcIm15U2FmZUFyZWFcIik7XG52YXIgX2dsb2JhbCA9IHJlcXVpcmUoXCJnbG9iYWxcIik7XG52YXIgX2ppZ3Nhd01nciA9IHJlcXVpcmUoXCJqaWdzYXdNZ3JcIik7XG52YXIgX25ld0ppZ01nciA9IHJlcXVpcmUoXCJuZXdKaWdNZ3JcIik7XG52YXIgX3RpcE1nciA9IHJlcXVpcmUoXCJ0aXBNZ3JcIik7XG52YXIgX2ppZ01lbnUgPSByZXF1aXJlKFwiamlnTWVudVwiKTtcbnZhciBoID0gY2MuX2RlY29yYXRvcjtcbnZhciBmID0gaC5jY2NsYXNzO1xudmFyIGcgPSBoLnByb3BlcnR5O1xudmFyIHkgPSAoZnVuY3Rpb24gKHQpIHtcbiAgICBmdW5jdGlvbiBlKCkge1xuICAgICAgICB2YXIgZSA9IChudWxsICE9PSB0ICYmIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSkgfHwgdGhpcztcbiAgICAgICAgZS5qaWdzYXdJdGVtID0gbnVsbDtcbiAgICAgICAgZS5tZW51VmlldyA9IG51bGw7XG4gICAgICAgIGUubmV3VmlldyA9IG51bGw7XG4gICAgICAgIGUuYnRuc05vZGUgPSBudWxsO1xuICAgICAgICBlLnBhZ2VOb2RlcyA9IG51bGw7XG4gICAgICAgIGUuamlnc2F3TnVtID0gbnVsbDtcbiAgICAgICAgZS5qaWdzYXdOdW0xID0gbnVsbDtcbiAgICAgICAgZS5qaWdUeXBlcyA9IFtdO1xuICAgICAgICBlLmJnTm9kZSA9IG51bGw7XG4gICAgICAgIGUubWVudUl0ZW0gPSBudWxsO1xuICAgICAgICBlLlRIRU1FX0ggPSAyNzY7XG4gICAgICAgIGUudGhlbWVTcGFjZSA9IDEwO1xuICAgICAgICBlLnRvcF9vZmZlc3QgPSAzMDtcbiAgICAgICAgZS5ib3R0b21fb2ZmZXN0ID0gMjAwO1xuICAgICAgICBlLmxhc3Rfdmlld19pbm5lcl95ID0gLTE7XG4gICAgICAgIGUudGhlbWVzID0ge307XG4gICAgICAgIGUubmV3VGhlbWVzID0ge307XG4gICAgICAgIGUudG91Y2hpbmdfdGhlbWVfaWQgPSAwO1xuICAgICAgICBlLmppZ0JJRCA9IDE7XG4gICAgICAgIGUuamlnRUlEID0gMjc7XG4gICAgICAgIGUuamlnQ291bnQgPSAyNztcbiAgICAgICAgZS5uZXdKaWdCSUQgPSAxO1xuICAgICAgICBlLm5ld0ppZ0VJRCA9IDE4O1xuICAgICAgICBlLm5ld0ppZ0NvdW50ID0gMTg7XG4gICAgICAgIGUuZGVzaWduQ29udEggPSAxMTAwO1xuICAgICAgICBlLmJ0bnNDb21wID0gW107XG4gICAgICAgIGUuY3VyUGFnZUlkeCA9IDA7XG4gICAgICAgIGUuaXNBbmkgPSAhMTtcbiAgICAgICAgZS5pc0ZpcnN0TG9hZCA9ICEwO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgX19leHRlbmRzKGUsIHQpO1xuICAgIGUucHJvdG90eXBlLm9uTG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5qaWdFSUQgPSB0aGlzLmppZ0NvdW50ID0gX2dsb2JhbC5kZWZhdWx0Lmppc2F3Q291bnQ7XG4gICAgICAgIHRoaXMubmV3SmlnRUlEID0gdGhpcy5uZXdKaWdDb3VudCA9IF9uZXdKaWdNZ3IuZGVmYXVsdC5pbnMuamlnc2F3VGhlbWVOdW07XG4gICAgICAgIHRoaXMubm9kZS5oZWlnaHQgPSBjYy53aW5TaXplLmhlaWdodDtcbiAgICAgICAgX2dsb2JhbC5kZWZhdWx0LnBhZFNjYWxlICYmICh0aGlzLmJnTm9kZS5zY2FsZSA9IF9nbG9iYWwuZGVmYXVsdC5wYWRTY2FsZSk7XG4gICAgICAgIF9ldnRzLmRlZmF1bHQub3BFLm9uKHRoaXMub25PcGVyVGFwLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnVwTmV3SmlnUmVkKCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbk9wZXJUYXAgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuYWN0aW9uO1xuICAgICAgICBpZiAoZSlcbiAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgX2V2dHMuZGVmYXVsdC5GSU5JU0hfUFVaWkxFOlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIF9ldnRzLmRlZmF1bHQuVVBEX01BSU5fUkVEOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwTmV3SmlnUmVkKCk7XG4gICAgICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS51cE5ld0ppZ1JlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5qaWdzYXdOdW0xLm5vZGUucGFyZW50LmFjdGl2ZSA9ICExO1xuICAgICAgICB2YXIgdCA9IF9uZXdKaWdNZ3IuZGVmYXVsdC5pbnMuZ2V0VW5QbGFjZWROdW0oKTtcbiAgICAgICAgaWYgKHQgPiAwKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHQgPiA5OSA/IFwiOTkrXCIgOiB0ICsgXCJcIjtcbiAgICAgICAgICAgIHRoaXMuamlnc2F3TnVtLm5vZGUucGFyZW50LmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgdGhpcy5qaWdzYXdOdW0uc3RyaW5nID0gZSArIFwiXCI7XG4gICAgICAgICAgICB0aGlzLmppZ3Nhd051bS5ub2RlLnggPSBfZ2xvYmFsLmRlZmF1bHQuZ2V0Q2hhclhPZmZzZXQodGhpcy5qaWdzYXdOdW0uc3RyaW5nKTtcbiAgICAgICAgfSBlbHNlICh0aGlzLmppZ3Nhd051bS5ub2RlLnBhcmVudC5hY3RpdmUgPSAhMSksICh0aGlzLmppZ3Nhd051bTEubm9kZS5wYXJlbnQuYWN0aXZlID0gITEpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdC5hZGFwdGVyKCk7XG4gICAgICAgICAgICB2YXIgZSA9IF9teVNhZmVBcmVhLmdldFNhZmVBcmVhUmVjdCgpLnlNaW47XG4gICAgICAgICAgICB2YXIgbyA9IHQubm9kZS5oZWlnaHQgLSAxMjgwIC0gZTtcbiAgICAgICAgICAgIHQubmV3Vmlldy5ub2RlLmhlaWdodCA9IHQubWVudVZpZXcubm9kZS5oZWlnaHQgPSB0LmRlc2lnbkNvbnRIICsgbztcbiAgICAgICAgICAgIHQubmV3Vmlldy5ub2RlLmdldENoaWxkQnlOYW1lKFwidmlld1wiKS5oZWlnaHQgPSB0Lm1lbnVWaWV3Lm5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJ2aWV3XCIpLmhlaWdodCA9XG4gICAgICAgICAgICAgICAgdC5kZXNpZ25Db250SCArIG87XG4gICAgICAgICAgICB0Lm1lbnVWaWV3Lm5vZGUueSAtPSBlIC8gMjtcbiAgICAgICAgICAgIHQubmV3Vmlldy5ub2RlLnkgLT0gZSAvIDI7XG4gICAgICAgICAgICB0LmluaXRNZW51VmlldygpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLmFkYXB0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ID0gX215U2FmZUFyZWEuZ2V0U2FmZUFyZWFSZWN0KCkueU1pbjtcbiAgICAgICAgdGhpcy5idG5zTm9kZS55IC09IHQ7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbkVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzRmlyc3RMb2FkIHx8XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlT25jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdC5hZGFwdGVyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pc0ZpcnN0TG9hZCA9ICExO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuaW5pdE1lbnVWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IChNYXRoLmNlaWwodGhpcy5qaWdDb3VudCAvIDMpICsgMSkgKiAodGhpcy50aGVtZVNwYWNlICsgdGhpcy5USEVNRV9IKTtcbiAgICAgICAgdGhpcy5tZW51Vmlldy5jb250ZW50LnNldENvbnRlbnRTaXplKGNjLnNpemUoY2Mud2luU2l6ZS53aWR0aCwgdCkpO1xuICAgICAgICB0aGlzLmluaXRJdGVtVmlldzEoKTtcbiAgICAgICAgdGhpcy5sb2FkTWVudUl0ZW0oMCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5sb2FkTWVudUl0ZW0gPSBmdW5jdGlvbiAodCkge1xuICAgICAgICBpZiAodCA8IHRoaXMuamlnQ291bnQpIHtcbiAgICAgICAgICAgIHZhciBlID0gdGhpcy5qaWdCSUQgKyB0O1xuICAgICAgICAgICAgdmFyIG8gPSBjYy5pbnN0YW50aWF0ZSh0aGlzLm1lbnVJdGVtKTtcbiAgICAgICAgICAgIHZhciBuID0gby5nZXRDb21wb25lbnQoX2ppZ01lbnUuZGVmYXVsdCk7XG4gICAgICAgICAgICBuLm5vZGUuYWN0aXZlID0gITA7XG4gICAgICAgICAgICBvLm9wYWNpdHkgPSAwO1xuICAgICAgICAgICAgY2MudHdlZW4obykudG8oMC41LCB7b3BhY2l0eTogMjU1fSkuc3RhcnQoKTtcbiAgICAgICAgICAgIHZhciBpID0gdCAlIDM7XG4gICAgICAgICAgICB2YXIgciA9IE1hdGguY2VpbChlIC8gMyk7XG4gICAgICAgICAgICB2YXIgYSA9IDEyOCArIDIzMiAqIGk7XG4gICAgICAgICAgICB2YXIgcyA9IC10aGlzLnRvcF9vZmZlc3QgLSB0aGlzLlRIRU1FX0ggLyAyICsgKHIgLSAxKSAqIC0odGhpcy5USEVNRV9IICsgdGhpcy50aGVtZVNwYWNlKTtcbiAgICAgICAgICAgIG4ubm9kZS5wYXJlbnQgPSB0aGlzLm1lbnVWaWV3LmNvbnRlbnQ7XG4gICAgICAgICAgICBuLm5vZGUucG9zaXRpb24gPSBjYy52MyhhLCBzKTtcbiAgICAgICAgICAgIHRoaXMudGhlbWVzW2VdID0gbjtcbiAgICAgICAgICAgIG4uaW5pdCh0LCAxKTtcbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKHRoaXMubG9hZE1lbnVJdGVtLmJpbmQodGhpcywgdCksIDApO1xuICAgICAgICB9IGVsc2UgdGhpcy5yZUl0ZW1WaXMxKCksIHRoaXMubG9hZE5ld0l0ZW0oMCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5sb2FkTmV3SXRlbSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIGlmICh0IDwgdGhpcy5uZXdKaWdDb3VudCkge1xuICAgICAgICAgICAgdmFyIGUgPSB0aGlzLm5ld0ppZ0JJRCArIHQ7XG4gICAgICAgICAgICB2YXIgbyA9IGNjLmluc3RhbnRpYXRlKHRoaXMubWVudUl0ZW0pLmdldENvbXBvbmVudChfamlnTWVudS5kZWZhdWx0KTtcbiAgICAgICAgICAgIG8ubm9kZS5hY3RpdmUgPSAhMDtcbiAgICAgICAgICAgIHZhciBuID0gdCAlIDM7XG4gICAgICAgICAgICB2YXIgaSA9IE1hdGguY2VpbChlIC8gMyk7XG4gICAgICAgICAgICB2YXIgciA9IDEyOCArIDIzMiAqIG47XG4gICAgICAgICAgICB2YXIgYSA9IC10aGlzLnRvcF9vZmZlc3QgLSB0aGlzLlRIRU1FX0ggLyAyICsgKGkgLSAxKSAqIC0odGhpcy5USEVNRV9IICsgdGhpcy50aGVtZVNwYWNlKTtcbiAgICAgICAgICAgIG8ubm9kZS5wYXJlbnQgPSB0aGlzLm5ld1ZpZXcuY29udGVudDtcbiAgICAgICAgICAgIG8ubm9kZS5wb3NpdGlvbiA9IGNjLnYzKHIsIGEpO1xuICAgICAgICAgICAgdGhpcy5uZXdUaGVtZXNbZV0gPSBvO1xuICAgICAgICAgICAgby5pbml0KHQsIDIpO1xuICAgICAgICAgICAgdCsrO1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UodGhpcy5sb2FkTmV3SXRlbS5iaW5kKHRoaXMsIHQpLCAwKTtcbiAgICAgICAgfSBlbHNlIHRoaXMuaW5pdEl0ZW1WaWV3MigpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuaW5pdEl0ZW1WaWV3MSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICB0aGlzLm1lbnVWaWV3Lm5vZGUub24oXG4gICAgICAgICAgICBcInNjcm9sbGluZ1wiLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHQucmVJdGVtVmlzMSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgKTtcbiAgICAgICAgdmFyIGUgPSBfamlnc2F3TWdyLmRlZmF1bHQuaW5zLmdldE5vd0ppZ3Nhd0x2KCk7XG4gICAgICAgIGUgPj0gdGhpcy5qaWdCSUQgJiYgZSA8PSB0aGlzLmppZ0VJRCA/IHRoaXMuU2Nyb2xsVG9JdGVtMShlKSA6IHRoaXMuU2Nyb2xsVG9JdGVtMSh0aGlzLmppZ0JJRCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5pbml0SXRlbVZpZXcyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIHRoaXMubmV3Vmlldy5ub2RlLm9uKFxuICAgICAgICAgICAgXCJzY3JvbGxpbmdcIixcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0LnJlSXRlbVZpczIoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICk7XG4gICAgICAgIHZhciBlID0gX25ld0ppZ01nci5kZWZhdWx0Lmlucy5nZXROb3dKaWdzYXdMdigpO1xuICAgICAgICBlID49IHRoaXMubmV3SmlnQklEICYmIGUgPD0gdGhpcy5uZXdKaWdFSUQgPyB0aGlzLlNjcm9sbFRvSXRlbTIoZSkgOiB0aGlzLlNjcm9sbFRvSXRlbTIodGhpcy5uZXdKaWdCSUQpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuU2Nyb2xsVG9JdGVtMSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIGlmICgoKHRoaXMubGFzdF92aWV3X2lubmVyX3kgPSAtMSksICEodCA8IHRoaXMuamlnQklEIHx8IHQgPiB0aGlzLmppZ0VJRCkpKSB7XG4gICAgICAgICAgICB2YXIgZSA9IE1hdGguY2VpbCh0IC8gMyk7XG4gICAgICAgICAgICB2YXIgbyA9IE1hdGguYWJzKC0yNzkgKiAoZSAtIDEpKTtcbiAgICAgICAgICAgIHZhciBuID0gTWF0aC5tYXgobywgMCk7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMubWVudVZpZXcuZ2V0U2Nyb2xsT2Zmc2V0KCk7XG4gICAgICAgICAgICBNYXRoLmFicyhuIC0gaS55KSA8IE51bWJlci5FUFNJTE9OIHx8IHRoaXMubWVudVZpZXcuc2Nyb2xsVG9PZmZzZXQoY2MudjIoMCwgbiksIDAuNSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGUucHJvdG90eXBlLlNjcm9sbFRvSXRlbTIgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICBpZiAoKCh0aGlzLmxhc3Rfdmlld19pbm5lcl95ID0gLTEpLCAhKHQgPCB0aGlzLm5ld0ppZ0JJRCB8fCB0ID4gdGhpcy5uZXdKaWdFSUQpKSkge1xuICAgICAgICAgICAgdmFyIGUgPSBNYXRoLmNlaWwodCAvIDMpO1xuICAgICAgICAgICAgdmFyIG8gPSBNYXRoLmFicygoZSAtIDEpICogLXRoaXMuVEhFTUVfSCk7XG4gICAgICAgICAgICB2YXIgbiA9IE1hdGgubWF4KG8sIDApO1xuICAgICAgICAgICAgdmFyIGkgPSB0aGlzLm5ld1ZpZXcuZ2V0U2Nyb2xsT2Zmc2V0KCk7XG4gICAgICAgICAgICBNYXRoLmFicyhuIC0gaS55KSA8IE51bWJlci5FUFNJTE9OIHx8IHRoaXMubmV3Vmlldy5zY3JvbGxUb09mZnNldChjYy52MigwLCBuKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZUl0ZW1WaXMyKCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5yZUl0ZW1WaXMxID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXMubWVudVZpZXcuZ2V0Q29udGVudFBvc2l0aW9uKCk7XG4gICAgICAgIGlmICghKE1hdGguYWJzKHRoaXMubGFzdF92aWV3X2lubmVyX3kgLSB0LnkpIDwgMC4wMSkpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdF92aWV3X2lubmVyX3kgPSB0Lnk7XG4gICAgICAgICAgICBmb3IgKFxuICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5tZW51Vmlldy5ub2RlLFxuICAgICAgICAgICAgICAgICAgICBvID0gZS5oZWlnaHQgLyAyLFxuICAgICAgICAgICAgICAgICAgICBuID0gZS5wYXJlbnQuY29udmVydFRvV29ybGRTcGFjZUFSKGUucG9zaXRpb24pLFxuICAgICAgICAgICAgICAgICAgICBpID0gbi55ICsgbyxcbiAgICAgICAgICAgICAgICAgICAgciA9IG4ueSAtIG8sXG4gICAgICAgICAgICAgICAgICAgIGEgPSB0aGlzLm1lbnVWaWV3LmNvbnRlbnQuY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgICAgIHMgPSAwLFxuICAgICAgICAgICAgICAgICAgICBjID0gYS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgcyA8IGM7XG4gICAgICAgICAgICAgICAgcysrXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB2YXIgbCA9IGFbc107XG4gICAgICAgICAgICAgICAgdmFyIHUgPSBsLnBhcmVudC5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIobC5wb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgdmFyIHAgPSB1LnkgLSAxMjUgPiBpIHx8IHUueSArIDEyNSA8IHI7XG4gICAgICAgICAgICAgICAgbC5hY3RpdmUgPSAhcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgZS5wcm90b3R5cGUucmVJdGVtVmlzMiA9IGZ1bmN0aW9uICgpIHt9O1xuICAgIGUucHJvdG90eXBlLmNoZ1RvRmVzID0gZnVuY3Rpb24gKCkge307XG4gICAgZS5wcm90b3R5cGUub25CdG5DaGdKaWdUeXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLmN1clBhZ2VJZHgpIHtcbiAgICAgICAgICAgIHZhciBlID0gdGhpcy5jdXJQYWdlSWR4O1xuICAgICAgICAgICAgdmFyIG8gPSAwID09PSBlID8gMSA6IDA7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBbmkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQW5pID0gITA7XG4gICAgICAgICAgICAgICAgdGhpcy5qaWdUeXBlc1tlXS5hY3RpdmUgPSAhMTtcbiAgICAgICAgICAgICAgICB0aGlzLmppZ1R5cGVzW29dLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VyUGFnZUlkeCA9IDAgPT09IGUgPyAxIDogMDtcbiAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMucGFnZU5vZGVzLmNoaWxkcmVuW29dO1xuICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5wYWdlTm9kZXMuY2hpbGRyZW5bZV07XG4gICAgICAgICAgICAgICAgY2MuVHdlZW4uc3RvcEFsbEJ5VGFyZ2V0KHRoaXMucGFnZU5vZGVzKTtcbiAgICAgICAgICAgICAgICB2YXIgciA9IG8gPiBlID8gLTEgOiAxO1xuICAgICAgICAgICAgICAgIHZhciBhID0gdGhpcy5wYWdlTm9kZXMueCArIGNjLnZpZXcuZ2V0VmlzaWJsZVNpemUoKS53aWR0aCAqIHI7XG4gICAgICAgICAgICAgICAgbi54ID0gLWE7XG4gICAgICAgICAgICAgICAgbiAmJiAobi5hY3RpdmUgPSAhMCk7XG4gICAgICAgICAgICAgICAgY2MudHdlZW4odGhpcy5wYWdlTm9kZXMpXG4gICAgICAgICAgICAgICAgICAgIC50bygwLjUsIHt4OiBhfSwge2Vhc2luZzogdGhpcy5jdXN0b21FYXNlSW5PdXR9KVxuICAgICAgICAgICAgICAgICAgICAuY2FsbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpICYmIChpLmFjdGl2ZSA9ICExKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuaXNBbmkgPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnN0YXJ0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBfdGlwTWdyLmRlZmF1bHQuaW5zLnNob3dUaXAoXCLmmoLmnKrlvIDlkK9cIik7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5jdXN0b21FYXNlSW5PdXQgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICByZXR1cm4gdCA8IDAuNSA/IDggKiB0ICogdCAqIHQgKiB0IDogMSAtIE1hdGgucG93KC0yICogdCArIDIsIDQpIC8gMjtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW2coY2MuUHJlZmFiKV0sIGUucHJvdG90eXBlLCBcImppZ3Nhd0l0ZW1cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLlNjcm9sbFZpZXcpXSwgZS5wcm90b3R5cGUsIFwibWVudVZpZXdcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLlNjcm9sbFZpZXcpXSwgZS5wcm90b3R5cGUsIFwibmV3Vmlld1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2coY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJidG5zTm9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2coY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJwYWdlTm9kZXNcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcImppZ3Nhd051bVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2coY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwiamlnc2F3TnVtMVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2coW2NjLk5vZGVdKV0sIGUucHJvdG90eXBlLCBcImppZ1R5cGVzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbZyhjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImJnTm9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2coY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJtZW51SXRlbVwiLCB2b2lkIDApO1xuICAgIHJldHVybiBfX2RlY29yYXRlKFtmXSwgZSk7XG59KShjYy5Db21wb25lbnQpO1xuZXhwb3J0cy5kZWZhdWx0ID0geTtcbiJdfQ==