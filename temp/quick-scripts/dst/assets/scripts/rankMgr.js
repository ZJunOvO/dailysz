
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/rankMgr.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'e7bedtBQEVEDLcEkhi9q9lw', 'rankMgr');
// scripts/rankMgr.js

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: !0
});
exports.rankSortType = exports.rankType = exports.rankTag = void 0;
var n;
var i;
var r;

var _idx = require("idx");

var _request = require("request");

var _time = require("time");

var _pInfo = require("pInfo");

(function (t) {
  t.mainScore = "main_score", t.dailyScore = "daily_score", t.mainWin = "main_win", t.dailyWin = "daily_win", t.raceScore = "race_score";
})(n = exports.rankTag || (exports.rankTag = {}));

(function (t) {
  t.Total = "total", t.Today = "daily";
})(i = exports.rankType || (exports.rankType = {}));

(function (t) {
  t.Desc = "desc";
  t.Asc = "asc";
})(r = exports.rankSortType || (exports.rankSortType = {}));

var u = function () {
  function t() {
    this.lastRequestTime = 0;
    this.lastReqRaceTime = 0;
    this.ttMScore = null;
    this.ttDScore = null;
    this.ttMWin = null;
    this.ttDWin = null;
    this.tdMScore = null;
    this.tdDScore = null;
    this.tdMWin = null;
    this.tdDWin = null;
    this.tdRScore = null;
    this.localData = null;
  }

  Object.defineProperty(t, "ins", {
    get: function get() {
      return this._ins || (this._ins = new t());
    },
    enumerable: !1,
    configurable: !0
  });

  t.prototype.uploadRankData = function () {
    var t = i.Total;
    var e = n.mainScore;
    this.uploadRankDataByTag(e, t);
    e = n.mainWin;
    this.uploadRankDataByTag(e, t);
    e = n.dailyScore;
    this.uploadRankDataByTag(e, t);
    e = n.dailyWin;
    this.uploadRankDataByTag(e, t);
    t = i.Today;
    e = n.mainScore;
    this.uploadRankDataByTag(e, t);
    e = n.dailyScore;
    this.uploadRankDataByTag(e, t);
    e = n.mainWin;
    this.uploadRankDataByTag(e, t);
    e = n.dailyWin;
    this.uploadRankDataByTag(e, t);
  };

  t.prototype.uploadRankDataByTag = function (t, e) {
    var o = _pInfo["default"].ins;
    var n = JSON.parse(JSON.stringify(o.getLastUploadRankData()));
    var i = this.getValueAndKeyByTag(t, e);
    var a = i[0];
    var c = i[1];
    var u = n[c];
    var p = Number(a);

    if (p > Number(u)) {
      var d = this.getRankDataByType(t, e);
      n[c] = a;
      d.then(function (n) {
        var i = n.data;
        var a = 0;

        if (i) {
          i.sort(function (t, e) {
            return e.sort_value - t.sort_value;
          });
          var c = i[99];
          c && (a = c.sort_value);
        }

        if (p > Number(a)) {
          var l = {};
          l.uSkin = o.getUsingSkin();
          var u = {
            rank_tag: t,
            sort_value: p,
            sort_type: r.Desc,
            extra_data: l
          };

          _request["default"].ins.uploadRank(u, e);
        }
      })["catch"](function () {
        console.error("getRankDataErr");
      });
      o.setLastUploadRankData(n);
    }
  };

  t.prototype.getValueAndKeyByTag = function (t, e) {
    var o = _pInfo["default"].ins;
    var r = Object.assign({}, _pInfo["default"].ins.getRecordData());
    if (e === i.Total) switch (t) {
      case n.mainScore:
        return [r.main.tPoints, "ttMScore"];

      case n.dailyScore:
        return [r.daily.tPoints, "ttDScore"];

      case n.mainWin:
        return [r.main.heWins, "ttMWin"];

      case n.dailyWin:
        return [r.daily.heWins, "ttDWin"];
    } else if (e === i.Today) switch (t) {
      case n.mainScore:
        return [o.getTodayMainScore(), "tdMScore"];

      case n.dailyScore:
        return [o.getTodayDailyScore(), "tdDScore"];

      case n.mainWin:
        return [o.getTodayMainWin(), "tdMWin"];

      case n.dailyWin:
        return [o.getTodayDailyWin(), "tdDWin"];
    }
  };

  t.prototype.uploadRaceData = function () {
    this.getTodayRaceData().then(function (t) {
      var e = _pInfo["default"].ins;
      var o = t.data;
      o && o.sort(function (t, e) {
        return e.sort_value - t.sort_value;
      });
      var a = e.getLastUploadRankData();
      var c = n.raceScore;
      var u = e.getTodayRaceScore();
      var p = a.tdRScore;
      var d = 0;
      var h = o[99];

      if (h && (d = h.sort_value), Number(u) > Number(p) && Number(u) > Number(d)) {
        a.tdRScore = u;
        var f = {};
        f.uSkin = e.getUsingSkin();
        var g = {
          rank_tag: c,
          sort_value: u,
          sort_type: r.Desc,
          extra_data: f
        };

        _request["default"].ins.uploadRank(g, i.Today);
      }

      e.setLastUploadRankData(a);
    })["catch"](function () {
      console.error("uploadRaceData");
    });
  };

  t.prototype.getRankDataByType = function (t, e, o) {
    void 0 === o && (o = r.Desc);
    var n = _time["default"].ins.serverTime || Math.floor(new Date().getTime() / 1e3);
    var a = n - this.lastRequestTime >= 3600;
    a && this.clearData();
    var l = this.getCachedDataByType(t, e);
    if (!a && l) return this.getCachedDataByType(t, e);

    if (this.lastRequestTime = n, e === i.Total) {
      var u = _request["default"].ins.getRank(t, e, o);

      this.setCachedDataByType(t, e, u);
      return u;
    }

    if (e === i.Today) {
      var p = _time["default"].ins.serverTime || new Date().getTime();
      p -= (p + 28800) % 86400;
      p *= 1e3;

      var d = _request["default"].ins.getRank(t, e, o, p);

      this.setCachedDataByType(t, e, d);
      return d;
    }
  };

  t.prototype.getMyRankDataByTag = function (t, e) {
    var o = _pInfo["default"].ins.getRecordData();

    if (e === i.Today) switch (t) {
      case n.mainScore:
        return _pInfo["default"].ins.getTodayMainScore();

      case n.dailyScore:
        return _pInfo["default"].ins.getTodayDailyScore();

      case n.mainWin:
        return _pInfo["default"].ins.getTodayMainWin();

      case n.dailyWin:
        return _pInfo["default"].ins.getTodayDailyWin();
    } else if (e === i.Total) switch (t) {
      case n.mainScore:
        return o.main.tPoints;

      case n.dailyScore:
        return o.daily.tPoints;

      case n.mainWin:
        return o.main.heWins;

      case n.dailyWin:
        return o.daily.heWins;
    }
  };

  t.prototype.getTodayRaceData = function () {
    var t = _time["default"].ins.serverTime || Math.floor(new Date().getTime() / 1e3);
    var e = t - this.lastReqRaceTime >= 3600;
    e && (this.tdDWin = null);
    var o = this.getCachedDataByType(n.raceScore, i.Today);

    if (e || !o) {
      this.lastReqRaceTime = t;
      var a = _time["default"].ins.serverTime || Math.floor(new Date().getTime() / 1e3);
      a -= (a + 28800) % 86400;
      a *= 1e3;

      var l = _request["default"].ins.getRank(n.raceScore, i.Today, r.Desc, a);

      this.setCachedDataByType(n.raceScore, i.Today, l);
      return l;
    }

    return this.getCachedDataByType(n.raceScore, i.Today);
  };

  t.prototype.getYdayRaceData = function () {
    var t = _time["default"].ins.serverTime || Math.floor(new Date().getTime() / 1e3);
    t -= 86400;
    t -= (t + 28800) % 86400;
    t *= 1e3;
    var e = this.getYdayRaceRankData();

    if (0 != e.length) {
      var o = {
        data: e
      };
      return Promise.resolve(o);
    }

    return _request["default"].ins.getRank(n.raceScore, i.Today, r.Desc, t);
  };

  t.prototype.getMyRaceTodayData = function () {
    return _pInfo["default"].ins.getTodayRaceScore();
  };

  t.prototype.getMyRaceYdayData = function () {
    return _pInfo["default"].ins.getYdayRaceScore();
  };

  t.prototype.setCachedDataByType = function (t, e, o) {
    if (e === i.Total) switch (t) {
      case n.mainScore:
        this.ttMScore = o;
        break;

      case n.dailyScore:
        this.ttDScore = o;
        break;

      case n.mainWin:
        this.ttMWin = o;
        break;

      case n.dailyWin:
        this.ttDWin = o;
    } else if (e === i.Today) switch (t) {
      case n.mainScore:
        this.tdMScore = o;
        break;

      case n.dailyScore:
        this.tdDScore = o;
        break;

      case n.mainWin:
        this.tdMWin = o;
        break;

      case n.dailyWin:
        this.tdDWin = o;
        break;

      case n.raceScore:
        this.tdDWin = o;
    }
  };

  t.prototype.getCachedDataByType = function (t, e) {
    if (e === i.Total) switch (t) {
      case n.mainScore:
        return this.ttMScore;

      case n.dailyScore:
        return this.ttDScore;

      case n.mainWin:
        return this.ttMWin;

      case n.dailyWin:
        return this.ttDWin;
    } else if (e === i.Today) switch (t) {
      case n.mainScore:
        return this.tdMScore;

      case n.dailyScore:
        return this.tdDScore;

      case n.mainWin:
        return this.tdMWin;

      case n.dailyWin:
      case n.raceScore:
        return this.tdDWin;
    }
  };

  t.prototype.clearData = function () {
    this.ttMScore = null;
    this.ttDScore = null;
    this.ttMWin = null;
    this.ttDWin = null;
    this.tdMScore = null;
    this.tdDScore = null;
    this.tdMWin = null;
    this.tdDWin = null;
  };

  t.prototype.getYdayRaceRankData = function () {
    var t = this.getLocalRaceRankData().ydayRRData;
    return null == t ? [] : t;
  };

  t.prototype.setYdayRaceRankData = function (t) {
    this.setLocalRaceRankData({
      ydayRRData: t
    });
  };

  t.prototype.setLocalRaceRankData = function (t) {
    var e = this.getLocalRaceRankData();
    this.localData = Object.assign(Object.assign({}, e), t);

    _idx.platform.setStorage("ydayRankData", this.localData);
  };

  t.prototype.getLocalRaceRankData = function () {
    null == this.localData && (this.localData = _idx.platform.getStorage("ydayRankData") || {});
    return this.localData;
  };

  return t;
}();

exports["default"] = u;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xccmFua01nci5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInJhbmtTb3J0VHlwZSIsInJhbmtUeXBlIiwicmFua1RhZyIsIm4iLCJpIiwiciIsIl9pZHgiLCJyZXF1aXJlIiwiX3JlcXVlc3QiLCJfdGltZSIsIl9wSW5mbyIsInQiLCJtYWluU2NvcmUiLCJkYWlseVNjb3JlIiwibWFpbldpbiIsImRhaWx5V2luIiwicmFjZVNjb3JlIiwiVG90YWwiLCJUb2RheSIsIkRlc2MiLCJBc2MiLCJ1IiwibGFzdFJlcXVlc3RUaW1lIiwibGFzdFJlcVJhY2VUaW1lIiwidHRNU2NvcmUiLCJ0dERTY29yZSIsInR0TVdpbiIsInR0RFdpbiIsInRkTVNjb3JlIiwidGREU2NvcmUiLCJ0ZE1XaW4iLCJ0ZERXaW4iLCJ0ZFJTY29yZSIsImxvY2FsRGF0YSIsImdldCIsIl9pbnMiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwicHJvdG90eXBlIiwidXBsb2FkUmFua0RhdGEiLCJlIiwidXBsb2FkUmFua0RhdGFCeVRhZyIsIm8iLCJpbnMiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJnZXRMYXN0VXBsb2FkUmFua0RhdGEiLCJnZXRWYWx1ZUFuZEtleUJ5VGFnIiwiYSIsImMiLCJwIiwiTnVtYmVyIiwiZCIsImdldFJhbmtEYXRhQnlUeXBlIiwidGhlbiIsImRhdGEiLCJzb3J0Iiwic29ydF92YWx1ZSIsImwiLCJ1U2tpbiIsImdldFVzaW5nU2tpbiIsInJhbmtfdGFnIiwic29ydF90eXBlIiwiZXh0cmFfZGF0YSIsInVwbG9hZFJhbmsiLCJjb25zb2xlIiwiZXJyb3IiLCJzZXRMYXN0VXBsb2FkUmFua0RhdGEiLCJhc3NpZ24iLCJnZXRSZWNvcmREYXRhIiwibWFpbiIsInRQb2ludHMiLCJkYWlseSIsImhlV2lucyIsImdldFRvZGF5TWFpblNjb3JlIiwiZ2V0VG9kYXlEYWlseVNjb3JlIiwiZ2V0VG9kYXlNYWluV2luIiwiZ2V0VG9kYXlEYWlseVdpbiIsInVwbG9hZFJhY2VEYXRhIiwiZ2V0VG9kYXlSYWNlRGF0YSIsImdldFRvZGF5UmFjZVNjb3JlIiwiaCIsImYiLCJnIiwic2VydmVyVGltZSIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJnZXRUaW1lIiwiY2xlYXJEYXRhIiwiZ2V0Q2FjaGVkRGF0YUJ5VHlwZSIsImdldFJhbmsiLCJzZXRDYWNoZWREYXRhQnlUeXBlIiwiZ2V0TXlSYW5rRGF0YUJ5VGFnIiwiZ2V0WWRheVJhY2VEYXRhIiwiZ2V0WWRheVJhY2VSYW5rRGF0YSIsImxlbmd0aCIsIlByb21pc2UiLCJyZXNvbHZlIiwiZ2V0TXlSYWNlVG9kYXlEYXRhIiwiZ2V0TXlSYWNlWWRheURhdGEiLCJnZXRZZGF5UmFjZVNjb3JlIiwiZ2V0TG9jYWxSYWNlUmFua0RhdGEiLCJ5ZGF5UlJEYXRhIiwic2V0WWRheVJhY2VSYW5rRGF0YSIsInNldExvY2FsUmFjZVJhbmtEYXRhIiwicGxhdGZvcm0iLCJzZXRTdG9yYWdlIiwiZ2V0U3RvcmFnZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztFQUFDQyxLQUFLLEVBQUUsQ0FBQztBQUFULENBQTdDO0FBQ0FELE9BQU8sQ0FBQ0UsWUFBUixHQUF1QkYsT0FBTyxDQUFDRyxRQUFSLEdBQW1CSCxPQUFPLENBQUNJLE9BQVIsR0FBa0IsS0FBSyxDQUFqRTtBQUNBLElBQUlDLENBQUo7QUFDQSxJQUFJQyxDQUFKO0FBQ0EsSUFBSUMsQ0FBSjs7QUFDQSxJQUFJQyxJQUFJLEdBQUdDLE9BQU8sQ0FBQyxLQUFELENBQWxCOztBQUNBLElBQUlDLFFBQVEsR0FBR0QsT0FBTyxDQUFDLFNBQUQsQ0FBdEI7O0FBQ0EsSUFBSUUsS0FBSyxHQUFHRixPQUFPLENBQUMsTUFBRCxDQUFuQjs7QUFDQSxJQUFJRyxNQUFNLEdBQUdILE9B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QUNBLEtBQUt0RSxTQUFMLEdBQWlCckMsTUFBTSxDQUFDeUUsTUFBUCxDQUFjekUsTUFBTSxDQUFDeUUsTUFBUCxDQUFjLEVBQWQsRUFBa0I3QixDQUFsQixDQUFkLEVBQW9DN0IsQ0FBcEMsQ0FBakI7O0lBQ0FMLElBQUksQ0FBQ3FHLFFBQUwsQ0FBY0MsVUFBZCxDQUF5QixjQUF6QixFQUF5QyxLQUFLM0UsU0FBOUM7RUFDSCxDQUpEOztFQUtBdEIsQ0FBQyxDQUFDMkIsU0FBRixDQUFZaUUsb0JBQVosR0FBbUMsWUFBWTtJQUMzQyxRQUFRLEtBQUt0RSxTQUFiLEtBQTJCLEtBQUtBLFNBQUwsR0FBaUIzQixJQUFJLENBQUNxRyxRQUFMLENBQWNFLFVBQWQsQ0FBeUIsY0FBekIsS0FBNEMsRUFBeEY7SUFDQSxPQUFPLEtBQUs1RSxTQUFaO0VBQ0gsQ0FIRDs7RUFJQSxPQUFPdEIsQ0FBUDtBQUNILENBdFNPLEVBQVI7O0FBdVNBYixPQUFPLFdBQVAsR0FBa0J1QixDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7dmFsdWU6ICEwfSk7XG5leHBvcnRzLnJhbmtTb3J0VHlwZSA9IGV4cG9ydHMucmFua1R5cGUgPSBleHBvcnRzLnJhbmtUYWcgPSB2b2lkIDA7XG52YXIgbjtcbnZhciBpO1xudmFyIHI7XG52YXIgX2lkeCA9IHJlcXVpcmUoXCJpZHhcIik7XG52YXIgX3JlcXVlc3QgPSByZXF1aXJlKFwicmVxdWVzdFwiKTtcbnZhciBfdGltZSA9IHJlcXVpcmUoXCJ0aW1lXCIpO1xudmFyIF9wSW5mbyA9IHJlcXVpcmUoXCJwSW5mb1wiKTtcbihmdW5jdGlvbiAodCkge1xuICAgICh0Lm1haW5TY29yZSA9IFwibWFpbl9zY29yZVwiKSxcbiAgICAgICAgKHQuZGFpbHlTY29yZSA9IFwiZGFpbHlfc2NvcmVcIiksXG4gICAgICAgICh0Lm1haW5XaW4gPSBcIm1haW5fd2luXCIpLFxuICAgICAgICAodC5kYWlseVdpbiA9IFwiZGFpbHlfd2luXCIpLFxuICAgICAgICAodC5yYWNlU2NvcmUgPSBcInJhY2Vfc2NvcmVcIik7XG59KSgobiA9IGV4cG9ydHMucmFua1RhZyB8fCAoZXhwb3J0cy5yYW5rVGFnID0ge30pKSk7XG4oZnVuY3Rpb24gKHQpIHtcbiAgICAodC5Ub3RhbCA9IFwidG90YWxcIiksICh0LlRvZGF5ID0gXCJkYWlseVwiKTtcbn0pKChpID0gZXhwb3J0cy5yYW5rVHlwZSB8fCAoZXhwb3J0cy5yYW5rVHlwZSA9IHt9KSkpO1xuKGZ1bmN0aW9uICh0KSB7XG4gICAgdC5EZXNjID0gXCJkZXNjXCI7XG4gICAgdC5Bc2MgPSBcImFzY1wiO1xufSkoKHIgPSBleHBvcnRzLnJhbmtTb3J0VHlwZSB8fCAoZXhwb3J0cy5yYW5rU29ydFR5cGUgPSB7fSkpKTtcbnZhciB1ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICB0aGlzLmxhc3RSZXF1ZXN0VGltZSA9IDA7XG4gICAgICAgIHRoaXMubGFzdFJlcVJhY2VUaW1lID0gMDtcbiAgICAgICAgdGhpcy50dE1TY29yZSA9IG51bGw7XG4gICAgICAgIHRoaXMudHREU2NvcmUgPSBudWxsO1xuICAgICAgICB0aGlzLnR0TVdpbiA9IG51bGw7XG4gICAgICAgIHRoaXMudHREV2luID0gbnVsbDtcbiAgICAgICAgdGhpcy50ZE1TY29yZSA9IG51bGw7XG4gICAgICAgIHRoaXMudGREU2NvcmUgPSBudWxsO1xuICAgICAgICB0aGlzLnRkTVdpbiA9IG51bGw7XG4gICAgICAgIHRoaXMudGREV2luID0gbnVsbDtcbiAgICAgICAgdGhpcy50ZFJTY29yZSA9IG51bGw7XG4gICAgICAgIHRoaXMubG9jYWxEYXRhID0gbnVsbDtcbiAgICB9XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIFwiaW5zXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW5zIHx8ICh0aGlzLl9pbnMgPSBuZXcgdCgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITBcbiAgICB9KTtcbiAgICB0LnByb3RvdHlwZS51cGxvYWRSYW5rRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSBpLlRvdGFsO1xuICAgICAgICB2YXIgZSA9IG4ubWFpblNjb3JlO1xuICAgICAgICB0aGlzLnVwbG9hZFJhbmtEYXRhQnlUYWcoZSwgdCk7XG4gICAgICAgIGUgPSBuLm1haW5XaW47XG4gICAgICAgIHRoaXMudXBsb2FkUmFua0RhdGFCeVRhZyhlLCB0KTtcbiAgICAgICAgZSA9IG4uZGFpbHlTY29yZTtcbiAgICAgICAgdGhpcy51cGxvYWRSYW5rRGF0YUJ5VGFnKGUsIHQpO1xuICAgICAgICBlID0gbi5kYWlseVdpbjtcbiAgICAgICAgdGhpcy51cGxvYWRSYW5rRGF0YUJ5VGFnKGUsIHQpO1xuICAgICAgICB0ID0gaS5Ub2RheTtcbiAgICAgICAgZSA9IG4ubWFpblNjb3JlO1xuICAgICAgICB0aGlzLnVwbG9hZFJhbmtEYXRhQnlUYWcoZSwgdCk7XG4gICAgICAgIGUgPSBuLmRhaWx5U2NvcmU7XG4gICAgICAgIHRoaXMudXBsb2FkUmFua0RhdGFCeVRhZyhlLCB0KTtcbiAgICAgICAgZSA9IG4ubWFpbldpbjtcbiAgICAgICAgdGhpcy51cGxvYWRSYW5rRGF0YUJ5VGFnKGUsIHQpO1xuICAgICAgICBlID0gbi5kYWlseVdpbjtcbiAgICAgICAgdGhpcy51cGxvYWRSYW5rRGF0YUJ5VGFnKGUsIHQpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUudXBsb2FkUmFua0RhdGFCeVRhZyA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgIHZhciBvID0gX3BJbmZvLmRlZmF1bHQuaW5zO1xuICAgICAgICB2YXIgbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoby5nZXRMYXN0VXBsb2FkUmFua0RhdGEoKSkpO1xuICAgICAgICB2YXIgaSA9IHRoaXMuZ2V0VmFsdWVBbmRLZXlCeVRhZyh0LCBlKTtcbiAgICAgICAgdmFyIGEgPSBpWzBdO1xuICAgICAgICB2YXIgYyA9IGlbMV07XG4gICAgICAgIHZhciB1ID0gbltjXTtcbiAgICAgICAgdmFyIHAgPSBOdW1iZXIoYSk7XG4gICAgICAgIGlmIChwID4gTnVtYmVyKHUpKSB7XG4gICAgICAgICAgICB2YXIgZCA9IHRoaXMuZ2V0UmFua0RhdGFCeVR5cGUodCwgZSk7XG4gICAgICAgICAgICBuW2NdID0gYTtcbiAgICAgICAgICAgIGQudGhlbihmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgIHZhciBpID0gbi5kYXRhO1xuICAgICAgICAgICAgICAgIHZhciBhID0gMDtcbiAgICAgICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgICAgICBpLnNvcnQoZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnNvcnRfdmFsdWUgLSB0LnNvcnRfdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IGlbOTldO1xuICAgICAgICAgICAgICAgICAgICBjICYmIChhID0gYy5zb3J0X3ZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHAgPiBOdW1iZXIoYSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgbC51U2tpbiA9IG8uZ2V0VXNpbmdTa2luKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1ID0ge3JhbmtfdGFnOiB0LCBzb3J0X3ZhbHVlOiBwLCBzb3J0X3R5cGU6IHIuRGVzYywgZXh0cmFfZGF0YTogbH07XG4gICAgICAgICAgICAgICAgICAgIF9yZXF1ZXN0LmRlZmF1bHQuaW5zLnVwbG9hZFJhbmsodSwgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJnZXRSYW5rRGF0YUVyclwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgby5zZXRMYXN0VXBsb2FkUmFua0RhdGEobik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldFZhbHVlQW5kS2V5QnlUYWcgPSBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICB2YXIgbyA9IF9wSW5mby5kZWZhdWx0LmlucztcbiAgICAgICAgdmFyIHIgPSBPYmplY3QuYXNzaWduKHt9LCBfcEluZm8uZGVmYXVsdC5pbnMuZ2V0UmVjb3JkRGF0YSgpKTtcbiAgICAgICAgaWYgKGUgPT09IGkuVG90YWwpXG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIG4ubWFpblNjb3JlOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3IubWFpbi50UG9pbnRzLCBcInR0TVNjb3JlXCJdO1xuICAgICAgICAgICAgICAgIGNhc2Ugbi5kYWlseVNjb3JlOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3IuZGFpbHkudFBvaW50cywgXCJ0dERTY29yZVwiXTtcbiAgICAgICAgICAgICAgICBjYXNlIG4ubWFpbldpbjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtyLm1haW4uaGVXaW5zLCBcInR0TVdpblwiXTtcbiAgICAgICAgICAgICAgICBjYXNlIG4uZGFpbHlXaW46XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbci5kYWlseS5oZVdpbnMsIFwidHREV2luXCJdO1xuICAgICAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlID09PSBpLlRvZGF5KVxuICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBuLm1haW5TY29yZTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtvLmdldFRvZGF5TWFpblNjb3JlKCksIFwidGRNU2NvcmVcIl07XG4gICAgICAgICAgICAgICAgY2FzZSBuLmRhaWx5U2NvcmU6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbby5nZXRUb2RheURhaWx5U2NvcmUoKSwgXCJ0ZERTY29yZVwiXTtcbiAgICAgICAgICAgICAgICBjYXNlIG4ubWFpbldpbjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtvLmdldFRvZGF5TWFpbldpbigpLCBcInRkTVdpblwiXTtcbiAgICAgICAgICAgICAgICBjYXNlIG4uZGFpbHlXaW46XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbby5nZXRUb2RheURhaWx5V2luKCksIFwidGREV2luXCJdO1xuICAgICAgICAgICAgfVxuICAgIH07XG4gICAgdC5wcm90b3R5cGUudXBsb2FkUmFjZURhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZ2V0VG9kYXlSYWNlRGF0YSgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHZhciBlID0gX3BJbmZvLmRlZmF1bHQuaW5zO1xuICAgICAgICAgICAgICAgIHZhciBvID0gdC5kYXRhO1xuICAgICAgICAgICAgICAgIG8gJiZcbiAgICAgICAgICAgICAgICAgICAgby5zb3J0KGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5zb3J0X3ZhbHVlIC0gdC5zb3J0X3ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IGUuZ2V0TGFzdFVwbG9hZFJhbmtEYXRhKCk7XG4gICAgICAgICAgICAgICAgdmFyIGMgPSBuLnJhY2VTY29yZTtcbiAgICAgICAgICAgICAgICB2YXIgdSA9IGUuZ2V0VG9kYXlSYWNlU2NvcmUoKTtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IGEudGRSU2NvcmU7XG4gICAgICAgICAgICAgICAgdmFyIGQgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBoID0gb1s5OV07XG4gICAgICAgICAgICAgICAgaWYgKChoICYmIChkID0gaC5zb3J0X3ZhbHVlKSwgTnVtYmVyKHUpID4gTnVtYmVyKHApICYmIE51bWJlcih1KSA+IE51bWJlcihkKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYS50ZFJTY29yZSA9IHU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0ge307XG4gICAgICAgICAgICAgICAgICAgIGYudVNraW4gPSBlLmdldFVzaW5nU2tpbigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IHtyYW5rX3RhZzogYywgc29ydF92YWx1ZTogdSwgc29ydF90eXBlOiByLkRlc2MsIGV4dHJhX2RhdGE6IGZ9O1xuICAgICAgICAgICAgICAgICAgICBfcmVxdWVzdC5kZWZhdWx0Lmlucy51cGxvYWRSYW5rKGcsIGkuVG9kYXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlLnNldExhc3RVcGxvYWRSYW5rRGF0YShhKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJ1cGxvYWRSYWNlRGF0YVwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0UmFua0RhdGFCeVR5cGUgPSBmdW5jdGlvbiAodCwgZSwgbykge1xuICAgICAgICB2b2lkIDAgPT09IG8gJiYgKG8gPSByLkRlc2MpO1xuICAgICAgICB2YXIgbiA9IF90aW1lLmRlZmF1bHQuaW5zLnNlcnZlclRpbWUgfHwgTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDFlMyk7XG4gICAgICAgIHZhciBhID0gbiAtIHRoaXMubGFzdFJlcXVlc3RUaW1lID49IDM2MDA7XG4gICAgICAgIGEgJiYgdGhpcy5jbGVhckRhdGEoKTtcbiAgICAgICAgdmFyIGwgPSB0aGlzLmdldENhY2hlZERhdGFCeVR5cGUodCwgZSk7XG4gICAgICAgIGlmICghYSAmJiBsKSByZXR1cm4gdGhpcy5nZXRDYWNoZWREYXRhQnlUeXBlKHQsIGUpO1xuICAgICAgICBpZiAoKCh0aGlzLmxhc3RSZXF1ZXN0VGltZSA9IG4pLCBlID09PSBpLlRvdGFsKSkge1xuICAgICAgICAgICAgdmFyIHUgPSBfcmVxdWVzdC5kZWZhdWx0Lmlucy5nZXRSYW5rKHQsIGUsIG8pO1xuICAgICAgICAgICAgdGhpcy5zZXRDYWNoZWREYXRhQnlUeXBlKHQsIGUsIHUpO1xuICAgICAgICAgICAgcmV0dXJuIHU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGUgPT09IGkuVG9kYXkpIHtcbiAgICAgICAgICAgIHZhciBwID0gX3RpbWUuZGVmYXVsdC5pbnMuc2VydmVyVGltZSB8fCBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHAgLT0gKHAgKyAyODgwMCkgJSA4NjQwMDtcbiAgICAgICAgICAgIHAgKj0gMWUzO1xuICAgICAgICAgICAgdmFyIGQgPSBfcmVxdWVzdC5kZWZhdWx0Lmlucy5nZXRSYW5rKHQsIGUsIG8sIHApO1xuICAgICAgICAgICAgdGhpcy5zZXRDYWNoZWREYXRhQnlUeXBlKHQsIGUsIGQpO1xuICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldE15UmFua0RhdGFCeVRhZyA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgIHZhciBvID0gX3BJbmZvLmRlZmF1bHQuaW5zLmdldFJlY29yZERhdGEoKTtcbiAgICAgICAgaWYgKGUgPT09IGkuVG9kYXkpXG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBjYXNlIG4ubWFpblNjb3JlOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3BJbmZvLmRlZmF1bHQuaW5zLmdldFRvZGF5TWFpblNjb3JlKCk7XG4gICAgICAgICAgICAgICAgY2FzZSBuLmRhaWx5U2NvcmU6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfcEluZm8uZGVmYXVsdC5pbnMuZ2V0VG9kYXlEYWlseVNjb3JlKCk7XG4gICAgICAgICAgICAgICAgY2FzZSBuLm1haW5XaW46XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfcEluZm8uZGVmYXVsdC5pbnMuZ2V0VG9kYXlNYWluV2luKCk7XG4gICAgICAgICAgICAgICAgY2FzZSBuLmRhaWx5V2luOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3BJbmZvLmRlZmF1bHQuaW5zLmdldFRvZGF5RGFpbHlXaW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZSA9PT0gaS5Ub3RhbClcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGNhc2Ugbi5tYWluU2NvcmU6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvLm1haW4udFBvaW50cztcbiAgICAgICAgICAgICAgICBjYXNlIG4uZGFpbHlTY29yZTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8uZGFpbHkudFBvaW50cztcbiAgICAgICAgICAgICAgICBjYXNlIG4ubWFpbldpbjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG8ubWFpbi5oZVdpbnM7XG4gICAgICAgICAgICAgICAgY2FzZSBuLmRhaWx5V2luOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gby5kYWlseS5oZVdpbnM7XG4gICAgICAgICAgICB9XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5nZXRUb2RheVJhY2VEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IF90aW1lLmRlZmF1bHQuaW5zLnNlcnZlclRpbWUgfHwgTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDFlMyk7XG4gICAgICAgIHZhciBlID0gdCAtIHRoaXMubGFzdFJlcVJhY2VUaW1lID49IDM2MDA7XG4gICAgICAgIGUgJiYgKHRoaXMudGREV2luID0gbnVsbCk7XG4gICAgICAgIHZhciBvID0gdGhpcy5nZXRDYWNoZWREYXRhQnlUeXBlKG4ucmFjZVNjb3JlLCBpLlRvZGF5KTtcbiAgICAgICAgaWYgKGUgfHwgIW8pIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFJlcVJhY2VUaW1lID0gdDtcbiAgICAgICAgICAgIHZhciBhID0gX3RpbWUuZGVmYXVsdC5pbnMuc2VydmVyVGltZSB8fCBNYXRoLmZsb29yKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMWUzKTtcbiAgICAgICAgICAgIGEgLT0gKGEgKyAyODgwMCkgJSA4NjQwMDtcbiAgICAgICAgICAgIGEgKj0gMWUzO1xuICAgICAgICAgICAgdmFyIGwgPSBfcmVxdWVzdC5kZWZhdWx0Lmlucy5nZXRSYW5rKG4ucmFjZVNjb3JlLCBpLlRvZGF5LCByLkRlc2MsIGEpO1xuICAgICAgICAgICAgdGhpcy5zZXRDYWNoZWREYXRhQnlUeXBlKG4ucmFjZVNjb3JlLCBpLlRvZGF5LCBsKTtcbiAgICAgICAgICAgIHJldHVybiBsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldENhY2hlZERhdGFCeVR5cGUobi5yYWNlU2NvcmUsIGkuVG9kYXkpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0WWRheVJhY2VEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IF90aW1lLmRlZmF1bHQuaW5zLnNlcnZlclRpbWUgfHwgTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDFlMyk7XG4gICAgICAgIHQgLT0gODY0MDA7XG4gICAgICAgIHQgLT0gKHQgKyAyODgwMCkgJSA4NjQwMDtcbiAgICAgICAgdCAqPSAxZTM7XG4gICAgICAgIHZhciBlID0gdGhpcy5nZXRZZGF5UmFjZVJhbmtEYXRhKCk7XG4gICAgICAgIGlmICgwICE9IGUubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHtkYXRhOiBlfTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9yZXF1ZXN0LmRlZmF1bHQuaW5zLmdldFJhbmsobi5yYWNlU2NvcmUsIGkuVG9kYXksIHIuRGVzYywgdCk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5nZXRNeVJhY2VUb2RheURhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfcEluZm8uZGVmYXVsdC5pbnMuZ2V0VG9kYXlSYWNlU2NvcmUoKTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldE15UmFjZVlkYXlEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3BJbmZvLmRlZmF1bHQuaW5zLmdldFlkYXlSYWNlU2NvcmUoKTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnNldENhY2hlZERhdGFCeVR5cGUgPSBmdW5jdGlvbiAodCwgZSwgbykge1xuICAgICAgICBpZiAoZSA9PT0gaS5Ub3RhbClcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGNhc2Ugbi5tYWluU2NvcmU6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHRNU2NvcmUgPSBvO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIG4uZGFpbHlTY29yZTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dERTY29yZSA9IG87XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2Ugbi5tYWluV2luOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnR0TVdpbiA9IG87XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2Ugbi5kYWlseVdpbjpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50dERXaW4gPSBvO1xuICAgICAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlID09PSBpLlRvZGF5KVxuICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBuLm1haW5TY29yZTpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZE1TY29yZSA9IG87XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2Ugbi5kYWlseVNjb3JlOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRkRFNjb3JlID0gbztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBuLm1haW5XaW46XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGRNV2luID0gbztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBuLmRhaWx5V2luOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRkRFdpbiA9IG87XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2Ugbi5yYWNlU2NvcmU6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGREV2luID0gbztcbiAgICAgICAgICAgIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldENhY2hlZERhdGFCeVR5cGUgPSBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICBpZiAoZSA9PT0gaS5Ub3RhbClcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGNhc2Ugbi5tYWluU2NvcmU6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnR0TVNjb3JlO1xuICAgICAgICAgICAgICAgIGNhc2Ugbi5kYWlseVNjb3JlOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50dERTY29yZTtcbiAgICAgICAgICAgICAgICBjYXNlIG4ubWFpbldpbjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHRNV2luO1xuICAgICAgICAgICAgICAgIGNhc2Ugbi5kYWlseVdpbjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHREV2luO1xuICAgICAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlID09PSBpLlRvZGF5KVxuICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSBuLm1haW5TY29yZTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGRNU2NvcmU7XG4gICAgICAgICAgICAgICAgY2FzZSBuLmRhaWx5U2NvcmU6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRkRFNjb3JlO1xuICAgICAgICAgICAgICAgIGNhc2Ugbi5tYWluV2luOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50ZE1XaW47XG4gICAgICAgICAgICAgICAgY2FzZSBuLmRhaWx5V2luOlxuICAgICAgICAgICAgICAgIGNhc2Ugbi5yYWNlU2NvcmU6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRkRFdpbjtcbiAgICAgICAgICAgIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmNsZWFyRGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50dE1TY29yZSA9IG51bGw7XG4gICAgICAgIHRoaXMudHREU2NvcmUgPSBudWxsO1xuICAgICAgICB0aGlzLnR0TVdpbiA9IG51bGw7XG4gICAgICAgIHRoaXMudHREV2luID0gbnVsbDtcbiAgICAgICAgdGhpcy50ZE1TY29yZSA9IG51bGw7XG4gICAgICAgIHRoaXMudGREU2NvcmUgPSBudWxsO1xuICAgICAgICB0aGlzLnRkTVdpbiA9IG51bGw7XG4gICAgICAgIHRoaXMudGREV2luID0gbnVsbDtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldFlkYXlSYWNlUmFua0RhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy5nZXRMb2NhbFJhY2VSYW5rRGF0YSgpLnlkYXlSUkRhdGE7XG4gICAgICAgIHJldHVybiBudWxsID09IHQgPyBbXSA6IHQ7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5zZXRZZGF5UmFjZVJhbmtEYXRhID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgdGhpcy5zZXRMb2NhbFJhY2VSYW5rRGF0YSh7eWRheVJSRGF0YTogdH0pO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuc2V0TG9jYWxSYWNlUmFua0RhdGEgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IHRoaXMuZ2V0TG9jYWxSYWNlUmFua0RhdGEoKTtcbiAgICAgICAgdGhpcy5sb2NhbERhdGEgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGUpLCB0KTtcbiAgICAgICAgX2lkeC5wbGF0Zm9ybS5zZXRTdG9yYWdlKFwieWRheVJhbmtEYXRhXCIsIHRoaXMubG9jYWxEYXRhKTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldExvY2FsUmFjZVJhbmtEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBudWxsID09IHRoaXMubG9jYWxEYXRhICYmICh0aGlzLmxvY2FsRGF0YSA9IF9pZHgucGxhdGZvcm0uZ2V0U3RvcmFnZShcInlkYXlSYW5rRGF0YVwiKSB8fCB7fSk7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsRGF0YTtcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKTtcbmV4cG9ydHMuZGVmYXVsdCA9IHU7XG4iXX0=