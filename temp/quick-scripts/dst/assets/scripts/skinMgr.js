
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/skinMgr.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '9335eNcn6hC4YaMUkwXQ5k8', 'skinMgr');
// scripts/skinMgr.js

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: !0
});
exports.SkinUnlockType = exports.SkinIdEnum = exports.SkinState = void 0;
var r;

var _evts = require("evts");

var _idx = require("idx");

var _res = require("res");

var _uData = require("uData");

var _global = require("global");

var _pInfo = require("pInfo");

(function (t) {
  t[t.none = 0] = "none", t[t.unlock = 1] = "unlock", t[t.lock = 2] = "lock", t[t.using = 3] = "using";
})(exports.SkinState || (exports.SkinState = {}));

(function (t) {
  t.bg = "bg", t.role = "role", t.nameFrame = "nameFrame", t.headFrame = "headFrame";
})(r = exports.SkinIdEnum || (exports.SkinIdEnum = {}));

(function (t) {
  t[t.none = 0] = "none";
  t[t.video = 1] = "video";
  t[t.coin = 2] = "coin";
})(exports.SkinUnlockType || (exports.SkinUnlockType = {}));

var d = function () {
  function t() {
    this.defaultConfig = {
      bg: {
        skinId: "bg",
        itemData: [{
          ref: 1,
          name: "默认背景",
          unlockType: 0,
          unlockValue: 0,
          desc: ""
        }, {
          ref: 2,
          name: "夜色降临",
          unlockType: 1,
          unlockValue: 20,
          desc: ""
        }]
      },
      role: {
        skinId: "role",
        itemData: [{
          ref: 1,
          name: "默认角色",
          unlockType: 0,
          unlockValue: 0,
          desc: ""
        }, {
          ref: 2,
          name: "流连忘返",
          unlockType: 1,
          unlockValue: 20,
          desc: ""
        }]
      },
      nameFrame: {
        skinId: "nameFrame",
        itemData: [{
          ref: 1,
          name: "默认名字框",
          unlockType: 0,
          unlockValue: 0,
          desc: ""
        }, {
          ref: 2,
          name: "心旷神怡",
          unlockType: 2,
          unlockValue: 1e4,
          desc: ""
        }, {
          ref: 3,
          name: "海誓山盟",
          unlockType: 2,
          unlockValue: 1e4,
          desc: ""
        }, {
          ref: 4,
          name: "旖旎风光",
          unlockType: 2,
          unlockValue: 2e4,
          desc: ""
        }, {
          ref: 5,
          name: "柳暗花遮",
          unlockType: 2,
          unlockValue: 2e4,
          desc: ""
        }, {
          ref: 6,
          name: "姹紫嫣红",
          unlockType: 2,
          unlockValue: 2e4,
          desc: ""
        }]
      },
      headFrame: {
        skinId: "headFrame",
        itemData: [{
          ref: 1,
          name: "默认头像框",
          unlockType: 0,
          unlockValue: 0,
          desc: ""
        }, {
          ref: 2,
          name: "秀色可餐",
          unlockType: 2,
          unlockValue: 2e4,
          desc: ""
        }, {
          ref: 3,
          name: "火树银花",
          unlockType: 2,
          unlockValue: 2e4,
          desc: ""
        }, {
          ref: 4,
          name: "湖光山色",
          unlockType: 2,
          unlockValue: 2e3,
          desc: ""
        }, {
          ref: 5,
          name: "鸟语花香",
          unlockType: 1,
          unlockValue: 10,
          desc: ""
        }, {
          ref: 6,
          name: "江山如画",
          unlockType: 1,
          unlockValue: 10,
          desc: ""
        }]
      }
    };
    this.skinConfig = this.defaultConfig;
  }

  Object.defineProperty(t, "ins", {
    get: function get() {
      return this._ins || (this._ins = new t());
    },
    enumerable: !1,
    configurable: !0
  });

  t.prototype.init = function () {
    var t = this;
    cc.resources.load("config", cc.JsonAsset, function (e, o) {
      !e && o && o.json ? t.skinConfig = o.json : t.skinConfig = t.defaultConfig;
    });
  };

  t.prototype.isUsingSkin = function (t, e) {
    return _pInfo["default"].ins.getUsingSkin()[t] === e;
  };

  t.prototype.isHasSkin = function (t, e) {
    var o = _pInfo["default"].ins.getMySkin();

    return o[t] && o[t].includes(e);
  };

  t.prototype.getSkinConfig = function (t) {
    return this.skinConfig[t];
  };

  t.prototype.getSkinData = function (t, e) {
    for (var o = this.getSkinConfig(t).itemData, n = 0; n < o.length; n++) {
      if (o[n].ref === e) return o[n];
    }

    return null;
  };

  t.prototype.addSkin = function (t, e) {
    _pInfo["default"].ins.addMySkin(t, e);

    _idx.platform.reportEvent(_idx.ERepEvt.buySkin, {
      skinId: t,
      ref: e
    });

    _evts["default"].opE.emit({
      action: _evts["default"].SKIN_CHG,
      data: {
        skinId: t,
        ref: e,
        isUse: !1
      }
    });

    _uData["default"].ins._setLocalAndCloudData();
  };

  t.prototype.usingSkin = function (t, e) {
    var o;

    _pInfo["default"].ins.setUsingSkin(((o = {})[t] = e, o));

    _idx.platform.reportEvent(_idx.ERepEvt.useSkin, {
      skinId: t,
      ref: e
    });

    _evts["default"].opE.emit({
      action: _evts["default"].SKIN_CHG,
      data: {
        skinId: t,
        ref: e,
        isUse: !0
      }
    });
  };

  t.prototype.updateHeadFrame = function (t, e, o) {
    var n;
    var i;

    if (void 0 === o && (o = !1), e) {
      t || (t = 1);
      var a;
      var s = (null === (i = null === (n = this.getSkinConfig(r.headFrame)) || void 0 === n ? void 0 : n.itemData) || void 0 === i ? void 0 : i.length) || 1;
      (t = Math.min(t, s)) > 6 ? (a = _global.OssConfig.skinUrl + "headFrame/head" + t + ".png", cc.assetManager.loadRemote(a, cc.Texture2D, function (t, n) {
        if (!t && n && e.isValid) {
          var i = new cc.SpriteFrame(n);
          e.spriteFrame = i;
        } else o ? (a = "game/skin/headFrame/head1", _res["default"].ins.lSF(a, e)) : e.spriteFrame = null;
      })) : (a = "game/skin/headFrame/head" + t, _res["default"].ins.lSF(a, e));
    }
  };

  t.prototype.updateBg = function (t, e, o) {
    var n;
    var i;

    if (void 0 === o && (o = !1), e) {
      t || (t = 1);
      var a;
      var s = (null === (i = null === (n = this.getSkinConfig(r.bg)) || void 0 === n ? void 0 : n.itemData) || void 0 === i ? void 0 : i.length) || 1;
      (t = Math.min(t, s)) > 2 ? (a = _global.OssConfig.skinUrl + "bg/top" + t + ".jpg", cc.assetManager.loadRemote(a, cc.Texture2D, function (t, n) {
        if (!t && n && e.isValid) {
          var i = new cc.SpriteFrame(n);
          e.spriteFrame = i;
        } else o ? (a = "game/normal/top1", _res["default"].ins.lSF(a, e)) : e.spriteFrame = null;
      })) : (a = "game/normal/top" + t, _res["default"].ins.lSF(a, e));
    }
  };

  t.prototype.updateNameFrame = function (t, e, o) {
    var n;
    var i;

    if (void 0 === o && (o = !1), e) {
      t || (t = 1);
      var a;
      var s = (null === (i = null === (n = this.getSkinConfig(r.nameFrame)) || void 0 === n ? void 0 : n.itemData) || void 0 === i ? void 0 : i.length) || 1;
      (t = Math.min(t, s)) > 6 ? (a = _global.OssConfig.skinUrl + "nameFrame/name" + t + ".png", cc.assetManager.loadRemote(a, cc.Texture2D, function (t, n) {
        if (!t && n && e.isValid) {
          var i = new cc.SpriteFrame(n);
          e.spriteFrame = i;
        } else o ? (a = "game/skin/nameFrame/name1", _res["default"].ins.lSF(a, e)) : e.spriteFrame = null;
      })) : (a = "game/skin/nameFrame/name" + t, _res["default"].ins.lSF(a, e));
    }
  };

  t.prototype.updateRole = function (t, e, o) {
    var a;
    var s;
    var l = this;

    if (void 0 === o && (o = !1), e) {
      t || (t = 1);
      var u = (null === (s = null === (a = this.getSkinConfig(r.role)) || void 0 === a ? void 0 : a.itemData) || void 0 === s ? void 0 : s.length) || 1;
      if ((t = Math.min(t, u)) > 2) this.curRoleNode = e, this.curRoleRef = t, Promise.all([this._remoteAtlas(), this._remoteImg(), this._remoteJson()]).then(function (t) {
        var o = t[0];
        var r = t[1];
        var a = t[2];
        return __awaiter(l, void 0, void 0, function () {
          var t;
          var n;
          var s;
          var l;
          return __generator(this, function (i) {
            switch (i.label) {
              case 0:
                return (t = new sp.SkeletonData()).skeletonJson = a.json, t.atlasText = o.text, t.textures = [r], t.textureNames = ["1.png"], [4, _res["default"].ins.lPre("skin/girl1")];

              case 1:
                return n = i.sent(), s = cc.instantiate(n), (l = s.getComponent(sp.Skeleton)) ? (l.skeletonData = t, s.position = cc.Vec3.ZERO, l.animation = "idle", e.addChild(s), [2]) : [2];
            }
          });
        });
      })["catch"](function (t) {
        if (console.error(t), e.removeAllChildren(), o) {
          if (!e) return;

          _res["default"].ins.lPre("skin/girl1").then(function (t) {
            var o = cc.instantiate(t);
            o.position = cc.Vec3.ZERO;
            e.addChild(o);
          });
        }
      });else {
        var p = "skin/girl" + t;
        e.removeAllChildren();

        _res["default"].ins.lPre(p).then(function (t) {
          var o = cc.instantiate(t);
          o.position = cc.Vec3.ZERO;
          e.addChild(o);
        });
      }
    }
  };

  t.prototype._remoteAtlas = function () {
    var t = this;
    var e = _global.OssConfig.skinUrl + "role/" + this.curRoleRef + "/1.atlas";
    return new Promise(function (o, n) {
      cc.assetManager.loadRemote(e, function (e, i) {
        e && n(e);
        t.curRoleNode.isValid || n("this.curRoleNode.isValid === false");
        i || n("atlasText is null");
        o(i);
      });
    });
  };

  t.prototype._remoteImg = function () {
    var t = this;
    var e = _global.OssConfig.skinUrl + "role/" + this.curRoleRef + "/1.png";
    return new Promise(function (o, n) {
      cc.assetManager.loadRemote(e, function (e, i) {
        e && n(e);
        t.curRoleNode.isValid || n("this.curRoleNode.isValid === false");
        i || n("texture is null");
        o(i);
      });
    });
  };

  t.prototype._remoteJson = function () {
    var t = this;
    var e = _global.OssConfig.skinUrl + "role/" + this.curRoleRef + "/1.json";
    return new Promise(function (o, r) {
      cc.assetManager.loadRemote(e, function (e, a) {
        return __awaiter(t, void 0, void 0, function () {
          return __generator(this, function () {
            e && r(e);
            this.curRoleNode.isValid || r("this.curRoleNode.isValid === false");
            a || r("skeletonJson is null");
            o(a);
            return [2];
          });
        });
      });
    });
  };

  return t;
}();

exports["default"] = d;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcc2tpbk1nci5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIlNraW5VbmxvY2tUeXBlIiwiU2tpbklkRW51bSIsIlNraW5TdGF0ZSIsInIiLCJfZXZ0cyIsInJlcXVpcmUiLCJfaWR4IiwiX3JlcyIsIl91RGF0YSIsIl9nbG9iYWwiLCJfcEluZm8iLCJ0Iiwibm9uZSIsInVubG9jayIsImxvY2siLCJ1c2luZyIsImJnIiwicm9sZSIsIm5hbWVGcmFtZSIsImhlYWRGcmFtZSIsInZpZGVvIiwiY29pbiIsImQiLCJkZWZhdWx0Q29uZmlnIiwic2tpbklkIiwiaXRlbURhdGEiLCJyZWYiLCJuYW1lIiwidW5sb2NrVHlwZSIsInVubG9ja1ZhbHVlIiwiZGVzYyIsInNraW5Db25maWciLCJnZXQiLCJfaW5zIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsInByb3RvdHlwZSIsImluaXQiLCJjYyIsInJlc291cmNlcyIsImxvYWQiLCJKc29uQXNzZXQiLCJlIiwibyIsImpzb24iLCJpc1VzaW5nU2tpbiIsImlucyIsImdldFVzaW5nU2tpbiIsImlzSGFzU2tpbiIsImdldE15U2tpbiIsImluY2x1ZGVzIiwiZ2V0U2tpbkNvbmZpZyIsImdldFNraW5EYXRhIiwibiIsImxlbmd0aCIsImFkZFNraW4iLCJhZGRNeVNraW4iLCJwbGF0Zm9ybSIsInJlcG9ydEV2ZW50IiwiRVJlcEV2dCIsImJ1eVNraW4iLCJvcEUiLCJlbWl0IiwiYWN0aW9uIiwiU0tJTl9DSEciLCJkYXRhIiwiaXNVc2UiLCJfc2V0TG9jYWxBbmRDbG91ZERhdGEiLCJ1c2luZ1NraW4iLCJzZXRVc2luZ1NraW4iLCJ1c2VTa2luIiwidXBkYXRlSGVhZEZyYW1lIiwiaSIsImEiLCJzIiwiTWF0aCIsIm1pbiIsIk9zc0NvbmZpZyIsInNraW5VcmwiLCJhc3NldE1hbmFnZXIiLCJsb2FkUmVtb3RlIiwiVGV4dHVyZTJEIiwiaXNWYWxpZCIsIlNwcml0ZUZyYW1lIiwic3ByaXRlRnJhbWUiLCJsU0YiLCJ1cGRhdGVCZyIsInVwZGF0ZU5hbWVGcmFtZSIsInVwZGF0ZVJvbGUiLCJsIiwidSIsImN1clJvbGVOb2RlIiwiY3VyUm9sZVJlZiIsIlByb21pc2UiLCJhbGwiLCJfcmVtb3RlQXRsYXMiLCJfcmVtb3RlSW1nIiwiX3JlbW90ZUpzb24iLCJ0aGVuIiwiX19hd2FpdGVyIiwiX19nZW5lcmF0b3IiLCJsYWJlbCIsInNwIiwiU2tlbGV0b25EYXRhIiwic2tlbGV0b25Kc29uIiwiYXRsYXNUZXh0IiwidGV4dCIsInRleHR1cmVzIiwidGV4dHVyZU5hbWVzIiwibFByZSIsInNlbnQiLCJpbnN0YW50aWF0ZSIsImdldENvbXBvbmVudCIsIlNrZWxldG9uIiwic2tlbGV0b25EYXRhIiwicG9zaXRpb24iLCJWZWMzIiwiWkVSTyIsImFuaW1hdGlvbiIsImFkZENoaWxkIiwiY29uc29sZSIsImVycm9yIiwicmVtb3ZlQWxsQ2hpbGRyZW4iLCJwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0VBQUVDLEtBQUssRUFBRSxDQUFDO0FBQVYsQ0FBN0M7QUFDQUQsT0FBTyxDQUFDRSxjQUFSLEdBQXlCRixPQUFPLENBQUNHLFVBQVIsR0FBcUJILE9BQU8sQ0FBQ0ksU0FBUixHQUFvQixLQUFLLENBQXZFO0FBQ0EsSUFBSUMsQ0FBSjs7QUFDQSxJQUFJQyxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxNQUFELENBQW5COztBQUNBLElBQUlDLElBQUksR0FBR0QsT0FBTyxDQUFDLEtBQUQsQ0FBbEI7O0FBQ0EsSUFBSUUsSUFBSSxHQUFHRixPQUFPLENBQUMsS0FBRCxDQUFsQjs7QUFDQSxJQUFJRyxNQUFNLEdBQUdILE9BQU8sQ0FBQyxPQUFELENBQXBCOztBQUNBLElBQUlJLE9BQU8sR0FBR0osT0FBTyxDQUFDLFFBQUQsQ0FBckI7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QUFELEVBQUksS0FBSyxDQUFULEVBQVksS0FBSyxDQUFqQixFQUFvQixZQUFXO1VBQzNDLE9BQU95RixXQUFXLENBQUMsSUFBRCxFQUFPLFlBQVc7WUFDaEMxRCxDQUFDLElBQUl2QyxDQUFDLENBQUN1QyxDQUFELENBQU47WUFDQSxLQUFLaUQsV0FBTCxDQUFpQlQsT0FBakIsSUFBNEIvRSxDQUFDLENBQUMsb0NBQUQsQ0FBN0I7WUFDQXNFLENBQUMsSUFBSXRFLENBQUMsQ0FBQyxzQkFBRCxDQUFOO1lBQ0F3QyxDQUFDLENBQUM4QixDQUFELENBQUQ7WUFDQSxPQUFPLENBQUMsQ0FBRCxDQUFQO1VBQ0gsQ0FOaUIsQ0FBbEI7UUFPSCxDQVJlLENBQWhCO01BU0gsQ0FWRDtJQVdILENBWk0sQ0FBUDtFQWFILENBaEJEOztFQWlCQSxPQUFPOUQsQ0FBUDtBQUNILENBclFPLEVBQVI7O0FBc1FBYixPQUFPLFdBQVAsR0FBa0J3QixDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiAhMCB9KTtcbmV4cG9ydHMuU2tpblVubG9ja1R5cGUgPSBleHBvcnRzLlNraW5JZEVudW0gPSBleHBvcnRzLlNraW5TdGF0ZSA9IHZvaWQgMDtcbnZhciByO1xudmFyIF9ldnRzID0gcmVxdWlyZShcImV2dHNcIik7XG52YXIgX2lkeCA9IHJlcXVpcmUoXCJpZHhcIik7XG52YXIgX3JlcyA9IHJlcXVpcmUoXCJyZXNcIik7XG52YXIgX3VEYXRhID0gcmVxdWlyZShcInVEYXRhXCIpO1xudmFyIF9nbG9iYWwgPSByZXF1aXJlKFwiZ2xvYmFsXCIpO1xudmFyIF9wSW5mbyA9IHJlcXVpcmUoXCJwSW5mb1wiKTtcbihmdW5jdGlvbih0KSB7XG4gICAgKHRbKHQubm9uZSA9IDApXSA9IFwibm9uZVwiKSxcbiAgICAodFsodC51bmxvY2sgPSAxKV0gPSBcInVubG9ja1wiKSxcbiAgICAodFsodC5sb2NrID0gMildID0gXCJsb2NrXCIpLFxuICAgICh0Wyh0LnVzaW5nID0gMyldID0gXCJ1c2luZ1wiKTtcbn0pKGV4cG9ydHMuU2tpblN0YXRlIHx8IChleHBvcnRzLlNraW5TdGF0ZSA9IHt9KSk7XG4oZnVuY3Rpb24odCkge1xuICAgICh0LmJnID0gXCJiZ1wiKSwgKHQucm9sZSA9IFwicm9sZVwiKSwgKHQubmFtZUZyYW1lID0gXCJuYW1lRnJhbWVcIiksICh0LmhlYWRGcmFtZSA9IFwiaGVhZEZyYW1lXCIpO1xufSkoKHIgPSBleHBvcnRzLlNraW5JZEVudW0gfHwgKGV4cG9ydHMuU2tpbklkRW51bSA9IHt9KSkpO1xuKGZ1bmN0aW9uKHQpIHtcbiAgICB0Wyh0Lm5vbmUgPSAwKV0gPSBcIm5vbmVcIjtcbiAgICB0Wyh0LnZpZGVvID0gMSldID0gXCJ2aWRlb1wiO1xuICAgIHRbKHQuY29pbiA9IDIpXSA9IFwiY29pblwiO1xufSkoZXhwb3J0cy5Ta2luVW5sb2NrVHlwZSB8fCAoZXhwb3J0cy5Ta2luVW5sb2NrVHlwZSA9IHt9KSk7XG52YXIgZCA9IChmdW5jdGlvbigpIHtcbiAgICBmdW5jdGlvbiB0KCkge1xuICAgICAgICB0aGlzLmRlZmF1bHRDb25maWcgPSB7XG4gICAgICAgICAgICBiZzoge1xuICAgICAgICAgICAgICAgIHNraW5JZDogXCJiZ1wiLFxuICAgICAgICAgICAgICAgIGl0ZW1EYXRhOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiAxLCBuYW1lOiBcIum7mOiupOiDjOaZr1wiLCB1bmxvY2tUeXBlOiAwLCB1bmxvY2tWYWx1ZTogMCwgZGVzYzogXCJcIiB9LFxuICAgICAgICAgICAgICAgICAgICB7IHJlZjogMiwgbmFtZTogXCLlpJzoibLpmY3kuLRcIiwgdW5sb2NrVHlwZTogMSwgdW5sb2NrVmFsdWU6IDIwLCBkZXNjOiBcIlwiIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcm9sZToge1xuICAgICAgICAgICAgICAgIHNraW5JZDogXCJyb2xlXCIsXG4gICAgICAgICAgICAgICAgaXRlbURhdGE6IFtcbiAgICAgICAgICAgICAgICAgICAgeyByZWY6IDEsIG5hbWU6IFwi6buY6K6k6KeS6ImyXCIsIHVubG9ja1R5cGU6IDAsIHVubG9ja1ZhbHVlOiAwLCBkZXNjOiBcIlwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiAyLCBuYW1lOiBcIua1gei/nuW/mOi/lFwiLCB1bmxvY2tUeXBlOiAxLCB1bmxvY2tWYWx1ZTogMjAsIGRlc2M6IFwiXCIgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBuYW1lRnJhbWU6IHtcbiAgICAgICAgICAgICAgICBza2luSWQ6IFwibmFtZUZyYW1lXCIsXG4gICAgICAgICAgICAgICAgaXRlbURhdGE6IFtcbiAgICAgICAgICAgICAgICAgICAgeyByZWY6IDEsIG5hbWU6IFwi6buY6K6k5ZCN5a2X5qGGXCIsIHVubG9ja1R5cGU6IDAsIHVubG9ja1ZhbHVlOiAwLCBkZXNjOiBcIlwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiAyLCBuYW1lOiBcIuW/g+aXt+elnuaAoVwiLCB1bmxvY2tUeXBlOiAyLCB1bmxvY2tWYWx1ZTogMWU0LCBkZXNjOiBcIlwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiAzLCBuYW1lOiBcIua1t+iqk+Wxseebn1wiLCB1bmxvY2tUeXBlOiAyLCB1bmxvY2tWYWx1ZTogMWU0LCBkZXNjOiBcIlwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiA0LCBuYW1lOiBcIuaXluaXjumjjuWFiVwiLCB1bmxvY2tUeXBlOiAyLCB1bmxvY2tWYWx1ZTogMmU0LCBkZXNjOiBcIlwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiA1LCBuYW1lOiBcIuafs+aal+iKsemBrlwiLCB1bmxvY2tUeXBlOiAyLCB1bmxvY2tWYWx1ZTogMmU0LCBkZXNjOiBcIlwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiA2LCBuYW1lOiBcIuWnuee0q+Wro+e6olwiLCB1bmxvY2tUeXBlOiAyLCB1bmxvY2tWYWx1ZTogMmU0LCBkZXNjOiBcIlwiIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGVhZEZyYW1lOiB7XG4gICAgICAgICAgICAgICAgc2tpbklkOiBcImhlYWRGcmFtZVwiLFxuICAgICAgICAgICAgICAgIGl0ZW1EYXRhOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiAxLCBuYW1lOiBcIum7mOiupOWktOWDj+ahhlwiLCB1bmxvY2tUeXBlOiAwLCB1bmxvY2tWYWx1ZTogMCwgZGVzYzogXCJcIiB9LFxuICAgICAgICAgICAgICAgICAgICB7IHJlZjogMiwgbmFtZTogXCLnp4DoibLlj6/ppJBcIiwgdW5sb2NrVHlwZTogMiwgdW5sb2NrVmFsdWU6IDJlNCwgZGVzYzogXCJcIiB9LFxuICAgICAgICAgICAgICAgICAgICB7IHJlZjogMywgbmFtZTogXCLngavmoJHpk7boirFcIiwgdW5sb2NrVHlwZTogMiwgdW5sb2NrVmFsdWU6IDJlNCwgZGVzYzogXCJcIiB9LFxuICAgICAgICAgICAgICAgICAgICB7IHJlZjogNCwgbmFtZTogXCLmuZblhYnlsbHoibJcIiwgdW5sb2NrVHlwZTogMiwgdW5sb2NrVmFsdWU6IDJlMywgZGVzYzogXCJcIiB9LFxuICAgICAgICAgICAgICAgICAgICB7IHJlZjogNSwgbmFtZTogXCLpuJ/or63oirHppplcIiwgdW5sb2NrVHlwZTogMSwgdW5sb2NrVmFsdWU6IDEwLCBkZXNjOiBcIlwiIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcmVmOiA2LCBuYW1lOiBcIuaxn+WxseWmgueUu1wiLCB1bmxvY2tUeXBlOiAxLCB1bmxvY2tWYWx1ZTogMTAsIGRlc2M6IFwiXCIgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5za2luQ29uZmlnID0gdGhpcy5kZWZhdWx0Q29uZmlnO1xuICAgIH1cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodCwgXCJpbnNcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lucyB8fCAodGhpcy5faW5zID0gbmV3IHQoKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgfSk7XG4gICAgdC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIGNjLnJlc291cmNlcy5sb2FkKFwiY29uZmlnXCIsIGNjLkpzb25Bc3NldCwgZnVuY3Rpb24oZSwgbykge1xuICAgICAgICAgICAgIWUgJiYgbyAmJiBvLmpzb24gPyAodC5za2luQ29uZmlnID0gby5qc29uKSA6ICh0LnNraW5Db25maWcgPSB0LmRlZmF1bHRDb25maWcpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmlzVXNpbmdTa2luID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gX3BJbmZvLmRlZmF1bHQuaW5zLmdldFVzaW5nU2tpbigpW3RdID09PSBlO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuaXNIYXNTa2luID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB2YXIgbyA9IF9wSW5mby5kZWZhdWx0Lmlucy5nZXRNeVNraW4oKTtcbiAgICAgICAgcmV0dXJuIG9bdF0gJiYgb1t0XS5pbmNsdWRlcyhlKTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldFNraW5Db25maWcgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNraW5Db25maWdbdF07XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5nZXRTa2luRGF0YSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgZm9yICh2YXIgbyA9IHRoaXMuZ2V0U2tpbkNvbmZpZyh0KS5pdGVtRGF0YSwgbiA9IDA7IG4gPCBvLmxlbmd0aDsgbisrKVxuICAgICAgICAgICAgaWYgKG9bbl0ucmVmID09PSBlKSByZXR1cm4gb1tuXTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5hZGRTa2luID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBfcEluZm8uZGVmYXVsdC5pbnMuYWRkTXlTa2luKHQsIGUpO1xuICAgICAgICBfaWR4LnBsYXRmb3JtLnJlcG9ydEV2ZW50KF9pZHguRVJlcEV2dC5idXlTa2luLCB7IHNraW5JZDogdCwgcmVmOiBlIH0pO1xuICAgICAgICBfZXZ0cy5kZWZhdWx0Lm9wRS5lbWl0KHsgYWN0aW9uOiBfZXZ0cy5kZWZhdWx0LlNLSU5fQ0hHLCBkYXRhOiB7IHNraW5JZDogdCwgcmVmOiBlLCBpc1VzZTogITEgfSB9KTtcbiAgICAgICAgX3VEYXRhLmRlZmF1bHQuaW5zLl9zZXRMb2NhbEFuZENsb3VkRGF0YSgpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUudXNpbmdTa2luID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB2YXIgbztcbiAgICAgICAgX3BJbmZvLmRlZmF1bHQuaW5zLnNldFVzaW5nU2tpbigoKChvID0ge30pW3RdID0gZSksIG8pKTtcbiAgICAgICAgX2lkeC5wbGF0Zm9ybS5yZXBvcnRFdmVudChfaWR4LkVSZXBFdnQudXNlU2tpbiwgeyBza2luSWQ6IHQsIHJlZjogZSB9KTtcbiAgICAgICAgX2V2dHMuZGVmYXVsdC5vcEUuZW1pdCh7IGFjdGlvbjogX2V2dHMuZGVmYXVsdC5TS0lOX0NIRywgZGF0YTogeyBza2luSWQ6IHQsIHJlZjogZSwgaXNVc2U6ICEwIH0gfSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS51cGRhdGVIZWFkRnJhbWUgPSBmdW5jdGlvbih0LCBlLCBvKSB7XG4gICAgICAgIHZhciBuO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgaWYgKCh2b2lkIDAgPT09IG8gJiYgKG8gPSAhMSksIGUpKSB7XG4gICAgICAgICAgICB0IHx8ICh0ID0gMSk7XG4gICAgICAgICAgICB2YXIgYTtcbiAgICAgICAgICAgIHZhciBzID1cbiAgICAgICAgICAgICAgICAobnVsbCA9PT0gKGkgPSBudWxsID09PSAobiA9IHRoaXMuZ2V0U2tpbkNvbmZpZyhyLmhlYWRGcmFtZSkpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uaXRlbURhdGEpIHx8XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gaSA/XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA6XG4gICAgICAgICAgICAgICAgICAgIGkubGVuZ3RoKSB8fCAxO1xuICAgICAgICAgICAgKHQgPSBNYXRoLm1pbih0LCBzKSkgPiA2XG4gICAgICAgICAgICAgICAgP1xuICAgICAgICAgICAgICAgICgoYSA9IF9nbG9iYWwuT3NzQ29uZmlnLnNraW5VcmwgKyBcImhlYWRGcmFtZS9oZWFkXCIgKyB0ICsgXCIucG5nXCIpLFxuICAgICAgICAgICAgICAgICAgICBjYy5hc3NldE1hbmFnZXIubG9hZFJlbW90ZShhLCBjYy5UZXh0dXJlMkQsIGZ1bmN0aW9uKHQsIG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdCAmJiBuICYmIGUuaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gbmV3IGNjLlNwcml0ZUZyYW1lKG4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3ByaXRlRnJhbWUgPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG8gPyAoKGEgPSBcImdhbWUvc2tpbi9oZWFkRnJhbWUvaGVhZDFcIiksIF9yZXMuZGVmYXVsdC5pbnMubFNGKGEsIGUpKSA6IChlLnNwcml0ZUZyYW1lID0gbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKSA6XG4gICAgICAgICAgICAgICAgKChhID0gXCJnYW1lL3NraW4vaGVhZEZyYW1lL2hlYWRcIiArIHQpLCBfcmVzLmRlZmF1bHQuaW5zLmxTRihhLCBlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnVwZGF0ZUJnID0gZnVuY3Rpb24odCwgZSwgbykge1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGlmICgodm9pZCAwID09PSBvICYmIChvID0gITEpLCBlKSkge1xuICAgICAgICAgICAgdCB8fCAodCA9IDEpO1xuICAgICAgICAgICAgdmFyIGE7XG4gICAgICAgICAgICB2YXIgcyA9XG4gICAgICAgICAgICAgICAgKG51bGwgPT09IChpID0gbnVsbCA9PT0gKG4gPSB0aGlzLmdldFNraW5Db25maWcoci5iZykpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uaXRlbURhdGEpIHx8XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gaSA/XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA6XG4gICAgICAgICAgICAgICAgICAgIGkubGVuZ3RoKSB8fCAxO1xuICAgICAgICAgICAgKHQgPSBNYXRoLm1pbih0LCBzKSkgPiAyXG4gICAgICAgICAgICAgICAgP1xuICAgICAgICAgICAgICAgICgoYSA9IF9nbG9iYWwuT3NzQ29uZmlnLnNraW5VcmwgKyBcImJnL3RvcFwiICsgdCArIFwiLmpwZ1wiKSxcbiAgICAgICAgICAgICAgICAgICAgY2MuYXNzZXRNYW5hZ2VyLmxvYWRSZW1vdGUoYSwgY2MuVGV4dHVyZTJELCBmdW5jdGlvbih0LCBuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXQgJiYgbiAmJiBlLmlzVmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG5ldyBjYy5TcHJpdGVGcmFtZShuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNwcml0ZUZyYW1lID0gaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBvID8gKChhID0gXCJnYW1lL25vcm1hbC90b3AxXCIpLCBfcmVzLmRlZmF1bHQuaW5zLmxTRihhLCBlKSkgOiAoZS5zcHJpdGVGcmFtZSA9IG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9KSkgOlxuICAgICAgICAgICAgICAgICgoYSA9IFwiZ2FtZS9ub3JtYWwvdG9wXCIgKyB0KSwgX3Jlcy5kZWZhdWx0Lmlucy5sU0YoYSwgZSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS51cGRhdGVOYW1lRnJhbWUgPSBmdW5jdGlvbih0LCBlLCBvKSB7XG4gICAgICAgIHZhciBuO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgaWYgKCh2b2lkIDAgPT09IG8gJiYgKG8gPSAhMSksIGUpKSB7XG4gICAgICAgICAgICB0IHx8ICh0ID0gMSk7XG4gICAgICAgICAgICB2YXIgYTtcbiAgICAgICAgICAgIHZhciBzID1cbiAgICAgICAgICAgICAgICAobnVsbCA9PT0gKGkgPSBudWxsID09PSAobiA9IHRoaXMuZ2V0U2tpbkNvbmZpZyhyLm5hbWVGcmFtZSkpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uaXRlbURhdGEpIHx8XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gaSA/XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA6XG4gICAgICAgICAgICAgICAgICAgIGkubGVuZ3RoKSB8fCAxO1xuICAgICAgICAgICAgKHQgPSBNYXRoLm1pbih0LCBzKSkgPiA2XG4gICAgICAgICAgICAgICAgP1xuICAgICAgICAgICAgICAgICgoYSA9IF9nbG9iYWwuT3NzQ29uZmlnLnNraW5VcmwgKyBcIm5hbWVGcmFtZS9uYW1lXCIgKyB0ICsgXCIucG5nXCIpLFxuICAgICAgICAgICAgICAgICAgICBjYy5hc3NldE1hbmFnZXIubG9hZFJlbW90ZShhLCBjYy5UZXh0dXJlMkQsIGZ1bmN0aW9uKHQsIG4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdCAmJiBuICYmIGUuaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gbmV3IGNjLlNwcml0ZUZyYW1lKG4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3ByaXRlRnJhbWUgPSBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIG8gPyAoKGEgPSBcImdhbWUvc2tpbi9uYW1lRnJhbWUvbmFtZTFcIiksIF9yZXMuZGVmYXVsdC5pbnMubFNGKGEsIGUpKSA6IChlLnNwcml0ZUZyYW1lID0gbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKSA6XG4gICAgICAgICAgICAgICAgKChhID0gXCJnYW1lL3NraW4vbmFtZUZyYW1lL25hbWVcIiArIHQpLCBfcmVzLmRlZmF1bHQuaW5zLmxTRihhLCBlKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnVwZGF0ZVJvbGUgPSBmdW5jdGlvbih0LCBlLCBvKSB7XG4gICAgICAgIHZhciBhO1xuICAgICAgICB2YXIgcztcbiAgICAgICAgdmFyIGwgPSB0aGlzO1xuICAgICAgICBpZiAoKHZvaWQgMCA9PT0gbyAmJiAobyA9ICExKSwgZSkpIHtcbiAgICAgICAgICAgIHQgfHwgKHQgPSAxKTtcbiAgICAgICAgICAgIHZhciB1ID1cbiAgICAgICAgICAgICAgICAobnVsbCA9PT0gKHMgPSBudWxsID09PSAoYSA9IHRoaXMuZ2V0U2tpbkNvbmZpZyhyLnJvbGUpKSB8fCB2b2lkIDAgPT09IGEgPyB2b2lkIDAgOiBhLml0ZW1EYXRhKSB8fFxuICAgICAgICAgICAgICAgICAgICB2b2lkIDAgPT09IHMgP1xuICAgICAgICAgICAgICAgICAgICB2b2lkIDAgOlxuICAgICAgICAgICAgICAgICAgICBzLmxlbmd0aCkgfHwgMTtcbiAgICAgICAgICAgIGlmICgodCA9IE1hdGgubWluKHQsIHUpKSA+IDIpXG4gICAgICAgICAgICAgICAgKHRoaXMuY3VyUm9sZU5vZGUgPSBlKSxcbiAgICAgICAgICAgICAgICAodGhpcy5jdXJSb2xlUmVmID0gdCksXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW3RoaXMuX3JlbW90ZUF0bGFzKCksIHRoaXMuX3JlbW90ZUltZygpLCB0aGlzLl9yZW1vdGVKc29uKCldKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSB0WzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHRbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0gdFsyXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcihsLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHM7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChpLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0ID0gbmV3IHNwLlNrZWxldG9uRGF0YSgpKS5za2VsZXRvbkpzb24gPSBhLmpzb24pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0LmF0bGFzVGV4dCA9IG8udGV4dCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQudGV4dHVyZXMgPSBbcl0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0LnRleHR1cmVOYW1lcyA9IFtcIjEucG5nXCJdKSwgWzQsIF9yZXMuZGVmYXVsdC5pbnMubFByZShcInNraW4vZ2lybDFcIildXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID0gaS5zZW50KCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzID0gY2MuaW5zdGFudGlhdGUobikpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsID0gcy5nZXRDb21wb25lbnQoc3AuU2tlbGV0b24pKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChsLnNrZWxldG9uRGF0YSA9IHQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocy5wb3NpdGlvbiA9IGNjLlZlYzMuWkVSTyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsLmFuaW1hdGlvbiA9IFwiaWRsZVwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5hZGRDaGlsZChzKSwgWzJdKSA6IFsyXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGNvbnNvbGUuZXJyb3IodCksIGUucmVtb3ZlQWxsQ2hpbGRyZW4oKSwgbykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlcy5kZWZhdWx0Lmlucy5sUHJlKFwic2tpbi9naXJsMVwiKS50aGVuKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGNjLmluc3RhbnRpYXRlKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8ucG9zaXRpb24gPSBjYy5WZWMzLlpFUk87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5hZGRDaGlsZChvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IFwic2tpbi9naXJsXCIgKyB0O1xuICAgICAgICAgICAgICAgIGUucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcbiAgICAgICAgICAgICAgICBfcmVzLmRlZmF1bHQuaW5zLmxQcmUocCkudGhlbihmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvID0gY2MuaW5zdGFudGlhdGUodCk7XG4gICAgICAgICAgICAgICAgICAgIG8ucG9zaXRpb24gPSBjYy5WZWMzLlpFUk87XG4gICAgICAgICAgICAgICAgICAgIGUuYWRkQ2hpbGQobyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLl9yZW1vdGVBdGxhcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIHZhciBlID0gX2dsb2JhbC5Pc3NDb25maWcuc2tpblVybCArIFwicm9sZS9cIiArIHRoaXMuY3VyUm9sZVJlZiArIFwiLzEuYXRsYXNcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG8sIG4pIHtcbiAgICAgICAgICAgIGNjLmFzc2V0TWFuYWdlci5sb2FkUmVtb3RlKGUsIGZ1bmN0aW9uKGUsIGkpIHtcbiAgICAgICAgICAgICAgICBlICYmIG4oZSk7XG4gICAgICAgICAgICAgICAgdC5jdXJSb2xlTm9kZS5pc1ZhbGlkIHx8IG4oXCJ0aGlzLmN1clJvbGVOb2RlLmlzVmFsaWQgPT09IGZhbHNlXCIpO1xuICAgICAgICAgICAgICAgIGkgfHwgbihcImF0bGFzVGV4dCBpcyBudWxsXCIpO1xuICAgICAgICAgICAgICAgIG8oaSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5fcmVtb3RlSW1nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgdmFyIGUgPSBfZ2xvYmFsLk9zc0NvbmZpZy5za2luVXJsICsgXCJyb2xlL1wiICsgdGhpcy5jdXJSb2xlUmVmICsgXCIvMS5wbmdcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG8sIG4pIHtcbiAgICAgICAgICAgIGNjLmFzc2V0TWFuYWdlci5sb2FkUmVtb3RlKGUsIGZ1bmN0aW9uKGUsIGkpIHtcbiAgICAgICAgICAgICAgICBlICYmIG4oZSk7XG4gICAgICAgICAgICAgICAgdC5jdXJSb2xlTm9kZS5pc1ZhbGlkIHx8IG4oXCJ0aGlzLmN1clJvbGVOb2RlLmlzVmFsaWQgPT09IGZhbHNlXCIpO1xuICAgICAgICAgICAgICAgIGkgfHwgbihcInRleHR1cmUgaXMgbnVsbFwiKTtcbiAgICAgICAgICAgICAgICBvKGkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuX3JlbW90ZUpzb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICB2YXIgZSA9IF9nbG9iYWwuT3NzQ29uZmlnLnNraW5VcmwgKyBcInJvbGUvXCIgKyB0aGlzLmN1clJvbGVSZWYgKyBcIi8xLmpzb25cIjtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG8sIHIpIHtcbiAgICAgICAgICAgIGNjLmFzc2V0TWFuYWdlci5sb2FkUmVtb3RlKGUsIGZ1bmN0aW9uKGUsIGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHQsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZSAmJiByKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJSb2xlTm9kZS5pc1ZhbGlkIHx8IHIoXCJ0aGlzLmN1clJvbGVOb2RlLmlzVmFsaWQgPT09IGZhbHNlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYSB8fCByKFwic2tlbGV0b25Kc29uIGlzIG51bGxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBvKGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyXTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCk7XG5leHBvcnRzLmRlZmF1bHQgPSBkOyJdfQ==