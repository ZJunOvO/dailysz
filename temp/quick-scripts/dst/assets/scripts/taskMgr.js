
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/taskMgr.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '43d38GhCKVBYrlCS5iT8Rpi', 'taskMgr');
// scripts/taskMgr.js

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: !0
});
exports.taskState = exports.taskChannel = exports.TaskType = exports.taskPro = exports.taskBase = void 0;

var _evts = require("evts");

var _idx = require("idx");

var _cfgMgr = require("cfgMgr");

var _pInfo = require("pInfo");

var _bagMgr = require("bagMgr");

var _lang = require("lang");

var l = function () {
  function t() {}

  t.initTask = function () {
    t.getTaskByType(d.daily, !0);
    t.getTaskByType(d.achieve, !0);
  };

  t.getTaskByType = function (e) {
    var o;
    var n = this;
    var i = _cfgMgr["default"].serverCfg[e];
    var s = t.baseTask[e];

    var c = t.saveData[e] || _pInfo["default"].ins.getTask(e);

    t.baseTask[e] = s = {};
    var l = 0 === Object.keys(c).length;
    null === (o = null == i ? void 0 : i.rules) || void 0 === o || o.forEach(function (t) {
      var o = n.baseTask[e][t.key];
      o || ((o = new u()).temp = t, o.data = c[t.key] || new f(), s[t.key] = o, c[t.key] = o.data);
    });
    l && _pInfo["default"].ins.setTask(e, c);
    t.saveData[e] || (t.saveData[e] = c);
    return s;
  };

  t.taskReset = function () {
    t.taskResetByTyp(d.daily);
  };

  t.taskResetByTyp = function (e) {
    var o;
    var n = _cfgMgr["default"].serverCfg[e];
    var i = t.saveData[e] || {};
    null === (o = null == n ? void 0 : n.rules) || void 0 === o || o.forEach(function (t) {
      i[t.key] ? (i[t.key].count = 0, i[t.key].state = h.Receive) : i[t.key] = new f();
    });
    t.saveData[e] = i;

    _pInfo["default"].ins.setTask(e, i);
  };

  t.updateTask = function (e, o) {
    void 0 === o && (o = d.daily);
    var r = t.baseTask[o];
    var l = t.saveData[o];
    if (r && e.data.state == h.Finish) for (var u in e.temp.get_by == p.ad_reward ? e.data.state = e.data.count >= e.temp.nums ? h.Rewared : h.Receive : e.data.state = h.Rewared, r[e.temp.key] = e, l[e.temp.key] = e.data, _pInfo["default"].ins.setTask(o, l), _idx.platform.reportEvent(_idx.ERepEvt.dailyTask, {
      taskId: _lang.lang[e.temp.key]
    }), _evts["default"].opE.emit({
      action: _evts["default"].UPDTASK,
      data: e
    }), e.temp.val) {
      e.temp.val.hasOwnProperty(u) && _bagMgr["default"].ins.addItem(u, e.temp.val[u]);
    }
  };

  t.doTask = function (e, o) {
    void 0 === o && (o = d.daily);
    var i = t.baseTask[o];
    var r = t.saveData[o];

    if (i) {
      var s;

      for (var c in i) {
        if (i.hasOwnProperty(c)) {
          var l = i[c];
          if (l.data.state != h.Receive) continue;
          var u = "string" == typeof e && Object.values(p).includes(e) ? "get_by" : "key";
          l.temp[u] == e && (l.data.count += 1, (l.data.count >= l.temp.nums || l.temp.get_by == p.ad_reward) && (l.data.state = h.Finish, r[c] = l.data), s = !0, _evts["default"].opE.emit({
            action: _evts["default"].UPDTASK,
            data: l
          }));

          _evts["default"].opE.emit({
            action: _evts["default"].UPD_MAIN_RED
          });
        }
      }

      s && _pInfo["default"].ins.setTask(o, r);
    }
  };

  t.taskCheck = function (e) {
    switch (e) {
      case _pInfo.gameType.normal:
      case _pInfo.gameType.freedom:
        t.doTask(p.cg_line);
        break;

      case _pInfo.gameType.race:
        t.doTask(p.qw_line);
        break;

      case _pInfo.gameType.challenge:
        t.doTask(p.daily_challenge);
    }
  };

  t.getFinishNum = function () {
    for (var e = _cfgMgr["default"].serverCfg[d.daily], o = t.getTaskByType(d.daily), n = null == e ? void 0 : e.rules, i = 0, a = 0, s = n.length; a < s; a++) {
      o[n[a].key].data.state == h.Finish && i++;
    }

    return i;
  };

  t.getUnFinishNum = function () {
    for (var e = _cfgMgr["default"].serverCfg[d.daily], o = t.getTaskByType(d.daily), n = null == e ? void 0 : e.rules, i = 0, a = 0, s = n.length; a < s; a++) {
      o[n[a].key].data.state == h.Receive && i++;
    }

    return i;
  };

  t.baseTask = {};
  t.saveData = {};
  return t;
}();

exports["default"] = l;

var u = function u() {};

exports.taskBase = u;
var p;
var d;
var h;

var f = function f() {
  this.count = 0;
  this.state = h.Receive;
};

exports.taskPro = f;

(function (t) {
  t.ad_reward = "ad_reward", t.cg_line = "cg_line", t.daily_challenge = "daily_challenge", t.qw_line = "qw_line";
})(p = exports.TaskType || (exports.TaskType = {}));

(function (t) {
  t.daily = "daily_tasks", t.achieve = "achieve_tasks";
})(d = exports.taskChannel || (exports.taskChannel = {}));

(function (t) {
  t[t.None = 0] = "None", t[t.Receive = 1] = "Receive", t[t.Finish = 2] = "Finish", t[t.Rewared = 3] = "Rewared";
})(h = exports.taskState || (exports.taskState = {}));

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdGFza01nci5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsInRhc2tTdGF0ZSIsInRhc2tDaGFubmVsIiwiVGFza1R5cGUiLCJ0YXNrUHJvIiwidGFza0Jhc2UiLCJfZXZ0cyIsInJlcXVpcmUiLCJfaWR4IiwiX2NmZ01nciIsIl9wSW5mbyIsIl9iYWdNZ3IiLCJfbGFuZyIsImwiLCJ0IiwiaW5pdFRhc2siLCJnZXRUYXNrQnlUeXBlIiwiZCIsImRhaWx5IiwiYWNoaWV2ZSIsImUiLCJvIiwibiIsImkiLCJzZXJ2ZXJDZmciLCJzIiwiYmFzZVRhc2siLCJjIiwic2F2ZURhdGEiLCJpbnMiLCJnZXRUYXNrIiwia2V5cyIsImxlbmd0aCIsInJ1bGVzIiwiZm9yRWFjaCIsImtleSIsInUiLCJ0ZW1wIiwiZGF0YSIsImYiLCJzZXRUYXNrIiwidGFza1Jlc2V0IiwidGFza1Jlc2V0QnlUeXAiLCJjb3VudCIsInN0YXRlIiwiaCIsIlJlY2VpdmUiLCJ1cGRhdGVUYXNrIiwiciIsIkZpbmlzaCIsImdldF9ieSIsInAiLCJhZF9yZXdhcmQiLCJudW1zIiwiUmV3YXJlZCIsInBsYXRmb3JtIiwicmVwb3J0RXZlbnQiLCJFUmVwRXZ0IiwiZGFpbHlUYXNrIiwidGFza0lkIiwibGFuZyIsIm9wRSIsImVtaXQiLCJhY3Rpb24iLCJVUERUQVNLIiwidmFsIiwiaGFzT3duUHJvcGVydHkiLCJhZGRJdGVtIiwiZG9UYXNrIiwidmFsdWVzIiwiaW5jbHVkZXMiLCJVUERfTUFJTl9SRUQiLCJ0YXNrQ2hlY2siLCJnYW1lVHlwZSIsIm5vcm1hbCIsImZyZWVkb20iLCJjZ19saW5lIiwicmFjZSIsInF3X2xpbmUiLCJjaGFsbGVuZ2UiLCJkYWlseV9jaGFsbGVuZ2UiLCJnZXRGaW5pc2hOdW0iLCJhIiwiZ2V0VW5GaW5pc2hOdW0iLCJOb25lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7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LENBQUNzQyxTQUFGLEdBQWMsV0FBZixFQUNLdEMsQ0FBQyxDQUFDOEQsT0FBRixHQUFZLFNBRGpCLEVBRUs5RCxDQUFDLENBQUNrRSxlQUFGLEdBQW9CLGlCQUZ6QixFQUdLbEUsQ0FBQyxDQUFDZ0UsT0FBRixHQUFZLFNBSGpCO0FBSUgsQ0FMRCxFQUtJM0IsQ0FBQyxHQUFHcEQsT0FBTyxDQUFDSSxRQUFSLEtBQXFCSixPQUFPLENBQUNJLFFBQVIsR0FBbUIsRUFBeEMsQ0FMUjs7QUFNQSxDQUFDLFVBQVVXLENBQVYsRUFBYTtFQUNUQSxDQUFDLENBQUNJLEtBQUYsR0FBVSxhQUFYLEVBQTRCSixDQUFDLENBQUNLLE9BQUYsR0FBWSxlQUF4QztBQUNILENBRkQsRUFFSUYsQ0FBQyxHQUFHbEIsT0FBTyxDQUFDRyxXQUFSLEtBQXdCSCxPQUFPLENBQUNHLFdBQVIsR0FBc0IsRUFBOUMsQ0FGUjs7QUFHQSxDQUFDLFVBQVVZLENBQVYsRUFBYTtFQUNUQSxDQUFDLENBQUVBLENBQUMsQ0FBQ3NFLElBQUYsR0FBUyxDQUFYLENBQUQsR0FBa0IsTUFBbkIsRUFDS3RFLENBQUMsQ0FBRUEsQ0FBQyxDQUFDZ0MsT0FBRixHQUFZLENBQWQsQ0FBRCxHQUFxQixTQUQxQixFQUVLaEMsQ0FBQyxDQUFFQSxDQUFDLENBQUNtQyxNQUFGLEdBQVcsQ0FBYixDQUFELEdBQW9CLFFBRnpCLEVBR0tuQyxDQUFDLENBQUVBLENBQUMsQ0FBQ3dDLE9BQUYsR0FBWSxDQUFkLENBQUQsR0FBcUIsU0FIMUI7QUFJSCxDQUxELEVBS0lULENBQUMsR0FBRzlDLE9BQU8sQ0FBQ0UsU0FBUixLQUFzQkYsT0FBTyxDQUFDRSxTQUFSLEdBQW9CLEVBQTFDLENBTFIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge3ZhbHVlOiAhMH0pO1xuZXhwb3J0cy50YXNrU3RhdGUgPSBleHBvcnRzLnRhc2tDaGFubmVsID0gZXhwb3J0cy5UYXNrVHlwZSA9IGV4cG9ydHMudGFza1BybyA9IGV4cG9ydHMudGFza0Jhc2UgPSB2b2lkIDA7XG52YXIgX2V2dHMgPSByZXF1aXJlKFwiZXZ0c1wiKTtcbnZhciBfaWR4ID0gcmVxdWlyZShcImlkeFwiKTtcbnZhciBfY2ZnTWdyID0gcmVxdWlyZShcImNmZ01nclwiKTtcbnZhciBfcEluZm8gPSByZXF1aXJlKFwicEluZm9cIik7XG52YXIgX2JhZ01nciA9IHJlcXVpcmUoXCJiYWdNZ3JcIik7XG52YXIgX2xhbmcgPSByZXF1aXJlKFwibGFuZ1wiKTtcbnZhciBsID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiB0KCkge31cbiAgICB0LmluaXRUYXNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0LmdldFRhc2tCeVR5cGUoZC5kYWlseSwgITApO1xuICAgICAgICB0LmdldFRhc2tCeVR5cGUoZC5hY2hpZXZlLCAhMCk7XG4gICAgfTtcbiAgICB0LmdldFRhc2tCeVR5cGUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgbztcbiAgICAgICAgdmFyIG4gPSB0aGlzO1xuICAgICAgICB2YXIgaSA9IF9jZmdNZ3IuZGVmYXVsdC5zZXJ2ZXJDZmdbZV07XG4gICAgICAgIHZhciBzID0gdC5iYXNlVGFza1tlXTtcbiAgICAgICAgdmFyIGMgPSB0LnNhdmVEYXRhW2VdIHx8IF9wSW5mby5kZWZhdWx0Lmlucy5nZXRUYXNrKGUpO1xuICAgICAgICB0LmJhc2VUYXNrW2VdID0gcyA9IHt9O1xuICAgICAgICB2YXIgbCA9IDAgPT09IE9iamVjdC5rZXlzKGMpLmxlbmd0aDtcbiAgICAgICAgbnVsbCA9PT0gKG8gPSBudWxsID09IGkgPyB2b2lkIDAgOiBpLnJ1bGVzKSB8fFxuICAgICAgICAgICAgdm9pZCAwID09PSBvIHx8XG4gICAgICAgICAgICBvLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbyA9IG4uYmFzZVRhc2tbZV1bdC5rZXldO1xuICAgICAgICAgICAgICAgIG8gfHwgKCgobyA9IG5ldyB1KCkpLnRlbXAgPSB0KSwgKG8uZGF0YSA9IGNbdC5rZXldIHx8IG5ldyBmKCkpLCAoc1t0LmtleV0gPSBvKSwgKGNbdC5rZXldID0gby5kYXRhKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgbCAmJiBfcEluZm8uZGVmYXVsdC5pbnMuc2V0VGFzayhlLCBjKTtcbiAgICAgICAgdC5zYXZlRGF0YVtlXSB8fCAodC5zYXZlRGF0YVtlXSA9IGMpO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9O1xuICAgIHQudGFza1Jlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0LnRhc2tSZXNldEJ5VHlwKGQuZGFpbHkpO1xuICAgIH07XG4gICAgdC50YXNrUmVzZXRCeVR5cCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBvO1xuICAgICAgICB2YXIgbiA9IF9jZmdNZ3IuZGVmYXVsdC5zZXJ2ZXJDZmdbZV07XG4gICAgICAgIHZhciBpID0gdC5zYXZlRGF0YVtlXSB8fCB7fTtcbiAgICAgICAgbnVsbCA9PT0gKG8gPSBudWxsID09IG4gPyB2b2lkIDAgOiBuLnJ1bGVzKSB8fFxuICAgICAgICAgICAgdm9pZCAwID09PSBvIHx8XG4gICAgICAgICAgICBvLmZvckVhY2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICBpW3Qua2V5XSA/ICgoaVt0LmtleV0uY291bnQgPSAwKSwgKGlbdC5rZXldLnN0YXRlID0gaC5SZWNlaXZlKSkgOiAoaVt0LmtleV0gPSBuZXcgZigpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0LnNhdmVEYXRhW2VdID0gaTtcbiAgICAgICAgX3BJbmZvLmRlZmF1bHQuaW5zLnNldFRhc2soZSwgaSk7XG4gICAgfTtcbiAgICB0LnVwZGF0ZVRhc2sgPSBmdW5jdGlvbiAoZSwgbykge1xuICAgICAgICB2b2lkIDAgPT09IG8gJiYgKG8gPSBkLmRhaWx5KTtcbiAgICAgICAgdmFyIHIgPSB0LmJhc2VUYXNrW29dO1xuICAgICAgICB2YXIgbCA9IHQuc2F2ZURhdGFbb107XG4gICAgICAgIGlmIChyICYmIGUuZGF0YS5zdGF0ZSA9PSBoLkZpbmlzaClcbiAgICAgICAgICAgIGZvciAodmFyIHUgaW4gKGUudGVtcC5nZXRfYnkgPT0gcC5hZF9yZXdhcmRcbiAgICAgICAgICAgICAgICA/IChlLmRhdGEuc3RhdGUgPSBlLmRhdGEuY291bnQgPj0gZS50ZW1wLm51bXMgPyBoLlJld2FyZWQgOiBoLlJlY2VpdmUpXG4gICAgICAgICAgICAgICAgOiAoZS5kYXRhLnN0YXRlID0gaC5SZXdhcmVkKSxcbiAgICAgICAgICAgIChyW2UudGVtcC5rZXldID0gZSksXG4gICAgICAgICAgICAobFtlLnRlbXAua2V5XSA9IGUuZGF0YSksXG4gICAgICAgICAgICBfcEluZm8uZGVmYXVsdC5pbnMuc2V0VGFzayhvLCBsKSxcbiAgICAgICAgICAgIF9pZHgucGxhdGZvcm0ucmVwb3J0RXZlbnQoX2lkeC5FUmVwRXZ0LmRhaWx5VGFzaywge3Rhc2tJZDogX2xhbmcubGFuZ1tlLnRlbXAua2V5XX0pLFxuICAgICAgICAgICAgX2V2dHMuZGVmYXVsdC5vcEUuZW1pdCh7YWN0aW9uOiBfZXZ0cy5kZWZhdWx0LlVQRFRBU0ssIGRhdGE6IGV9KSxcbiAgICAgICAgICAgIGUudGVtcC52YWwpKVxuICAgICAgICAgICAgICAgIGUudGVtcC52YWwuaGFzT3duUHJvcGVydHkodSkgJiYgX2JhZ01nci5kZWZhdWx0Lmlucy5hZGRJdGVtKHUsIGUudGVtcC52YWxbdV0pO1xuICAgIH07XG4gICAgdC5kb1Rhc2sgPSBmdW5jdGlvbiAoZSwgbykge1xuICAgICAgICB2b2lkIDAgPT09IG8gJiYgKG8gPSBkLmRhaWx5KTtcbiAgICAgICAgdmFyIGkgPSB0LmJhc2VUYXNrW29dO1xuICAgICAgICB2YXIgciA9IHQuc2F2ZURhdGFbb107XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICB2YXIgcztcbiAgICAgICAgICAgIGZvciAodmFyIGMgaW4gaSlcbiAgICAgICAgICAgICAgICBpZiAoaS5oYXNPd25Qcm9wZXJ0eShjKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGlbY107XG4gICAgICAgICAgICAgICAgICAgIGlmIChsLmRhdGEuc3RhdGUgIT0gaC5SZWNlaXZlKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBcInN0cmluZ1wiID09IHR5cGVvZiBlICYmIE9iamVjdC52YWx1ZXMocCkuaW5jbHVkZXMoZSkgPyBcImdldF9ieVwiIDogXCJrZXlcIjtcbiAgICAgICAgICAgICAgICAgICAgbC50ZW1wW3VdID09IGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICgobC5kYXRhLmNvdW50ICs9IDEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgKGwuZGF0YS5jb3VudCA+PSBsLnRlbXAubnVtcyB8fCBsLnRlbXAuZ2V0X2J5ID09IHAuYWRfcmV3YXJkKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICgobC5kYXRhLnN0YXRlID0gaC5GaW5pc2gpLCAocltjXSA9IGwuZGF0YSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgKHMgPSAhMCksXG4gICAgICAgICAgICAgICAgICAgICAgICBfZXZ0cy5kZWZhdWx0Lm9wRS5lbWl0KHthY3Rpb246IF9ldnRzLmRlZmF1bHQuVVBEVEFTSywgZGF0YTogbH0pKTtcbiAgICAgICAgICAgICAgICAgICAgX2V2dHMuZGVmYXVsdC5vcEUuZW1pdCh7YWN0aW9uOiBfZXZ0cy5kZWZhdWx0LlVQRF9NQUlOX1JFRH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMgJiYgX3BJbmZvLmRlZmF1bHQuaW5zLnNldFRhc2sobywgcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHQudGFza0NoZWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgICBjYXNlIF9wSW5mby5nYW1lVHlwZS5ub3JtYWw6XG4gICAgICAgICAgICBjYXNlIF9wSW5mby5nYW1lVHlwZS5mcmVlZG9tOlxuICAgICAgICAgICAgICAgIHQuZG9UYXNrKHAuY2dfbGluZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIF9wSW5mby5nYW1lVHlwZS5yYWNlOlxuICAgICAgICAgICAgICAgIHQuZG9UYXNrKHAucXdfbGluZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIF9wSW5mby5nYW1lVHlwZS5jaGFsbGVuZ2U6XG4gICAgICAgICAgICAgICAgdC5kb1Rhc2socC5kYWlseV9jaGFsbGVuZ2UpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0LmdldEZpbmlzaE51bSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yIChcbiAgICAgICAgICAgIHZhciBlID0gX2NmZ01nci5kZWZhdWx0LnNlcnZlckNmZ1tkLmRhaWx5XSxcbiAgICAgICAgICAgICAgICBvID0gdC5nZXRUYXNrQnlUeXBlKGQuZGFpbHkpLFxuICAgICAgICAgICAgICAgIG4gPSBudWxsID09IGUgPyB2b2lkIDAgOiBlLnJ1bGVzLFxuICAgICAgICAgICAgICAgIGkgPSAwLFxuICAgICAgICAgICAgICAgIGEgPSAwLFxuICAgICAgICAgICAgICAgIHMgPSBuLmxlbmd0aDtcbiAgICAgICAgICAgIGEgPCBzO1xuICAgICAgICAgICAgYSsrXG4gICAgICAgIClcbiAgICAgICAgICAgIG9bblthXS5rZXldLmRhdGEuc3RhdGUgPT0gaC5GaW5pc2ggJiYgaSsrO1xuICAgICAgICByZXR1cm4gaTtcbiAgICB9O1xuICAgIHQuZ2V0VW5GaW5pc2hOdW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgICB2YXIgZSA9IF9jZmdNZ3IuZGVmYXVsdC5zZXJ2ZXJDZmdbZC5kYWlseV0sXG4gICAgICAgICAgICAgICAgbyA9IHQuZ2V0VGFza0J5VHlwZShkLmRhaWx5KSxcbiAgICAgICAgICAgICAgICBuID0gbnVsbCA9PSBlID8gdm9pZCAwIDogZS5ydWxlcyxcbiAgICAgICAgICAgICAgICBpID0gMCxcbiAgICAgICAgICAgICAgICBhID0gMCxcbiAgICAgICAgICAgICAgICBzID0gbi5sZW5ndGg7XG4gICAgICAgICAgICBhIDwgcztcbiAgICAgICAgICAgIGErK1xuICAgICAgICApXG4gICAgICAgICAgICBvW25bYV0ua2V5XS5kYXRhLnN0YXRlID09IGguUmVjZWl2ZSAmJiBpKys7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH07XG4gICAgdC5iYXNlVGFzayA9IHt9O1xuICAgIHQuc2F2ZURhdGEgPSB7fTtcbiAgICByZXR1cm4gdDtcbn0pKCk7XG5leHBvcnRzLmRlZmF1bHQgPSBsO1xudmFyIHUgPSBmdW5jdGlvbiAoKSB7fTtcbmV4cG9ydHMudGFza0Jhc2UgPSB1O1xudmFyIHA7XG52YXIgZDtcbnZhciBoO1xudmFyIGYgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5jb3VudCA9IDA7XG4gICAgdGhpcy5zdGF0ZSA9IGguUmVjZWl2ZTtcbn07XG5leHBvcnRzLnRhc2tQcm8gPSBmO1xuKGZ1bmN0aW9uICh0KSB7XG4gICAgKHQuYWRfcmV3YXJkID0gXCJhZF9yZXdhcmRcIiksXG4gICAgICAgICh0LmNnX2xpbmUgPSBcImNnX2xpbmVcIiksXG4gICAgICAgICh0LmRhaWx5X2NoYWxsZW5nZSA9IFwiZGFpbHlfY2hhbGxlbmdlXCIpLFxuICAgICAgICAodC5xd19saW5lID0gXCJxd19saW5lXCIpO1xufSkoKHAgPSBleHBvcnRzLlRhc2tUeXBlIHx8IChleHBvcnRzLlRhc2tUeXBlID0ge30pKSk7XG4oZnVuY3Rpb24gKHQpIHtcbiAgICAodC5kYWlseSA9IFwiZGFpbHlfdGFza3NcIiksICh0LmFjaGlldmUgPSBcImFjaGlldmVfdGFza3NcIik7XG59KSgoZCA9IGV4cG9ydHMudGFza0NoYW5uZWwgfHwgKGV4cG9ydHMudGFza0NoYW5uZWwgPSB7fSkpKTtcbihmdW5jdGlvbiAodCkge1xuICAgICh0Wyh0Lk5vbmUgPSAwKV0gPSBcIk5vbmVcIiksXG4gICAgICAgICh0Wyh0LlJlY2VpdmUgPSAxKV0gPSBcIlJlY2VpdmVcIiksXG4gICAgICAgICh0Wyh0LkZpbmlzaCA9IDIpXSA9IFwiRmluaXNoXCIpLFxuICAgICAgICAodFsodC5SZXdhcmVkID0gMyldID0gXCJSZXdhcmVkXCIpO1xufSkoKGggPSBleHBvcnRzLnRhc2tTdGF0ZSB8fCAoZXhwb3J0cy50YXNrU3RhdGUgPSB7fSkpKTtcbiJdfQ==