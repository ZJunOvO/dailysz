
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/time.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '59024eX+axMOIBY16DZlWQV', 'time');
// scripts/time.js

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _uData = require("uData");

var i = function () {
  function t() {}

  Object.defineProperty(t, "ins", {
    get: function get() {
      this._ins || (this._ins = new t());
      return this._ins;
    },
    enumerable: !1,
    configurable: !0
  });

  t.prototype.sync = function (t) {
    this.serverStartT = t || Date.now();
    this.clientStartT = Date.now();
  };

  Object.defineProperty(t.prototype, "serverTime", {
    get: function get() {
      return Math.floor((this.serverStartT + Date.now() - this.clientStartT) / 1e3);
    },
    enumerable: !1,
    configurable: !0
  });
  Object.defineProperty(t.prototype, "loginTime", {
    get: function get() {
      this.loginT || (this.loginT = _uData["default"].ins.getLocalDataByKey("login_date"));
      return this.loginT;
    },
    enumerable: !1,
    configurable: !0
  });
  Object.defineProperty(t.prototype, "isSameDay", {
    get: function get() {
      if (!t.ins.serverTime || !t.ins.loginTime) return !0;
      var e = new Date(1e3 * t.ins.serverTime);
      var o = new Date(1e3 * t.ins.loginTime);
      return e.getFullYear() == o.getFullYear() && e.getMonth() == o.getMonth() && e.getDate() == o.getDate();
    },
    enumerable: !1,
    configurable: !0
  });
  Object.defineProperty(t.prototype, "nextZeroTime", {
    get: function get() {
      var t = 1e3 * this.serverTime;
      var e = new Date(t);
      e.setDate(e.getDate() + 1);
      e.setHours(0, 0, 0, 0);
      return e.getTime() - t;
    },
    enumerable: !1,
    configurable: !0
  });

  t.getFormatHMS = function (t, e, o) {
    void 0 === e && (e = "HH:MM:SS");
    void 0 === o && (o = !0);
    var n = Math.floor(t / 86400);
    var i = n.toString();
    o && (i = (i = "00" + n).substring(i.length - 2));
    var r = Math.floor(t % 86400 / 3600);
    var a = r.toString();
    o && (a = (a = "00" + r).substring(a.length - 2));
    var s = Math.floor(t % 3600 / 60);
    var c = s.toString();
    o && (c = (c = "00" + s).substring(c.length - 2));
    var l = Math.floor(t % 3600 % 60);
    var u = l.toString();
    o && (u = (u = "00" + l).substring(u.length - 2));
    var p = {
      "D+": i,
      "H+": a,
      "M+": c,
      "S+": u
    };

    for (var d in p) {
      var h = new RegExp("(" + d + ")").exec(e);
      h && (e = e.replace(h[1], p[d]));
    }

    return e;
  };

  t.formatDate2Str = function (t, e) {
    void 0 === e && (e = !1);
    var o;
    var n;
    var i;
    var r = Math.floor(t / 86400);

    if (r > 0) {
      var a = r.toString();
      e && (a = (a = "00" + r).substring(a.length - 2));
      return a + "天";
    }

    if ((o = Math.floor(t % 86400 / 3600)) > 0) {
      var s = o.toString();
      e && (s = (s = "00" + o).substring(s.length - 2));
      return s + "小时";
    }

    if ((n = Math.floor(t % 3600 / 60)) > 0) {
      var c = n.toString();
      e && (c = (c = "00" + n).substring(c.length - 2));
      return c + "分钟";
    }

    if ((i = Math.floor(t % 3600 % 60)) > 0) {
      var l = i.toString();
      e && (l = (l = "00" + i).substring(l.length - 2));
      return l + "秒";
    }

    return "0秒";
  };

  t.prototype.formatDate = function (t) {
    var e = new Date(t);
    var o = e.getFullYear();
    var n = e.getMonth() + 1;
    var i = e.getDate();
    var r = e.getHours();
    var a = e.getMinutes();
    var s = e.getSeconds();
    return o + "-" + (n < 10 ? "0" : "") + n + "-" + (i < 10 ? "0" : "") + i + " " + (r < 10 ? "0" : "") + r + ":" + (a < 10 ? "0" : "") + a + ":" + (s < 10 ? "0" : "") + s;
  };

  return t;
}();

exports["default"] = i;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdGltZS5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl91RGF0YSIsInJlcXVpcmUiLCJpIiwidCIsImdldCIsIl9pbnMiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwicHJvdG90eXBlIiwic3luYyIsInNlcnZlclN0YXJ0VCIsIkRhdGUiLCJub3ciLCJjbGllbnRTdGFydFQiLCJNYXRoIiwiZmxvb3IiLCJsb2dpblQiLCJpbnMiLCJnZXRMb2NhbERhdGFCeUtleSIsInNlcnZlclRpbWUiLCJsb2dpblRpbWUiLCJlIiwibyIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwic2V0RGF0ZSIsInNldEhvdXJzIiwiZ2V0VGltZSIsImdldEZvcm1hdEhNUyIsIm4iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImxlbmd0aCIsInIiLCJhIiwicyIsImMiLCJsIiwidSIsInAiLCJkIiwiaCIsIlJlZ0V4cCIsImV4ZWMiLCJyZXBsYWNlIiwiZm9ybWF0RGF0ZTJTdHIiLCJmb3JtYXREYXRlIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiZ2V0U2Vjb25kcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztFQUFDQyxLQUFLLEVBQUUsQ0FBQztBQUFULENBQTdDOztBQUNBLElBQUlDLE1BQU0sR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBcEI7O0FBQ0EsSUFBSUMsQ0FBQyxHQUFJLFlBQVk7RUFDakIsU0FBU0MsQ0FBVCxHQUFhLENBQUU7O0VBQ2ZQLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQk0sQ0FBdEIsRUFBeUIsS0FBekIsRUFBZ0M7SUFDNUJDLEdBQUcsRUFBRSxlQUFZO01BQ2IsS0FBS0MsSUFBTCxLQUFjLEtBQUtBLElBQUwsR0FBWSxJQUFJRixDQUFK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OiIvIiwic291cmNlc0NvbnRlbnQiOlsiT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7dmFsdWU6ICEwfSk7XG52YXIgX3VEYXRhID0gcmVxdWlyZShcInVEYXRhXCIpO1xudmFyIGkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIHQoKSB7fVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBcImluc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5faW5zIHx8ICh0aGlzLl9pbnMgPSBuZXcgdCgpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbnM7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgfSk7XG4gICAgdC5wcm90b3R5cGUuc3luYyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHRoaXMuc2VydmVyU3RhcnRUID0gdCB8fCBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLmNsaWVudFN0YXJ0VCA9IERhdGUubm93KCk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIFwic2VydmVyVGltZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2VydmVyU3RhcnRUICsgRGF0ZS5ub3coKSAtIHRoaXMuY2xpZW50U3RhcnRUKSAvIDFlMyk7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCBcImxvZ2luVGltZVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sb2dpblQgfHwgKHRoaXMubG9naW5UID0gX3VEYXRhLmRlZmF1bHQuaW5zLmdldExvY2FsRGF0YUJ5S2V5KFwibG9naW5fZGF0ZVwiKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2dpblQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCBcImlzU2FtZURheVwiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0Lmlucy5zZXJ2ZXJUaW1lIHx8ICF0Lmlucy5sb2dpblRpbWUpIHJldHVybiAhMDtcbiAgICAgICAgICAgIHZhciBlID0gbmV3IERhdGUoMWUzICogdC5pbnMuc2VydmVyVGltZSk7XG4gICAgICAgICAgICB2YXIgbyA9IG5ldyBEYXRlKDFlMyAqIHQuaW5zLmxvZ2luVGltZSk7XG4gICAgICAgICAgICByZXR1cm4gZS5nZXRGdWxsWWVhcigpID09IG8uZ2V0RnVsbFllYXIoKSAmJiBlLmdldE1vbnRoKCkgPT0gby5nZXRNb250aCgpICYmIGUuZ2V0RGF0ZSgpID09IG8uZ2V0RGF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwgXCJuZXh0WmVyb1RpbWVcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ID0gMWUzICogdGhpcy5zZXJ2ZXJUaW1lO1xuICAgICAgICAgICAgdmFyIGUgPSBuZXcgRGF0ZSh0KTtcbiAgICAgICAgICAgIGUuc2V0RGF0ZShlLmdldERhdGUoKSArIDEpO1xuICAgICAgICAgICAgZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgICAgICAgIHJldHVybiBlLmdldFRpbWUoKSAtIHQ7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6ICExLFxuICAgICAgICBjb25maWd1cmFibGU6ICEwXG4gICAgfSk7XG4gICAgdC5nZXRGb3JtYXRITVMgPSBmdW5jdGlvbiAodCwgZSwgbykge1xuICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBcIkhIOk1NOlNTXCIpO1xuICAgICAgICB2b2lkIDAgPT09IG8gJiYgKG8gPSAhMCk7XG4gICAgICAgIHZhciBuID0gTWF0aC5mbG9vcih0IC8gODY0MDApO1xuICAgICAgICB2YXIgaSA9IG4udG9TdHJpbmcoKTtcbiAgICAgICAgbyAmJiAoaSA9IChpID0gXCIwMFwiICsgbikuc3Vic3RyaW5nKGkubGVuZ3RoIC0gMikpO1xuICAgICAgICB2YXIgciA9IE1hdGguZmxvb3IoKHQgJSA4NjQwMCkgLyAzNjAwKTtcbiAgICAgICAgdmFyIGEgPSByLnRvU3RyaW5nKCk7XG4gICAgICAgIG8gJiYgKGEgPSAoYSA9IFwiMDBcIiArIHIpLnN1YnN0cmluZyhhLmxlbmd0aCAtIDIpKTtcbiAgICAgICAgdmFyIHMgPSBNYXRoLmZsb29yKCh0ICUgMzYwMCkgLyA2MCk7XG4gICAgICAgIHZhciBjID0gcy50b1N0cmluZygpO1xuICAgICAgICBvICYmIChjID0gKGMgPSBcIjAwXCIgKyBzKS5zdWJzdHJpbmcoYy5sZW5ndGggLSAyKSk7XG4gICAgICAgIHZhciBsID0gTWF0aC5mbG9vcigodCAlIDM2MDApICUgNjApO1xuICAgICAgICB2YXIgdSA9IGwudG9TdHJpbmcoKTtcbiAgICAgICAgbyAmJiAodSA9ICh1ID0gXCIwMFwiICsgbCkuc3Vic3RyaW5nKHUubGVuZ3RoIC0gMikpO1xuICAgICAgICB2YXIgcCA9IHtcIkQrXCI6IGksIFwiSCtcIjogYSwgXCJNK1wiOiBjLCBcIlMrXCI6IHV9O1xuICAgICAgICBmb3IgKHZhciBkIGluIHApIHtcbiAgICAgICAgICAgIHZhciBoID0gbmV3IFJlZ0V4cChcIihcIiArIGQgKyBcIilcIikuZXhlYyhlKTtcbiAgICAgICAgICAgIGggJiYgKGUgPSBlLnJlcGxhY2UoaFsxXSwgcFtkXSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH07XG4gICAgdC5mb3JtYXREYXRlMlN0ciA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9ICExKTtcbiAgICAgICAgdmFyIG87XG4gICAgICAgIHZhciBuO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgdmFyIHIgPSBNYXRoLmZsb29yKHQgLyA4NjQwMCk7XG4gICAgICAgIGlmIChyID4gMCkge1xuICAgICAgICAgICAgdmFyIGEgPSByLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBlICYmIChhID0gKGEgPSBcIjAwXCIgKyByKS5zdWJzdHJpbmcoYS5sZW5ndGggLSAyKSk7XG4gICAgICAgICAgICByZXR1cm4gYSArIFwi5aSpXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChvID0gTWF0aC5mbG9vcigodCAlIDg2NDAwKSAvIDM2MDApKSA+IDApIHtcbiAgICAgICAgICAgIHZhciBzID0gby50b1N0cmluZygpO1xuICAgICAgICAgICAgZSAmJiAocyA9IChzID0gXCIwMFwiICsgbykuc3Vic3RyaW5nKHMubGVuZ3RoIC0gMikpO1xuICAgICAgICAgICAgcmV0dXJuIHMgKyBcIuWwj+aXtlwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICgobiA9IE1hdGguZmxvb3IoKHQgJSAzNjAwKSAvIDYwKSkgPiAwKSB7XG4gICAgICAgICAgICB2YXIgYyA9IG4udG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGUgJiYgKGMgPSAoYyA9IFwiMDBcIiArIG4pLnN1YnN0cmluZyhjLmxlbmd0aCAtIDIpKTtcbiAgICAgICAgICAgIHJldHVybiBjICsgXCLliIbpkp9cIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGkgPSBNYXRoLmZsb29yKCh0ICUgMzYwMCkgJSA2MCkpID4gMCkge1xuICAgICAgICAgICAgdmFyIGwgPSBpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBlICYmIChsID0gKGwgPSBcIjAwXCIgKyBpKS5zdWJzdHJpbmcobC5sZW5ndGggLSAyKSk7XG4gICAgICAgICAgICByZXR1cm4gbCArIFwi56eSXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiMOenklwiO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZm9ybWF0RGF0ZSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBlID0gbmV3IERhdGUodCk7XG4gICAgICAgIHZhciBvID0gZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICB2YXIgbiA9IGUuZ2V0TW9udGgoKSArIDE7XG4gICAgICAgIHZhciBpID0gZS5nZXREYXRlKCk7XG4gICAgICAgIHZhciByID0gZS5nZXRIb3VycygpO1xuICAgICAgICB2YXIgYSA9IGUuZ2V0TWludXRlcygpO1xuICAgICAgICB2YXIgcyA9IGUuZ2V0U2Vjb25kcygpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgbyArXG4gICAgICAgICAgICBcIi1cIiArXG4gICAgICAgICAgICAobiA8IDEwID8gXCIwXCIgOiBcIlwiKSArXG4gICAgICAgICAgICBuICtcbiAgICAgICAgICAgIFwiLVwiICtcbiAgICAgICAgICAgIChpIDwgMTAgPyBcIjBcIiA6IFwiXCIpICtcbiAgICAgICAgICAgIGkgK1xuICAgICAgICAgICAgXCIgXCIgK1xuICAgICAgICAgICAgKHIgPCAxMCA/IFwiMFwiIDogXCJcIikgK1xuICAgICAgICAgICAgciArXG4gICAgICAgICAgICBcIjpcIiArXG4gICAgICAgICAgICAoYSA8IDEwID8gXCIwXCIgOiBcIlwiKSArXG4gICAgICAgICAgICBhICtcbiAgICAgICAgICAgIFwiOlwiICtcbiAgICAgICAgICAgIChzIDwgMTAgPyBcIjBcIiA6IFwiXCIpICtcbiAgICAgICAgICAgIHNcbiAgICAgICAgKTtcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKTtcbmV4cG9ydHMuZGVmYXVsdCA9IGk7XG4iXX0=