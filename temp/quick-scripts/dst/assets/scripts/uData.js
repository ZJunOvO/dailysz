
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/uData.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '86181ZnrptJ9In2AI14myYD', 'uData');
// scripts/uData.js

"use strict";

Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _cfgMgr = require("cfgMgr");

var _global = require("global");

var _bagMgr = require("bagMgr");

var _taskMgr = require("taskMgr");

var _pInfo = require("pInfo");

var _adC = require("adC");

var _evts = require("evts");

var _idx = require("idx");

var _numberUtils = require("NumberUtils");

var _pConst = require("pConst");

var _request = require("request");

var _time = require("time");

var g = function () {
  function t() {
    this.basic = {
      name: "",
      uid: 0,
      userId: "123",
      openId: "test2",
      sessionKey: "",
      headImg: "",
      isAuth: null,
      isNew: null,
      anonymous_openid: null
    };
    this.setting = {
      effectSound: !0,
      bgmSound: !0,
      vibrate: !0,
      effectVolume: 0.5,
      bgmVolume: 0.5,
      tip: !0
    };
    this.localData = null;
    this.network = {
      networkType: "none"
    };
    this.launchOption = {
      scene: 0,
      query: {}
    };
    this.flushTimeoutKeys = {};
    this.enterAt = Date.now();
    this.loginAt = null;
  }

  Object.defineProperty(t, "ins", {
    get: function get() {
      this._ins || (this._ins = new t());
      return this._ins;
    },
    enumerable: !1,
    configurable: !0
  });

  t.prototype.onLogin = function (t) {
    var e;
    var o;
    var n = this;

    if (!this.loginAt) {
      var i;
      this.loadSetting();
      var r = this.getLocalData();

      if (t) {
        var a = t.puzzleLvl || 0;
        var s = (null === (e = null == t ? void 0 : t.bag) || void 0 === e ? void 0 : e.puzzle_pieces) || 0;
        var p = (null == r ? void 0 : r.puzzleLvl) || 0;
        var d = (null === (o = null == r ? void 0 : r.bag) || void 0 === o ? void 0 : o.puzzle_pieces) || 0;
        (a > p || s > d || !r.guideDone) && this.setLocalData(t);
      }

      this.loginAt = _time["default"].ins.serverTime;
      var h = this.basic;

      if (h.recordFlag = null !== (i = h.recordFlag) && void 0 !== i ? i : {}, null == this.getLocalDataByKey("register_date")) {
        var g = new Date();
        this.setLocalData({
          register_date: g.getTime()
        });

        _idx.platform.reportEvent(_idx.ERepEvt.createNewRole);
      } else _idx.platform.reportEvent(_idx.ERepEvt.login);

      this.getLocalDataByKey("login_date") || this.setLocalData({
        login_date: this.loginAt - 864e5
      });
      this.checkNewDay();

      _idx.platform.preloadVideo(_adC.VEnum[60]);

      var y = (_time["default"].ins.serverTime || Math.floor(new Date().getTime() / 1e3)) % 60;
      0 != y && (y = 60 - y);
      setTimeout(function () {
        n.checkNewDay(), setInterval(function () {
          n.checkNewDay();
        }, 6e4);
      }, 1e3 * y);

      _evts["default"].plE.on(this.onOperTap.bind(this));
    }
  };

  t.prototype.onOperTap = function (t) {
    (null == t ? void 0 : t.onHide) && this.timeId && this._setLocalAndCloudData();
  };

  t.prototype.checkNewDay = function (t) {
    if (void 0 === t && (t = !0), !t || !_time["default"].ins.isSameDay) {
      _taskMgr["default"].taskReset();

      _pInfo["default"].ins.clearDailyData();

      var e = _cfgMgr["default"].serverCfg.qw_line_rules.rules.times.set.basic_times.val;

      _bagMgr["default"].ins.chgItemCount("qw_line_ticket", Number(e));

      _evts["default"].opE.emit({
        action: _evts["default"].UPD_MAIN_RED
      });

      this.loginAt = _time["default"].ins.serverTime;
      _time["default"].ins.loginT = _time["default"].ins.serverTime;
      var o = this.getLocalDataByKey("login_date");

      if (_time["default"].ins.serverTime - o >= 1728e5 && (_global["default"].twoDaysLeft = !0), this.setLocalData({
        login_date: this.loginAt
      }), t && !this.basic.isNew) {
        var c = 1e3 * _numberUtils["default"].RandomInt(1, 30);

        this.timeId = setTimeout(this._setLocalAndCloudData.bind(this), c);
      }

      _evts["default"].opE.emit({
        action: _evts["default"].UPD_PANEL
      });
    }
  };

  t.prototype.loadSetting = function () {
    var t = this;
    var e = Object.keys(this.setting);
    var o = this.setting;
    this.setting = _idx.platform.getStorage("setting") || this.setting;
    e.forEach(function (e) {
      var n;
      null == t.setting[e] && t.setSetting(((n = {})[e] = o[e], n));
    });
  };

  t.prototype.setSetting = function (t, e) {
    void 0 === e && (e = !0);
    this.setting = Object.assign(Object.assign({}, this.setting), t);

    _evts["default"].usE.emit({
      userData: this,
      kind: "setting"
    });

    e && _idx.platform.setStorage("setting", this.setting);
  };

  t.prototype.getSetting = function () {
    return this.setting;
  };

  t.prototype.setLocalData = function (t, e) {
    void 0 === e && (e = 10);
    var o = this.getLocalData();
    var n = this.localData = Object.assign(Object.assign({}, o), t);

    _idx.platform.setStorage("localData", this.localData);

    n && !this.timeId && (this.timeId = setTimeout(this._setLocalAndCloudData.bind(this), 1e3 * e));
  };

  t.prototype._setLocalAndCloudData = function () {// var t;
    // var e;
    // var o = this.localData;
    // if (o) {
    //     clearTimeout(this.timeId);
    //     this.timeId = null;
    //     var i =
    //         (null ===
    //             (e = null === (t = _cfgMgr.default.serverCfg) || void 0 === t ? void 0 : t.upload_user_backup) ||
    //         void 0 === e
    //             ? void 0
    //             : e.val) || 5;
    //     o.puzzleLvl > i && _request.default.ins.updateServerData(this.localData, "localData");
    //     _idx.platform.setCloudData && _idx.platform.setCloudData(JSON.stringify(this.localData));
    // }
  };

  t.prototype.restoreData = function (t) {
    t && (this.localData = t, _bagMgr["default"].ins.clearItem(), _idx.platform.setStorage("localData", this.localData), this.checkNewDay(), this._setLocalAndCloudData(), _global["default"].isReStore = 1, cc.game.restart());
  };

  t.prototype.getLocalData = function () {
    null == this.localData && (this.localData = _idx.platform.getStorage("localData") || {});
    return this.localData;
  };

  t.prototype.getLocalDataByKey = function (t) {
    return null == this.localData ? null : this.localData[t];
  };

  Object.defineProperty(t.prototype, "fakeUID", {
    get: function get() {
      return 10005 + 2 * this.basic.uid;
    },
    enumerable: !1,
    configurable: !0
  });

  t.prototype.setUserId = function (t) {
    this.basic.userId = t;
  };

  t.prototype.getUserId = function () {
    return this.basic.userId;
  };

  t.prototype.getUid = function () {
    return this.basic.uid;
  };

  t.prototype.setName = function (t) {
    this.basic.name = t;
  };

  t.prototype.getName = function () {
    return this.basic.name;
  };

  t.prototype.setHeadImg = function (t) {
    this.basic.headImg = t;
  };

  t.prototype.getHeadImg = function () {
    return this.basic.headImg;
  };

  t.prototype.setIsAuth = function (t) {
    this.basic.isAuth = t;
  };

  t.prototype.getIsAuth = function () {
    return this.basic.isAuth;
  };

  t.prototype.getIsNewUser = function () {
    return this.basic.isNew;
  };

  t.prototype.syncLaunchOption = function (t) {
    if (this.launchOption.query = {}, this.launchOption = Object.assign(Object.assign({}, this.launchOption), t), null == this.getLocalDataByKey("register_date")) {
      var e = this.getLaunchParam("ad_type", "");

      if ("" !== e) {
        this.setLocalData({
          ad_type: e
        });
        var o = this.getLaunchParam("addict_type", "");
        "" !== o && this.setLocalData({
          addict_type: o
        });
        var n = this.getLaunchParam("clickid", "");
        "" !== n && this.setLocalData({
          clickid: n
        });
      }
    }
  };

  t.prototype.getLaunchParam = function (t, e) {
    if (null == this.launchOption) return e;
    var o = this.launchOption[t];
    return null == o && null != this.launchOption.query && null != this.launchOption.query[t] ? o = this.launchOption.query[t] : e;
  };

  t.prototype.getLaunchOption = function () {
    return this.launchOption;
  };

  t.prototype.delayFlush = function (t, e, o) {
    void 0 === o && (o = 0);
    var n = this;
    var i = this.flushTimeoutKeys[e];
    i ? 0 === o && (clearTimeout(i), this.flushTimeoutKeys[e] = null, _idx.platform.setStorage(e, t)) : this.flushTimeoutKeys[e] = setTimeout(function () {
      n.flushTimeoutKeys[e] = null;

      _idx.platform.setStorage(e, t);
    }, 1e3 * o);
  };

  t.prototype.syncLoginData = function (t) {
    void 0 === t && (t = {});
    var e = this.basic;
    e.name = t.nickname;
    e.headImg = t.avatar;
    e.uid = t.game_uid;
    e.openId = t.openid;
    e.sessionKey = t.session_key;
    e.anonymous_openid = t.anonymous_openid;
    e.isNew = t.is_new_user;

    _evts["default"].opE.emit({
      action: _evts["default"].UPD_TOP_HEADINFO
    });

    var o = !t.is_register;

    var n = null == _idx.platform.getStorage("localData");

    _pConst.SDKConfig.comQuery = "from_game_uid=" + t.game_uid + "&share_time=";
    return [false, n];
  };

  return t;
}();

exports["default"] = g;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdURhdGEuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJfY2ZnTWdyIiwicmVxdWlyZSIsIl9nbG9iYWwiLCJfYmFnTWdyIiwiX3Rhc2tNZ3IiLCJfcEluZm8iLCJfYWRDIiwiX2V2dHMiLCJfaWR4IiwiX251bWJlclV0aWxzIiwiX3BDb25zdCIsIl9yZXF1ZXN0IiwiX3RpbWUiLCJnIiwidCIsImJhc2ljIiwibmFtZSIsInVpZCIsInVzZXJJZCIsIm9wZW5JZCIsInNlc3Npb25LZXkiLCJoZWFkSW1nIiwiaXNBdXRoIiwiaXNOZXciLCJhbm9ueW1vdXNfb3BlbmlkIiwic2V0dGluZyIsImVmZmVjdFNvdW5kIiwiYmdtU291bmQiLCJ2aWJyYXRlIiwiZWZmZWN0Vm9sdW1lIiwiYmdtVm9sdW1lIiwidGlwIiwibG9jYWxEYXRhIiwibmV0d29yayIsIm5ldHdvcmtUeXBlIiwibGF1bmNoT3B0aW9uIiwic2NlbmUiLCJxdWVyeSIsImZsdXNoVGltZW91dEtleXMiLCJlbnRlckF0IiwiRGF0ZSIsIm5vdyIsImxvZ2luQXQiLCJnZXQiLCJfaW5zIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsInByb3RvdHlwZSIsIm9uTG9naW4iLCJlIiwibyIsIm4iLCJpIiwibG9hZFNldHRpbmciLCJyIiwiZ2V0TG9jYWxEYXRhIiwiYSIsInB1enpsZUx2bCIsInMiLCJiYWciLCJwdXp6bGVfcGllY2VzIiwicCIsImQiLCJndWlkZURvbmUiLCJzZXRMb2NhbERhdGEiLCJpbnMiLCJzZXJ2ZXJUaW1lIiwiaCIsInJlY29yZEZsYWciLCJnZXRMb2NhbERhdGFCeUtleSIsInJlZ2lzdGVyX2RhdGUiLCJnZXRUaW1lIiwicGxhdGZvcm0iLCJyZXBvcnRFdmVudCIsIkVSZXBFdnQiLCJjcmVhdGVOZXdSb2xlIiwibG9naW4iLCJsb2dpbl9kYXRlIiwiY2hlY2tOZXdEYXkiLCJwcmVsb2FkVmlkZW8iLCJWRW51bSIsInkiLCJNYXRoIiwiZmxvb3IiLCJzZXRUaW1lb3V0Iiwic2V0SW50ZXJ2YWwiLCJwbEUiLCJvbiIsIm9uT3BlclRhcCIsImJpbmQiLCJvbkhpZGUiLCJ0aW1lSWQiLCJfc2V0TG9jYWxBbmRDbG91ZERhdGEiLCJpc1NhbWVEYXkiLCJ0YXNrUmVzZXQiLCJjbGVhckRhaWx5RGF0YSIsInNlcnZlckNmZyIsInF3X2xpbmVfcnVsZXMiLCJydWxlcyIsInRpbWVzIiwic2V0IiwiYmFzaWNfdGltZXMiLCJ2YWwiLCJjaGdJdGVtQ291bnQiLCJOdW1iZXIiLCJvcEUiLCJlbWl0IiwiYWN0aW9uIiwiVVBEX01BSU5fUkVEIiwibG9naW5UIiwidHdvRGF5c0xlZnQiLCJjIiwiUmFuZG9tSW50IiwiVVBEX1BBTkVMIiwia2V5cyIsImdldFN0b3JhZ2UiLCJmb3JFYWNoIiwic2V0U2V0dGluZyIsImFzc2lnbiIsInVzRSIsInVzZXJEYXRhIiwia2luZCIsInNldFN0b3JhZ2UiLCJnZXRTZXR0aW5nIiwicmVzdG9yZURhdGEiLCJjbGVhckl0ZW0iLCJpc1JlU3RvcmUiLCJjYyIsImdhbWUiLCJyZXN0YXJ0Iiwic2V0VXNlcklkIiwiZ2V0VXNlcklkIiwiZ2V0VWlkIiwic2V0TmFtZSIsImdldE5hbWUiLCJzZXRIZWFkSW1nIiwiZ2V0SGVhZEltZyIsInNldElzQXV0aCIsImdldElzQXV0aCIsImdldElzTmV3VXNlciIsInN5bmNMYXVuY2hPcHRpb24iLCJnZXRMYXVuY2hQYXJhbSIsImFkX3R5cGUiLCJhZGRpY3RfdHlwZSIsImNsaWNraWQiLCJnZXRMYXVuY2hPcHRpb24iLCJkZWxheUZsdXNoIiwiY2xlYXJUaW1lb3V0Iiwic3luY0xvZ2luRGF0YSIsIm5pY2tuYW1lIiwiYXZhdGFyIiwiZ2FtZV91aWQiLCJvcGVuaWQiLCJzZXNzaW9uX2tleSIsImlzX25ld191c2VyIiwiVVBEX1RPUF9IRUFESU5GTyIsImlzX3JlZ2lzdGVyIiwiU0RLQ29uZmlnIiwiY29tUXVlcnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUFBLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7RUFBRUMsS0FBSyxFQUFFLENBQUM7QUFBVixDQUE3Qzs7QUFDQSxJQUFJQyxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxRQUFELENBQXJCOztBQUNBLElBQUlDLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFFBQUQsQ0FBckI7O0FBQ0EsSUFBSUUsT0FBTyxHQUFHRixPQUFPLENBQUMsUUFBRCxDQUFyQjs7QUFDQSxJQUFJRyxRQUFRLEdBQUdILE9BQU8sQ0FBQyxTQUFELENBQXRCOztBQUNBLElBQUlJLE1BQU0sR0FBR0osT0FBTyxDQUFDLE9BQUQsQ0FBcEI7O0FBQ0EsSUFBSUssSUFBSSxHQUFHTCxPQUFPLENBQUMsS0FBRCxDQUFsQjs7QUFDQSxJQUFJTSxLQUFLLEdBQUdOLE9BQU8sQ0FBQyxNQUFELENBQW5COztBQUNBLElBQUlPLElBQUksR0FBR1AsT0FBTyxDQUFDLEtBQUQsQ0FBbEI7O0FBQ0EsSUFBSVEsWUFBWSxHQUFHUixPQUFPLENBQUMsYUFBRCxDQUExQjs7QUFDQSxJQUFJUyxPQUFPLEdBQUdULE9BQU8sQ0FBQyxRQUFELENBQXJCOztBQUNBLElBQUlVLFFBQVEsR0FBR1YsT0FBTyxDQUFDLFNBQUQsQ0FBdEI7O0FBQ0EsSUFBSVcsS0FBSyxHQUFHWCxPQUFPLENBQUMsTUFBRCxDQUFuQjs7QUFDQSxJQUFJWSxDQUFDLEdBQUksWUFBVztFQUNoQixTQUFTQyxDQUFULEdBQWE7SUFDVCxLQUFLQyxLQUFMLEdBQWE7TUFDVEMsSUFBSSxFQUFFLEVBREc7TUFFVEMsR0FBRyxFQUFFLENBRkk7TUFHVEMsTUFBTSxFQUFFLEtBSEM7TUFJVEMsTUFBTSxFQUFFLE9BSkM7TUFLVEMsVUFBVSxFQUFFLEVBTEg7TUFNVEMsT0FBTyxFQUFFLEVBTkE7TUFPVEMsTUFBTSxFQUFFLElBUEM7TUFRVEMsS0FBSyxFQUFFLElBUkU7TUFTVEMsZ0JBQWdCLEVBQUU7SUFUVCxDQUFiO0lBV0EsS0FBS0MsT0FBTCxHQUFlO01BQUVDLFdBQVcsRUFBRSxDQUFDLENBQWhCO01BQW1CQyxRQUFRLEVBQUUsQ0FBQyxDQUE5QjtNQUFpQ0MsT0FBTyxFQUFFLENBQUMsQ0FBM0M7TUFBOENDLFlBQVksRUFBRSxHQUE1RDtNQUFpRUMsU0FBUyxFQUFFLEdBQTVFO01BQWlGQyxHQUFHLEVBQUUsQ0FBQztJQUF2RixDQUFmO0lBQ0EsS0FBS0MsU0FBTCxHQUFpQixJQUFqQjtJQUNBLEtBQUtDLE9BQUwsR0FBZTtNQUFFQyxXQUFXLEVBQUU7SUFBZixDQUFmO0lBQ0EsS0FBS0MsWUFBTCxHQUFvQjtNQUFFQyxLQUFLLEVBQUUsQ0FBVDtNQUFZQyxLQUFLLEVBQUU7SUFBbkIsQ0FBcEI7SUFDQSxLQUFLQyxnQkFBTCxHQUF3QixFQUF4QjtJQUNBLEtBQUtDLE9BQUwsR0FBZUMsSUFBSSxDQUFDQyxHQUFMLEVBQWY7SUFDQSxLQUFLQyxPQUFMLEdBQWUsSUFBZjtFQUNIOztFQUNEOUMsTUFBTSxDQUFDQyxjQUFQLENBQXNCaUIsQ0FBdEIsRUFBeUIsS0FBekIsRUFBZ0M7SUFDNUI2QixHQUFHLEVBQUUsZUFBVztNQUNaLEtBQUtDLElBQUwsS0FBYyxLQUFLQSxJQUFMLEdBQVksSUFBSTlCLENBQUosRUFBMUI7TUFDQSxPQUFPLEtBQUs4QixJQUFaO0lBQ0gsQ0FKMkI7SUFLNUJDLFVBQVUsRUFBRSxDQUFDLENBTGU7SUFNNUJDLFlBQVksRUFBRSxDQUFDO0VBTmEsQ0FBaEM7O0VBUUFoQyxDQUFDLENBQUNpQyxTQUFGLENBQVlDLE9BQVosR0FBc0IsVUFBU2xDLENBQVQsRUFBWTtJQUM5QixJQUFJbUMsQ0FBSjtJQUNBLElBQUlDLENBQUo7SUFDQSxJQUFJQyxDQUFDLEdBQUcsSUFBUjs7SUFDQSxJQUFJLENBQUMsS0FBS1QsT0FBVixFQUFtQjtNQUNmLElBQUlVLENBQUo7TUFDQSxLQUFLQyxXQUFMO01BQ0EsSUFBSUMsQ0FBQyxHQUFHLEtBQUtDLFlBQUwsRUFBUjs7TUFDQSxJQUFJekMsQ0FBSixFQUFPO1FBQ0gsSUFBSTBDLENBQUMsR0FBRzFDLENBQUMsQ0FBQzJDLFNBQUYsSUFBZSxDQUF2QjtRQUNBLElBQUlDLENBQUMsR0FBRyxDQUFDLFVBQVVULENBQUMsR0FBRyxRQUFRbkMsQ0FBUixHQUFZLEtBQUssQ0FBakIsR0FBcUJBLENBQUMsQ0FBQzZDLEdBQXJDLEtBQTZDLEtBQUssQ0FBTCxLQUFXVixDQUF4RCxHQUE0RCxLQUFLLENBQWpFLEdBQXFFQSxDQUFDLENBQUNXLGFBQXhFLEtBQTBGLENBQWxHO1FBQ0EsSUFBSUMsQ0FBQyxHQUFHLENBQUMsUUFBUVAsQ0FBUixHQUFZLEtBQUssQ0FBakIsR0FBcUJBLENBQUMsQ0FBQ0csU0FBeEIsS0FBc0MsQ0FBOUM7UUFDQSxJQUFJSyxDQUFDLEdBQUcsQ0FBQyxVQUFVWixDQUFDLEdBQUcsUUFBUUksQ0FBUixHQUFZLEtBQUssQ0FBakIsR0FBcUJBLENBQUMsQ0FBQ0ssR0FBckMsS0FBNkMsS0FBSyxDQUFMLEtBQVdULENBQXhELEdBQTRELEtBQUssQ0FBakUsR0FBcUVBLENBQUMsQ0FBQ1UsYUFBeEUsS0FBMEYsQ0FBbEc7UUFDQSxDQUFDSixDQUFDLEdBQUdLLENBQUosSUFBU0gsQ0FBQyxHQUFHSSxDQUFiLElBQWtCLENBQUNSLENBQUMsQ0FBQ1MsU0FBdEIsS0FBb0MsS0FBS0MsWUFBTCxDQUFrQmxELENBQWxCLENBQXBDO01BQ0g7O01BQ0QsS0FBSzRCLE9BQUwsR0FBZTlCLEtBQUssV0FBTCxDQUFjcUQsR0FBZCxDQUFrQkMsVUFBakM7TUFDQSxJQUFJQyxDQUFDLEdBQUcsS0FBS3BELEtBQWI7O01BQ0EsSUFDTW9ELENBQUMsQ0FBQ0MsVUFBRixHQUFlLFVBQVVoQixDQUFDLEdBQUdlLENBQUMsQ0FBQ0MsVUFBaEIsS0FBK0IsS0FBSyxDQUFMLEtBQVdoQixDQUExQyxHQUE4Q0EsQ0FBOUMsR0FBa0QsRUFBbEUsRUFDRyxRQUFRLEtBQUtpQixpQkFBTCxDQUF1QixlQUF2QixDQUZoQixFQUdFO1FBQ0UsSUFBSXhELENBQUMsR0FBRyxJQUFJMkIsSUFBSixFQUFSO1FBQ0EsS0FBS3dCLFlBQUwsQ0FBa0I7VUFBRU0sYUFBYSxFQUFFekQsQ0FBQyxDQUFDMEQsT0FBRjtRQUFqQixDQUFsQjs7UUFDQS9ELElBQUksQ0FBQ2dFLFFBQUwsQ0FBY0MsV0FBZCxDQUEwQmpFLElBQUksQ0FBQ2tFLE9BQUwsQ0FBYUMsYUFBdkM7TUFDSCxDQVBELE1BT09uRSxJQUFJLENBQUNnRSxRQUFMLENBQWNDLFdBQWQsQ0FBMEJqRSxJQUFJLENBQUNrRSxPQUFMLENBQWFFLEtBQXZDOztNQUNQLEtBQUtQLGlCQUFMLENBQXVCLFlBQXZCLEtBQXdDLEtBQUtMLFlBQUwsQ0FBa0I7UUFBRWEsVUFBVSxFQUFFLEtBQUtuQyxPQUFMLEdBQWU7TUFBN0IsQ0FBbEIsQ0FBeEM7TUFDQSxLQUFLb0MsV0FBTDs7TUFDQXRFLElBQUksQ0FBQ2dFLFFBQUwsQ0FBY08sWUFBZCxDQUEyQnpFLElBQUksQ0FBQzBFLEtBQUwsQ0FBVyxFQUFYLENBQTNCOztNQUNBLElBQUlDLENBQUMsR0FBRyxDQUFDckUsS0FBSyxXQUFMLENBQWNxRCxHQUFkLENBQWtCQyxVQUFsQixJQUFnQ2dCLElBQUksQ0FBQ0MsS0FBTCxDQUFXLElBQUkzQyxJQUFKLEdBQVcrQixPQUFYLEtBQXVCLEdBQWxDLENBQWpDLElBQTJFLEVBQW5GO01BQ0EsS0FBS1UsQ0FBTCxLQUFXQSxDQUFDLEdBQUcsS0FBS0EsQ0FBcEI7TUFDQUcsVUFBVSxDQUFDLFlBQVc7UUFDbEJqQyxDQUFDLENBQUMyQixXQUFGLElBQ0lPLFdBQVcsQ0FBQyxZQUFXO1VBQ25CbEMsQ0FBQyxDQUFDMkIsV0FBRjtRQUNILENBRlUsRUFFUixHQUZRLENBRGY7TUFJSCxDQUxTLEVBS1AsTUFBTUcsQ0FMQyxDQUFWOztNQU1BMUUsS0FBSyxXQUFMLENBQWMrRSxHQUFkLENBQWtCQyxFQUFsQixDQUFxQixLQUFLQyxTQUFMLENBQWVDLElBQWYsQ0FBb0IsSUFBcEIsQ0FBckI7SUFDSDtFQUNKLENBdENEOztFQXVDQTNFLENBQUMsQ0FBQ2lDLFNBQUYsQ0FBWXlDLFNBQVosR0FBd0IsVUFBUzFFLENBQVQsRUFBWTtJQUNoQyxDQUFDLFFBQVFBLENBQVIsR0FBWSxLQUFLLENBQWpCLEdBQXFCQSxDQUFDLENBQUM0RSxNQUF4QixLQUFtQyxLQUFLQyxNQUF4QyxJQUFrRCxLQUFLQyxxQkFBTCxFQUFsRDtFQUNILENBRkQ7O0VBR0E5RSxDQUFDLENBQUNpQyxTQUFGLENBQVkrQixXQUFaLEdBQTBCLFVBQVNoRSxDQUFULEVBQVk7SUFDbEMsSUFBSyxLQUFLLENBQUwsS0FBV0EsQ0FBWCxLQUFpQkEsQ0FBQyxHQUFHLENBQUMsQ0FBdEIsR0FBMEIsQ0FBQ0EsQ0FBRCxJQUFNLENBQUNGLEtBQUssV0FBTCxDQUFjcUQsR0FBZCxDQUFrQjRCLFNBQXhELEVBQW9FO01BQ2hFekYsUUFBUSxXQUFSLENBQWlCMEYsU0FBakI7O01BQ0F6RixNQUFNLFdBQU4sQ0FBZTRELEdBQWYsQ0FBbUI4QixjQUFuQjs7TUFDQSxJQUFJOUMsQ0FBQyxHQUFHakQsT0FBTyxXQUFQLENBQWdCZ0csU0FBaEIsQ0FBMEJDLGFBQTFCLENBQXdDQyxLQUF4QyxDQUE4Q0MsS0FBOUMsQ0FBb0RDLEdBQXBELENBQXdEQyxXQUF4RCxDQUFvRUMsR0FBNUU7O01BQ0FuRyxPQUFPLFdBQVAsQ0FBZ0I4RCxHQUFoQixDQUFvQnNDLFlBQXBCLENBQWlDLGdCQUFqQyxFQUFtREMsTUFBTSxDQUFDdkQsQ0FBRCxDQUF6RDs7TUFDQTFDLEtBQUssV0FBTCxDQUFja0csR0FBZCxDQUFrQkMsSUFBbEIsQ0FBdUI7UUFBRUMsTUFBTSxFQUFFcEcsS0FBSyxXQUFMLENBQWNxRztNQUF4QixDQUF2Qjs7TUFDQSxLQUFLbEUsT0FBTCxHQUFlOUIsS0FBSyxXQUFMLENBQWNxRCxHQUFkLENBQWtCQyxVQUFqQztNQUNBdEQsS0FBSyxXQUFMLENBQWNxRCxHQUFkLENBQWtCNEMsTUFBbEIsR0FBMkJqRyxLQUFLLFdBQUwsQ0FBY3FELEdBQWQsQ0FBa0JDLFVBQTdDO01BQ0EsSUFBSWhCLENBQUMsR0FBRyxLQUFLbUIsaUJBQUwsQ0FBdUIsWUFBdkIsQ0FBUjs7TUFDQSxJQUNLekQsS0FBSyxXQUFMLENBQWNxRCxHQUFkLENBQWtCQyxVQUFsQixHQUErQmhCLENBQS9CLElBQW9DLE1BQXBDLEtBQStDaEQsT0FBTyxXQUFQLENBQWdCNEcsV0FBaEIsR0FBOEIsQ0FBQyxDQUE5RSxHQUNHLEtBQUs5QyxZQUFMLENBQWtCO1FBQUVhLFVBQVUsRUFBRSxLQUFLbkM7TUFBbkIsQ0FBbEIsQ0FESCxFQUVHNUIsQ0FBQyxJQUFJLENBQUMsS0FBS0MsS0FBTCxDQUFXUSxLQUh6QixFQUlFO1FBQ0UsSUFBSXdGLENBQUMsR0FBRyxNQUFNdEcsWUFBWSxXQUFaLENBQXFCdUcsU0FBckIsQ0FBK0IsQ0FBL0IsRUFBa0MsRUFBbEMsQ0FBZDs7UUFDQSxLQUFLckIsTUFBTCxHQUFjUCxVQUFVLENBQUMsS0FBS1EscUJBQUwsQ0FBMkJILElBQTNCLENBQWdDLElBQWhDLENBQUQsRUFBd0NzQixDQUF4QyxDQUF4QjtNQUNIOztNQUNEeEcsS0FBSyxXQUFMLENBQWNrRyxHQUFkLENBQWtCQyxJQUFsQixDQUF1QjtRQUFFQyxNQUFNLEVBQUVwRyxLQUFLLFdBQUwsQ0FBYzBHO01BQXhCLENBQXZCO0lBQ0g7RUFDSixDQXBCRDs7RUFxQkFuRyxDQUFDLENBQUNpQyxTQUFGLENBQVlNLFdBQVosR0FBMEIsWUFBVztJQUNqQyxJQUFJdkMsQ0FBQyxHQUFHLElBQVI7SUFDQSxJQUFJbUMsQ0FBQyxHQUFHckQsTUFBTSxDQUFDc0gsSUFBUCxDQUFZLEtBQUt6RixPQUFqQixDQUFSO0lBQ0EsSUFBSXlCLENBQUMsR0FBRyxLQUFLekIsT0FBYjtJQUNBLEtBQUtBLE9BQUwsR0FBZWpCLElBQUksQ0FBQ2dFLFFBQUwsQ0FBYzJDLFVBQWQsQ0FBeUIsU0FBekIsS0FBdUMsS0FBSzFGLE9BQTNEO0lBQ0F3QixDQUFDLENBQUNtRSxPQUFGLENBQVUsVUFBU25FLENBQVQsRUFBWTtNQUNsQixJQUFJRSxDQUFKO01BQ0EsUUFBUXJDLENBQUMsQ0FBQ1csT0FBRixDQUFVd0IsQ0FBVixDQUFSLElBQXdCbkMsQ0FBQyxDQUFDdUcsVUFBRixFQUFlLENBQUNsRSxDQUFDLEdBQUcsRUFBTCxFQUFTRixDQUFULElBQWNDLENBQUMsQ0FBQ0QsQ0FBRCxDQUFoQixFQUFzQkUsQ0FBcEMsRUFBeEI7SUFDSCxDQUhEO0VBSUgsQ0FURDs7RUFVQXJDLENBQUMsQ0FBQ2lDLFNBQUYsQ0FBWXNFLFVBQVosR0FBeUIsVUFBU3ZHLENBQVQsRUFBWW1DLENBQVosRUFBZTtJQUNwQyxLQUFLLENBQUwsS0FBV0EsQ0FBWCxLQUFpQkEsQ0FBQyxHQUFHLENBQUMsQ0FBdEI7SUFDQSxLQUFLeEIsT0FBTCxHQUFlN0IsTUFBTSxDQUFDMEgsTUFBUCxDQUFjMUgsTUFBTSxDQUFDMEgsTUFBUCxDQUFjLEVBQWQsRUFBa0IsS0FBSzdGLE9BQXZCLENBQWQsRUFBK0NYLENBQS9DLENBQWY7O0lBQ0FQLEtBQUssV0FBTCxDQUFjZ0gsR0FBZCxDQUFrQmIsSUFBbEIsQ0FBdUI7TUFBRWMsUUFBUSxFQUFFLElBQVo7TUFBa0JDLElBQUksRUFBRTtJQUF4QixDQUF2Qjs7SUFDQXhFLENBQUMsSUFBSXpDLElBQUksQ0FBQ2dFLFFBQUwsQ0FBY2tELFVBQWQsQ0FBeUIsU0FBekIsRUFBb0MsS0FBS2pHLE9BQXpDLENBQUw7RUFDSCxDQUxEOztFQU1BWCxDQUFDLENBQUNpQyxTQUFGLENBQVk0RSxVQUFaLEdBQXlCLFlBQVc7SUFDaEMsT0FBTyxLQUFLbEcsT0FBWjtFQUNILENBRkQ7O0VBR0FYLENBQUMsQ0FBQ2lDLFNBQUYsQ0FBWWlCLFlBQVosR0FBMkIsVUFBU2xELENBQVQsRUFBWW1DLENBQVosRUFBZTtJQUN0QyxLQUFLLENBQUwsS0FBV0EsQ0FBWCxLQUFpQkEsQ0FBQyxHQUFHLEVBQXJCO0lBQ0EsSUFBSUMsQ0FBQyxHQUFHLEtBQUtLLFlBQUwsRUFBUjtJQUNBLElBQUlKLENBQUMsR0FBSSxLQUFLbkIsU0FBTCxHQUFpQnBDLE1BQU0sQ0FBQzBILE1BQVAsQ0FBYzFILE1BQU0sQ0FBQzBILE1BQVAsQ0FBYyxFQUFkLEVBQWtCcEUsQ0FBbEIsQ0FBZCxFQUFvQ3BDLENBQXBDLENBQTFCOztJQUNBTixJQUFJLENBQUNnRSxRQUFMLENBQWNrRCxVQUFkLENBQXlCLFdBQXpCLEVBQXNDLEtBQUsxRixTQUEzQzs7SUFDQW1CLENBQUMsSUFBSSxDQUFDLEtBQUt3QyxNQUFYLEtBQXNCLEtBQUtBLE1BQUwsR0FBY1AsVUFBVSxDQUFDLEtBQUtRLHFCQUFMLENBQTJCSCxJQUEzQixDQUFnQyxJQUFoQyxDQUFELEVBQXdDLE1BQU14QyxDQUE5QyxDQUE5QztFQUNILENBTkQ7O0VBT0FuQyxDQUFDLENBQUNpQyxTQUFGLENBQVk2QyxxQkFBWixHQUFvQyxZQUFXLENBQzNDO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtFQUNILENBaEJEOztFQWlCQTlFLENBQUMsQ0FBQ2lDLFNBQUYsQ0FBWTZFLFdBQVosR0FBMEIsVUFBUzlHLENBQVQsRUFBWTtJQUNsQ0EsQ0FBQyxLQUNLLEtBQUtrQixTQUFMLEdBQWlCbEIsQ0FBbEIsRUFDR1gsT0FBTyxXQUFQLENBQWdCOEQsR0FBaEIsQ0FBb0I0RCxTQUFwQixFQURILEVBRUdySCxJQUFJLENBQUNnRSxRQUFMLENBQWNrRCxVQUFkLENBQXlCLFdBQXpCLEVBQXNDLEtBQUsxRixTQUEzQyxDQUZILEVBR0csS0FBSzhDLFdBQUwsRUFISCxFQUlHLEtBQUtjLHFCQUFMLEVBSkgsRUFLSTFGLE9BQU8sV0FBUCxDQUFnQjRILFNBQWhCLEdBQTRCLENBTGhDLEVBTUdDLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRQyxPQUFSLEVBUFAsQ0FBRDtFQVFILENBVEQ7O0VBVUFuSCxDQUFDLENBQUNpQyxTQUFGLENBQVlRLFlBQVosR0FBMkIsWUFBVztJQUNsQyxRQUFRLEtBQUt2QixTQUFiLEtBQTJCLEtBQUtBLFNBQUwsR0FBaUJ4QixJQUFJLENBQUNnRSxRQUFMLENBQWMyQyxVQUFkLENBQXlCLFdBQXpCLEtBQXlDLEVBQXJGO0lBQ0EsT0FBTyxLQUFLbkYsU0FBWjtFQUNILENBSEQ7O0VBSUFsQixDQUFDLENBQUNpQyxTQUFGLENBQVlzQixpQkFBWixHQUFnQyxVQUFTdkQsQ0FBVCxFQUFZO0lBQ3hDLE9BQU8sUUFBUSxLQUFLa0IsU0FBYixHQUF5QixJQUF6QixHQUFnQyxLQUFLQSxTQUFMLENBQWVsQixDQUFmLENBQXZDO0VBQ0gsQ0FGRDs7RUFHQWxCLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQmlCLENBQUMsQ0FBQ2lDLFNBQXhCLEVBQW1DLFNBQW5DLEVBQThDO0lBQzFDSixHQUFHLEVBQUUsZUFBVztNQUNaLE9BQU8sUUFBUSxJQUFJLEtBQUs1QixLQUFMLENBQVdFLEdBQTlCO0lBQ0gsQ0FIeUM7SUFJMUM0QixVQUFVLEVBQUUsQ0FBQyxDQUo2QjtJQUsxQ0MsWUFBWSxFQUFFLENBQUM7RUFMMkIsQ0FBOUM7O0VBT0FoQyxDQUFDLENBQUNpQyxTQUFGLENBQVltRixTQUFaLEdBQXdCLFVBQVNwSCxDQUFULEVBQVk7SUFDaEMsS0FBS0MsS0FBTCxDQUFXRyxNQUFYLEdBQW9CSixDQUFwQjtFQUNILENBRkQ7O0VBR0FBLENBQUMsQ0FBQ2lDLFNBQUYsQ0FBWW9GLFNBQVosR0FBd0IsWUFBVztJQUMvQixPQUFPLEtBQUtwSCxLQUFMLENBQVdHLE1BQWxCO0VBQ0gsQ0FGRDs7RUFHQUosQ0FBQyxDQUFDaUMsU0FBRixDQUFZcUYsTUFBWixHQUFxQixZQUFXO0lBQzVCLE9BQU8sS0FBS3JILEtBQUwsQ0FBV0UsR0FBbEI7RUFDSCxDQUZEOztFQUdBSCxDQUFDLENBQUNpQyxTQUFGLENBQVlzRixPQUFaLEdBQXNCLFVBQVN2SCxDQUFULEVBQVk7SUFDOUIsS0FBS0MsS0FBTCxDQUFXQyxJQUFYLEdBQWtCRixDQUFsQjtFQUNILENBRkQ7O0VBR0FBLENBQUMsQ0FBQ2lDLFNBQUYsQ0FBWXVGLE9BQVosR0FBc0IsWUFBVztJQUM3QixPQUFPLEtBQUt2SCxLQUFMLENBQVdDLElBQWxCO0VBQ0gsQ0FGRDs7RUFHQUYsQ0FBQyxDQUFDaUMsU0FBRixDQUFZd0YsVUFBWixHQUF5QixVQUFTekgsQ0FBVCxFQUFZO0lBQ2pDLEtBQUtDLEtBQUwsQ0FBV00sT0FBWCxHQUFxQlAsQ0FBckI7RUFDSCxDQUZEOztFQUdBQSxDQUFDLENBQUNpQyxTQUFGLENBQVl5RixVQUFaLEdBQXlCLFlBQVc7SUFDaEMsT0FBTyxLQUFLekgsS0FBTCxDQUFXTSxPQUFsQjtFQUNILENBRkQ7O0VBR0FQLENBQUMsQ0FBQ2lDLFNBQUYsQ0FBWTBGLFNBQVosR0FBd0IsVUFBUzNILENBQVQsRUFBWTtJQUNoQyxLQUFLQyxLQUFMLENBQVdPLE1BQVgsR0FBb0JSLENBQXBCO0VBQ0gsQ0FGRDs7RUFHQUEsQ0FBQyxDQUFDaUMsU0FBRixDQUFZMkYsU0FBWixHQUF3QixZQUFXO0lBQy9CLE9BQU8sS0FBSzNILEtBQUwsQ0FBV08sTUFBbEI7RUFDSCxDQUZEOztFQUdBUixDQUFDLENBQUNpQyxTQUFGLENBQVk0RixZQUFaLEdBQTJCLFlBQVc7SUFDbEMsT0FBTyxLQUFLNUgsS0FBTCxDQUFXUSxLQUFsQjtFQUNILENBRkQ7O0VBR0FULENBQUMsQ0FBQ2lDLFNBQUYsQ0FBWTZGLGdCQUFaLEdBQStCLFVBQVM5SCxDQUFULEVBQVk7SUFDdkMsSUFDTSxLQUFLcUIsWUFBTCxDQUFrQkUsS0FBbEIsR0FBMEIsRUFBM0IsRUFDSSxLQUFLRixZQUFMLEdBQW9CdkMsTUFBTSxDQUFDMEgsTUFBUCxDQUFjMUgsTUFBTSxDQUFDMEgsTUFBUCxDQUFjLEVBQWQsRUFBa0IsS0FBS25GLFlBQXZCLENBQWQsRUFBb0RyQixDQUFwRCxDQUR4QixFQUVHLFFBQVEsS0FBS3VELGlCQUFMLENBQXVCLGVBQXZCLENBSGhCLEVBSUU7TUFDRSxJQUFJcEIsQ0FBQyxHQUFHLEtBQUs0RixjQUFMLENBQW9CLFNBQXBCLEVBQStCLEVBQS9CLENBQVI7O01BQ0EsSUFBSSxPQUFPNUYsQ0FBWCxFQUFjO1FBQ1YsS0FBS2UsWUFBTCxDQUFrQjtVQUFFOEUsT0FBTyxFQUFFN0Y7UUFBWCxDQUFsQjtRQUNBLElBQUlDLENBQUMsR0FBRyxLQUFLMkYsY0FBTCxDQUFvQixhQUFwQixFQUFtQyxFQUFuQyxDQUFSO1FBQ0EsT0FBTzNGLENBQVAsSUFBWSxLQUFLYyxZQUFMLENBQWtCO1VBQUUrRSxXQUFXLEVBQUU3RjtRQUFmLENBQWxCLENBQVo7UUFDQSxJQUFJQyxDQUFDLEdBQUcsS0FBSzBGLGNBQUwsQ0FBb0IsU0FBcEIsRUFBK0IsRUFBL0IsQ0FBUjtRQUNBLE9BQU8xRixDQUFQLElBQVksS0FBS2EsWUFBTCxDQUFrQjtVQUFFZ0YsT0FBTyxFQUFFN0Y7UUFBWCxDQUFsQixDQUFaO01BQ0g7SUFDSjtFQUNKLENBZkQ7O0VBZ0JBckMsQ0FBQyxDQUFDaUMsU0FBRixDQUFZOEYsY0FBWixHQUE2QixVQUFTL0gsQ0FBVCxFQUFZbUMsQ0FBWixFQUFlO0lBQ3hDLElBQUksUUFBUSxLQUFLZCxZQUFqQixFQUErQixPQUFPYyxDQUFQO0lBQy9CLElBQUlDLENBQUMsR0FBRyxLQUFLZixZQUFMLENBQWtCckIsQ0FBbEIsQ0FBUjtJQUNBLE9BQU8sUUFBUW9DLENBQVIsSUFBYSxRQUFRLEtBQUtmLFlBQUwsQ0FBa0JFLEtBQXZDLElBQWdELFFBQVEsS0FBS0YsWUFBTCxDQUFrQkUsS0FBbEIsQ0FBd0J2QixDQUF4QixDQUF4RCxHQUNGb0MsQ0FBQyxHQUFHLEtBQUtmLFlBQUwsQ0FBa0JFLEtBQWxCLENBQXdCdkIsQ0FBeEIsQ0FERixHQUVIbUMsQ0FGSjtFQUdILENBTkQ7O0VBT0FuQyxDQUFDLENBQUNpQyxTQUFGLENBQVlrRyxlQUFaLEdBQThCLFlBQVc7SUFDckMsT0FBTyxLQUFLOUcsWUFBWjtFQUNILENBRkQ7O0VBR0FyQixDQUFDLENBQUNpQyxTQUFGLENBQVltRyxVQUFaLEdBQXlCLFVBQVNwSSxDQUFULEVBQVltQyxDQUFaLEVBQWVDLENBQWYsRUFBa0I7SUFDdkMsS0FBSyxDQUFMLEtBQVdBLENBQVgsS0FBaUJBLENBQUMsR0FBRyxDQUFyQjtJQUNBLElBQUlDLENBQUMsR0FBRyxJQUFSO0lBQ0EsSUFBSUMsQ0FBQyxHQUFHLEtBQUtkLGdCQUFMLENBQXNCVyxDQUF0QixDQUFSO0lBQ0FHLENBQUMsR0FFRyxNQUFNRixDQUFOLEtBQVlpRyxZQUFZLENBQUMvRixDQUFELENBQVosRUFBa0IsS0FBS2QsZ0JBQUwsQ0FBc0JXLENBQXRCLElBQTJCLElBQTdDLEVBQW9EekMsSUFBSSxDQUFDZ0UsUUFBTCxDQUFja0QsVUFBZCxDQUF5QnpFLENBQXpCLEVBQTRCbkMsQ0FBNUIsQ0FBaEUsQ0FGSCxHQUdJLEtBQUt3QixnQkFBTCxDQUFzQlcsQ0FBdEIsSUFBMkJtQyxVQUFVLENBQUMsWUFBVztNQUM5Q2pDLENBQUMsQ0FBQ2IsZ0JBQUYsQ0FBbUJXLENBQW5CLElBQXdCLElBQXhCOztNQUNBekMsSUFBSSxDQUFDZ0UsUUFBTCxDQUFja0QsVUFBZCxDQUF5QnpFLENBQXpCLEVBQTRCbkMsQ0FBNUI7SUFDSCxDQUhxQyxFQUduQyxNQUFNb0MsQ0FINkIsQ0FIMUM7RUFPSCxDQVhEOztFQVlBcEMsQ0FBQyxDQUFDaUMsU0FBRixDQUFZcUcsYUFBWixHQUE0QixVQUFTdEksQ0FBVCxFQUFZO0lBQ3BDLEtBQUssQ0FBTCxLQUFXQSxDQUFYLEtBQWlCQSxDQUFDLEdBQUcsRUFBckI7SUFDQSxJQUFJbUMsQ0FBQyxHQUFHLEtBQUtsQyxLQUFiO0lBQ0FrQyxDQUFDLENBQUNqQyxJQUFGLEdBQVNGLENBQUMsQ0FBQ3VJLFFBQVg7SUFDQXBHLENBQUMsQ0FBQzVCLE9BQUYsR0FBWVAsQ0FBQyxDQUFDd0ksTUFBZDtJQUNBckcsQ0FBQyxDQUFDaEMsR0FBRixHQUFRSCxDQUFDLENBQUN5SSxRQUFWO0lBQ0F0RyxDQUFDLENBQUM5QixNQUFGLEdBQVdMLENBQUMsQ0FBQzBJLE1BQWI7SUFDQXZHLENBQUMsQ0FBQzdCLFVBQUYsR0FBZU4sQ0FBQyxDQUFDMkksV0FBakI7SUFDQXhHLENBQUMsQ0FBQ3pCLGdCQUFGLEdBQXFCVixDQUFDLENBQUNVLGdCQUF2QjtJQUNBeUIsQ0FBQyxDQUFDMUIsS0FBRixHQUFVVCxDQUFDLENBQUM0SSxXQUFaOztJQUNBbkosS0FBSyxXQUFMLENBQWNrRyxHQUFkLENBQWtCQyxJQUFsQixDQUF1QjtNQUFFQyxNQUFNLEVBQUVwRyxLQUFLLFdBQUwsQ0FBY29KO0lBQXhCLENBQXZCOztJQUNBLElBQUl6RyxDQUFDLEdBQUcsQ0FBQ3BDLENBQUMsQ0FBQzhJLFdBQVg7O0lBQ0EsSUFBSXpHLENBQUMsR0FBRyxRQUFRM0MsSUFBSSxDQUFDZ0UsUUFBTCxDQUFjMkMsVUFBZCxDQUF5QixXQUF6QixDQUFoQjs7SUFDQXpHLE9BQU8sQ0FBQ21KLFNBQVIsQ0FBa0JDLFFBQWxCLEdBQTZCLG1CQUFtQmhKLENBQUMsQ0FBQ3lJLFFBQXJCLEdBQWdDLGNBQTdEO0lBQ0EsT0FBTyxDQUFDLEtBQUQsRUFBUXBHLENBQVIsQ0FBUDtFQUNILENBZkQ7O0VBZ0JBLE9BQU9yQyxDQUFQO0FBQ0gsQ0FwUE8sRUFBUjs7QUFxUEFoQixPQUFPLFdBQVAsR0FBa0JlLENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6ICEwIH0pO1xudmFyIF9jZmdNZ3IgPSByZXF1aXJlKFwiY2ZnTWdyXCIpO1xudmFyIF9nbG9iYWwgPSByZXF1aXJlKFwiZ2xvYmFsXCIpO1xudmFyIF9iYWdNZ3IgPSByZXF1aXJlKFwiYmFnTWdyXCIpO1xudmFyIF90YXNrTWdyID0gcmVxdWlyZShcInRhc2tNZ3JcIik7XG52YXIgX3BJbmZvID0gcmVxdWlyZShcInBJbmZvXCIpO1xudmFyIF9hZEMgPSByZXF1aXJlKFwiYWRDXCIpO1xudmFyIF9ldnRzID0gcmVxdWlyZShcImV2dHNcIik7XG52YXIgX2lkeCA9IHJlcXVpcmUoXCJpZHhcIik7XG52YXIgX251bWJlclV0aWxzID0gcmVxdWlyZShcIk51bWJlclV0aWxzXCIpO1xudmFyIF9wQ29uc3QgPSByZXF1aXJlKFwicENvbnN0XCIpO1xudmFyIF9yZXF1ZXN0ID0gcmVxdWlyZShcInJlcXVlc3RcIik7XG52YXIgX3RpbWUgPSByZXF1aXJlKFwidGltZVwiKTtcbnZhciBnID0gKGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgIHRoaXMuYmFzaWMgPSB7XG4gICAgICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICAgICAgdWlkOiAwLFxuICAgICAgICAgICAgdXNlcklkOiBcIjEyM1wiLFxuICAgICAgICAgICAgb3BlbklkOiBcInRlc3QyXCIsXG4gICAgICAgICAgICBzZXNzaW9uS2V5OiBcIlwiLFxuICAgICAgICAgICAgaGVhZEltZzogXCJcIixcbiAgICAgICAgICAgIGlzQXV0aDogbnVsbCxcbiAgICAgICAgICAgIGlzTmV3OiBudWxsLFxuICAgICAgICAgICAgYW5vbnltb3VzX29wZW5pZDogbnVsbFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldHRpbmcgPSB7IGVmZmVjdFNvdW5kOiAhMCwgYmdtU291bmQ6ICEwLCB2aWJyYXRlOiAhMCwgZWZmZWN0Vm9sdW1lOiAwLjUsIGJnbVZvbHVtZTogMC41LCB0aXA6ICEwIH07XG4gICAgICAgIHRoaXMubG9jYWxEYXRhID0gbnVsbDtcbiAgICAgICAgdGhpcy5uZXR3b3JrID0geyBuZXR3b3JrVHlwZTogXCJub25lXCIgfTtcbiAgICAgICAgdGhpcy5sYXVuY2hPcHRpb24gPSB7IHNjZW5lOiAwLCBxdWVyeToge30gfTtcbiAgICAgICAgdGhpcy5mbHVzaFRpbWVvdXRLZXlzID0ge307XG4gICAgICAgIHRoaXMuZW50ZXJBdCA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMubG9naW5BdCA9IG51bGw7XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCBcImluc1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLl9pbnMgfHwgKHRoaXMuX2lucyA9IG5ldyB0KCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lucztcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogITEsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogITBcbiAgICB9KTtcbiAgICB0LnByb3RvdHlwZS5vbkxvZ2luID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgdmFyIG87XG4gICAgICAgIHZhciBuID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLmxvZ2luQXQpIHtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgdGhpcy5sb2FkU2V0dGluZygpO1xuICAgICAgICAgICAgdmFyIHIgPSB0aGlzLmdldExvY2FsRGF0YSgpO1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IHQucHV6emxlTHZsIHx8IDA7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSAobnVsbCA9PT0gKGUgPSBudWxsID09IHQgPyB2b2lkIDAgOiB0LmJhZykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5wdXp6bGVfcGllY2VzKSB8fCAwO1xuICAgICAgICAgICAgICAgIHZhciBwID0gKG51bGwgPT0gciA/IHZvaWQgMCA6IHIucHV6emxlTHZsKSB8fCAwO1xuICAgICAgICAgICAgICAgIHZhciBkID0gKG51bGwgPT09IChvID0gbnVsbCA9PSByID8gdm9pZCAwIDogci5iYWcpIHx8IHZvaWQgMCA9PT0gbyA/IHZvaWQgMCA6IG8ucHV6emxlX3BpZWNlcykgfHwgMDtcbiAgICAgICAgICAgICAgICAoYSA+IHAgfHwgcyA+IGQgfHwgIXIuZ3VpZGVEb25lKSAmJiB0aGlzLnNldExvY2FsRGF0YSh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubG9naW5BdCA9IF90aW1lLmRlZmF1bHQuaW5zLnNlcnZlclRpbWU7XG4gICAgICAgICAgICB2YXIgaCA9IHRoaXMuYmFzaWM7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgKChoLnJlY29yZEZsYWcgPSBudWxsICE9PSAoaSA9IGgucmVjb3JkRmxhZykgJiYgdm9pZCAwICE9PSBpID8gaSA6IHt9KSxcbiAgICAgICAgICAgICAgICAgICAgbnVsbCA9PSB0aGlzLmdldExvY2FsRGF0YUJ5S2V5KFwicmVnaXN0ZXJfZGF0ZVwiKSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHZhciBnID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldExvY2FsRGF0YSh7IHJlZ2lzdGVyX2RhdGU6IGcuZ2V0VGltZSgpIH0pO1xuICAgICAgICAgICAgICAgIF9pZHgucGxhdGZvcm0ucmVwb3J0RXZlbnQoX2lkeC5FUmVwRXZ0LmNyZWF0ZU5ld1JvbGUpO1xuICAgICAgICAgICAgfSBlbHNlIF9pZHgucGxhdGZvcm0ucmVwb3J0RXZlbnQoX2lkeC5FUmVwRXZ0LmxvZ2luKTtcbiAgICAgICAgICAgIHRoaXMuZ2V0TG9jYWxEYXRhQnlLZXkoXCJsb2dpbl9kYXRlXCIpIHx8IHRoaXMuc2V0TG9jYWxEYXRhKHsgbG9naW5fZGF0ZTogdGhpcy5sb2dpbkF0IC0gODY0ZTUgfSk7XG4gICAgICAgICAgICB0aGlzLmNoZWNrTmV3RGF5KCk7XG4gICAgICAgICAgICBfaWR4LnBsYXRmb3JtLnByZWxvYWRWaWRlbyhfYWRDLlZFbnVtWzYwXSk7XG4gICAgICAgICAgICB2YXIgeSA9IChfdGltZS5kZWZhdWx0Lmlucy5zZXJ2ZXJUaW1lIHx8IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxZTMpKSAlIDYwO1xuICAgICAgICAgICAgMCAhPSB5ICYmICh5ID0gNjAgLSB5KTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgbi5jaGVja05ld0RheSgpLFxuICAgICAgICAgICAgICAgICAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4uY2hlY2tOZXdEYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNmU0KTtcbiAgICAgICAgICAgIH0sIDFlMyAqIHkpO1xuICAgICAgICAgICAgX2V2dHMuZGVmYXVsdC5wbEUub24odGhpcy5vbk9wZXJUYXAuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLm9uT3BlclRhcCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQub25IaWRlKSAmJiB0aGlzLnRpbWVJZCAmJiB0aGlzLl9zZXRMb2NhbEFuZENsb3VkRGF0YSgpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuY2hlY2tOZXdEYXkgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICgodm9pZCAwID09PSB0ICYmICh0ID0gITApLCAhdCB8fCAhX3RpbWUuZGVmYXVsdC5pbnMuaXNTYW1lRGF5KSkge1xuICAgICAgICAgICAgX3Rhc2tNZ3IuZGVmYXVsdC50YXNrUmVzZXQoKTtcbiAgICAgICAgICAgIF9wSW5mby5kZWZhdWx0Lmlucy5jbGVhckRhaWx5RGF0YSgpO1xuICAgICAgICAgICAgdmFyIGUgPSBfY2ZnTWdyLmRlZmF1bHQuc2VydmVyQ2ZnLnF3X2xpbmVfcnVsZXMucnVsZXMudGltZXMuc2V0LmJhc2ljX3RpbWVzLnZhbDtcbiAgICAgICAgICAgIF9iYWdNZ3IuZGVmYXVsdC5pbnMuY2hnSXRlbUNvdW50KFwicXdfbGluZV90aWNrZXRcIiwgTnVtYmVyKGUpKTtcbiAgICAgICAgICAgIF9ldnRzLmRlZmF1bHQub3BFLmVtaXQoeyBhY3Rpb246IF9ldnRzLmRlZmF1bHQuVVBEX01BSU5fUkVEIH0pO1xuICAgICAgICAgICAgdGhpcy5sb2dpbkF0ID0gX3RpbWUuZGVmYXVsdC5pbnMuc2VydmVyVGltZTtcbiAgICAgICAgICAgIF90aW1lLmRlZmF1bHQuaW5zLmxvZ2luVCA9IF90aW1lLmRlZmF1bHQuaW5zLnNlcnZlclRpbWU7XG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMuZ2V0TG9jYWxEYXRhQnlLZXkoXCJsb2dpbl9kYXRlXCIpO1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIChfdGltZS5kZWZhdWx0Lmlucy5zZXJ2ZXJUaW1lIC0gbyA+PSAxNzI4ZTUgJiYgKF9nbG9iYWwuZGVmYXVsdC50d29EYXlzTGVmdCA9ICEwKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMb2NhbERhdGEoeyBsb2dpbl9kYXRlOiB0aGlzLmxvZ2luQXQgfSksXG4gICAgICAgICAgICAgICAgICAgIHQgJiYgIXRoaXMuYmFzaWMuaXNOZXcpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB2YXIgYyA9IDFlMyAqIF9udW1iZXJVdGlscy5kZWZhdWx0LlJhbmRvbUludCgxLCAzMCk7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lSWQgPSBzZXRUaW1lb3V0KHRoaXMuX3NldExvY2FsQW5kQ2xvdWREYXRhLmJpbmQodGhpcyksIGMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2V2dHMuZGVmYXVsdC5vcEUuZW1pdCh7IGFjdGlvbjogX2V2dHMuZGVmYXVsdC5VUERfUEFORUwgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmxvYWRTZXR0aW5nID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgdmFyIGUgPSBPYmplY3Qua2V5cyh0aGlzLnNldHRpbmcpO1xuICAgICAgICB2YXIgbyA9IHRoaXMuc2V0dGluZztcbiAgICAgICAgdGhpcy5zZXR0aW5nID0gX2lkeC5wbGF0Zm9ybS5nZXRTdG9yYWdlKFwic2V0dGluZ1wiKSB8fCB0aGlzLnNldHRpbmc7XG4gICAgICAgIGUuZm9yRWFjaChmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgbjtcbiAgICAgICAgICAgIG51bGwgPT0gdC5zZXR0aW5nW2VdICYmIHQuc2V0U2V0dGluZygoKChuID0ge30pW2VdID0gb1tlXSksIG4pKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5zZXRTZXR0aW5nID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSAhMCk7XG4gICAgICAgIHRoaXMuc2V0dGluZyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZXR0aW5nKSwgdCk7XG4gICAgICAgIF9ldnRzLmRlZmF1bHQudXNFLmVtaXQoeyB1c2VyRGF0YTogdGhpcywga2luZDogXCJzZXR0aW5nXCIgfSk7XG4gICAgICAgIGUgJiYgX2lkeC5wbGF0Zm9ybS5zZXRTdG9yYWdlKFwic2V0dGluZ1wiLCB0aGlzLnNldHRpbmcpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0U2V0dGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5nO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuc2V0TG9jYWxEYXRhID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSAxMCk7XG4gICAgICAgIHZhciBvID0gdGhpcy5nZXRMb2NhbERhdGEoKTtcbiAgICAgICAgdmFyIG4gPSAodGhpcy5sb2NhbERhdGEgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG8pLCB0KSk7XG4gICAgICAgIF9pZHgucGxhdGZvcm0uc2V0U3RvcmFnZShcImxvY2FsRGF0YVwiLCB0aGlzLmxvY2FsRGF0YSk7XG4gICAgICAgIG4gJiYgIXRoaXMudGltZUlkICYmICh0aGlzLnRpbWVJZCA9IHNldFRpbWVvdXQodGhpcy5fc2V0TG9jYWxBbmRDbG91ZERhdGEuYmluZCh0aGlzKSwgMWUzICogZSkpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuX3NldExvY2FsQW5kQ2xvdWREYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIHZhciB0O1xuICAgICAgICAvLyB2YXIgZTtcbiAgICAgICAgLy8gdmFyIG8gPSB0aGlzLmxvY2FsRGF0YTtcbiAgICAgICAgLy8gaWYgKG8pIHtcbiAgICAgICAgLy8gICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVJZCk7XG4gICAgICAgIC8vICAgICB0aGlzLnRpbWVJZCA9IG51bGw7XG4gICAgICAgIC8vICAgICB2YXIgaSA9XG4gICAgICAgIC8vICAgICAgICAgKG51bGwgPT09XG4gICAgICAgIC8vICAgICAgICAgICAgIChlID0gbnVsbCA9PT0gKHQgPSBfY2ZnTWdyLmRlZmF1bHQuc2VydmVyQ2ZnKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LnVwbG9hZF91c2VyX2JhY2t1cCkgfHxcbiAgICAgICAgLy8gICAgICAgICB2b2lkIDAgPT09IGVcbiAgICAgICAgLy8gICAgICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgLy8gICAgICAgICAgICAgOiBlLnZhbCkgfHwgNTtcbiAgICAgICAgLy8gICAgIG8ucHV6emxlTHZsID4gaSAmJiBfcmVxdWVzdC5kZWZhdWx0Lmlucy51cGRhdGVTZXJ2ZXJEYXRhKHRoaXMubG9jYWxEYXRhLCBcImxvY2FsRGF0YVwiKTtcbiAgICAgICAgLy8gICAgIF9pZHgucGxhdGZvcm0uc2V0Q2xvdWREYXRhICYmIF9pZHgucGxhdGZvcm0uc2V0Q2xvdWREYXRhKEpTT04uc3RyaW5naWZ5KHRoaXMubG9jYWxEYXRhKSk7XG4gICAgICAgIC8vIH1cbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnJlc3RvcmVEYXRhID0gZnVuY3Rpb24odCkge1xuICAgICAgICB0ICYmXG4gICAgICAgICAgICAoKHRoaXMubG9jYWxEYXRhID0gdCksXG4gICAgICAgICAgICAgICAgX2JhZ01nci5kZWZhdWx0Lmlucy5jbGVhckl0ZW0oKSxcbiAgICAgICAgICAgICAgICBfaWR4LnBsYXRmb3JtLnNldFN0b3JhZ2UoXCJsb2NhbERhdGFcIiwgdGhpcy5sb2NhbERhdGEpLFxuICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tOZXdEYXkoKSxcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRMb2NhbEFuZENsb3VkRGF0YSgpLFxuICAgICAgICAgICAgICAgIChfZ2xvYmFsLmRlZmF1bHQuaXNSZVN0b3JlID0gMSksXG4gICAgICAgICAgICAgICAgY2MuZ2FtZS5yZXN0YXJ0KCkpO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0TG9jYWxEYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG51bGwgPT0gdGhpcy5sb2NhbERhdGEgJiYgKHRoaXMubG9jYWxEYXRhID0gX2lkeC5wbGF0Zm9ybS5nZXRTdG9yYWdlKFwibG9jYWxEYXRhXCIpIHx8IHt9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxEYXRhO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0TG9jYWxEYXRhQnlLZXkgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBudWxsID09IHRoaXMubG9jYWxEYXRhID8gbnVsbCA6IHRoaXMubG9jYWxEYXRhW3RdO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCBcImZha2VVSURcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIDEwMDA1ICsgMiAqIHRoaXMuYmFzaWMudWlkO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgIH0pO1xuICAgIHQucHJvdG90eXBlLnNldFVzZXJJZCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdGhpcy5iYXNpYy51c2VySWQgPSB0O1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0VXNlcklkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2ljLnVzZXJJZDtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldFVpZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNpYy51aWQ7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5zZXROYW1lID0gZnVuY3Rpb24odCkge1xuICAgICAgICB0aGlzLmJhc2ljLm5hbWUgPSB0O1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0TmFtZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNpYy5uYW1lO1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuc2V0SGVhZEltZyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdGhpcy5iYXNpYy5oZWFkSW1nID0gdDtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldEhlYWRJbWcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzaWMuaGVhZEltZztcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnNldElzQXV0aCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdGhpcy5iYXNpYy5pc0F1dGggPSB0O1xuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0SXNBdXRoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJhc2ljLmlzQXV0aDtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldElzTmV3VXNlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXNpYy5pc05ldztcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLnN5bmNMYXVuY2hPcHRpb24gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICgodGhpcy5sYXVuY2hPcHRpb24ucXVlcnkgPSB7fSksXG4gICAgICAgICAgICAgICAgKHRoaXMubGF1bmNoT3B0aW9uID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmxhdW5jaE9wdGlvbiksIHQpKSxcbiAgICAgICAgICAgICAgICBudWxsID09IHRoaXMuZ2V0TG9jYWxEYXRhQnlLZXkoXCJyZWdpc3Rlcl9kYXRlXCIpKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHZhciBlID0gdGhpcy5nZXRMYXVuY2hQYXJhbShcImFkX3R5cGVcIiwgXCJcIik7XG4gICAgICAgICAgICBpZiAoXCJcIiAhPT0gZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0TG9jYWxEYXRhKHsgYWRfdHlwZTogZSB9KTtcbiAgICAgICAgICAgICAgICB2YXIgbyA9IHRoaXMuZ2V0TGF1bmNoUGFyYW0oXCJhZGRpY3RfdHlwZVwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICBcIlwiICE9PSBvICYmIHRoaXMuc2V0TG9jYWxEYXRhKHsgYWRkaWN0X3R5cGU6IG8gfSk7XG4gICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLmdldExhdW5jaFBhcmFtKFwiY2xpY2tpZFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICBcIlwiICE9PSBuICYmIHRoaXMuc2V0TG9jYWxEYXRhKHsgY2xpY2tpZDogbiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgdC5wcm90b3R5cGUuZ2V0TGF1bmNoUGFyYW0gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChudWxsID09IHRoaXMubGF1bmNoT3B0aW9uKSByZXR1cm4gZTtcbiAgICAgICAgdmFyIG8gPSB0aGlzLmxhdW5jaE9wdGlvblt0XTtcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gbyAmJiBudWxsICE9IHRoaXMubGF1bmNoT3B0aW9uLnF1ZXJ5ICYmIG51bGwgIT0gdGhpcy5sYXVuY2hPcHRpb24ucXVlcnlbdF0gP1xuICAgICAgICAgICAgKG8gPSB0aGlzLmxhdW5jaE9wdGlvbi5xdWVyeVt0XSkgOlxuICAgICAgICAgICAgZTtcbiAgICB9O1xuICAgIHQucHJvdG90eXBlLmdldExhdW5jaE9wdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sYXVuY2hPcHRpb247XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5kZWxheUZsdXNoID0gZnVuY3Rpb24odCwgZSwgbykge1xuICAgICAgICB2b2lkIDAgPT09IG8gJiYgKG8gPSAwKTtcbiAgICAgICAgdmFyIG4gPSB0aGlzO1xuICAgICAgICB2YXIgaSA9IHRoaXMuZmx1c2hUaW1lb3V0S2V5c1tlXTtcbiAgICAgICAgaVxuICAgICAgICAgICAgP1xuICAgICAgICAgICAgMCA9PT0gbyAmJiAoY2xlYXJUaW1lb3V0KGkpLCAodGhpcy5mbHVzaFRpbWVvdXRLZXlzW2VdID0gbnVsbCksIF9pZHgucGxhdGZvcm0uc2V0U3RvcmFnZShlLCB0KSkgOlxuICAgICAgICAgICAgKHRoaXMuZmx1c2hUaW1lb3V0S2V5c1tlXSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgbi5mbHVzaFRpbWVvdXRLZXlzW2VdID0gbnVsbDtcbiAgICAgICAgICAgICAgICBfaWR4LnBsYXRmb3JtLnNldFN0b3JhZ2UoZSwgdCk7XG4gICAgICAgICAgICB9LCAxZTMgKiBvKSk7XG4gICAgfTtcbiAgICB0LnByb3RvdHlwZS5zeW5jTG9naW5EYXRhID0gZnVuY3Rpb24odCkge1xuICAgICAgICB2b2lkIDAgPT09IHQgJiYgKHQgPSB7fSk7XG4gICAgICAgIHZhciBlID0gdGhpcy5iYXNpYztcbiAgICAgICAgZS5uYW1lID0gdC5uaWNrbmFtZTtcbiAgICAgICAgZS5oZWFkSW1nID0gdC5hdmF0YXI7XG4gICAgICAgIGUudWlkID0gdC5nYW1lX3VpZDtcbiAgICAgICAgZS5vcGVuSWQgPSB0Lm9wZW5pZDtcbiAgICAgICAgZS5zZXNzaW9uS2V5ID0gdC5zZXNzaW9uX2tleTtcbiAgICAgICAgZS5hbm9ueW1vdXNfb3BlbmlkID0gdC5hbm9ueW1vdXNfb3BlbmlkO1xuICAgICAgICBlLmlzTmV3ID0gdC5pc19uZXdfdXNlcjtcbiAgICAgICAgX2V2dHMuZGVmYXVsdC5vcEUuZW1pdCh7IGFjdGlvbjogX2V2dHMuZGVmYXVsdC5VUERfVE9QX0hFQURJTkZPIH0pO1xuICAgICAgICB2YXIgbyA9ICF0LmlzX3JlZ2lzdGVyO1xuICAgICAgICB2YXIgbiA9IG51bGwgPT0gX2lkeC5wbGF0Zm9ybS5nZXRTdG9yYWdlKFwibG9jYWxEYXRhXCIpO1xuICAgICAgICBfcENvbnN0LlNES0NvbmZpZy5jb21RdWVyeSA9IFwiZnJvbV9nYW1lX3VpZD1cIiArIHQuZ2FtZV91aWQgKyBcIiZzaGFyZV90aW1lPVwiO1xuICAgICAgICByZXR1cm4gW2ZhbHNlLCBuXTtcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKTtcbmV4cG9ydHMuZGVmYXVsdCA9IGc7Il19