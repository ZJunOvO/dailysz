
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_flyAni.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '32b780K1TRFS49kf6zFOjY+', 'ui_flyAni');
// scripts/ui_flyAni.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _mySafeArea = require("mySafeArea");

var _res = require("res");

var _vb = require("vb");

var _pInfo = require("pInfo");

var _baseUI = require("baseUI");

var p = cc._decorator;
var d = p.ccclass;
var h = p.property;

var f = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.aniParent = null;
    e.flyPre = null;
    e.coinNode = null;
    e.coinLb = null;
    e.posArrsX = [[0], [0], [-75, 75], [-150, 0, 150], [-225, -75, 75, 225], [-300, -150, 0, 150, 300], [-150, 0, 150, -150, 0, 150], [-150, 0, 150, -225, -75, 75, 225], [-225, -75, 75, 225, -225, -75, 75, 225], [-150, 0, 150, -150, 0, 150, -150, 0, 150], [-150, 0, 150, -225, -75, 75, 225, -150, 0, 150]];
    e.posArrsY = [[0], [0], [0, 0], [0, 0, 0], [0, 0, 0, 0], [0, 0, 0, 0, 0], [90, 90, 90, -90, -90, -90], [90, 90, 90, -90, -90, -90, -90], [90, 90, 90, 90, -90, -90, -90, -90], [180, 180, 180, 0, 0, 0, -180, -180, -180], [180, 180, 180, 0, 0, 0, 0, -180, -180, -180]];
    e.nodesArr = [];
    e.itemDatas = null;
    e.hideCb = null;
    e.isShowCoin = !1;
    e.isAni = !1;
    return e;
  }

  __extends(e, t);

  e.prototype.init = function (t) {
    var e = this;
    var o = t.itemDatas;
    var n = t.hideCb;
    var i = t.showCoin;
    o && o.length || this.hide();
    o.length > 10 && (o.length = 10);
    this.hideCb = n;
    this.itemDatas = o;
    var r = this.aniParent;
    this.coinLb.string = i + "";
    this.coinNode.active = !1;
    this.coinNode.y = cc.winSize.height / 2 - 60 - _mySafeArea.getSafeAreaRect().yMin;

    for (var u = function u(t, n) {
      var a = o[t];
      r.convertToNodeSpaceAR(a.worldPos, a.worldPos);
      var u = cc.instantiate(p.flyPre);
      u.getChildByName("lbl").getComponent(cc.Label).string = "x" + a.value;
      u.active = !0;
      u.parent = r;
      u.position = a.worldPos;

      _res["default"].ins.getBundleByString("resSps").then(function (t) {
        t.load("item/" + a.itemId, cc.SpriteFrame, function (t, o) {
          !t && e.node && u && u.isValid && (u.getChildByName("spr").getComponent(cc.Sprite).spriteFrame = o);
        });
      })["catch"](function (t) {
        console.error("RTool.ins.getBundleByString('resSps')", t);
      });

      !i && 0 != i || "coin" != a.itemId || (p.coinNode.active = !0);
      p.nodesArr.push(u);
      var d = p.posArrsX[n];
      var h = p.posArrsY[n];
      var f = cc.v2(d[t], h[t]);
      var g = cc.v2((d[t] + a.worldPos.x) / 2, (Math.abs(a.worldPos.y) + 200) * a.worldPos.y / a.worldPos.y);
      var y = cc.v3(0, -cc.winSize.height / 2);
      var m = cc.v2(d[t] / 2, 500);

      switch (a.itemId) {
        case "coin":
          y = cc.v3(-72, cc.winSize.height / 2), m = cc.v2(d[t] - 200, -500);
          break;

        case "times":
          y = cc.v3(174, cc.winSize.height / 2), m = cc.v2(d[t] + 200, -500);
      }

      cc.tween(u).delay(0.2 * t).bezierTo(0.35, a.worldPos, g, f, cc.easeInOut(1.2)).to(0.04, {
        scale: 0.9
      }).to(0.066, {
        scale: 1.1
      }).to(0.12, {
        scale: 0.95
      }).to(0.053, {
        scale: 1
      }).call(function () {
        t == n - 1 && (e.isAni = !0);
      }).delay(0.2).bezierTo(0.5, f, m, y, cc.easeInOut(0.8)).call(function () {
        _vb["default"].p(_vb.VEnum3.SHORT);

        "coin" == a.itemId && (e.coinLb.string = _pInfo["default"].ins.getCoin() + "");
        u.active = !1;
        t == n - 1 && (e.hideCb && e.hideCb(), e.hide());
      }).start();
    }, p = this, d = 0, h = o.length; d < h; d++) {
      u(d, h);
    }
  };

  e.prototype.skipAni = function () {
    var t = this;

    if (!this.isAni) {
      this.isAni = !0;

      for (var e = this.itemDatas, o = function o(_o, i) {
        var r = e[_o];
        var a = n.nodesArr[_o];
        cc.Tween.stopAllByTarget(a);
        var s = n.posArrsX[i];
        var u = n.posArrsY[i];
        var p = cc.v2(s[_o], u[_o]);
        a.position = p;
        var d = cc.v3(0, -cc.winSize.height / 2);
        var h = cc.v2(s[_o] / 2, 500);

        switch (r.itemId) {
          case "coin":
            d = cc.v3(-72, cc.winSize.height / 2), h = cc.v2(s[_o] - 200, -500);
            break;

          case "times":
            d = cc.v3(174, cc.winSize.height / 2), h = cc.v2(s[_o] + 200, -500);
        }

        n.scheduleOnce(function () {
          cc.tween(a).bezierTo(0.3, p, h, d, cc.easeInOut(0.8)).call(function () {
            _vb["default"].p(_vb.VEnum3.SHORT);

            "coin" == r.itemId && (t.coinLb.string = _pInfo["default"].ins.getCoin() + "");
            a.active = !1;
            _o == i - 1 && (t.hideCb && t.hideCb(), t.hide());
          }).start();
        }, 0.1 * _o);
      }, n = this, i = 0, r = e.length; i < r; i++) {
        o(i, r);
      }
    }
  };

  e.prototype.hideThis = function () {
    this.hide();
  };

  __decorate([h(cc.Node)], e.prototype, "aniParent", void 0);

  __decorate([h(cc.Node)], e.prototype, "flyPre", void 0);

  __decorate([h(cc.Node)], e.prototype, "coinNode", void 0);

  __decorate([h(cc.Label)], e.prototype, "coinLb", void 0);

  return __decorate([d], e);
}(_baseUI["default"]);

exports["default"] = f;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfZmx5QW5pLmpzIl0sIm5hbWVzIjpbIm4iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl9teVNhZmVBcmVhIiwicmVxdWlyZSIsIl9yZXMiLCJfdmIiLCJfcEluZm8iLCJfYmFzZVVJIiwicCIsImNjIiwiX2RlY29yYXRvciIsImQiLCJjY2NsYXNzIiwiaCIsInByb3BlcnR5IiwiZiIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJhbmlQYXJlbnQiLCJmbHlQcmUiLCJjb2luTm9kZSIsImNvaW5MYiIsInBvc0FycnNYIiwicG9zQXJyc1kiLCJub2Rlc0FyciIsIml0ZW1EYXRhcyIsImhpZGVDYiIsImlzU2hvd0NvaW4iLCJpc0FuaSIsIl9fZXh0ZW5kcyIsInByb3RvdHlwZSIsImluaXQiLCJvIiwiaSIsInNob3dDb2luIiwibGVuZ3RoIiwiaGlkZSIsInIiLCJzdHJpbmciLCJhY3RpdmUiLCJ5Iiwid2luU2l6ZSIsImhlaWdodCIsImdldFNhZmVBcmVhUmVjdCIsInlNaW4iLCJ1IiwiYSIsImNvbnZlcnRUb05vZGVTcGFjZUFSIiwid29ybGRQb3MiLCJpbnN0YW50aWF0ZSIsImdldENoaWxkQnlOYW1lIiwiZ2V0Q29tcG9uZW50IiwiTGFiZWwiLCJwYXJlbnQiLCJwb3NpdGlvbiIsImlucyIsImdldEJ1bmRsZUJ5U3RyaW5nIiwidGhlbiIsImxvYWQiLCJpdGVtSWQiLCJTcHJpdGVGcmFtZSIsIm5vZGUiLCJpc1ZhbGlkIiwiU3ByaXRlIiwic3ByaXRlRnJhbWUiLCJjb25zb2xlIiwiZXJyb3IiLCJwdXNoIiwidjIiLCJnIiwieCIsIk1hdGgiLCJhYnMiLCJ2MyIsIm0iLCJ0d2VlbiIsImRlbGF5IiwiYmV6aWVyVG8iLCJlYXNlSW5PdXQiLCJ0byIsInNjYWxlIiwiY2FsbCIsIlZFbnVtMyIsIlNIT1JUIiwiZ2V0Q29pbiIsInN0YXJ0Iiwic2tpcEFuaSIsIlR3ZWVuIiwic3RvcEFsbEJ5VGFyZ2V0IiwicyIsInNjaGVkdWxlT25jZSIsImhpZGVUaGlzIiwiX19kZWNvcmF0ZSIsIk5vZGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBSjtBQUNBQyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0VBQUNDLEtBQUssRUFBRSxDQUFDO0FBQVQsQ0FBN0M7O0FBQ0EsSUFBSUMsV0FBVyxHQUFHQyxPQUFPLENBQUMsWUFBRCxDQUF6Qjs7QUFDQSxJQUFJQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxLQUFELENBQWxCOztBQUNBLElBQUlFLEdBQUcsR0FBR0YsT0FBTyxDQUFDLElBQUQsQ0FBakI7O0FBQ0EsSUFBSUcsTUFBTSxHQUFHSCxPQUFPLENBQUMsT0FBRCxDQUFwQjs7QUFDQSxJQUFJSSxPQUFPLEdBQUdKLE9BQU8sQ0FBQyxRQUFELENBQXJCOztBQUNBLElBQUlLLENBQUMsR0FBR0MsRUFBRSxDQUFDQyxVQUFYO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHSCxDQUFDLENBQUNJLE9BQVY7QUFDQSxJQUFJQyxDQUFDLEdBQUdMLENBQUMsQ0FBQ00sUUFBVjs7QUFDQSxJQUFJQyxDQUFDLEdBQUksVUFBVUMsQ0FBVixFQUFhO0VBQ2xCLFNBQVNDLENBQVQsR0FBYTtJQUNULElBQUlBLENBQUMsR0FBSSxTQUFTRCxDQUFULElBQWNBLENBQUMsQ0FBQ0UsS0FBRixDQUFRLElBQVIsRUFBY0MsU0FBZCxDQUFmLElBQTRDLElBQXBEO0lBQ0FGLENBQUMsQ0FBQ0csU0FBRixHQUFjLElBQWQ7SUFDQUgsQ0FBQyxDQUFDSSxNQUFGLEdBQVcsSUFBWDtJQUNBSixDQUFDLENBQUNLLFFBQUYsR0FBYSxJQUFiO0lBQ0FMLENBQUMsQ0FBQ00sTUFBRixHQUFXLElBQVg7SUFDQU4sQ0FBQyxDQUFDTyxRQUFGLEdBQWEsQ0FDVCxDQUFDLENBQUQsQ0FEUyxFQUVULENBQUMsQ0FBRCxDQUZTLEVBR1QsQ0FBQyxDQUFDLEVBQUYsRUFB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VUFBVSxDQUFDLENBQUNqRixDQUFDLENBQUNKLEVBQUUsQ0FBQ3NGLElBQUosQ0FBRixDQUFELEVBQWU5RSxDQUFDLENBQUNlLFNBQWpCLEVBQTRCLFdBQTVCLEVBQXlDLEtBQUssQ0FBOUMsQ0FBVjs7RUFDQThELFVBQVUsQ0FBQyxDQUFDakYsQ0FBQyxDQUFDSixFQUFFLENBQUNzRixJQUFKLENBQUYsQ0FBRCxFQUFlOUUsQ0FBQyxDQUFDZSxTQUFqQixFQUE0QixRQUE1QixFQUFzQyxLQUFLLENBQTNDLENBQVY7O0VBQ0E4RCxVQUFVLENBQUMsQ0FBQ2pGLENBQUMsQ0FBQ0osRUFBRSxDQUFDc0YsSUFBSixDQUFGLENBQUQsRUFBZTlFLENBQUMsQ0FBQ2UsU0FBakIsRUFBNEIsVUFBNUIsRUFBd0MsS0FBSyxDQUE3QyxDQUFWOztFQUNBOEQsVUFBVSxDQUFDLENBQUNqRixDQUFDLENBQUNKLEVBQUUsQ0FBQzZDLEtBQUosQ0FBRixDQUFELEVBQWdCckMsQ0FBQyxDQUFDZSxTQUFsQixFQUE2QixRQUE3QixFQUF1QyxLQUFLLENBQTVDLENBQVY7O0VBQ0EsT0FBTzhELFVBQVUsQ0FBQyxDQUFDbkYsQ0FBRCxDQUFELEVBQU1NLENBQU4sQ0FBakI7QUFDSCxDQS9LTyxDQStLTFYsT0FBTyxXQS9LRixDQUFSOztBQWdMQVAsT0FBTyxXQUFQLEdBQWtCZSxDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG47XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHt2YWx1ZTogITB9KTtcbnZhciBfbXlTYWZlQXJlYSA9IHJlcXVpcmUoXCJteVNhZmVBcmVhXCIpO1xudmFyIF9yZXMgPSByZXF1aXJlKFwicmVzXCIpO1xudmFyIF92YiA9IHJlcXVpcmUoXCJ2YlwiKTtcbnZhciBfcEluZm8gPSByZXF1aXJlKFwicEluZm9cIik7XG52YXIgX2Jhc2VVSSA9IHJlcXVpcmUoXCJiYXNlVUlcIik7XG52YXIgcCA9IGNjLl9kZWNvcmF0b3I7XG52YXIgZCA9IHAuY2NjbGFzcztcbnZhciBoID0gcC5wcm9wZXJ0eTtcbnZhciBmID0gKGZ1bmN0aW9uICh0KSB7XG4gICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgdmFyIGUgPSAobnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XG4gICAgICAgIGUuYW5pUGFyZW50ID0gbnVsbDtcbiAgICAgICAgZS5mbHlQcmUgPSBudWxsO1xuICAgICAgICBlLmNvaW5Ob2RlID0gbnVsbDtcbiAgICAgICAgZS5jb2luTGIgPSBudWxsO1xuICAgICAgICBlLnBvc0FycnNYID0gW1xuICAgICAgICAgICAgWzBdLFxuICAgICAgICAgICAgWzBdLFxuICAgICAgICAgICAgWy03NSwgNzVdLFxuICAgICAgICAgICAgWy0xNTAsIDAsIDE1MF0sXG4gICAgICAgICAgICBbLTIyNSwgLTc1LCA3NSwgMjI1XSxcbiAgICAgICAgICAgIFstMzAwLCAtMTUwLCAwLCAxNTAsIDMwMF0sXG4gICAgICAgICAgICBbLTE1MCwgMCwgMTUwLCAtMTUwLCAwLCAxNTBdLFxuICAgICAgICAgICAgWy0xNTAsIDAsIDE1MCwgLTIyNSwgLTc1LCA3NSwgMjI1XSxcbiAgICAgICAgICAgIFstMjI1LCAtNzUsIDc1LCAyMjUsIC0yMjUsIC03NSwgNzUsIDIyNV0sXG4gICAgICAgICAgICBbLTE1MCwgMCwgMTUwLCAtMTUwLCAwLCAxNTAsIC0xNTAsIDAsIDE1MF0sXG4gICAgICAgICAgICBbLTE1MCwgMCwgMTUwLCAtMjI1LCAtNzUsIDc1LCAyMjUsIC0xNTAsIDAsIDE1MF1cbiAgICAgICAgXTtcbiAgICAgICAgZS5wb3NBcnJzWSA9IFtcbiAgICAgICAgICAgIFswXSxcbiAgICAgICAgICAgIFswXSxcbiAgICAgICAgICAgIFswLCAwXSxcbiAgICAgICAgICAgIFswLCAwLCAwXSxcbiAgICAgICAgICAgIFswLCAwLCAwLCAwXSxcbiAgICAgICAgICAgIFswLCAwLCAwLCAwLCAwXSxcbiAgICAgICAgICAgIFs5MCwgOTAsIDkwLCAtOTAsIC05MCwgLTkwXSxcbiAgICAgICAgICAgIFs5MCwgOTAsIDkwLCAtOTAsIC05MCwgLTkwLCAtOTBdLFxuICAgICAgICAgICAgWzkwLCA5MCwgOTAsIDkwLCAtOTAsIC05MCwgLTkwLCAtOTBdLFxuICAgICAgICAgICAgWzE4MCwgMTgwLCAxODAsIDAsIDAsIDAsIC0xODAsIC0xODAsIC0xODBdLFxuICAgICAgICAgICAgWzE4MCwgMTgwLCAxODAsIDAsIDAsIDAsIDAsIC0xODAsIC0xODAsIC0xODBdXG4gICAgICAgIF07XG4gICAgICAgIGUubm9kZXNBcnIgPSBbXTtcbiAgICAgICAgZS5pdGVtRGF0YXMgPSBudWxsO1xuICAgICAgICBlLmhpZGVDYiA9IG51bGw7XG4gICAgICAgIGUuaXNTaG93Q29pbiA9ICExO1xuICAgICAgICBlLmlzQW5pID0gITE7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBfX2V4dGVuZHMoZSwgdCk7XG4gICAgZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBlID0gdGhpcztcbiAgICAgICAgdmFyIG8gPSB0Lml0ZW1EYXRhcztcbiAgICAgICAgdmFyIG4gPSB0LmhpZGVDYjtcbiAgICAgICAgdmFyIGkgPSB0LnNob3dDb2luO1xuICAgICAgICAobyAmJiBvLmxlbmd0aCkgfHwgdGhpcy5oaWRlKCk7XG4gICAgICAgIG8ubGVuZ3RoID4gMTAgJiYgKG8ubGVuZ3RoID0gMTApO1xuICAgICAgICB0aGlzLmhpZGVDYiA9IG47XG4gICAgICAgIHRoaXMuaXRlbURhdGFzID0gbztcbiAgICAgICAgdmFyIHIgPSB0aGlzLmFuaVBhcmVudDtcbiAgICAgICAgdGhpcy5jb2luTGIuc3RyaW5nID0gaSArIFwiXCI7XG4gICAgICAgIHRoaXMuY29pbk5vZGUuYWN0aXZlID0gITE7XG4gICAgICAgIHRoaXMuY29pbk5vZGUueSA9IGNjLndpblNpemUuaGVpZ2h0IC8gMiAtIDYwIC0gX215U2FmZUFyZWEuZ2V0U2FmZUFyZWFSZWN0KCkueU1pbjtcbiAgICAgICAgZm9yIChcbiAgICAgICAgICAgIHZhciB1ID0gZnVuY3Rpb24gKHQsIG4pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBvW3RdO1xuICAgICAgICAgICAgICAgICAgICByLmNvbnZlcnRUb05vZGVTcGFjZUFSKGEud29ybGRQb3MsIGEud29ybGRQb3MpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IGNjLmluc3RhbnRpYXRlKHAuZmx5UHJlKTtcbiAgICAgICAgICAgICAgICAgICAgdS5nZXRDaGlsZEJ5TmFtZShcImxibFwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IFwieFwiICsgYS52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdS5hY3RpdmUgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgdS5wYXJlbnQgPSByO1xuICAgICAgICAgICAgICAgICAgICB1LnBvc2l0aW9uID0gYS53b3JsZFBvcztcbiAgICAgICAgICAgICAgICAgICAgX3Jlcy5kZWZhdWx0Lmluc1xuICAgICAgICAgICAgICAgICAgICAgICAgLmdldEJ1bmRsZUJ5U3RyaW5nKFwicmVzU3BzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubG9hZChcIml0ZW0vXCIgKyBhLml0ZW1JZCwgY2MuU3ByaXRlRnJhbWUsIGZ1bmN0aW9uICh0LCBvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm5vZGUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUuaXNWYWxpZCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHUuZ2V0Q2hpbGRCeU5hbWUoXCJzcHJcIikuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkuc3ByaXRlRnJhbWUgPSBvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUlRvb2wuaW5zLmdldEJ1bmRsZUJ5U3RyaW5nKCdyZXNTcHMnKVwiLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAoIWkgJiYgMCAhPSBpKSB8fCBcImNvaW5cIiAhPSBhLml0ZW1JZCB8fCAocC5jb2luTm9kZS5hY3RpdmUgPSAhMCk7XG4gICAgICAgICAgICAgICAgICAgIHAubm9kZXNBcnIucHVzaCh1KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBwLnBvc0FycnNYW25dO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaCA9IHAucG9zQXJyc1lbbl07XG4gICAgICAgICAgICAgICAgICAgIHZhciBmID0gY2MudjIoZFt0XSwgaFt0XSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBnID0gY2MudjIoXG4gICAgICAgICAgICAgICAgICAgICAgICAoZFt0XSArIGEud29ybGRQb3MueCkgLyAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgKChNYXRoLmFicyhhLndvcmxkUG9zLnkpICsgMjAwKSAqIGEud29ybGRQb3MueSkgLyBhLndvcmxkUG9zLnlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBjYy52MygwLCAtY2Mud2luU2l6ZS5oZWlnaHQgLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBjYy52MihkW3RdIC8gMiwgNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChhLml0ZW1JZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNvaW5cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoeSA9IGNjLnYzKC03MiwgY2Mud2luU2l6ZS5oZWlnaHQgLyAyKSksIChtID0gY2MudjIoZFt0XSAtIDIwMCwgLTUwMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRpbWVzXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHkgPSBjYy52MygxNzQsIGNjLndpblNpemUuaGVpZ2h0IC8gMikpLCAobSA9IGNjLnYyKGRbdF0gKyAyMDAsIC01MDApKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYy50d2Vlbih1KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmRlbGF5KDAuMiAqIHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYmV6aWVyVG8oMC4zNSwgYS53b3JsZFBvcywgZywgZiwgY2MuZWFzZUluT3V0KDEuMikpXG4gICAgICAgICAgICAgICAgICAgICAgICAudG8oMC4wNCwge3NjYWxlOiAwLjl9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRvKDAuMDY2LCB7c2NhbGU6IDEuMX0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudG8oMC4xMiwge3NjYWxlOiAwLjk1fSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50bygwLjA1Mywge3NjYWxlOiAxfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYWxsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID09IG4gLSAxICYmIChlLmlzQW5pID0gITApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kZWxheSgwLjIpXG4gICAgICAgICAgICAgICAgICAgICAgICAuYmV6aWVyVG8oMC41LCBmLCBtLCB5LCBjYy5lYXNlSW5PdXQoMC44KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYWxsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdmIuZGVmYXVsdC5wKF92Yi5WRW51bTMuU0hPUlQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29pblwiID09IGEuaXRlbUlkICYmIChlLmNvaW5MYi5zdHJpbmcgPSBfcEluZm8uZGVmYXVsdC5pbnMuZ2V0Q29pbigpICsgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5hY3RpdmUgPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID09IG4gLSAxICYmIChlLmhpZGVDYiAmJiBlLmhpZGVDYigpLCBlLmhpZGUoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwID0gdGhpcyxcbiAgICAgICAgICAgICAgICBkID0gMCxcbiAgICAgICAgICAgICAgICBoID0gby5sZW5ndGg7XG4gICAgICAgICAgICBkIDwgaDtcbiAgICAgICAgICAgIGQrK1xuICAgICAgICApXG4gICAgICAgICAgICB1KGQsIGgpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuc2tpcEFuaSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuaXNBbmkpIHtcbiAgICAgICAgICAgIHRoaXMuaXNBbmkgPSAhMDtcbiAgICAgICAgICAgIGZvciAoXG4gICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLml0ZW1EYXRhcyxcbiAgICAgICAgICAgICAgICAgICAgbyA9IGZ1bmN0aW9uIChvLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGVbb107XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IG4ubm9kZXNBcnJbb107XG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5Ud2Vlbi5zdG9wQWxsQnlUYXJnZXQoYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG4ucG9zQXJyc1hbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IG4ucG9zQXJyc1lbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IGNjLnYyKHNbb10sIHVbb10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYS5wb3NpdGlvbiA9IHA7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGNjLnYzKDAsIC1jYy53aW5TaXplLmhlaWdodCAvIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBjYy52MihzW29dIC8gMiwgNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoci5pdGVtSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY29pblwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZCA9IGNjLnYzKC03MiwgY2Mud2luU2l6ZS5oZWlnaHQgLyAyKSksIChoID0gY2MudjIoc1tvXSAtIDIwMCwgLTUwMCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwidGltZXNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGQgPSBjYy52MygxNzQsIGNjLndpblNpemUuaGVpZ2h0IC8gMikpLCAoaCA9IGNjLnYyKHNbb10gKyAyMDAsIC01MDApKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG4uc2NoZWR1bGVPbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy50d2VlbihhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYmV6aWVyVG8oMC4zLCBwLCBoLCBkLCBjYy5lYXNlSW5PdXQoMC44KSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3ZiLmRlZmF1bHQucChfdmIuVkVudW0zLlNIT1JUKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29pblwiID09IHIuaXRlbUlkICYmICh0LmNvaW5MYi5zdHJpbmcgPSBfcEluZm8uZGVmYXVsdC5pbnMuZ2V0Q29pbigpICsgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLmFjdGl2ZSA9ICExO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9PSBpIC0gMSAmJiAodC5oaWRlQ2IgJiYgdC5oaWRlQ2IoKSwgdC5oaWRlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3RhcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDAuMSAqIG8pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBuID0gdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICAgICAgICAgIHIgPSBlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpIDwgcjtcbiAgICAgICAgICAgICAgICBpKytcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBvKGksIHIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5oaWRlVGhpcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtoKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiYW5pUGFyZW50XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbaChjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImZseVByZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2goY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJjb2luTm9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2goY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwiY29pbkxiXCIsIHZvaWQgMCk7XG4gICAgcmV0dXJuIF9fZGVjb3JhdGUoW2RdLCBlKTtcbn0pKF9iYXNlVUkuZGVmYXVsdCk7XG5leHBvcnRzLmRlZmF1bHQgPSBmO1xuIl19