
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_getHeart.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'd77caujPdlLWI+2MbwefgBC', 'ui_getHeart');
// scripts/ui_getHeart.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _idx = require("idx");

var _cfgMgr = require("cfgMgr");

var _lang = require("lang");

var _panelMgr = require("panelMgr");

var _pInfo = require("pInfo");

var _baseUI = require("baseUI");

var d = cc._decorator;
var h = d.ccclass;
var f = d.property;

var g = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.curConsLbls = null;
    e.restLifeLbls = null;
    e.needGoldLbl = null;
    e.normalNode = null;
    e.adNode = null;
    e.needGold = 300;
    e.eventFunc = null;
    return e;
  }

  __extends(e, t);

  e.prototype.onLoad = function () {
    t.prototype.onLoad.call(this);
    var e = this.needGold;

    try {
      e = this.needGold = _cfgMgr["default"].serverCfg.qw_line_rules.rules.relive.set.coin.val || 300;
    } catch (o) {}

    this.needGoldLbl.string = e + "";
  };

  e.prototype.init = function (t) {
    var e = t.time;
    var o = t.cb;
    var n = t.closeCb;
    var i = t.gType;
    (this.normalNode.active = i != _pInfo.gameType.race && i != _pInfo.gameType.challenge) || (this.restLifeLbls.node.y = 30);
    this.curConsLbls.string = "当前连胜：" + _pInfo["default"].ins.getConsWinTimes();
    e < 0 ? this.restLifeLbls.node.active = !1 : this.restLifeLbls.string = "剩余复活次数：" + e;
    this.getCb = o;
    this.closeCb = n;
    this.gType = i;
    this.initAdDotEvent(i);
  };

  e.prototype.initAdDotEvent = function (t) {
    switch (t) {
      case _pInfo.gameType.challenge:
        this.adNode.adDotData = "每日挑战-复活";
        break;

      case _pInfo.gameType.normal:
        this.adNode.adDotData = "主线-复活";
        break;

      case _pInfo.gameType.practice:
        this.adNode.adDotData = "练习模式-复活";
        break;

      case _pInfo.gameType.race:
        this.adNode.adDotData = "趣味赛-复活";
    }
  };

  e.prototype.onGet = function () {
    var t = _pInfo["default"].ins;
    t.getCoin() < this.needGold ? _panelMgr["default"].ins.open("ui/ui_getRes", {
      itemId: "coin",
      gType: this.gType,
      useTo: _lang.getCoinFor.Rebirth
    }) : (t.addCoin(-this.needGold), this.hideThis(), this.getCb(), this.eventDot("使用元宝"));
  };

  e.prototype.onAdGet = function () {
    this.hideThis();
    this.getCb();
    this.eventDot("看广告");
  };

  e.prototype.eventDot = function (t) {
    var e = "使用元宝" == t;
    this.gType == _pInfo.gameType.normal ? (e || !_pInfo["default"].ins.isMaxAdCount()) && _idx.platform.reportEvent(_idx.ERepEvt.dungeonReview, {
      way: t
    }) : this.gType == _pInfo.gameType.race && (e || !_pInfo["default"].ins.isMaxAdCount()) && _idx.platform.reportEvent(_idx.ERepEvt.raceReview, {
      way: t
    });
  };

  e.prototype.onClose = function () {
    this.hideThis();
    this.closeCb();
  };

  e.prototype.hideThis = function () {
    this.hide();
  };

  __decorate([f(cc.Label)], e.prototype, "curConsLbls", void 0);

  __decorate([f(cc.Label)], e.prototype, "restLifeLbls", void 0);

  __decorate([f(cc.Label)], e.prototype, "needGoldLbl", void 0);

  __decorate([f(cc.Node)], e.prototype, "normalNode", void 0);

  __decorate([f(cc.Node)], e.prototype, "adNode", void 0);

  return __decorate([h], e);
}(_baseUI["default"]);

exports["default"] = g;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfZ2V0SGVhcnQuanMiXSwibmFtZXMiOlsibiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiX2lkeCIsInJlcXVpcmUiLCJfY2ZnTWdyIiwiX2xhbmciLCJfcGFuZWxNZ3IiLCJfcEluZm8iLCJfYmFzZVVJIiwiZCIsImNjIiwiX2RlY29yYXRvciIsImgiLCJjY2NsYXNzIiwiZiIsInByb3BlcnR5IiwiZyIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJjdXJDb25zTGJscyIsInJlc3RMaWZlTGJscyIsIm5lZWRHb2xkTGJsIiwibm9ybWFsTm9kZSIsImFkTm9kZSIsIm5lZWRHb2xkIiwiZXZlbnRGdW5jIiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwib25Mb2FkIiwiY2FsbCIsInNlcnZlckNmZyIsInF3X2xpbmVfcnVsZXMiLCJydWxlcyIsInJlbGl2ZSIsInNldCIsImNvaW4iLCJ2YWwiLCJvIiwic3RyaW5nIiwiaW5pdCIsInRpbWUiLCJjYiIsImNsb3NlQ2IiLCJpIiwiZ1R5cGUiLCJhY3RpdmUiLCJnYW1lVHlwZSIsInJhY2UiLCJjaGFsbGVuZ2UiLCJub2RlIiwieSIsImlucyIsImdldENvbnNXaW5UaW1lcyIsImdldENiIiwiaW5pdEFkRG90RXZlbnQiLCJhZERvdERhdGEiLCJub3JtYWwiLCJwcmFjdGljZSIsIm9uR2V0IiwiZ2V0Q29pbiIsIm9wZW4iLCJpdGVtSWQiLCJ1c2VUbyIsImdldENvaW5Gb3IiLCJSZWJpcnRoIiwiYWRkQ29pbiIsImhpZGVUaGlzIiwiZXZlbnREb3QiLCJvbkFkR2V0IiwiaXNNYXhBZENvdW50IiwicGxhdGZvcm0iLCJyZXBvcnRFdmVudCIsIkVSZXBFdnQiLCJkdW5nZW9uUmV2aWV3Iiwid2F5IiwicmFjZVJldmlldyIsIm9uQ2xvc2UiLCJoaWRlIiwiX19kZWNvcmF0ZSIsIkxhYmVsIiwiTm9kZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7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TyxXQXZGRixDQUFSOztBQXdGQVIsT0FBTyxXQUFQLEdBQWtCZ0IsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBuO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7dmFsdWU6ICEwfSk7XG52YXIgX2lkeCA9IHJlcXVpcmUoXCJpZHhcIik7XG52YXIgX2NmZ01nciA9IHJlcXVpcmUoXCJjZmdNZ3JcIik7XG52YXIgX2xhbmcgPSByZXF1aXJlKFwibGFuZ1wiKTtcbnZhciBfcGFuZWxNZ3IgPSByZXF1aXJlKFwicGFuZWxNZ3JcIik7XG52YXIgX3BJbmZvID0gcmVxdWlyZShcInBJbmZvXCIpO1xudmFyIF9iYXNlVUkgPSByZXF1aXJlKFwiYmFzZVVJXCIpO1xudmFyIGQgPSBjYy5fZGVjb3JhdG9yO1xudmFyIGggPSBkLmNjY2xhc3M7XG52YXIgZiA9IGQucHJvcGVydHk7XG52YXIgZyA9IChmdW5jdGlvbiAodCkge1xuICAgIGZ1bmN0aW9uIGUoKSB7XG4gICAgICAgIHZhciBlID0gKG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzO1xuICAgICAgICBlLmN1ckNvbnNMYmxzID0gbnVsbDtcbiAgICAgICAgZS5yZXN0TGlmZUxibHMgPSBudWxsO1xuICAgICAgICBlLm5lZWRHb2xkTGJsID0gbnVsbDtcbiAgICAgICAgZS5ub3JtYWxOb2RlID0gbnVsbDtcbiAgICAgICAgZS5hZE5vZGUgPSBudWxsO1xuICAgICAgICBlLm5lZWRHb2xkID0gMzAwO1xuICAgICAgICBlLmV2ZW50RnVuYyA9IG51bGw7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBfX2V4dGVuZHMoZSwgdCk7XG4gICAgZS5wcm90b3R5cGUub25Mb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0LnByb3RvdHlwZS5vbkxvYWQuY2FsbCh0aGlzKTtcbiAgICAgICAgdmFyIGUgPSB0aGlzLm5lZWRHb2xkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZSA9IHRoaXMubmVlZEdvbGQgPSBfY2ZnTWdyLmRlZmF1bHQuc2VydmVyQ2ZnLnF3X2xpbmVfcnVsZXMucnVsZXMucmVsaXZlLnNldC5jb2luLnZhbCB8fCAzMDA7XG4gICAgICAgIH0gY2F0Y2ggKG8pIHt9XG4gICAgICAgIHRoaXMubmVlZEdvbGRMYmwuc3RyaW5nID0gZSArIFwiXCI7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgdmFyIGUgPSB0LnRpbWU7XG4gICAgICAgIHZhciBvID0gdC5jYjtcbiAgICAgICAgdmFyIG4gPSB0LmNsb3NlQ2I7XG4gICAgICAgIHZhciBpID0gdC5nVHlwZTtcbiAgICAgICAgKHRoaXMubm9ybWFsTm9kZS5hY3RpdmUgPSBpICE9IF9wSW5mby5nYW1lVHlwZS5yYWNlICYmIGkgIT0gX3BJbmZvLmdhbWVUeXBlLmNoYWxsZW5nZSkgfHxcbiAgICAgICAgICAgICh0aGlzLnJlc3RMaWZlTGJscy5ub2RlLnkgPSAzMCk7XG4gICAgICAgIHRoaXMuY3VyQ29uc0xibHMuc3RyaW5nID0gXCLlvZPliY3ov57og5zvvJpcIiArIF9wSW5mby5kZWZhdWx0Lmlucy5nZXRDb25zV2luVGltZXMoKTtcbiAgICAgICAgZSA8IDAgPyAodGhpcy5yZXN0TGlmZUxibHMubm9kZS5hY3RpdmUgPSAhMSkgOiAodGhpcy5yZXN0TGlmZUxibHMuc3RyaW5nID0gXCLliankvZnlpI3mtLvmrKHmlbDvvJpcIiArIGUpO1xuICAgICAgICB0aGlzLmdldENiID0gbztcbiAgICAgICAgdGhpcy5jbG9zZUNiID0gbjtcbiAgICAgICAgdGhpcy5nVHlwZSA9IGk7XG4gICAgICAgIHRoaXMuaW5pdEFkRG90RXZlbnQoaSk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5pbml0QWREb3RFdmVudCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgY2FzZSBfcEluZm8uZ2FtZVR5cGUuY2hhbGxlbmdlOlxuICAgICAgICAgICAgICAgIHRoaXMuYWROb2RlLmFkRG90RGF0YSA9IFwi5q+P5pel5oyR5oiYLeWkjea0u1wiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBfcEluZm8uZ2FtZVR5cGUubm9ybWFsOlxuICAgICAgICAgICAgICAgIHRoaXMuYWROb2RlLmFkRG90RGF0YSA9IFwi5Li757q/LeWkjea0u1wiO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBfcEluZm8uZ2FtZVR5cGUucHJhY3RpY2U6XG4gICAgICAgICAgICAgICAgdGhpcy5hZE5vZGUuYWREb3REYXRhID0gXCLnu4PkuaDmqKHlvI8t5aSN5rS7XCI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIF9wSW5mby5nYW1lVHlwZS5yYWNlOlxuICAgICAgICAgICAgICAgIHRoaXMuYWROb2RlLmFkRG90RGF0YSA9IFwi6Laj5ZGz6LWbLeWkjea0u1wiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbkdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSBfcEluZm8uZGVmYXVsdC5pbnM7XG4gICAgICAgIHQuZ2V0Q29pbigpIDwgdGhpcy5uZWVkR29sZFxuICAgICAgICAgICAgPyBfcGFuZWxNZ3IuZGVmYXVsdC5pbnMub3BlbihcInVpL3VpX2dldFJlc1wiLCB7XG4gICAgICAgICAgICAgICAgICBpdGVtSWQ6IFwiY29pblwiLFxuICAgICAgICAgICAgICAgICAgZ1R5cGU6IHRoaXMuZ1R5cGUsXG4gICAgICAgICAgICAgICAgICB1c2VUbzogX2xhbmcuZ2V0Q29pbkZvci5SZWJpcnRoXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICA6ICh0LmFkZENvaW4oLXRoaXMubmVlZEdvbGQpLCB0aGlzLmhpZGVUaGlzKCksIHRoaXMuZ2V0Q2IoKSwgdGhpcy5ldmVudERvdChcIuS9v+eUqOWFg+WunVwiKSk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbkFkR2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhpZGVUaGlzKCk7XG4gICAgICAgIHRoaXMuZ2V0Q2IoKTtcbiAgICAgICAgdGhpcy5ldmVudERvdChcIueci+W5v+WRilwiKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLmV2ZW50RG90ID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgdmFyIGUgPSBcIuS9v+eUqOWFg+WunVwiID09IHQ7XG4gICAgICAgIHRoaXMuZ1R5cGUgPT0gX3BJbmZvLmdhbWVUeXBlLm5vcm1hbFxuICAgICAgICAgICAgPyAoZSB8fCAhX3BJbmZvLmRlZmF1bHQuaW5zLmlzTWF4QWRDb3VudCgpKSAmJlxuICAgICAgICAgICAgICBfaWR4LnBsYXRmb3JtLnJlcG9ydEV2ZW50KF9pZHguRVJlcEV2dC5kdW5nZW9uUmV2aWV3LCB7d2F5OiB0fSlcbiAgICAgICAgICAgIDogdGhpcy5nVHlwZSA9PSBfcEluZm8uZ2FtZVR5cGUucmFjZSAmJlxuICAgICAgICAgICAgICAoZSB8fCAhX3BJbmZvLmRlZmF1bHQuaW5zLmlzTWF4QWRDb3VudCgpKSAmJlxuICAgICAgICAgICAgICBfaWR4LnBsYXRmb3JtLnJlcG9ydEV2ZW50KF9pZHguRVJlcEV2dC5yYWNlUmV2aWV3LCB7d2F5OiB0fSk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbkNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhpZGVUaGlzKCk7XG4gICAgICAgIHRoaXMuY2xvc2VDYigpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuaGlkZVRoaXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbZihjYy5MYWJlbCldLCBlLnByb3RvdHlwZSwgXCJjdXJDb25zTGJsc1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2YoY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwicmVzdExpZmVMYmxzXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbZihjYy5MYWJlbCldLCBlLnByb3RvdHlwZSwgXCJuZWVkR29sZExibFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2YoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJub3JtYWxOb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbZihjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImFkTm9kZVwiLCB2b2lkIDApO1xuICAgIHJldHVybiBfX2RlY29yYXRlKFtoXSwgZSk7XG59KShfYmFzZVVJLmRlZmF1bHQpO1xuZXhwb3J0cy5kZWZhdWx0ID0gZztcbiJdfQ==