
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_lvInfo.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'e1b77tK3Q9Hy5iP5k4ikNUN', 'ui_lvInfo');
// scripts/ui_lvInfo.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _global = require("global");

var _festivalMgr = require("festivalMgr");

var _levelMgr = require("levelMgr");

var _panelMgr = require("panelMgr");

var _pInfo = require("pInfo");

var _main = require("main");

var _baseUI = require("baseUI");

var h = cc._decorator;
var f = h.ccclass;
var g = h.property;

var y = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.lvLB = null;
    e.numLv = null;
    e.diffLb = null;
    e.curLB = null;
    e.costLBL = null;
    e.costLBR = null;
    e.jigsawSp = null;
    e.kuangSp = null;
    e.matArr = [];
    e.aniSpr = null;
    e.boomSpine = null;
    e.isShow = !1;
    return e;
  }

  __extends(e, t);

  e.prototype.start = function () {};

  e.prototype.init = function () {
    for (var t, e = [], o = 0; o < arguments.length; o++) {
      e[o] = arguments[o];
    }

    this.isShow = (null === (t = e[0]) || void 0 === t ? void 0 : t.isShow) || !1;
    this.kuangSp.setMaterial(0, this.matArr[0]);
    this.showLvInfo();
  };

  e.prototype.showLvInfo = function () {
    var t = this;
    var e = _pInfo["default"].ins;
    var o = _levelMgr["default"].ins;
    var n = e.getPuzzleLvl();
    var i = n - 54 * (Math.ceil(n / 54) - 1);
    this.lvLB.string = "第" + i + "关";
    var r = o.getPuzzleInfo().size;
    this.numLv.string = r + "x" + r;
    this.diffLb.string = o.getLevelDiffStr();
    this.curLB.string = e.getConsWinTimes() + "";
    this.costLBL.string = o.getLevelCost() + "/";
    this.costLBR.string = "" + e.getPower();
    var a = new cc.Color(251, 234, 168);
    this.costLBR.node.color = o.getLevelCost() > e.getPower() ? cc.Color.RED : a;

    var s = _pInfo["default"].ins.getPuzzleLvl();

    if (s % 9 == 1 && (this.isShow = !1), this.isShow) {
      var l = this.updJigsaw(s - 1);
      this.scheduleOnce(function () {
        t.showPopAni(l);
      }, 0.34);
    } else this.updJigsaw(s);
  };

  e.prototype.updJigsaw = function (t) {
    var e;
    var o = this;

    var n = (t - 1) % _levelMgr["default"].ins.getPuzzleLvlCount();

    var i = Math.ceil(n / 9) || 1;
    e = 9 == (e = n >= 9 * i ? 9 : n > 9 * i - 9 ? n % 9 : 0) ? 0 : e;

    _levelMgr["default"].ins.getJigsawIcon(i).then(function (t) {
      t && (o.jigsawSp.spriteFrame = t);
    })["catch"](function () {
      console.error("getIconErr");
    });

    this.jigsawSp.getMaterial(0).setProperty("height", e);
    return e;
  };

  e.prototype.showPopAni = function (t) {
    var e = this;

    _levelMgr["default"].ins.getPuzzleSprFrame(_pInfo["default"].ins.getPuzzleLvl() - 1).then(function (o) {
      if (e.node) {
        e.aniSpr.spriteFrame = o;
        var n = t % 3;
        var i = Math.floor(t / 3);
        var r = e.aniSpr.node;
        r.x += 40 * n;
        r.y -= 40 * i;
        r.scale = 0.1;
        cc.tween(r).to(0.02, {
          scale: 1.1
        }).to(0.06, {
          scale: 0.7
        }).to(0.1, {
          scale: 1
        }).delay(0.7).call(function () {
          e.boomSpine.node.active = !0;
          e.aniSpr.spriteFrame = null;

          var t = _pInfo["default"].ins.getPuzzleLvl();

          e.updJigsaw(t);
        }).start();
      }
    });
  };

  e.prototype.onBtnStart = function () {
    var t = _levelMgr["default"].ins.getLevelCost();

    if (_pInfo["default"].ins.getPower() < t) _panelMgr["default"].ins.open("ui/ui_getRes", {
      itemId: "times"
    });else {
      var e = this.costLBL.node.convertToWorldSpaceAR(cc.Vec3.ZERO);
      var o = _main["default"].ins;
      o && (o.blockComp.enabled = !0);
      o.usePower(-t, e);
      _global["default"].puzzlv = _pInfo["default"].ins.getPuzzleLvl() - 1;

      _festivalMgr["default"].ins.updPro(_festivalMgr.fesTaskKey.costPower, t);
    }
  };

  e.prototype.hideThis = function () {
    this.kuangSp.setMaterial(0, this.matArr[1]);
    this.hide();
  };

  __decorate([g(cc.Label)], e.prototype, "lvLB", void 0);

  __decorate([g(cc.Label)], e.prototype, "numLv", void 0);

  __decorate([g(cc.Label)], e.prototype, "diffLb", void 0);

  __decorate([g(cc.Label)], e.prototype, "curLB", void 0);

  __decorate([g(cc.Label)], e.prototype, "costLBL", void 0);

  __decorate([g(cc.Label)], e.prototype, "costLBR", void 0);

  __decorate([g(cc.Sprite)], e.prototype, "jigsawSp", void 0);

  __decorate([g(cc.Sprite)], e.prototype, "kuangSp", void 0);

  __decorate([g(cc.Material)], e.prototype, "matArr", void 0);

  __decorate([g(cc.Sprite)], e.prototype, "aniSpr", void 0);

  __decorate([g(sp.Skeleton)], e.prototype, "boomSpine", void 0);

  return __decorate([f], e);
}(_baseUI["default"]);

exports["default"] = y;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfbHZJbmZvLmpzIl0sIm5hbWVzIjpbIm4iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl9nbG9iYWwiLCJyZXF1aXJlIiwiX2Zlc3RpdmFsTWdyIiwiX2xldmVsTWdyIiwiX3BhbmVsTWdyIiwiX3BJbmZvIiwiX21haW4iLCJfYmFzZVVJIiwiaCIsImNjIiwiX2RlY29yYXRvciIsImYiLCJjY2NsYXNzIiwiZyIsInByb3BlcnR5IiwieSIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJsdkxCIiwibnVtTHYiLCJkaWZmTGIiLCJjdXJMQiIsImNvc3RMQkwiLCJjb3N0TEJSIiwiamlnc2F3U3AiLCJrdWFuZ1NwIiwibWF0QXJyIiwiYW5pU3ByIiwiYm9vbVNwaW5lIiwiaXNTaG93IiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwic3RhcnQiLCJpbml0IiwibyIsImxlbmd0aCIsInNldE1hdGVyaWFsIiwic2hvd0x2SW5mbyIsImlucyIsImdldFB1enpsZUx2bCIsImkiLCJNYXRoIiwiY2VpbCIsInN0cmluZyIsInIiLCJnZXRQdXp6bGVJbmZvIiwic2l6ZSIsImdldExldmVsRGlmZlN0ciIsImdldENvbnNXaW5UaW1lcyIsImdldExldmVsQ29zdCIsImdldFBvd2VyIiwiYSIsIkNvbG9yIiwibm9kZSIsImNvbG9yIiwiUkVEIiwicyIsImwiLCJ1cGRKaWdzYXciLCJzY2hlZHVsZU9uY2UiLCJzaG93UG9wQW5pIiwiZ2V0UHV6emxlTHZsQ291bnQiLCJnZXRKaWdzYXdJY29uIiwidGhlbiIsInNwcml0ZUZyYW1lIiwiY29uc29sZSIsImVycm9yIiwiZ2V0TWF0ZXJpYWwiLCJzZXRQcm9wZXJ0eSIsImdldFB1enpsZVNwckZyYW1lIiwiZmxvb3IiLCJ4Iiwic2NhbGUiLCJ0d2VlbiIsInRvIiwiZGVsYXkiLCJjYWxsIiwiYWN0aXZlIiwib25CdG5TdGFydCIsIm9wZW4iLCJpdGVtSWQiLCJjb252ZXJ0VG9Xb3JsZFNwYWNlQVIiLCJWZWMzIiwiWkVSTyIsImJsb2NrQ29tcCIsImVuYWJsZWQiLCJ1c2VQb3dlciIsInB1enpsdiIsInVwZFBybyIsImZlc1Rhc2tLZXkiLCJjb3N0UG93ZXIiLCJoaWRlVGhpcyIsImhpZGUiLCJfX2RlY29yYXRlIiwiTGFiZWwiLCJTcHJpdGUiLCJNYXRlcmlhbCIsInNwIiwiU2tlbGV0b24iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBSjtBQUNBQyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0VBQUNDLEtBQUssRUFBRSxDQUFDO0FBQVQsQ0FBN0M7O0FBQ0EsSUFBSUMsT0FBTyxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFyQjs7QUFDQSxJQUFJQyxZQUFZLEdBQUdELE9BQU8sQ0FBQyxhQUFELENBQTFCOztBQUNBLElBQUlFLFNBQVMsR0FBR0YsT0FBTyxDQUFDLFVBQUQsQ0FBdkI7O0FBQ0EsSUFBSUcsU0FBUyxHQUFHSCxPQUFPLENBQUMsVUFBRCxDQUF2Qjs7QUFDQSxJQUFJSSxNQUFNLEdBQUdKLE9BQU8sQ0FBQyxPQUFELENBQXBCOztBQUNBLElBQUlLLEtBQUssR0FBR0wsT0FBTyxDQUFDLE1BQUQsQ0FBbkI7O0FBQ0EsSUFBSU0sT0FBTyxHQUFHTixPQUFPLENBQUMsUUFBRCxDQUFyQjs7QUFDQSxJQUFJTyxDQUFDLEdBQUdDLEVBQUUsQ0FBQ0MsVUFBWDtBQUNBLElBQUlDLENBQUMsR0FBR0gsQ0FBQyxDQUFDSSxPQUFWO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHTCxDQUFDLENBQUNNLFFBQVY7O0FBQ0EsSUFBSUMsQ0FBQyxHQUFJLFVBQVVDLENBQVYsRUFBYTtFQUNsQixTQUFTQyxDQUFULEdBQWE7SUFDVCxJQUFJQSxDQUFDLEdBQUksU0FBU0QsQ0FBVCxJQUFjQSxDQUFDLENBQUNFLEtBQUYsQ0FBUSxJQUFSLEVBQWNDLFNBQWQsQ0FBZixJQUE0QyxJQUFwRDtJQUNB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QUMsQ0FBQ3NGLEVBQUUsQ0FBQ0MsUUFBSixDQUFGLENBQUQsRUFBbUJuRixDQUFDLENBQUNnQixTQUFyQixFQUFnQyxXQUFoQyxFQUE2QyxLQUFLLENBQWxELENBQVY7O0VBQ0EsT0FBTzhELFVBQVUsQ0FBQyxDQUFDcEYsQ0FBRCxDQUFELEVBQU1NLENBQU4sQ0FBakI7QUFDSCxDQXZITyxDQXVITFYsT0FBTyxXQXZIRixDQUFSOztBQXdIQVQsT0FBTyxXQUFQLEdBQWtCaUIsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBuO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7dmFsdWU6ICEwfSk7XG52YXIgX2dsb2JhbCA9IHJlcXVpcmUoXCJnbG9iYWxcIik7XG52YXIgX2Zlc3RpdmFsTWdyID0gcmVxdWlyZShcImZlc3RpdmFsTWdyXCIpO1xudmFyIF9sZXZlbE1nciA9IHJlcXVpcmUoXCJsZXZlbE1nclwiKTtcbnZhciBfcGFuZWxNZ3IgPSByZXF1aXJlKFwicGFuZWxNZ3JcIik7XG52YXIgX3BJbmZvID0gcmVxdWlyZShcInBJbmZvXCIpO1xudmFyIF9tYWluID0gcmVxdWlyZShcIm1haW5cIik7XG52YXIgX2Jhc2VVSSA9IHJlcXVpcmUoXCJiYXNlVUlcIik7XG52YXIgaCA9IGNjLl9kZWNvcmF0b3I7XG52YXIgZiA9IGguY2NjbGFzcztcbnZhciBnID0gaC5wcm9wZXJ0eTtcbnZhciB5ID0gKGZ1bmN0aW9uICh0KSB7XG4gICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgdmFyIGUgPSAobnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XG4gICAgICAgIGUubHZMQiA9IG51bGw7XG4gICAgICAgIGUubnVtTHYgPSBudWxsO1xuICAgICAgICBlLmRpZmZMYiA9IG51bGw7XG4gICAgICAgIGUuY3VyTEIgPSBudWxsO1xuICAgICAgICBlLmNvc3RMQkwgPSBudWxsO1xuICAgICAgICBlLmNvc3RMQlIgPSBudWxsO1xuICAgICAgICBlLmppZ3Nhd1NwID0gbnVsbDtcbiAgICAgICAgZS5rdWFuZ1NwID0gbnVsbDtcbiAgICAgICAgZS5tYXRBcnIgPSBbXTtcbiAgICAgICAgZS5hbmlTcHIgPSBudWxsO1xuICAgICAgICBlLmJvb21TcGluZSA9IG51bGw7XG4gICAgICAgIGUuaXNTaG93ID0gITE7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBfX2V4dGVuZHMoZSwgdCk7XG4gICAgZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICBlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciB0LCBlID0gW10sIG8gPSAwOyBvIDwgYXJndW1lbnRzLmxlbmd0aDsgbysrKSBlW29dID0gYXJndW1lbnRzW29dO1xuICAgICAgICB0aGlzLmlzU2hvdyA9IChudWxsID09PSAodCA9IGVbMF0pIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuaXNTaG93KSB8fCAhMTtcbiAgICAgICAgdGhpcy5rdWFuZ1NwLnNldE1hdGVyaWFsKDAsIHRoaXMubWF0QXJyWzBdKTtcbiAgICAgICAgdGhpcy5zaG93THZJbmZvKCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5zaG93THZJbmZvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIHZhciBlID0gX3BJbmZvLmRlZmF1bHQuaW5zO1xuICAgICAgICB2YXIgbyA9IF9sZXZlbE1nci5kZWZhdWx0LmlucztcbiAgICAgICAgdmFyIG4gPSBlLmdldFB1enpsZUx2bCgpO1xuICAgICAgICB2YXIgaSA9IG4gLSA1NCAqIChNYXRoLmNlaWwobiAvIDU0KSAtIDEpO1xuICAgICAgICB0aGlzLmx2TEIuc3RyaW5nID0gXCLnrKxcIiArIGkgKyBcIuWFs1wiO1xuICAgICAgICB2YXIgciA9IG8uZ2V0UHV6emxlSW5mbygpLnNpemU7XG4gICAgICAgIHRoaXMubnVtTHYuc3RyaW5nID0gciArIFwieFwiICsgcjtcbiAgICAgICAgdGhpcy5kaWZmTGIuc3RyaW5nID0gby5nZXRMZXZlbERpZmZTdHIoKTtcbiAgICAgICAgdGhpcy5jdXJMQi5zdHJpbmcgPSBlLmdldENvbnNXaW5UaW1lcygpICsgXCJcIjtcbiAgICAgICAgdGhpcy5jb3N0TEJMLnN0cmluZyA9IG8uZ2V0TGV2ZWxDb3N0KCkgKyBcIi9cIjtcbiAgICAgICAgdGhpcy5jb3N0TEJSLnN0cmluZyA9IFwiXCIgKyBlLmdldFBvd2VyKCk7XG4gICAgICAgIHZhciBhID0gbmV3IGNjLkNvbG9yKDI1MSwgMjM0LCAxNjgpO1xuICAgICAgICB0aGlzLmNvc3RMQlIubm9kZS5jb2xvciA9IG8uZ2V0TGV2ZWxDb3N0KCkgPiBlLmdldFBvd2VyKCkgPyBjYy5Db2xvci5SRUQgOiBhO1xuICAgICAgICB2YXIgcyA9IF9wSW5mby5kZWZhdWx0Lmlucy5nZXRQdXp6bGVMdmwoKTtcbiAgICAgICAgaWYgKChzICUgOSA9PSAxICYmICh0aGlzLmlzU2hvdyA9ICExKSwgdGhpcy5pc1Nob3cpKSB7XG4gICAgICAgICAgICB2YXIgbCA9IHRoaXMudXBkSmlnc2F3KHMgLSAxKTtcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0LnNob3dQb3BBbmkobCk7XG4gICAgICAgICAgICB9LCAwLjM0KTtcbiAgICAgICAgfSBlbHNlIHRoaXMudXBkSmlnc2F3KHMpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUudXBkSmlnc2F3ID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHZhciBvID0gdGhpcztcbiAgICAgICAgdmFyIG4gPSAodCAtIDEpICUgX2xldmVsTWdyLmRlZmF1bHQuaW5zLmdldFB1enpsZUx2bENvdW50KCk7XG4gICAgICAgIHZhciBpID0gTWF0aC5jZWlsKG4gLyA5KSB8fCAxO1xuICAgICAgICBlID0gOSA9PSAoZSA9IG4gPj0gOSAqIGkgPyA5IDogbiA+IDkgKiBpIC0gOSA/IG4gJSA5IDogMCkgPyAwIDogZTtcbiAgICAgICAgX2xldmVsTWdyLmRlZmF1bHQuaW5zXG4gICAgICAgICAgICAuZ2V0Smlnc2F3SWNvbihpKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB0ICYmIChvLmppZ3Nhd1NwLnNwcml0ZUZyYW1lID0gdCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiZ2V0SWNvbkVyclwiKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLmppZ3Nhd1NwLmdldE1hdGVyaWFsKDApLnNldFByb3BlcnR5KFwiaGVpZ2h0XCIsIGUpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLnNob3dQb3BBbmkgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICAgIF9sZXZlbE1nci5kZWZhdWx0Lmlucy5nZXRQdXp6bGVTcHJGcmFtZShfcEluZm8uZGVmYXVsdC5pbnMuZ2V0UHV6emxlTHZsKCkgLSAxKS50aGVuKGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICBpZiAoZS5ub2RlKSB7XG4gICAgICAgICAgICAgICAgZS5hbmlTcHIuc3ByaXRlRnJhbWUgPSBvO1xuICAgICAgICAgICAgICAgIHZhciBuID0gdCAlIDM7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSBNYXRoLmZsb29yKHQgLyAzKTtcbiAgICAgICAgICAgICAgICB2YXIgciA9IGUuYW5pU3ByLm5vZGU7XG4gICAgICAgICAgICAgICAgci54ICs9IDQwICogbjtcbiAgICAgICAgICAgICAgICByLnkgLT0gNDAgKiBpO1xuICAgICAgICAgICAgICAgIHIuc2NhbGUgPSAwLjE7XG4gICAgICAgICAgICAgICAgY2MudHdlZW4ocilcbiAgICAgICAgICAgICAgICAgICAgLnRvKDAuMDIsIHtzY2FsZTogMS4xfSlcbiAgICAgICAgICAgICAgICAgICAgLnRvKDAuMDYsIHtzY2FsZTogMC43fSlcbiAgICAgICAgICAgICAgICAgICAgLnRvKDAuMSwge3NjYWxlOiAxfSlcbiAgICAgICAgICAgICAgICAgICAgLmRlbGF5KDAuNylcbiAgICAgICAgICAgICAgICAgICAgLmNhbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5ib29tU3BpbmUubm9kZS5hY3RpdmUgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuYW5pU3ByLnNwcml0ZUZyYW1lID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gX3BJbmZvLmRlZmF1bHQuaW5zLmdldFB1enpsZUx2bCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS51cGRKaWdzYXcodCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5zdGFydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uQnRuU3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ID0gX2xldmVsTWdyLmRlZmF1bHQuaW5zLmdldExldmVsQ29zdCgpO1xuICAgICAgICBpZiAoX3BJbmZvLmRlZmF1bHQuaW5zLmdldFBvd2VyKCkgPCB0KSBfcGFuZWxNZ3IuZGVmYXVsdC5pbnMub3BlbihcInVpL3VpX2dldFJlc1wiLCB7aXRlbUlkOiBcInRpbWVzXCJ9KTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgZSA9IHRoaXMuY29zdExCTC5ub2RlLmNvbnZlcnRUb1dvcmxkU3BhY2VBUihjYy5WZWMzLlpFUk8pO1xuICAgICAgICAgICAgdmFyIG8gPSBfbWFpbi5kZWZhdWx0LmlucztcbiAgICAgICAgICAgIG8gJiYgKG8uYmxvY2tDb21wLmVuYWJsZWQgPSAhMCk7XG4gICAgICAgICAgICBvLnVzZVBvd2VyKC10LCBlKTtcbiAgICAgICAgICAgIF9nbG9iYWwuZGVmYXVsdC5wdXp6bHYgPSBfcEluZm8uZGVmYXVsdC5pbnMuZ2V0UHV6emxlTHZsKCkgLSAxO1xuICAgICAgICAgICAgX2Zlc3RpdmFsTWdyLmRlZmF1bHQuaW5zLnVwZFBybyhfZmVzdGl2YWxNZ3IuZmVzVGFza0tleS5jb3N0UG93ZXIsIHQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5oaWRlVGhpcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5rdWFuZ1NwLnNldE1hdGVyaWFsKDAsIHRoaXMubWF0QXJyWzFdKTtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcImx2TEJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcIm51bUx2XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbZyhjYy5MYWJlbCldLCBlLnByb3RvdHlwZSwgXCJkaWZmTGJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcImN1ckxCXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbZyhjYy5MYWJlbCldLCBlLnByb3RvdHlwZSwgXCJjb3N0TEJMXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbZyhjYy5MYWJlbCldLCBlLnByb3RvdHlwZSwgXCJjb3N0TEJSXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbZyhjYy5TcHJpdGUpXSwgZS5wcm90b3R5cGUsIFwiamlnc2F3U3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLlNwcml0ZSldLCBlLnByb3RvdHlwZSwgXCJrdWFuZ1NwXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbZyhjYy5NYXRlcmlhbCldLCBlLnByb3RvdHlwZSwgXCJtYXRBcnJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLlNwcml0ZSldLCBlLnByb3RvdHlwZSwgXCJhbmlTcHJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKHNwLlNrZWxldG9uKV0sIGUucHJvdG90eXBlLCBcImJvb21TcGluZVwiLCB2b2lkIDApO1xuICAgIHJldHVybiBfX2RlY29yYXRlKFtmXSwgZSk7XG59KShfYmFzZVVJLmRlZmF1bHQpO1xuZXhwb3J0cy5kZWZhdWx0ID0geTtcbiJdfQ==