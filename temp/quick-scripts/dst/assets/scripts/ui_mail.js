
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_mail.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'e7ea9rOEC9HW6BXUtMwquOJ', 'ui_mail');
// scripts/ui_mail.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _evts = require("evts");

var _lang = require("lang");

var _mailItem = require("mailItem");

var _mailMgr = require("mailMgr");

var _panelMgr = require("panelMgr");

var _tipMgr = require("tipMgr");

var _pInfo = require("pInfo");

var _baseUI = require("baseUI");

var f = cc._decorator;
var g = f.ccclass;
var y = f.property;

var m = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.scrollView = null;
    e.mailPfb = null;
    e.emptyNode = null;
    e.getAllNode = null;
    e.eventFunc = null;
    e.isLoad = !1;
    e._mailItem = [];
    e.lastScrollPosition = 0;
    return e;
  }

  __extends(e, t);

  e.prototype.start = function () {};

  e.prototype.init = function () {
    for (var t = this, e = [], o = 0; o < arguments.length; o++) {
      e[o] = arguments[o];
    }

    _mailMgr["default"].ins.getMail(this.updMail.bind(this));

    this.scrollView.node.on("scrolling", function () {
      t.pageScroll();
    }, this);
  };

  e.prototype.updMail = function () {
    var t = this;

    if (!this.isLoad && this.scrollView) {
      this.isLoad = !0;
      var e = this.scrollView.content;
      e.children.forEach(function (e) {
        t._mailItem.push(e);
      });
      e.removeAllChildren();
      var o = _mailMgr["default"].ins.mailInfo.mail;
      var n = Object.keys(o);

      if (this.emptyNode.active = 0 == n.length, n.length) {
        for (var i = this.mailPfb, r = _mailMgr["default"].ins, a = 0; a < n.length; a++) {
          var s = n[a];

          if (r.serverMail[s]) {
            var u = r.mailInfo.mail[s];

            var p = this._mailItem.shift();

            p || (p = cc.instantiate(i));
            this.scrollView.content.addChild(p, 0);
            p.active = !1;
            p.getComponent(_mailItem["default"]).init(Number(s), u);
          }
        }

        this.isLoad = !1;
        this.lastScrollPosition = 0;
        this.updState({
          type: "load"
        });
        this.scheduleOnce(this.pageScroll.bind(this, !1), 0);
      } else this.isLoad = !1;
    }
  };

  e.prototype.pageScroll = function (t) {
    void 0 === t && (t = !0);
    var e = this.scrollView.content.children;
    var o = this.scrollView.getScrollOffset().y;

    if (!(t && Math.abs(o - this.lastScrollPosition) < 1)) {
      for (var n = this.scrollView.content.parent.height / 2, i = 0; i < e.length; i++) {
        var r = e[i];
        var a = r.convertToWorldSpaceAR(cc.Vec2.ZERO);
        (a = this.scrollView.content.parent.convertToNodeSpaceAR(a)).y + r.height / 2 < -n || a.y - r.height / 2 > n ? r.children[0].active = !1 : r.children[0].active = !0;
      }

      this.lastScrollPosition = o;
    }
  };

  e.prototype.showLoadAni = function (t) {
    cc.tween(t).to(0.5, {
      x: 0
    }, {
      easing: "backInOut"
    }).start();
  };

  e.prototype.showChangegAni = function (t) {
    cc.tween(t).to(0.2, {
      opacity: 255
    }).start();
  };

  e.prototype.chgAni = function (t, e) {
    void 0 === e && (e = 0);
    t.active = !0;
    this.showChgAni ? (t.opacity = 0, this.scheduleOnce(this.showChangegAni.bind(this, t), 0.1 * (e + 1))) : (t.x = (cc.winSize.width + t.width) / 2, this.scheduleOnce(this.showLoadAni.bind(this, t), 0.05 * e));
  };

  e.prototype.mailSort = function () {
    this.scrollView.content.children.sort(function (t, e) {
      return t.getComponent(_mailItem["default"]).state - e.getComponent(_mailItem["default"]).state;
    });
    this.scrollView.content.getComponent(cc.Layout).updateLayout();
  };

  e.prototype.getItemById = function (t) {
    for (var e = this.scrollView.content.children, o = 0; o < e.length; o++) {
      var n = e[o].getComponent(_mailItem["default"]);
      if (t === n.id) return {
        item: n,
        index: o
      };
    }
  };

  e.prototype.updState = function (t) {
    var e = this;
    var o = this.scrollView.content;
    var n = _mailMgr["default"].ins.serverMail;
    if (t) if ("keyAward" === t.type) o.children.forEach(function (t, o) {
      var i = t.getComponent(_mailItem["default"]);
      n[i.id].props && i.state !== _mailMgr.mailState.award && (i.updateState(_mailMgr.mailState.award), e.chgAni(t, o));
    });else if ("load" === t.type) this.mailSort(), o.children.forEach(function (t, o) {
      e.chgAni(t, o);
    });else if ("keyDelete" === t.type) {
      var i = [];
      o.children.forEach(function (t, e) {
        var o = t.getComponent(_mailItem["default"]);
        o.state === _mailMgr.mailState.award && i.push({
          node: o.node,
          index: e
        });
      });
      i.forEach(function (t) {
        o.children.splice(t.index, 1);
        t.node.destroy();
        o.getComponent(cc.Layout).updateLayout();
      });
    } else if ("read" === t.type) {
      if (t.id) {
        var r = this.getItemById(t.id);
        var a = _mailMgr["default"].ins.mailInfo.mail[t.id];
        r && r.item && (r.item.updateState(a), this.chgAni(r.item.node), this.mailSort());
      }
    } else if ("delete" === t.type) {
      var s = this.getItemById(t.id);
      s && s.item.node.destroy();
      this.scheduleOnce(function () {
        o.children.splice(s.index, 1);
        e.mailSort();
      });
    }
    this.scheduleOnce(function () {
      e.emptyNode.active = 0 == e.scrollView.content.children.length, e.pageScroll.bind(e, !1);
    });
    this.showChgAni || (this.showChgAni = !0);
  };

  e.prototype.keyDelete = function () {
    if (!this.isLoad) {
      var t = 0;
      Object.values(_mailMgr["default"].ins.mailInfo.mail).forEach(function (e) {
        e === _mailMgr.mailState.award && t++;
      });
      t <= 0 ? _tipMgr["default"].ins.showTip(_lang.lang[10005]) : _mailMgr["default"].ins.deleteMail();
    }
  };

  e.prototype.keyAward = function () {
    if (!this.isLoad) if (Object.keys(_mailMgr["default"].ins.mailInfo.mail).length <= 0) _tipMgr["default"].ins.showTip(_lang.lang[10006]);else {
      var t = _pInfo["default"].ins.Mail;
      var e = _mailMgr["default"].ins;
      var o = {};

      for (var n in t.mail) {
        if (t.mail[n] !== _mailMgr.mailState.award) {
          var i = e.serverMail;

          if (n && i[n]) {
            var r = JSON.parse(i[n].props);

            for (var a in r) {
              r.hasOwnProperty(a) && (o[a] ? o[a] += Number(r[a]) : o[a] = Number(r[a]));
            }
          }
        }
      }

      if (_mailMgr["default"].ins.getAward()) {
        var c = [];
        var h = this.getAllNode.parent.convertToWorldSpaceAR(this.getAllNode.position);

        for (var f in o) {
          var g = o[f];
          var y = {};
          y.itemId = f;
          y.worldPos = h;
          y.value = g;
          c.push(y);
        }

        c.length && (c.length > 10 && (c.length = 10), _panelMgr["default"].ins.open("ui/ui_flyAni", {
          itemDatas: c
        }));
      } else _tipMgr["default"].ins.showTip(_lang.lang[10006]);
    }
  };

  e.prototype.onLoad = function () {
    this.eventFunc = this.onOperTap.bind(this);

    _evts["default"].opE.on(this.eventFunc);
  };

  e.prototype.onDestroy = function () {
    _evts["default"].opE.off(this.eventFunc);

    this.eventFunc = null;
  };

  e.prototype.onOperTap = function (t) {
    var e = null == t ? void 0 : t.action;
    if (e) switch (e) {
      case _evts["default"].UPDMAIL:
        this.updState(t.data);
    }
  };

  e.prototype.hideThis = function () {
    this.hide();
  };

  __decorate([y(cc.ScrollView)], e.prototype, "scrollView", void 0);

  __decorate([y(cc.Prefab)], e.prototype, "mailPfb", void 0);

  __decorate([y(cc.Node)], e.prototype, "emptyNode", void 0);

  __decorate([y(cc.Node)], e.prototype, "getAllNode", void 0);

  return __decorate([g], e);
}(_baseUI["default"]);

exports["default"] = m;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfbWFpbC5qcyJdLCJuYW1lcyI6WyJuIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJfZXZ0cyIsInJlcXVpcmUiLCJfbGFuZyIsIl9tYWlsSXRlbSIsIl9tYWlsTWdyIiwiX3BhbmVsTWdyIiwiX3RpcE1nciIsIl9wSW5mbyIsIl9iYXNlVUkiLCJmIiwiY2MiLCJfZGVjb3JhdG9yIiwiZyIsImNjY2xhc3MiLCJ5IiwicHJvcGVydHkiLCJtIiwidCIsImUiLCJhcHBseSIsImFyZ3VtZW50cyIsInNjcm9sbFZpZXciLCJtYWlsUGZiIiwiZW1wdHlOb2RlIiwiZ2V0QWxsTm9kZSIsImV2ZW50RnVuYyIsImlzTG9hZCIsImxhc3RTY3JvbGxQb3NpdGlvbiIsIl9fZXh0ZW5kcyIsInByb3RvdHlwZSIsInN0YXJ0IiwiaW5pdCIsIm8iLCJsZW5ndGgiLCJpbnMiLCJnZXRNYWlsIiwidXBkTWFpbCIsImJpbmQiLCJub2RlIiwib24iLCJwYWdlU2Nyb2xsIiwiY29udGVudCIsImNoaWxkcmVuIiwiZm9yRWFjaCIsInB1c2giLCJyZW1vdmVBbGxDaGlsZHJlbiIsIm1haWxJbmZvIiwibWFpbCIsImtleXMiLCJhY3RpdmUiLCJpIiwiciIsImEiLCJzIiwic2VydmVyTWFpbCIsInUiLCJwIiwic2hpZnQiLCJpbnN0YW50aWF0ZSIsImFkZENoaWxkIiwiZ2V0Q29tcG9uZW50IiwiTnVtYmVyIiwidXBkU3RhdGUiLCJ0eXBlIiwic2NoZWR1bGVPbmNlIiwiZ2V0U2Nyb2xsT2Zmc2V0IiwiTWF0aCIsImFicyIsInBhcmVudCIsImhlaWdodCIsImNvbnZlcnRUb1dvcmxkU3BhY2VBUiIsIlZlYzIiLCJaRVJPIiwiY29udmVydFRvTm9kZVNwYWNlQVIiLCJzaG93TG9hZEFuaSIsInR3ZWVuIiwidG8iLCJ4IiwiZWFzaW5nIiwic2hvd0NoYW5nZWdBbmkiLCJvcGFjaXR5IiwiY2hnQW5pIiwic2hvd0NoZ0FuaSIsIndpblNpemUiLCJ3aWR0aCIsIm1haWxTb3J0Iiwic29ydCIsInN0YXRlIiwiTGF5b3V0IiwidXBkYXRlTGF5b3V0IiwiZ2V0SXRlbUJ5SWQiLCJpZCIsIml0ZW0iLCJpbmRleCIsInByb3BzIiwibWFpbFN0YXRlIiwiYXdhcmQiLCJ1cGRhdGVTdGF0ZSIsInNwbGljZSIsImRlc3Ryb3kiLCJrZXlEZWxldGUiLCJ2YWx1ZXMiLCJzaG93VGlwIiwibGFuZyIsImRlbGV0ZU1haWwiLCJrZXlBd2FyZCIsIk1haWwiLCJKU09OIiwicGFyc2UiLCJoYXNPd25Qcm9wZXJ0eSIsImdldEF3YXJkIiwiYyIsImgiLCJwb3NpdGlvbiIsIml0ZW1JZCIsIndvcmxkUG9zIiwib3BlbiIsIml0ZW1EYXRhcyIsIm9uTG9hZCIsIm9uT3BlclRhcCIsIm9wRSIsIm9uRGVzdHJveSIsIm9mZiIsImFjdGlvbiIsIlVQRE1BSUwiLCJkYXRhIiwiaGlkZVRoaXMiLCJoaWRlIiwiX19kZWNvcmF0ZSIsIlNjcm9sbFZpZXciLCJQcmVmYWIiLCJOb2RlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7QUFDQUMsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztFQUFDQyxLQUFLLEVBQUUsQ0FBQztBQUFULENBQTdDOztBQUNBLElBQUlDLEtBQUssR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBbkI7O0FBQ0EsSUFBSUMsS0FBSyxHQUFHRCxPQUFPLENBQUMsTUFBRCxDQUFuQjs7QUFDQSxJQUFJRSxTQUFTLEdBQUdGLE9BQU8sQ0FBQyxVQUFELENBQXZCOztBQUNBLElBQUlHLFFBQVEsR0FBR0gsT0FBTyxDQUFDLFNBQUQsQ0FBdEI7O0FBQ0EsSUFBSUksU0FBUyxHQUFHSixPQUFPLENBQUMsVUFBRCxDQUF2Qjs7QUFDQSxJQUFJSyxPQUFPLEdBQUdMLE9BQU8sQ0FBQyxRQUFELENBQXJCOztBQUNBLElBQUlNLE1BQU0sR0FBR04sT0FBTyxDQUFDLE9BQUQs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LEVBQWdELEtBQUssQ0FBckQsQ0FBVjs7RUFDQW1HLFVBQVUsQ0FBQyxDQUFDbEgsQ0FBQyxDQUFDSixFQUFFLENBQUN3SCxNQUFKLENBQUYsQ0FBRCxFQUFpQmhILENBQUMsQ0FBQ1csU0FBbkIsRUFBOEIsU0FBOUIsRUFBeUMsS0FBSyxDQUE5QyxDQUFWOztFQUNBbUcsVUFBVSxDQUFDLENBQUNsSCxDQUFDLENBQUNKLEVBQUUsQ0FBQ3lILElBQUosQ0FBRixDQUFELEVBQWVqSCxDQUFDLENBQUNXLFNBQWpCLEVBQTRCLFdBQTVCLEVBQXlDLEtBQUssQ0FBOUMsQ0FBVjs7RUFDQW1HLFVBQVUsQ0FBQyxDQUFDbEgsQ0FBQyxDQUFDSixFQUFFLENBQUN5SCxJQUFKLENBQUYsQ0FBRCxFQUFlakgsQ0FBQyxDQUFDVyxTQUFqQixFQUE0QixZQUE1QixFQUEwQyxLQUFLLENBQS9DLENBQVY7O0VBQ0EsT0FBT21HLFVBQVUsQ0FBQyxDQUFDcEgsQ0FBRCxDQUFELEVBQU1NLENBQU4sQ0FBakI7QUFDSCxDQWxOTyxDQWtOTFYsT0FBTyxXQWxORixDQUFSOztBQW1OQVYsT0FBTyxXQUFQLEdBQWtCa0IsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBuO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7dmFsdWU6ICEwfSk7XG52YXIgX2V2dHMgPSByZXF1aXJlKFwiZXZ0c1wiKTtcbnZhciBfbGFuZyA9IHJlcXVpcmUoXCJsYW5nXCIpO1xudmFyIF9tYWlsSXRlbSA9IHJlcXVpcmUoXCJtYWlsSXRlbVwiKTtcbnZhciBfbWFpbE1nciA9IHJlcXVpcmUoXCJtYWlsTWdyXCIpO1xudmFyIF9wYW5lbE1nciA9IHJlcXVpcmUoXCJwYW5lbE1nclwiKTtcbnZhciBfdGlwTWdyID0gcmVxdWlyZShcInRpcE1nclwiKTtcbnZhciBfcEluZm8gPSByZXF1aXJlKFwicEluZm9cIik7XG52YXIgX2Jhc2VVSSA9IHJlcXVpcmUoXCJiYXNlVUlcIik7XG52YXIgZiA9IGNjLl9kZWNvcmF0b3I7XG52YXIgZyA9IGYuY2NjbGFzcztcbnZhciB5ID0gZi5wcm9wZXJ0eTtcbnZhciBtID0gKGZ1bmN0aW9uICh0KSB7XG4gICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgdmFyIGUgPSAobnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XG4gICAgICAgIGUuc2Nyb2xsVmlldyA9IG51bGw7XG4gICAgICAgIGUubWFpbFBmYiA9IG51bGw7XG4gICAgICAgIGUuZW1wdHlOb2RlID0gbnVsbDtcbiAgICAgICAgZS5nZXRBbGxOb2RlID0gbnVsbDtcbiAgICAgICAgZS5ldmVudEZ1bmMgPSBudWxsO1xuICAgICAgICBlLmlzTG9hZCA9ICExO1xuICAgICAgICBlLl9tYWlsSXRlbSA9IFtdO1xuICAgICAgICBlLmxhc3RTY3JvbGxQb3NpdGlvbiA9IDA7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBfX2V4dGVuZHMoZSwgdCk7XG4gICAgZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICBlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciB0ID0gdGhpcywgZSA9IFtdLCBvID0gMDsgbyA8IGFyZ3VtZW50cy5sZW5ndGg7IG8rKykgZVtvXSA9IGFyZ3VtZW50c1tvXTtcbiAgICAgICAgX21haWxNZ3IuZGVmYXVsdC5pbnMuZ2V0TWFpbCh0aGlzLnVwZE1haWwuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuc2Nyb2xsVmlldy5ub2RlLm9uKFxuICAgICAgICAgICAgXCJzY3JvbGxpbmdcIixcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0LnBhZ2VTY3JvbGwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS51cGRNYWlsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5pc0xvYWQgJiYgdGhpcy5zY3JvbGxWaWV3KSB7XG4gICAgICAgICAgICB0aGlzLmlzTG9hZCA9ICEwO1xuICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnNjcm9sbFZpZXcuY29udGVudDtcbiAgICAgICAgICAgIGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHQuX21haWxJdGVtLnB1c2goZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGUucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcbiAgICAgICAgICAgIHZhciBvID0gX21haWxNZ3IuZGVmYXVsdC5pbnMubWFpbEluZm8ubWFpbDtcbiAgICAgICAgICAgIHZhciBuID0gT2JqZWN0LmtleXMobyk7XG4gICAgICAgICAgICBpZiAoKCh0aGlzLmVtcHR5Tm9kZS5hY3RpdmUgPSAwID09IG4ubGVuZ3RoKSwgbi5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMubWFpbFBmYiwgciA9IF9tYWlsTWdyLmRlZmF1bHQuaW5zLCBhID0gMDsgYSA8IG4ubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBuW2FdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoci5zZXJ2ZXJNYWlsW3NdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IHIubWFpbEluZm8ubWFpbFtzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gdGhpcy5fbWFpbEl0ZW0uc2hpZnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgfHwgKHAgPSBjYy5pbnN0YW50aWF0ZShpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5hZGRDaGlsZChwLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHAuYWN0aXZlID0gITE7XG4gICAgICAgICAgICAgICAgICAgICAgICBwLmdldENvbXBvbmVudChfbWFpbEl0ZW0uZGVmYXVsdCkuaW5pdChOdW1iZXIocyksIHUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkID0gITE7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0U2Nyb2xsUG9zaXRpb24gPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMudXBkU3RhdGUoe3R5cGU6IFwibG9hZFwifSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UodGhpcy5wYWdlU2Nyb2xsLmJpbmQodGhpcywgITEpLCAwKTtcbiAgICAgICAgICAgIH0gZWxzZSB0aGlzLmlzTG9hZCA9ICExO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5wYWdlU2Nyb2xsID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gITApO1xuICAgICAgICB2YXIgZSA9IHRoaXMuc2Nyb2xsVmlldy5jb250ZW50LmNoaWxkcmVuO1xuICAgICAgICB2YXIgbyA9IHRoaXMuc2Nyb2xsVmlldy5nZXRTY3JvbGxPZmZzZXQoKS55O1xuICAgICAgICBpZiAoISh0ICYmIE1hdGguYWJzKG8gLSB0aGlzLmxhc3RTY3JvbGxQb3NpdGlvbikgPCAxKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgbiA9IHRoaXMuc2Nyb2xsVmlldy5jb250ZW50LnBhcmVudC5oZWlnaHQgLyAyLCBpID0gMDsgaSA8IGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgciA9IGVbaV07XG4gICAgICAgICAgICAgICAgdmFyIGEgPSByLmNvbnZlcnRUb1dvcmxkU3BhY2VBUihjYy5WZWMyLlpFUk8pO1xuICAgICAgICAgICAgICAgIChhID0gdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQucGFyZW50LmNvbnZlcnRUb05vZGVTcGFjZUFSKGEpKS55ICsgci5oZWlnaHQgLyAyIDwgLW4gfHxcbiAgICAgICAgICAgICAgICBhLnkgLSByLmhlaWdodCAvIDIgPiBuXG4gICAgICAgICAgICAgICAgICAgID8gKHIuY2hpbGRyZW5bMF0uYWN0aXZlID0gITEpXG4gICAgICAgICAgICAgICAgICAgIDogKHIuY2hpbGRyZW5bMF0uYWN0aXZlID0gITApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXN0U2Nyb2xsUG9zaXRpb24gPSBvO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5zaG93TG9hZEFuaSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIGNjLnR3ZWVuKHQpLnRvKDAuNSwge3g6IDB9LCB7ZWFzaW5nOiBcImJhY2tJbk91dFwifSkuc3RhcnQoKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLnNob3dDaGFuZ2VnQW5pID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgY2MudHdlZW4odCkudG8oMC4yLCB7b3BhY2l0eTogMjU1fSkuc3RhcnQoKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLmNoZ0FuaSA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IDApO1xuICAgICAgICB0LmFjdGl2ZSA9ICEwO1xuICAgICAgICB0aGlzLnNob3dDaGdBbmlcbiAgICAgICAgICAgID8gKCh0Lm9wYWNpdHkgPSAwKSwgdGhpcy5zY2hlZHVsZU9uY2UodGhpcy5zaG93Q2hhbmdlZ0FuaS5iaW5kKHRoaXMsIHQpLCAwLjEgKiAoZSArIDEpKSlcbiAgICAgICAgICAgIDogKCh0LnggPSAoY2Mud2luU2l6ZS53aWR0aCArIHQud2lkdGgpIC8gMiksIHRoaXMuc2NoZWR1bGVPbmNlKHRoaXMuc2hvd0xvYWRBbmkuYmluZCh0aGlzLCB0KSwgMC4wNSAqIGUpKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm1haWxTb3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5jaGlsZHJlbi5zb3J0KGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdC5nZXRDb21wb25lbnQoX21haWxJdGVtLmRlZmF1bHQpLnN0YXRlIC0gZS5nZXRDb21wb25lbnQoX21haWxJdGVtLmRlZmF1bHQpLnN0YXRlO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQuZ2V0Q29tcG9uZW50KGNjLkxheW91dCkudXBkYXRlTGF5b3V0KCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5nZXRJdGVtQnlJZCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIGZvciAodmFyIGUgPSB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5jaGlsZHJlbiwgbyA9IDA7IG8gPCBlLmxlbmd0aDsgbysrKSB7XG4gICAgICAgICAgICB2YXIgbiA9IGVbb10uZ2V0Q29tcG9uZW50KF9tYWlsSXRlbS5kZWZhdWx0KTtcbiAgICAgICAgICAgIGlmICh0ID09PSBuLmlkKSByZXR1cm4ge2l0ZW06IG4sIGluZGV4OiBvfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZS5wcm90b3R5cGUudXBkU3RhdGUgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IHRoaXM7XG4gICAgICAgIHZhciBvID0gdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQ7XG4gICAgICAgIHZhciBuID0gX21haWxNZ3IuZGVmYXVsdC5pbnMuc2VydmVyTWFpbDtcbiAgICAgICAgaWYgKHQpXG4gICAgICAgICAgICBpZiAoXCJrZXlBd2FyZFwiID09PSB0LnR5cGUpXG4gICAgICAgICAgICAgICAgby5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uICh0LCBvKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gdC5nZXRDb21wb25lbnQoX21haWxJdGVtLmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICBuW2kuaWRdLnByb3BzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpLnN0YXRlICE9PSBfbWFpbE1nci5tYWlsU3RhdGUuYXdhcmQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIChpLnVwZGF0ZVN0YXRlKF9tYWlsTWdyLm1haWxTdGF0ZS5hd2FyZCksIGUuY2hnQW5pKHQsIG8pKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsc2UgaWYgKFwibG9hZFwiID09PSB0LnR5cGUpXG4gICAgICAgICAgICAgICAgdGhpcy5tYWlsU29ydCgpLFxuICAgICAgICAgICAgICAgICAgICBvLmNoaWxkcmVuLmZvckVhY2goZnVuY3Rpb24gKHQsIG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuY2hnQW5pKHQsIG8pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVsc2UgaWYgKFwia2V5RGVsZXRlXCIgPT09IHQudHlwZSkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gW107XG4gICAgICAgICAgICAgICAgby5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvID0gdC5nZXRDb21wb25lbnQoX21haWxJdGVtLmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICBvLnN0YXRlID09PSBfbWFpbE1nci5tYWlsU3RhdGUuYXdhcmQgJiYgaS5wdXNoKHtub2RlOiBvLm5vZGUsIGluZGV4OiBlfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaS5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIG8uY2hpbGRyZW4uc3BsaWNlKHQuaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICB0Lm5vZGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICBvLmdldENvbXBvbmVudChjYy5MYXlvdXQpLnVwZGF0ZUxheW91dCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcInJlYWRcIiA9PT0gdC50eXBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHQuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzLmdldEl0ZW1CeUlkKHQuaWQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IF9tYWlsTWdyLmRlZmF1bHQuaW5zLm1haWxJbmZvLm1haWxbdC5pZF07XG4gICAgICAgICAgICAgICAgICAgIHIgJiYgci5pdGVtICYmIChyLml0ZW0udXBkYXRlU3RhdGUoYSksIHRoaXMuY2hnQW5pKHIuaXRlbS5ub2RlKSwgdGhpcy5tYWlsU29ydCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwiZGVsZXRlXCIgPT09IHQudHlwZSkge1xuICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5nZXRJdGVtQnlJZCh0LmlkKTtcbiAgICAgICAgICAgICAgICBzICYmIHMuaXRlbS5ub2RlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlT25jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG8uY2hpbGRyZW4uc3BsaWNlKHMuaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICBlLm1haWxTb3J0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIChlLmVtcHR5Tm9kZS5hY3RpdmUgPSAwID09IGUuc2Nyb2xsVmlldy5jb250ZW50LmNoaWxkcmVuLmxlbmd0aCksIGUucGFnZVNjcm9sbC5iaW5kKGUsICExKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2hvd0NoZ0FuaSB8fCAodGhpcy5zaG93Q2hnQW5pID0gITApO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUua2V5RGVsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNMb2FkKSB7XG4gICAgICAgICAgICB2YXIgdCA9IDA7XG4gICAgICAgICAgICBPYmplY3QudmFsdWVzKF9tYWlsTWdyLmRlZmF1bHQuaW5zLm1haWxJbmZvLm1haWwpLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlID09PSBfbWFpbE1nci5tYWlsU3RhdGUuYXdhcmQgJiYgdCsrO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0IDw9IDAgPyBfdGlwTWdyLmRlZmF1bHQuaW5zLnNob3dUaXAoX2xhbmcubGFuZ1sxMDAwNV0pIDogX21haWxNZ3IuZGVmYXVsdC5pbnMuZGVsZXRlTWFpbCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5rZXlBd2FyZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTG9hZClcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhfbWFpbE1nci5kZWZhdWx0Lmlucy5tYWlsSW5mby5tYWlsKS5sZW5ndGggPD0gMClcbiAgICAgICAgICAgICAgICBfdGlwTWdyLmRlZmF1bHQuaW5zLnNob3dUaXAoX2xhbmcubGFuZ1sxMDAwNl0pO1xuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSBfcEluZm8uZGVmYXVsdC5pbnMuTWFpbDtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IF9tYWlsTWdyLmRlZmF1bHQuaW5zO1xuICAgICAgICAgICAgICAgIHZhciBvID0ge307XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiB0Lm1haWwpXG4gICAgICAgICAgICAgICAgICAgIGlmICh0Lm1haWxbbl0gIT09IF9tYWlsTWdyLm1haWxTdGF0ZS5hd2FyZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlLnNlcnZlck1haWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobiAmJiBpW25dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBKU09OLnBhcnNlKGlbbl0ucHJvcHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGEgaW4gcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgci5oYXNPd25Qcm9wZXJ0eShhKSAmJiAob1thXSA/IChvW2FdICs9IE51bWJlcihyW2FdKSkgOiAob1thXSA9IE51bWJlcihyW2FdKSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF9tYWlsTWdyLmRlZmF1bHQuaW5zLmdldEF3YXJkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGggPSB0aGlzLmdldEFsbE5vZGUucGFyZW50LmNvbnZlcnRUb1dvcmxkU3BhY2VBUih0aGlzLmdldEFsbE5vZGUucG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBmIGluIG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnID0gb1tmXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICB5Lml0ZW1JZCA9IGY7XG4gICAgICAgICAgICAgICAgICAgICAgICB5LndvcmxkUG9zID0gaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHkudmFsdWUgPSBnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYy5wdXNoKHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGMubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoYy5sZW5ndGggPiAxMCAmJiAoYy5sZW5ndGggPSAxMCksIF9wYW5lbE1nci5kZWZhdWx0Lmlucy5vcGVuKFwidWkvdWlfZmx5QW5pXCIsIHtpdGVtRGF0YXM6IGN9KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIF90aXBNZ3IuZGVmYXVsdC5pbnMuc2hvd1RpcChfbGFuZy5sYW5nWzEwMDA2XSk7XG4gICAgICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbkxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZXZlbnRGdW5jID0gdGhpcy5vbk9wZXJUYXAuYmluZCh0aGlzKTtcbiAgICAgICAgX2V2dHMuZGVmYXVsdC5vcEUub24odGhpcy5ldmVudEZ1bmMpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUub25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfZXZ0cy5kZWZhdWx0Lm9wRS5vZmYodGhpcy5ldmVudEZ1bmMpO1xuICAgICAgICB0aGlzLmV2ZW50RnVuYyA9IG51bGw7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbk9wZXJUYXAgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuYWN0aW9uO1xuICAgICAgICBpZiAoZSlcbiAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgX2V2dHMuZGVmYXVsdC5VUERNQUlMOlxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZFN0YXRlKHQuZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5oaWRlVGhpcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFt5KGNjLlNjcm9sbFZpZXcpXSwgZS5wcm90b3R5cGUsIFwic2Nyb2xsVmlld1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW3koY2MuUHJlZmFiKV0sIGUucHJvdG90eXBlLCBcIm1haWxQZmJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFt5KGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiZW1wdHlOb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbeShjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImdldEFsbE5vZGVcIiwgdm9pZCAwKTtcbiAgICByZXR1cm4gX19kZWNvcmF0ZShbZ10sIGUpO1xufSkoX2Jhc2VVSS5kZWZhdWx0KTtcbmV4cG9ydHMuZGVmYXVsdCA9IG07XG4iXX0=