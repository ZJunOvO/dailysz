
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_newGift.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '73028GmA1pEwZDKXT2TiRed', 'ui_newGift');
// scripts/ui_newGift.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _evts = require("evts");

var _idx = require("idx");

var _cfgMgr = require("cfgMgr");

var _item = require("item");

var _bagMgr = require("bagMgr");

var _panelMgr = require("panelMgr");

var _pInfo = require("pInfo");

var _baseUI = require("baseUI");

var f = cc._decorator;
var g = f.ccclass;
var y = f.property;

var m = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.itemsNode = null;
    e.itemPre = null;
    e.bgSpr = null;
    e.adGetBtn = null;
    e.hideCb = null;
    return e;
  }

  __extends(e, t);

  e.prototype.init = function () {
    var t = this;

    _cfgMgr["default"].serverCfg.props.set.forEach(function (e) {
      if (Number(e.init_val) > 0) {
        var o = cc.instantiate(t.itemPre);
        o.active = !0, o.parent = t.itemsNode, o.getComponent(_item["default"]).initByData(e.key, e.init_val);
      }
    });

    this.adGetBtn.node.adDotData = "新手礼包";
  };

  e.prototype.hideThis = function () {
    this.hide();
  };

  e.prototype.onAdGet = function () {
    this.getItem();
  };

  e.prototype.getItem = function () {
    for (var t = this, e = [], o = 0, n = this.itemsNode.childrenCount; o < n; o++) {
      var i = this.itemsNode.children[o];
      var r = i.parent.convertToWorldSpaceAR(i.position);
      var h = {};
      h.itemId = i.getComponent(_item["default"]).key;
      h.worldPos = r;
      h.value = i.getComponent(_item["default"]).count;
      e.push(h);
    }

    _cfgMgr["default"].serverCfg.props.set.forEach(function (t) {
      _bagMgr["default"].ins.addItem(t.key, t.init_val, !0);
    });

    !_pInfo["default"].ins.isMaxAdCount() && _idx.platform.reportEvent(_idx.ERepEvt.newGiftGet);

    _pInfo["default"].ins.setIsGetNewGif(!0);

    _panelMgr["default"].ins.open("ui/ui_flyAni", {
      itemDatas: e,
      hideCb: function hideCb() {
        _evts["default"].opE.emit({
          action: _evts["default"].UPD_NEW_GIFT
        });

        t.hideThis();
      }
    });
  };

  e.prototype.onDestroy = function () {
    cc.assetManager.releaseAsset(this.bgSpr.spriteFrame);
  };

  __decorate([y(cc.Node)], e.prototype, "itemsNode", void 0);

  __decorate([y(cc.Node)], e.prototype, "itemPre", void 0);

  __decorate([y(cc.Sprite)], e.prototype, "bgSpr", void 0);

  __decorate([y(cc.Button)], e.prototype, "adGetBtn", void 0);

  return __decorate([g], e);
}(_baseUI["default"]);

exports["default"] = m;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfbmV3R2lmdC5qcyJdLCJuYW1lcyI6WyJuIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJfZXZ0cyIsInJlcXVpcmUiLCJfaWR4IiwiX2NmZ01nciIsIl9pdGVtIiwiX2JhZ01nciIsIl9wYW5lbE1nciIsIl9wSW5mbyIsIl9iYXNlVUkiLCJmIiwiY2MiLCJfZGVjb3JhdG9yIiwiZyIsImNjY2xhc3MiLCJ5IiwicHJvcGVydHkiLCJtIiwidCIsImUiLCJhcHBseSIsImFyZ3VtZW50cyIsIml0ZW1zTm9kZSIsIml0ZW1QcmUiLCJiZ1NwciIsImFkR2V0QnRuIiwiaGlkZUNiIiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwiaW5pdCIsInNlcnZlckNmZyIsInByb3BzIiwic2V0IiwiZm9yRWFjaCIsIk51bWJlciIsImluaXRfdmFsIiwibyIsImluc3RhbnRpYXRlIiwiYWN0aXZlIiwicGFyZW50IiwiZ2V0Q29tcG9uZW50IiwiaW5pdEJ5RGF0YSIsImtleSIsIm5vZGUiLCJhZERvdERhdGEiLCJoaWRlVGhpcyIsImhpZGUiLCJvbkFkR2V0IiwiZ2V0SXRlbSIsImNoaWxkcmVuQ291bnQiLCJpIiwiY2hpbGRyZW4iLCJyIiwiY29udmVydFRvV29ybGRTcGFjZUFSIiwicG9zaXRpb24iLCJoIiwiaXRlbUlkIiwid29ybGRQb3MiLCJjb3VudCIsInB1c2giLCJpbnMiLCJhZGRJdGVtIiwiaXNNYXhBZENvdW50IiwicGxhdGZvcm0iLCJyZXBvcnRFdmVudCIsIkVSZXBFdnQiLCJuZXdHaWZ0R2V0Iiwic2V0SXNHZXROZXdHaWYiLCJvcGVuIiwiaXRlbURhdGFzIiwib3BFIiwiZW1pdCIsImFjdGlvbiIsIlVQRF9ORVdfR0lGVCIsIm9uRGVzdHJveSIsImFzc2V0TWFuYWdlciIsInJlbGVhc2VBc3NldCIsInNwcml0ZUZyYW1lIiwiX19kZWNvcmF0ZSIsIk5vZGUiLCJTcHJpdGUiLCJCdXR0b24i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LFVBQVUsQ0FBQyxDQUFDakUsQ0FBRCxDQUFELEVBQU1NLENBQU4sQ0FBakI7QUFDSCxDQTFETyxDQTBETFYsT0FBTyxXQTFERixDQUFSOztBQTJEQVYsT0FBTyxXQUFQLEdBQWtCa0IsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBuO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7dmFsdWU6ICEwfSk7XG52YXIgX2V2dHMgPSByZXF1aXJlKFwiZXZ0c1wiKTtcbnZhciBfaWR4ID0gcmVxdWlyZShcImlkeFwiKTtcbnZhciBfY2ZnTWdyID0gcmVxdWlyZShcImNmZ01nclwiKTtcbnZhciBfaXRlbSA9IHJlcXVpcmUoXCJpdGVtXCIpO1xudmFyIF9iYWdNZ3IgPSByZXF1aXJlKFwiYmFnTWdyXCIpO1xudmFyIF9wYW5lbE1nciA9IHJlcXVpcmUoXCJwYW5lbE1nclwiKTtcbnZhciBfcEluZm8gPSByZXF1aXJlKFwicEluZm9cIik7XG52YXIgX2Jhc2VVSSA9IHJlcXVpcmUoXCJiYXNlVUlcIik7XG52YXIgZiA9IGNjLl9kZWNvcmF0b3I7XG52YXIgZyA9IGYuY2NjbGFzcztcbnZhciB5ID0gZi5wcm9wZXJ0eTtcbnZhciBtID0gKGZ1bmN0aW9uICh0KSB7XG4gICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgdmFyIGUgPSAobnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XG4gICAgICAgIGUuaXRlbXNOb2RlID0gbnVsbDtcbiAgICAgICAgZS5pdGVtUHJlID0gbnVsbDtcbiAgICAgICAgZS5iZ1NwciA9IG51bGw7XG4gICAgICAgIGUuYWRHZXRCdG4gPSBudWxsO1xuICAgICAgICBlLmhpZGVDYiA9IG51bGw7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBfX2V4dGVuZHMoZSwgdCk7XG4gICAgZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICBfY2ZnTWdyLmRlZmF1bHQuc2VydmVyQ2ZnLnByb3BzLnNldC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoTnVtYmVyKGUuaW5pdF92YWwpID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBvID0gY2MuaW5zdGFudGlhdGUodC5pdGVtUHJlKTtcbiAgICAgICAgICAgICAgICAoby5hY3RpdmUgPSAhMCksIChvLnBhcmVudCA9IHQuaXRlbXNOb2RlKSwgby5nZXRDb21wb25lbnQoX2l0ZW0uZGVmYXVsdCkuaW5pdEJ5RGF0YShlLmtleSwgZS5pbml0X3ZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkR2V0QnRuLm5vZGUuYWREb3REYXRhID0gXCLmlrDmiYvnpLzljIVcIjtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLmhpZGVUaGlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uQWRHZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZ2V0SXRlbSgpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuZ2V0SXRlbSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgdCA9IHRoaXMsIGUgPSBbXSwgbyA9IDAsIG4gPSB0aGlzLml0ZW1zTm9kZS5jaGlsZHJlbkNvdW50OyBvIDwgbjsgbysrKSB7XG4gICAgICAgICAgICB2YXIgaSA9IHRoaXMuaXRlbXNOb2RlLmNoaWxkcmVuW29dO1xuICAgICAgICAgICAgdmFyIHIgPSBpLnBhcmVudC5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIoaS5wb3NpdGlvbik7XG4gICAgICAgICAgICB2YXIgaCA9IHt9O1xuICAgICAgICAgICAgaC5pdGVtSWQgPSBpLmdldENvbXBvbmVudChfaXRlbS5kZWZhdWx0KS5rZXk7XG4gICAgICAgICAgICBoLndvcmxkUG9zID0gcjtcbiAgICAgICAgICAgIGgudmFsdWUgPSBpLmdldENvbXBvbmVudChfaXRlbS5kZWZhdWx0KS5jb3VudDtcbiAgICAgICAgICAgIGUucHVzaChoKTtcbiAgICAgICAgfVxuICAgICAgICBfY2ZnTWdyLmRlZmF1bHQuc2VydmVyQ2ZnLnByb3BzLnNldC5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICBfYmFnTWdyLmRlZmF1bHQuaW5zLmFkZEl0ZW0odC5rZXksIHQuaW5pdF92YWwsICEwKTtcbiAgICAgICAgfSk7XG4gICAgICAgICFfcEluZm8uZGVmYXVsdC5pbnMuaXNNYXhBZENvdW50KCkgJiYgX2lkeC5wbGF0Zm9ybS5yZXBvcnRFdmVudChfaWR4LkVSZXBFdnQubmV3R2lmdEdldCk7XG4gICAgICAgIF9wSW5mby5kZWZhdWx0Lmlucy5zZXRJc0dldE5ld0dpZighMCk7XG4gICAgICAgIF9wYW5lbE1nci5kZWZhdWx0Lmlucy5vcGVuKFwidWkvdWlfZmx5QW5pXCIsIHtcbiAgICAgICAgICAgIGl0ZW1EYXRhczogZSxcbiAgICAgICAgICAgIGhpZGVDYjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9ldnRzLmRlZmF1bHQub3BFLmVtaXQoe2FjdGlvbjogX2V2dHMuZGVmYXVsdC5VUERfTkVXX0dJRlR9KTtcbiAgICAgICAgICAgICAgICB0LmhpZGVUaGlzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUub25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjYy5hc3NldE1hbmFnZXIucmVsZWFzZUFzc2V0KHRoaXMuYmdTcHIuc3ByaXRlRnJhbWUpO1xuICAgIH07XG4gICAgX19kZWNvcmF0ZShbeShjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcIml0ZW1zTm9kZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW3koY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJpdGVtUHJlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbeShjYy5TcHJpdGUpXSwgZS5wcm90b3R5cGUsIFwiYmdTcHJcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFt5KGNjLkJ1dHRvbildLCBlLnByb3RvdHlwZSwgXCJhZEdldEJ0blwiLCB2b2lkIDApO1xuICAgIHJldHVybiBfX2RlY29yYXRlKFtnXSwgZSk7XG59KShfYmFzZVVJLmRlZmF1bHQpO1xuZXhwb3J0cy5kZWZhdWx0ID0gbTtcbiJdfQ==