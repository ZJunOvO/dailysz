
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_quest.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '70d40ATM1ZE3biriQn1uJF2', 'ui_quest');
// scripts/ui_quest.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _evts = require("evts");

var _mySafeArea = require("mySafeArea");

var _time = require("time");

var _cfgMgr = require("cfgMgr");

var _lang = require("lang");

var _questItem = require("questItem");

var _global = require("global");

var _taskMgr = require("taskMgr");

var _tipMgr = require("tipMgr");

var _loading = require("loading");

var _baseUI = require("baseUI");

var m = cc._decorator;
var v = m.ccclass;
var _ = m.property;

var b = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.content = null;
    e.questItem = null;
    e.tLable = null;
    e.btnspf = [];
    e.btnsp = [];
    e.scrollView = null;
    e.top = null;
    e.bgNode = null;
    e.topBgSp = null;
    e.topBgSp1 = null;
    e._taskTyp = _taskMgr.taskChannel.daily;
    e.questPool = new cc.NodePool(_questItem["default"]);
    e.lastScrollPosition = 0;
    return e;
  }

  __extends(e, t);

  e.prototype.onLoad = function () {
    var t = this;
    this.node.height = cc.winSize.height;
    this.taskTyp = _taskMgr.taskChannel.daily;
    this.tLable.font = _loading.DEFAULTFONT;
    _global["default"].padScale && (this.bgNode.scale = _global["default"].padScale);
    this.scrollView.node.on("scrolling", function () {
      t.pageScroll(!0);
    }, this);
    this.onResize();
  };

  e.prototype.start = function () {};

  e.prototype.loadItem = function (t, e, o) {
    var n = this.questItem;

    if (t < o.length) {
      var i = o[t];
      (a = this.questPool.get()) || (a = cc.instantiate(n));
      this.content.addChild(a);
      a.active = !1;
      a.zIndex = 0;
      a.getComponent(_questItem["default"]).init(e[i.key]);
      t++;
      this.scheduleOnce(this.loadItem.bind(this, t, e, o), 0);
    } else {
      this.content.children.sort(function (t, e) {
        var o = t.getComponent(_questItem["default"]).taskData.data.state;
        var n = e.getComponent(_questItem["default"]).taskData.data.state;
        return o == n ? 0 : o == _taskMgr.taskState.Finish ? -1 : n == _taskMgr.taskState.Finish ? 1 : o == _taskMgr.taskState.Rewared ? 1 : n == _taskMgr.taskState.Rewared ? -1 : void 0;
      });

      for (var r = 0; r < this.content.children.length; r++) {
        var a;
        (a = this.content.children[r]).active = !0;
        this.showChgAni || (a.opacity = 0, this.scheduleOnce(this.showChangegAni.bind(this, a), 0.1 * (r + 1)));
      }

      this.lastScrollPosition = 0;
      this.scheduleOnce(this.pageScroll.bind(this, !1), 0);
      this.showChgAni || (this.showChgAni = !0);
    }
  };

  e.prototype.initView = function () {
    var t = this;
    this.countTaskUpdTime();
    var e = _cfgMgr["default"].serverCfg[this._taskTyp];

    var o = _taskMgr["default"].getTaskByType(this._taskTyp);

    this.content.children.forEach(function (e) {
      t.despawnNode(e);
    });
    this.content.removeAllChildren();
    var n = null == e ? void 0 : e.rules;
    this.loadItem(0, o, n);
  };

  e.prototype.updTask = function () {
    this.initView();
  };

  e.prototype.countTaskUpdTime = function () {
    var t = _time["default"].ins.nextZeroTime / 1e3;
    this.tLable.string = _time["default"].getFormatHMS(t);
    t <= 0 && this.initView();
  };

  e.prototype.onEnable = function () {
    var t = this;

    _evts["default"].opE.on(this.onOperTap.bind(this));

    this.schedule(this.countTaskUpdTime, 1, cc.macro.REPEAT_FOREVER);
    this.initView();
    this.scheduleOnce(function () {
      t.top.y -= _mySafeArea.getSafeAreaRect().yMin;
    });
  };

  e.prototype.onDisable = function () {
    _evts["default"].opE.off(this.onOperTap.bind(this));

    this.unschedule(this.countTaskUpdTime);
  };

  e.prototype.onOperTap = function (t) {
    var e = null == t ? void 0 : t.action;
    if (e) switch (e) {
      case _evts["default"].UPD_PANEL:
        this.updTask();
    }
  };

  e.prototype.pageSwitch = function (t, e) {
    this._taskTyp != e && (e != _taskMgr.taskChannel.achieve ? (this.taskTyp = e, this.initView()) : _tipMgr["default"].ins.showTip(_lang.lang[10004]));
  };

  Object.defineProperty(e.prototype, "taskTyp", {
    set: function set(t) {
      this._taskTyp = t;
      var e = t == _taskMgr.taskChannel.daily ? 0 : 1;
      this.btnsp[0].spriteFrame = this.btnspf[e];
      this.btnsp[1].spriteFrame = this.btnspf[1 ^ e];
    },
    enumerable: !1,
    configurable: !0
  });

  e.prototype.despawnNode = function (t) {
    this.questPool.put(t);
  };

  e.prototype.onResize = function () {
    this.node.height = cc.winSize.height;

    var t = _mySafeArea.getSafeAreaRect().yMin;

    var e = cc.winSize.height - 1280 - t;
    this.scrollView.node.height += e;
    this.scrollView.content.height += e;
    this.scrollView.content.parent.height += e;
    this.topBgSp.height += e;
    this.topBgSp1.height += e;
  };

  e.prototype.pageScroll = function (t) {
    void 0 === t && (t = !0);
    var e = this.content.children;
    var o = this.scrollView.getScrollOffset().y;

    if (!(t && Math.abs(o - this.lastScrollPosition) < 1)) {
      for (var n = this.content.parent.height, i = 0; i < e.length; i++) {
        var r = e[i];
        var a = r.convertToWorldSpaceAR(cc.Vec2.ZERO);
        (a = this.content.parent.convertToNodeSpaceAR(a)).y + 110 < -n || a.y - 110 > 0 ? r.children[0].active = !1 : r.children[0].active = !0;
      }

      this.lastScrollPosition = o;
    }
  };

  e.prototype.showChangegAni = function (t) {
    cc.tween(t).to(0.2, {
      opacity: 255
    }).start();
  };

  e.prototype.hideThis = function () {
    this.hide();
  };

  __decorate([_(cc.Node)], e.prototype, "content", void 0);

  __decorate([_(cc.Prefab)], e.prototype, "questItem", void 0);

  __decorate([_(cc.Label)], e.prototype, "tLable", void 0);

  __decorate([_(cc.SpriteFrame)], e.prototype, "btnspf", void 0);

  __decorate([_(cc.Sprite)], e.prototype, "btnsp", void 0);

  __decorate([_(cc.ScrollView)], e.prototype, "scrollView", void 0);

  __decorate([_(cc.Node)], e.prototype, "top", void 0);

  __decorate([_(cc.Node)], e.prototype, "bgNode", void 0);

  __decorate([_(cc.Node)], e.prototype, "topBgSp", void 0);

  __decorate([_(cc.Node)], e.prototype, "topBgSp1", void 0);

  return __decorate([v], e);
}(_baseUI["default"]);

exports["default"] = b;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfcXVlc3QuanMiXSwibmFtZXMiOlsibiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiX2V2dHMiLCJyZXF1aXJlIiwiX215U2FmZUFyZWEiLCJfdGltZSIsIl9jZmdNZ3IiLCJfbGFuZyIsIl9xdWVzdEl0ZW0iLCJfZ2xvYmFsIiwiX3Rhc2tNZ3IiLCJfdGlwTWdyIiwiX2xvYWRpbmciLCJfYmFzZVVJIiwibSIsImNjIiwiX2RlY29yYXRvciIsInYiLCJjY2NsYXNzIiwiXyIsInByb3BlcnR5IiwiYiIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJjb250ZW50IiwicXVlc3RJdGVtIiwidExhYmxlIiwiYnRuc3BmIiwiYnRuc3AiLCJzY3JvbGxWaWV3IiwidG9wIiwiYmdOb2RlIiwidG9wQmdTcCIsInRvcEJnU3AxIiwiX3Rhc2tUeXAiLCJ0YXNrQ2hhbm5lbCIsImRhaWx5IiwicXVlc3RQb29sIiwiTm9kZVBvb2wiLCJsYXN0U2Nyb2xsUG9zaXRpb24iLCJfX2V4dGVuZHMiLCJwcm90b3R5cGUiLCJvbkxvYWQiLCJub2RlIiwiaGVpZ2h0Iiwid2luU2l6ZSIsInRhc2tUeXAiLCJmb250IiwiREVGQVVMVEZPTlQiLCJwYWRTY2FsZSIsInNjYWxlIiwib24iLCJwYWdlU2Nyb2xsIiwib25SZXNpemUiLCJzdGFydCIsImxvYWRJdGVtIiwibyIsImxlbmd0aCIsImkiLCJhIiwiZ2V0IiwiaW5zdGFudGlhdGUiLCJhZGRDaGlsZCIsImFjdGl2ZSIsInpJbmRleCIsImdldENvbXBvbmVudCIsImluaXQiLCJrZXkiLCJzY2hlZHVsZU9uY2UiLCJiaW5kIiwiY2hpbGRyZW4iLCJzb3J0IiwidGFza0RhdGEiLCJkYXRhIiwic3RhdGUiLCJ0YXNrU3RhdGUiLCJGaW5pc2giLCJSZXdhcmVkIiwiciIsInNob3dDaGdBbmkiLCJvcGFjaXR5Iiwic2hvd0NoYW5nZWdBbmkiLCJpbml0VmlldyIsImNvdW50VGFza1VwZFRpbWUiLCJzZXJ2ZXJDZmciLCJnZXRUYXNrQnlUeXBlIiwiZm9yRWFjaCIsImRlc3Bhd25Ob2RlIiwicmVtb3ZlQWxsQ2hpbGRyZW4iLCJydWxlcyIsInVwZFRhc2siLCJpbnMiLCJuZXh0WmVyb1RpbWUiLCJzdHJpbmciLCJnZXRGb3JtYXRITVMiLCJvbkVuYWJsZSIsIm9wRSIsIm9uT3BlclRhcCIsInNjaGVkdWxlIiwibWFjcm8iLCJSRVBFQVRfRk9SRVZFUiIsInkiLCJnZXRTYWZlQXJlYVJlY3QiLCJ5TWluIiwib25EaXNhYmxlIiwib2ZmIiwidW5zY2hlZHVsZSIsImFjdGlvbiIsIlVQRF9QQU5FTCIsInBhZ2VTd2l0Y2giLCJhY2hpZXZlIiwic2hvd1RpcCIsImxhbmciLCJzZXQiLCJzcHJpdGVGcmFtZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJwdXQiLCJwYXJlbnQiLCJnZXRTY3JvbGxPZmZzZXQiLCJNYXRoIiwiYWJzIiwiY29udmVydFRvV29ybGRTcGFjZUFSIiwiVmVjMiIsIlpFUk8iLCJjb252ZXJ0VG9Ob2RlU3BhY2VBUiIsInR3ZWVuIiwidG8iLCJoaWRlVGhpcyIsImhpZGUiLCJfX2RlY29yYXRlIiwiTm9kZSIsIlByZWZhYiIsIkxhYmVsIiwiU3ByaXRlRnJhbWUiLCJTcHJpdGUiLCJTY3JvbGxWaWV3Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7QUFDQUMsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztFQUFDQyxLQUFLLEVBQUUsQ0FBQztBQUFULENBQTdDOztBQUNBLElBQUlDLEtBQUssR0FBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBbkI7O0FBQ0EsSUFBSUMsV0FBVyxHQUFHRCxPQUFPLENBQUMsWUFBRCxDQUF6Qjs7QUFDQSxJQUFJRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxNQUFELENBQW5COztBQUNBLElBQUlHLE9BQU8sR0FBR0gsT0FBTyxDQUFDLFFBQUQs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LENBQUNuSCxDQUFELENBQUQsRUFBTU0sQ0FBTixDQUFqQjtBQUNILENBL0tPLENBK0tMVixPQUFPLFdBL0tGLENBQVI7O0FBZ0xBYixPQUFPLFdBQVAsR0FBa0JxQixDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG47XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHt2YWx1ZTogITB9KTtcbnZhciBfZXZ0cyA9IHJlcXVpcmUoXCJldnRzXCIpO1xudmFyIF9teVNhZmVBcmVhID0gcmVxdWlyZShcIm15U2FmZUFyZWFcIik7XG52YXIgX3RpbWUgPSByZXF1aXJlKFwidGltZVwiKTtcbnZhciBfY2ZnTWdyID0gcmVxdWlyZShcImNmZ01nclwiKTtcbnZhciBfbGFuZyA9IHJlcXVpcmUoXCJsYW5nXCIpO1xudmFyIF9xdWVzdEl0ZW0gPSByZXF1aXJlKFwicXVlc3RJdGVtXCIpO1xudmFyIF9nbG9iYWwgPSByZXF1aXJlKFwiZ2xvYmFsXCIpO1xudmFyIF90YXNrTWdyID0gcmVxdWlyZShcInRhc2tNZ3JcIik7XG52YXIgX3RpcE1nciA9IHJlcXVpcmUoXCJ0aXBNZ3JcIik7XG52YXIgX2xvYWRpbmcgPSByZXF1aXJlKFwibG9hZGluZ1wiKTtcbnZhciBfYmFzZVVJID0gcmVxdWlyZShcImJhc2VVSVwiKTtcbnZhciBtID0gY2MuX2RlY29yYXRvcjtcbnZhciB2ID0gbS5jY2NsYXNzO1xudmFyIF8gPSBtLnByb3BlcnR5O1xudmFyIGIgPSAoZnVuY3Rpb24gKHQpIHtcbiAgICBmdW5jdGlvbiBlKCkge1xuICAgICAgICB2YXIgZSA9IChudWxsICE9PSB0ICYmIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSkgfHwgdGhpcztcbiAgICAgICAgZS5jb250ZW50ID0gbnVsbDtcbiAgICAgICAgZS5xdWVzdEl0ZW0gPSBudWxsO1xuICAgICAgICBlLnRMYWJsZSA9IG51bGw7XG4gICAgICAgIGUuYnRuc3BmID0gW107XG4gICAgICAgIGUuYnRuc3AgPSBbXTtcbiAgICAgICAgZS5zY3JvbGxWaWV3ID0gbnVsbDtcbiAgICAgICAgZS50b3AgPSBudWxsO1xuICAgICAgICBlLmJnTm9kZSA9IG51bGw7XG4gICAgICAgIGUudG9wQmdTcCA9IG51bGw7XG4gICAgICAgIGUudG9wQmdTcDEgPSBudWxsO1xuICAgICAgICBlLl90YXNrVHlwID0gX3Rhc2tNZ3IudGFza0NoYW5uZWwuZGFpbHk7XG4gICAgICAgIGUucXVlc3RQb29sID0gbmV3IGNjLk5vZGVQb29sKF9xdWVzdEl0ZW0uZGVmYXVsdCk7XG4gICAgICAgIGUubGFzdFNjcm9sbFBvc2l0aW9uID0gMDtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIF9fZXh0ZW5kcyhlLCB0KTtcbiAgICBlLnByb3RvdHlwZS5vbkxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgdGhpcy5ub2RlLmhlaWdodCA9IGNjLndpblNpemUuaGVpZ2h0O1xuICAgICAgICB0aGlzLnRhc2tUeXAgPSBfdGFza01nci50YXNrQ2hhbm5lbC5kYWlseTtcbiAgICAgICAgdGhpcy50TGFibGUuZm9udCA9IF9sb2FkaW5nLkRFRkFVTFRGT05UO1xuICAgICAgICBfZ2xvYmFsLmRlZmF1bHQucGFkU2NhbGUgJiYgKHRoaXMuYmdOb2RlLnNjYWxlID0gX2dsb2JhbC5kZWZhdWx0LnBhZFNjYWxlKTtcbiAgICAgICAgdGhpcy5zY3JvbGxWaWV3Lm5vZGUub24oXG4gICAgICAgICAgICBcInNjcm9sbGluZ1wiLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHQucGFnZVNjcm9sbCghMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhpc1xuICAgICAgICApO1xuICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHt9O1xuICAgIGUucHJvdG90eXBlLmxvYWRJdGVtID0gZnVuY3Rpb24gKHQsIGUsIG8pIHtcbiAgICAgICAgdmFyIG4gPSB0aGlzLnF1ZXN0SXRlbTtcbiAgICAgICAgaWYgKHQgPCBvLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGkgPSBvW3RdO1xuICAgICAgICAgICAgKGEgPSB0aGlzLnF1ZXN0UG9vbC5nZXQoKSkgfHwgKGEgPSBjYy5pbnN0YW50aWF0ZShuKSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuYWRkQ2hpbGQoYSk7XG4gICAgICAgICAgICBhLmFjdGl2ZSA9ICExO1xuICAgICAgICAgICAgYS56SW5kZXggPSAwO1xuICAgICAgICAgICAgYS5nZXRDb21wb25lbnQoX3F1ZXN0SXRlbS5kZWZhdWx0KS5pbml0KGVbaS5rZXldKTtcbiAgICAgICAgICAgIHQrKztcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKHRoaXMubG9hZEl0ZW0uYmluZCh0aGlzLCB0LCBlLCBvKSwgMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnQuY2hpbGRyZW4uc29ydChmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICAgICAgICAgIHZhciBvID0gdC5nZXRDb21wb25lbnQoX3F1ZXN0SXRlbS5kZWZhdWx0KS50YXNrRGF0YS5kYXRhLnN0YXRlO1xuICAgICAgICAgICAgICAgIHZhciBuID0gZS5nZXRDb21wb25lbnQoX3F1ZXN0SXRlbS5kZWZhdWx0KS50YXNrRGF0YS5kYXRhLnN0YXRlO1xuICAgICAgICAgICAgICAgIHJldHVybiBvID09IG5cbiAgICAgICAgICAgICAgICAgICAgPyAwXG4gICAgICAgICAgICAgICAgICAgIDogbyA9PSBfdGFza01nci50YXNrU3RhdGUuRmluaXNoXG4gICAgICAgICAgICAgICAgICAgID8gLTFcbiAgICAgICAgICAgICAgICAgICAgOiBuID09IF90YXNrTWdyLnRhc2tTdGF0ZS5GaW5pc2hcbiAgICAgICAgICAgICAgICAgICAgPyAxXG4gICAgICAgICAgICAgICAgICAgIDogbyA9PSBfdGFza01nci50YXNrU3RhdGUuUmV3YXJlZFxuICAgICAgICAgICAgICAgICAgICA/IDFcbiAgICAgICAgICAgICAgICAgICAgOiBuID09IF90YXNrTWdyLnRhc2tTdGF0ZS5SZXdhcmVkXG4gICAgICAgICAgICAgICAgICAgID8gLTFcbiAgICAgICAgICAgICAgICAgICAgOiB2b2lkIDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgdGhpcy5jb250ZW50LmNoaWxkcmVuLmxlbmd0aDsgcisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGE7XG4gICAgICAgICAgICAgICAgKGEgPSB0aGlzLmNvbnRlbnQuY2hpbGRyZW5bcl0pLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0NoZ0FuaSB8fFxuICAgICAgICAgICAgICAgICAgICAoKGEub3BhY2l0eSA9IDApLCB0aGlzLnNjaGVkdWxlT25jZSh0aGlzLnNob3dDaGFuZ2VnQW5pLmJpbmQodGhpcywgYSksIDAuMSAqIChyICsgMSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFzdFNjcm9sbFBvc2l0aW9uID0gMDtcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKHRoaXMucGFnZVNjcm9sbC5iaW5kKHRoaXMsICExKSwgMCk7XG4gICAgICAgICAgICB0aGlzLnNob3dDaGdBbmkgfHwgKHRoaXMuc2hvd0NoZ0FuaSA9ICEwKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZS5wcm90b3R5cGUuaW5pdFZpZXcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgdGhpcy5jb3VudFRhc2tVcGRUaW1lKCk7XG4gICAgICAgIHZhciBlID0gX2NmZ01nci5kZWZhdWx0LnNlcnZlckNmZ1t0aGlzLl90YXNrVHlwXTtcbiAgICAgICAgdmFyIG8gPSBfdGFza01nci5kZWZhdWx0LmdldFRhc2tCeVR5cGUodGhpcy5fdGFza1R5cCk7XG4gICAgICAgIHRoaXMuY29udGVudC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0LmRlc3Bhd25Ob2RlKGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb250ZW50LnJlbW92ZUFsbENoaWxkcmVuKCk7XG4gICAgICAgIHZhciBuID0gbnVsbCA9PSBlID8gdm9pZCAwIDogZS5ydWxlcztcbiAgICAgICAgdGhpcy5sb2FkSXRlbSgwLCBvLCBuKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLnVwZFRhc2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW5pdFZpZXcoKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLmNvdW50VGFza1VwZFRpbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ID0gX3RpbWUuZGVmYXVsdC5pbnMubmV4dFplcm9UaW1lIC8gMWUzO1xuICAgICAgICB0aGlzLnRMYWJsZS5zdHJpbmcgPSBfdGltZS5kZWZhdWx0LmdldEZvcm1hdEhNUyh0KTtcbiAgICAgICAgdCA8PSAwICYmIHRoaXMuaW5pdFZpZXcoKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uRW5hYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIF9ldnRzLmRlZmF1bHQub3BFLm9uKHRoaXMub25PcGVyVGFwLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlKHRoaXMuY291bnRUYXNrVXBkVGltZSwgMSwgY2MubWFjcm8uUkVQRUFUX0ZPUkVWRVIpO1xuICAgICAgICB0aGlzLmluaXRWaWV3KCk7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHQudG9wLnkgLT0gX215U2FmZUFyZWEuZ2V0U2FmZUFyZWFSZWN0KCkueU1pbjtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbkRpc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9ldnRzLmRlZmF1bHQub3BFLm9mZih0aGlzLm9uT3BlclRhcC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy51bnNjaGVkdWxlKHRoaXMuY291bnRUYXNrVXBkVGltZSk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbk9wZXJUYXAgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuYWN0aW9uO1xuICAgICAgICBpZiAoZSlcbiAgICAgICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgX2V2dHMuZGVmYXVsdC5VUERfUEFORUw6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkVGFzaygpO1xuICAgICAgICAgICAgfVxuICAgIH07XG4gICAgZS5wcm90b3R5cGUucGFnZVN3aXRjaCA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgIHRoaXMuX3Rhc2tUeXAgIT0gZSAmJlxuICAgICAgICAgICAgKGUgIT0gX3Rhc2tNZ3IudGFza0NoYW5uZWwuYWNoaWV2ZVxuICAgICAgICAgICAgICAgID8gKCh0aGlzLnRhc2tUeXAgPSBlKSwgdGhpcy5pbml0VmlldygpKVxuICAgICAgICAgICAgICAgIDogX3RpcE1nci5kZWZhdWx0Lmlucy5zaG93VGlwKF9sYW5nLmxhbmdbMTAwMDRdKSk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIFwidGFza1R5cFwiLCB7XG4gICAgICAgIHNldDogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rhc2tUeXAgPSB0O1xuICAgICAgICAgICAgdmFyIGUgPSB0ID09IF90YXNrTWdyLnRhc2tDaGFubmVsLmRhaWx5ID8gMCA6IDE7XG4gICAgICAgICAgICB0aGlzLmJ0bnNwWzBdLnNwcml0ZUZyYW1lID0gdGhpcy5idG5zcGZbZV07XG4gICAgICAgICAgICB0aGlzLmJ0bnNwWzFdLnNwcml0ZUZyYW1lID0gdGhpcy5idG5zcGZbMSBeIGVdO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiAhMSxcbiAgICAgICAgY29uZmlndXJhYmxlOiAhMFxuICAgIH0pO1xuICAgIGUucHJvdG90eXBlLmRlc3Bhd25Ob2RlID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgdGhpcy5xdWVzdFBvb2wucHV0KHQpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubm9kZS5oZWlnaHQgPSBjYy53aW5TaXplLmhlaWdodDtcbiAgICAgICAgdmFyIHQgPSBfbXlTYWZlQXJlYS5nZXRTYWZlQXJlYVJlY3QoKS55TWluO1xuICAgICAgICB2YXIgZSA9IGNjLndpblNpemUuaGVpZ2h0IC0gMTI4MCAtIHQ7XG4gICAgICAgIHRoaXMuc2Nyb2xsVmlldy5ub2RlLmhlaWdodCArPSBlO1xuICAgICAgICB0aGlzLnNjcm9sbFZpZXcuY29udGVudC5oZWlnaHQgKz0gZTtcbiAgICAgICAgdGhpcy5zY3JvbGxWaWV3LmNvbnRlbnQucGFyZW50LmhlaWdodCArPSBlO1xuICAgICAgICB0aGlzLnRvcEJnU3AuaGVpZ2h0ICs9IGU7XG4gICAgICAgIHRoaXMudG9wQmdTcDEuaGVpZ2h0ICs9IGU7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5wYWdlU2Nyb2xsID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgdm9pZCAwID09PSB0ICYmICh0ID0gITApO1xuICAgICAgICB2YXIgZSA9IHRoaXMuY29udGVudC5jaGlsZHJlbjtcbiAgICAgICAgdmFyIG8gPSB0aGlzLnNjcm9sbFZpZXcuZ2V0U2Nyb2xsT2Zmc2V0KCkueTtcbiAgICAgICAgaWYgKCEodCAmJiBNYXRoLmFicyhvIC0gdGhpcy5sYXN0U2Nyb2xsUG9zaXRpb24pIDwgMSkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIG4gPSB0aGlzLmNvbnRlbnQucGFyZW50LmhlaWdodCwgaSA9IDA7IGkgPCBlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHIgPSBlW2ldO1xuICAgICAgICAgICAgICAgIHZhciBhID0gci5jb252ZXJ0VG9Xb3JsZFNwYWNlQVIoY2MuVmVjMi5aRVJPKTtcbiAgICAgICAgICAgICAgICAoYSA9IHRoaXMuY29udGVudC5wYXJlbnQuY29udmVydFRvTm9kZVNwYWNlQVIoYSkpLnkgKyAxMTAgPCAtbiB8fCBhLnkgLSAxMTAgPiAwXG4gICAgICAgICAgICAgICAgICAgID8gKHIuY2hpbGRyZW5bMF0uYWN0aXZlID0gITEpXG4gICAgICAgICAgICAgICAgICAgIDogKHIuY2hpbGRyZW5bMF0uYWN0aXZlID0gITApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXN0U2Nyb2xsUG9zaXRpb24gPSBvO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5zaG93Q2hhbmdlZ0FuaSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIGNjLnR3ZWVuKHQpLnRvKDAuMiwge29wYWNpdHk6IDI1NX0pLnN0YXJ0KCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5oaWRlVGhpcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtfKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiY29udGVudFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW18oY2MuUHJlZmFiKV0sIGUucHJvdG90eXBlLCBcInF1ZXN0SXRlbVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW18oY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwidExhYmxlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXyhjYy5TcHJpdGVGcmFtZSldLCBlLnByb3RvdHlwZSwgXCJidG5zcGZcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtfKGNjLlNwcml0ZSldLCBlLnByb3RvdHlwZSwgXCJidG5zcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW18oY2MuU2Nyb2xsVmlldyldLCBlLnByb3RvdHlwZSwgXCJzY3JvbGxWaWV3XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbXyhjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcInRvcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW18oY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJiZ05vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtfKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwidG9wQmdTcFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW18oY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJ0b3BCZ1NwMVwiLCB2b2lkIDApO1xuICAgIHJldHVybiBfX2RlY29yYXRlKFt2XSwgZSk7XG59KShfYmFzZVVJLmRlZmF1bHQpO1xuZXhwb3J0cy5kZWZhdWx0ID0gYjtcbiJdfQ==