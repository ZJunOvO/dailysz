
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_rePlay.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '24caeZaNyxM8KAZRT3lrCcp', 'ui_rePlay');
// scripts/ui_rePlay.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _evts = require("evts");

var _idx = require("idx");

var _res = require("res");

var _cfgMgr = require("cfgMgr");

var _global = require("global");

var _bagMgr = require("bagMgr");

var _festivalMgr = require("festivalMgr");

var _levelMgr = require("levelMgr");

var _panelMgr = require("panelMgr");

var _pInfo = require("pInfo");

var _game = require("game");

var _baseUI = require("baseUI");

var v = cc._decorator;
var _ = v.ccclass;
var b = v.property;

var w = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.endTitleNode = null;
    e.pauseTitleNode = null;
    e.shareBtn = null;
    e.shareIcon = null;
    e.shareCount = null;
    e.curLb = null;
    e.preLb = null;
    e.curScoreLbl = null;
    e.preBestScore = null;
    return e;
  }

  __extends(e, t);

  e.prototype.onLoad = function () {
    _evts["default"].opE.on(this.onOperTap.bind(this));
  };

  e.prototype.onOperTap = function (t) {
    var e = null == t ? void 0 : t.action;
    if (e) switch (e) {
      case _evts["default"].SHOWVIDEOSHARE:
        _game["default"].type != _pInfo.gameType.practice && this.shareBtn && (this.shareBtn.active = !0);
    }
  };

  e.prototype.init = function (t) {
    var e = t.curScore;
    var o = t.continueCb;
    this.continueCb = o;
    var n = this.endTitleNode.active = !o;
    this.pauseTitleNode.active = !!o;
    n && _idx.platform.stopVideoRecord();
    var i = _game["default"].type;
    var r = _pInfo["default"].ins;
    var a = this.shareIcon;
    var u = this.shareCount;
    var p = _cfgMgr["default"].serverCfg.share_rules.rules;
    var d = p.main_line.val;
    var f = p.main_line.props;
    this.curScore = e;

    _levelMgr["default"].ins.getLevelCost();

    var m = "当前连胜:";
    var v = "最高连胜:";

    var _ = r.getConsWinTimes();

    var b = r.getRecordData().main.heWins || 0;
    i == _pInfo.gameType.race && (m = "当前积分:", v = "最高积分:", _ = e, b = r.getRecordData().race.hePoints || 0, d = p.qw_line.val, f = p.qw_line.props);
    this.curLb.string = m;
    this.preLb.string = v;
    this.curScoreLbl.string = _ + "";
    this.preBestScore.string = b + "";

    _res["default"].ins.getBundleByString("resSps").then(function (t) {
      a.spriteFrame = t.get("item/" + f, cc.SpriteFrame);
    })["catch"](function (t) {
      console.error("RTool.ins.getBundleByString('resSps')", t);
    });

    u.string = "+" + d;
    a.node.active = (i == _pInfo.gameType.race ? r.getRaceShareTime() : r.getNormalShareTime()) < 3;
  };

  e.prototype.getPower = function (t) {
    _pInfo["default"].ins.addPower(t);
  };

  e.prototype.onContinue = function () {
    var t;
    this.hide();
    null === (t = this.continueCb) || void 0 === t || t.call(this);
  };

  e.prototype.onClose = function () {
    this.continueCb ? this.onContinue() : this.hideThis();
  };

  e.prototype.onShare = function () {
    var t = this;

    _idx.platform.shareVideoRecord().then(function (e) {
      var o = t.shareIcon;

      if (1 == e && o && o.isValid && o.node.active) {
        var n = _game["default"].type == _pInfo.gameType.race;
        var i = _pInfo["default"].ins;
        var r = void 0;
        var a = void 0;
        var s = void 0;
        var c = _cfgMgr["default"].serverCfg.share_rules.rules;

        if (n) {
          s = c.qw_line.val;
          a = c.qw_line.props;
          var u = i.getRaceShareTime();
          i.setRaceShareTime(u + 1);
        } else s = c.main_line.val, a = c.main_line.props, u = i.getNormalShareTime(), i.setNormalShareTime(u + 1);

        switch (a) {
          case "coin":
            r = i.getCoin(), i.addCoin(s);
            break;

          case "times":
            i.addPower(s);
            break;

          default:
            _bagMgr["default"].ins.addItem(a, s);

        }

        var d = t.shareIcon.node.parent.convertToWorldSpaceAR(t.shareIcon.node.position);

        _panelMgr["default"].ins.open("ui/ui_flyAni", {
          itemDatas: [{
            itemId: a,
            worldPos: d,
            value: s
          }],
          showCoin: r
        });

        t.shareBtn.active = !1;
      }
    })["catch"](function () {
      console.error("shareErr");
    });
  };

  e.prototype.onBtnGuide = function () {
    _pInfo.chgScene(_pInfo.sceneType.guide);
  };

  e.prototype.onBtnTrain = function () {
    _pInfo.chgScene(_pInfo.sceneType.game, {
      gameType: _pInfo.gameType.practice
    });
  };

  e.prototype.hideThis = function () {
    var t = _game["default"].type;
    t == _pInfo.gameType.race ? (_global["default"].loadToRace = 4, _festivalMgr["default"].ins.updPro(_festivalMgr.fesTaskKey.raceScore, this.curScore)) : t == _pInfo.gameType.challenge && (_global["default"].loadToRace = 3);
    t != _pInfo.gameType.practice ? (_pInfo["default"].ins.recordGameResult(_game["default"].type, !1, this.curScore), _pInfo.chgScene(_pInfo.sceneType.main, {
      cb: void 0
    })) : _pInfo.chgScene(_pInfo.sceneType.main);
  };

  __decorate([b(cc.Node)], e.prototype, "endTitleNode", void 0);

  __decorate([b(cc.Node)], e.prototype, "pauseTitleNode", void 0);

  __decorate([b(cc.Node)], e.prototype, "shareBtn", void 0);

  __decorate([b(cc.Sprite)], e.prototype, "shareIcon", void 0);

  __decorate([b(cc.Label)], e.prototype, "shareCount", void 0);

  __decorate([b(cc.Label)], e.prototype, "curLb", void 0);

  __decorate([b(cc.Label)], e.prototype, "preLb", void 0);

  __decorate([b(cc.Label)], e.prototype, "curScoreLbl", void 0);

  __decorate([b(cc.Label)], e.prototype, "preBestScore", void 0);

  return __decorate([_], e);
}(_baseUI["default"]);

exports["default"] = w;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfcmVQbGF5LmpzIl0sIm5hbWVzIjpbIm4iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl9ldnRzIiwicmVxdWlyZSIsIl9pZHgiLCJfcmVzIiwiX2NmZ01nciIsIl9nbG9iYWwiLCJfYmFnTWdyIiwiX2Zlc3RpdmFsTWdyIiwiX2xldmVsTWdyIiwiX3BhbmVsTWdyIiwiX3BJbmZvIiwiX2dhbWUiLCJfYmFzZVVJIiwidiIsImNjIiwiX2RlY29yYXRvciIsIl8iLCJjY2NsYXNzIiwiYiIsInByb3BlcnR5IiwidyIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJlbmRUaXRsZU5vZGUiLCJwYXVzZVRpdGxlTm9kZSIsInNoYXJlQnRuIiwic2hhcmVJY29uIiwic2hhcmVDb3VudCIsImN1ckxiIiwicHJlTGIiLCJjdXJTY29yZUxibCIsInByZUJlc3RTY29yZSIsIl9fZXh0ZW5kcyIsInByb3RvdHlwZSIsIm9uTG9hZCIsIm9wRSIsIm9uIiwib25PcGVyVGFwIiwiYmluZCIsImFjdGlvbiIsIlNIT1dWSURFT1NIQVJFIiwidHlwZSIsImdhbWVUeXBlIiwicHJhY3RpY2UiLCJhY3RpdmUiLCJpbml0IiwiY3VyU2NvcmUiLCJvIiwiY29udGludWVDYiIsInBsYXRmb3JtIiwic3RvcFZpZGVvUmVjb3JkIiwiaSIsInIiLCJpbnMiLCJhIiwidSIsInAiLCJzZXJ2ZXJDZmciLCJzaGFyZV9ydWxlcyIsInJ1bGVzIiwiZCIsIm1haW5fbGluZSIsInZhbCIsImYiLCJwcm9wcyIsImdldExldmVsQ29zdCIsIm0iLCJnZXRDb25zV2luVGltZXMiLCJnZXRSZWNvcmREYXRhIiwibWFpbiIsImhlV2lucyIsInJhY2UiLCJoZVBvaW50cyIsInF3X2xpbmUiLCJzdHJpbmciLCJnZXRCdW5kbGVCeVN0cmluZyIsInRoZW4iLCJzcHJpdGVGcmFtZSIsImdldCIsIlNwcml0ZUZyYW1lIiwiY29uc29sZSIsImVycm9yIiwibm9kZSIsImdldFJhY2VTaGFyZVRpbWUiLCJnZXROb3JtYWxTaGFyZVRpbWUiLCJnZXRQb3dlciIsImFkZFBvd2VyIiwib25Db250aW51ZSIsImhpZGUiLCJjYWxsIiwib25DbG9zZSIsImhpZGVUaGlzIiwib25TaGFyZSIsInNoYXJlVmlkZW9SZWNvcmQiLCJpc1ZhbGlkIiwicyIsImMiLCJzZXRSYWNlU2hhcmVUaW1lIiwic2V0Tm9ybWFsU2hhcmVUaW1lIiwiZ2V0Q29pbiIsImFkZENvaW4iLCJhZGRJdGVtIiwicGFyZW50IiwiY29udmVydFRvV29ybGRTcGFjZUFSIiwicG9zaXRpb24iLCJvcGVuIiwiaXRlbURhdGFzIiwiaXRlbUlkIiwid29ybGRQb3MiLCJzaG93Q29pbiIsIm9uQnRuR3VpZGUiLCJjaGdTY2VuZSIsInNjZW5lVHlwZSIsImd1aWRlIiwib25CdG5UcmFpbiIsImdhbWUiLCJsb2FkVG9SYWNlIiwidXBkUHJvIiwiZmVzVGFza0tleSIsInJhY2VTY29yZSIsImNoYWxsZW5nZSIsInJlY29yZEdhbWVSZXN1bHQiLCJjYiIsIl9fZGVjb3JhdGUiLCJOb2RlIiwiU3ByaXRlIiwiTGFiZWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBSjtBQUNBQyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0VBQUNDLEtBQUssRUFBRSxDQUFDO0FBQVQsQ0FBN0M7O0FBQ0EsSUFBSUMsS0FBSyxHQUFHQyxPQUFPLENBQUMsTUFBRCxDQUFuQjs7QUFDQSxJQUFJQyxJQUFJLEdBQUdELE9BQU8sQ0FBQyxLQUFELENBQWxCOztBQUNBLElBQUlFLElBQUksR0FBR0YsT0FBTyxDQUFDLEtBQUQsQ0FBbEI7O0FBQ0EsSUFBSUcsT0FBTyxHQUFHSCxPQUFPLENBQUMsUUFBRCxDQUFyQjs7QUFDQSxJQUFJSSxPQUFPLEdBQUdKLE9BQU8sQ0FBQyxRQUFELENBQXJCOztBQUNBLElBQUlLLE9BQU8sR0FBR0wsT0FBTyxD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QTdCLEVBQXNDLEtBQUssQ0FBM0MsQ0FBVjs7RUFDQTBGLFVBQVUsQ0FBQyxDQUFDM0csQ0FBQyxDQUFDSixFQUFFLENBQUNrSCxLQUFKLENBQUYsQ0FBRCxFQUFnQjFHLENBQUMsQ0FBQ2EsU0FBbEIsRUFBNkIsT0FBN0IsRUFBc0MsS0FBSyxDQUEzQyxDQUFWOztFQUNBMEYsVUFBVSxDQUFDLENBQUMzRyxDQUFDLENBQUNKLEVBQUUsQ0FBQ2tILEtBQUosQ0FBRixDQUFELEVBQWdCMUcsQ0FBQyxDQUFDYSxTQUFsQixFQUE2QixhQUE3QixFQUE0QyxLQUFLLENBQWpELENBQVY7O0VBQ0EwRixVQUFVLENBQUMsQ0FBQzNHLENBQUMsQ0FBQ0osRUFBRSxDQUFDa0gsS0FBSixDQUFGLENBQUQsRUFBZ0IxRyxDQUFDLENBQUNhLFNBQWxCLEVBQTZCLGNBQTdCLEVBQTZDLEtBQUssQ0FBbEQsQ0FBVjs7RUFDQSxPQUFPMEYsVUFBVSxDQUFDLENBQUM3RyxDQUFELENBQUQsRUFBTU0sQ0FBTixDQUFqQjtBQUNILENBdkpPLENBdUpMVixPQUFPLFdBdkpGLENBQVI7O0FBd0pBZCxPQUFPLFdBQVAsR0FBa0JzQixDQUFsQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG47XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHt2YWx1ZTogITB9KTtcbnZhciBfZXZ0cyA9IHJlcXVpcmUoXCJldnRzXCIpO1xudmFyIF9pZHggPSByZXF1aXJlKFwiaWR4XCIpO1xudmFyIF9yZXMgPSByZXF1aXJlKFwicmVzXCIpO1xudmFyIF9jZmdNZ3IgPSByZXF1aXJlKFwiY2ZnTWdyXCIpO1xudmFyIF9nbG9iYWwgPSByZXF1aXJlKFwiZ2xvYmFsXCIpO1xudmFyIF9iYWdNZ3IgPSByZXF1aXJlKFwiYmFnTWdyXCIpO1xudmFyIF9mZXN0aXZhbE1nciA9IHJlcXVpcmUoXCJmZXN0aXZhbE1nclwiKTtcbnZhciBfbGV2ZWxNZ3IgPSByZXF1aXJlKFwibGV2ZWxNZ3JcIik7XG52YXIgX3BhbmVsTWdyID0gcmVxdWlyZShcInBhbmVsTWdyXCIpO1xudmFyIF9wSW5mbyA9IHJlcXVpcmUoXCJwSW5mb1wiKTtcbnZhciBfZ2FtZSA9IHJlcXVpcmUoXCJnYW1lXCIpO1xudmFyIF9iYXNlVUkgPSByZXF1aXJlKFwiYmFzZVVJXCIpO1xudmFyIHYgPSBjYy5fZGVjb3JhdG9yO1xudmFyIF8gPSB2LmNjY2xhc3M7XG52YXIgYiA9IHYucHJvcGVydHk7XG52YXIgdyA9IChmdW5jdGlvbiAodCkge1xuICAgIGZ1bmN0aW9uIGUoKSB7XG4gICAgICAgIHZhciBlID0gKG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzO1xuICAgICAgICBlLmVuZFRpdGxlTm9kZSA9IG51bGw7XG4gICAgICAgIGUucGF1c2VUaXRsZU5vZGUgPSBudWxsO1xuICAgICAgICBlLnNoYXJlQnRuID0gbnVsbDtcbiAgICAgICAgZS5zaGFyZUljb24gPSBudWxsO1xuICAgICAgICBlLnNoYXJlQ291bnQgPSBudWxsO1xuICAgICAgICBlLmN1ckxiID0gbnVsbDtcbiAgICAgICAgZS5wcmVMYiA9IG51bGw7XG4gICAgICAgIGUuY3VyU2NvcmVMYmwgPSBudWxsO1xuICAgICAgICBlLnByZUJlc3RTY29yZSA9IG51bGw7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBfX2V4dGVuZHMoZSwgdCk7XG4gICAgZS5wcm90b3R5cGUub25Mb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfZXZ0cy5kZWZhdWx0Lm9wRS5vbih0aGlzLm9uT3BlclRhcC5iaW5kKHRoaXMpKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uT3BlclRhcCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBlID0gbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5hY3Rpb247XG4gICAgICAgIGlmIChlKVxuICAgICAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBfZXZ0cy5kZWZhdWx0LlNIT1dWSURFT1NIQVJFOlxuICAgICAgICAgICAgICAgICAgICBfZ2FtZS5kZWZhdWx0LnR5cGUgIT0gX3BJbmZvLmdhbWVUeXBlLnByYWN0aWNlICYmIHRoaXMuc2hhcmVCdG4gJiYgKHRoaXMuc2hhcmVCdG4uYWN0aXZlID0gITApO1xuICAgICAgICAgICAgfVxuICAgIH07XG4gICAgZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBlID0gdC5jdXJTY29yZTtcbiAgICAgICAgdmFyIG8gPSB0LmNvbnRpbnVlQ2I7XG4gICAgICAgIHRoaXMuY29udGludWVDYiA9IG87XG4gICAgICAgIHZhciBuID0gKHRoaXMuZW5kVGl0bGVOb2RlLmFjdGl2ZSA9ICFvKTtcbiAgICAgICAgdGhpcy5wYXVzZVRpdGxlTm9kZS5hY3RpdmUgPSAhIW87XG4gICAgICAgIG4gJiYgX2lkeC5wbGF0Zm9ybS5zdG9wVmlkZW9SZWNvcmQoKTtcbiAgICAgICAgdmFyIGkgPSBfZ2FtZS5kZWZhdWx0LnR5cGU7XG4gICAgICAgIHZhciByID0gX3BJbmZvLmRlZmF1bHQuaW5zO1xuICAgICAgICB2YXIgYSA9IHRoaXMuc2hhcmVJY29uO1xuICAgICAgICB2YXIgdSA9IHRoaXMuc2hhcmVDb3VudDtcbiAgICAgICAgdmFyIHAgPSBfY2ZnTWdyLmRlZmF1bHQuc2VydmVyQ2ZnLnNoYXJlX3J1bGVzLnJ1bGVzO1xuICAgICAgICB2YXIgZCA9IHAubWFpbl9saW5lLnZhbDtcbiAgICAgICAgdmFyIGYgPSBwLm1haW5fbGluZS5wcm9wcztcbiAgICAgICAgdGhpcy5jdXJTY29yZSA9IGU7XG4gICAgICAgIF9sZXZlbE1nci5kZWZhdWx0Lmlucy5nZXRMZXZlbENvc3QoKTtcbiAgICAgICAgdmFyIG0gPSBcIuW9k+WJjei/nuiDnDpcIjtcbiAgICAgICAgdmFyIHYgPSBcIuacgOmrmOi/nuiDnDpcIjtcbiAgICAgICAgdmFyIF8gPSByLmdldENvbnNXaW5UaW1lcygpO1xuICAgICAgICB2YXIgYiA9IHIuZ2V0UmVjb3JkRGF0YSgpLm1haW4uaGVXaW5zIHx8IDA7XG4gICAgICAgIGkgPT0gX3BJbmZvLmdhbWVUeXBlLnJhY2UgJiZcbiAgICAgICAgICAgICgobSA9IFwi5b2T5YmN56ev5YiGOlwiKSxcbiAgICAgICAgICAgICh2ID0gXCLmnIDpq5jnp6/liIY6XCIpLFxuICAgICAgICAgICAgKF8gPSBlKSxcbiAgICAgICAgICAgIChiID0gci5nZXRSZWNvcmREYXRhKCkucmFjZS5oZVBvaW50cyB8fCAwKSxcbiAgICAgICAgICAgIChkID0gcC5xd19saW5lLnZhbCksXG4gICAgICAgICAgICAoZiA9IHAucXdfbGluZS5wcm9wcykpO1xuICAgICAgICB0aGlzLmN1ckxiLnN0cmluZyA9IG07XG4gICAgICAgIHRoaXMucHJlTGIuc3RyaW5nID0gdjtcbiAgICAgICAgdGhpcy5jdXJTY29yZUxibC5zdHJpbmcgPSBfICsgXCJcIjtcbiAgICAgICAgdGhpcy5wcmVCZXN0U2NvcmUuc3RyaW5nID0gYiArIFwiXCI7XG4gICAgICAgIF9yZXMuZGVmYXVsdC5pbnNcbiAgICAgICAgICAgIC5nZXRCdW5kbGVCeVN0cmluZyhcInJlc1Nwc1wiKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICBhLnNwcml0ZUZyYW1lID0gdC5nZXQoXCJpdGVtL1wiICsgZiwgY2MuU3ByaXRlRnJhbWUpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSVG9vbC5pbnMuZ2V0QnVuZGxlQnlTdHJpbmcoJ3Jlc1NwcycpXCIsIHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHUuc3RyaW5nID0gXCIrXCIgKyBkO1xuICAgICAgICBhLm5vZGUuYWN0aXZlID0gKGkgPT0gX3BJbmZvLmdhbWVUeXBlLnJhY2UgPyByLmdldFJhY2VTaGFyZVRpbWUoKSA6IHIuZ2V0Tm9ybWFsU2hhcmVUaW1lKCkpIDwgMztcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLmdldFBvd2VyID0gZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgX3BJbmZvLmRlZmF1bHQuaW5zLmFkZFBvd2VyKHQpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUub25Db250aW51ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMuY29udGludWVDYikgfHwgdm9pZCAwID09PSB0IHx8IHQuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uQ2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuY29udGludWVDYiA/IHRoaXMub25Db250aW51ZSgpIDogdGhpcy5oaWRlVGhpcygpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUub25TaGFyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICBfaWR4LnBsYXRmb3JtXG4gICAgICAgICAgICAuc2hhcmVWaWRlb1JlY29yZCgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBvID0gdC5zaGFyZUljb247XG4gICAgICAgICAgICAgICAgaWYgKDEgPT0gZSAmJiBvICYmIG8uaXNWYWxpZCAmJiBvLm5vZGUuYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuID0gX2dhbWUuZGVmYXVsdC50eXBlID09IF9wSW5mby5nYW1lVHlwZS5yYWNlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IF9wSW5mby5kZWZhdWx0LmlucztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBfY2ZnTWdyLmRlZmF1bHQuc2VydmVyQ2ZnLnNoYXJlX3J1bGVzLnJ1bGVzO1xuICAgICAgICAgICAgICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGMucXdfbGluZS52YWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBhID0gYy5xd19saW5lLnByb3BzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBpLmdldFJhY2VTaGFyZVRpbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkuc2V0UmFjZVNoYXJlVGltZSh1ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgKHMgPSBjLm1haW5fbGluZS52YWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhID0gYy5tYWluX2xpbmUucHJvcHMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh1ID0gaS5nZXROb3JtYWxTaGFyZVRpbWUoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5zZXROb3JtYWxTaGFyZVRpbWUodSArIDEpO1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb2luXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIgPSBpLmdldENvaW4oKSksIGkuYWRkQ29pbihzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aW1lc1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuYWRkUG93ZXIocyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iYWdNZ3IuZGVmYXVsdC5pbnMuYWRkSXRlbShhLCBzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IHQuc2hhcmVJY29uLm5vZGUucGFyZW50LmNvbnZlcnRUb1dvcmxkU3BhY2VBUih0LnNoYXJlSWNvbi5ub2RlLnBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgX3BhbmVsTWdyLmRlZmF1bHQuaW5zLm9wZW4oXCJ1aS91aV9mbHlBbmlcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbURhdGFzOiBbe2l0ZW1JZDogYSwgd29ybGRQb3M6IGQsIHZhbHVlOiBzfV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93Q29pbjogclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdC5zaGFyZUJ0bi5hY3RpdmUgPSAhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwic2hhcmVFcnJcIik7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uQnRuR3VpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9wSW5mby5jaGdTY2VuZShfcEluZm8uc2NlbmVUeXBlLmd1aWRlKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uQnRuVHJhaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9wSW5mby5jaGdTY2VuZShfcEluZm8uc2NlbmVUeXBlLmdhbWUsIHtnYW1lVHlwZTogX3BJbmZvLmdhbWVUeXBlLnByYWN0aWNlfSk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5oaWRlVGhpcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSBfZ2FtZS5kZWZhdWx0LnR5cGU7XG4gICAgICAgIHQgPT0gX3BJbmZvLmdhbWVUeXBlLnJhY2VcbiAgICAgICAgICAgID8gKChfZ2xvYmFsLmRlZmF1bHQubG9hZFRvUmFjZSA9IDQpLFxuICAgICAgICAgICAgICBfZmVzdGl2YWxNZ3IuZGVmYXVsdC5pbnMudXBkUHJvKF9mZXN0aXZhbE1nci5mZXNUYXNrS2V5LnJhY2VTY29yZSwgdGhpcy5jdXJTY29yZSkpXG4gICAgICAgICAgICA6IHQgPT0gX3BJbmZvLmdhbWVUeXBlLmNoYWxsZW5nZSAmJiAoX2dsb2JhbC5kZWZhdWx0LmxvYWRUb1JhY2UgPSAzKTtcbiAgICAgICAgdCAhPSBfcEluZm8uZ2FtZVR5cGUucHJhY3RpY2VcbiAgICAgICAgICAgID8gKF9wSW5mby5kZWZhdWx0Lmlucy5yZWNvcmRHYW1lUmVzdWx0KF9nYW1lLmRlZmF1bHQudHlwZSwgITEsIHRoaXMuY3VyU2NvcmUpLFxuICAgICAgICAgICAgICBfcEluZm8uY2hnU2NlbmUoX3BJbmZvLnNjZW5lVHlwZS5tYWluLCB7Y2I6IHZvaWQgMH0pKVxuICAgICAgICAgICAgOiBfcEluZm8uY2hnU2NlbmUoX3BJbmZvLnNjZW5lVHlwZS5tYWluKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW2IoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJlbmRUaXRsZU5vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtiKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwicGF1c2VUaXRsZU5vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtiKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwic2hhcmVCdG5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtiKGNjLlNwcml0ZSldLCBlLnByb3RvdHlwZSwgXCJzaGFyZUljb25cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtiKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcInNoYXJlQ291bnRcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtiKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcImN1ckxiXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbYihjYy5MYWJlbCldLCBlLnByb3RvdHlwZSwgXCJwcmVMYlwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2IoY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwiY3VyU2NvcmVMYmxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtiKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcInByZUJlc3RTY29yZVwiLCB2b2lkIDApO1xuICAgIHJldHVybiBfX2RlY29yYXRlKFtfXSwgZSk7XG59KShfYmFzZVVJLmRlZmF1bHQpO1xuZXhwb3J0cy5kZWZhdWx0ID0gdztcbiJdfQ==