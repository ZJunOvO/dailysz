
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_record.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5877d5aWgxD8Ls2f4nI5Jen', 'ui_record');
// scripts/ui_record.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _baseUI = require("baseUI");

var _pInfo = require("pInfo");

var _chaptBtn = require("chaptBtn");

var l = cc._decorator;
var u = l.ccclass;
var p = l.property;

var d = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.view = null;
    e.viewItem = null;
    e.btnsNode = null;
    e.nameStrs = {
      main: {
        gTimes: "游戏次数",
        wTimes: "胜利次数",
        heWins: "最高连胜",
        winRate: "胜率"
      },
      daily: {
        gTimes: "游戏次数",
        wTimes: "胜利次数",
        winRate: "胜率"
      },
      race: {
        gTimes: "游戏次数",
        tPoints: "总积分",
        hePoints: "最高积分"
      }
    };
    e.allData = {};
    e.btnsComp = [];
    e.rowSpace = 108;
    e.top_offest = 50;
    e.curPageIdx = 1;
    return e;
  }

  __extends(e, t);

  e.prototype.start = function () {
    for (var t = this, e = _pInfo["default"].ins.getRecordData(), o = function o(e, _o, i) {
      var r = _o[e].getComponent(_chaptBtn["default"]);

      r.setState(!1);
      i.push(r);

      _o[e].on("click", function () {
        t.chgViewData(e);
      }, n);
    }, n = this, i = 0, r = this.btnsNode.children, a = this.btnsComp, l = r.length; i < l; i++) {
      o(i, r, a);
    }

    this.allData = Object.assign({}, e);
    this.chgViewData(0);
  };

  e.prototype.chgViewData = function (t) {
    var e = this.curPageIdx;

    if (e != t) {
      var o;
      var n = {};
      var i = {};

      switch (t) {
        case 0:
          n = this.allData.main, i = this.nameStrs.main, o = n.wTimes / n.gTimes * 100 || 0, n.winRate = o.toFixed(0) + "%";
          break;

        case 1:
          n = this.allData.daily, i = this.nameStrs.daily, o = n.wTimes / n.gTimes * 100 || 0, n.winRate = o.toFixed(0) + "%";
          break;

        case 2:
          n = this.allData.race, i = this.nameStrs.race;
      }

      this.initListView(n, i);
      var r = this.btnsComp;
      r[e].setState(!1);
      r[t].setState(!0);
      this.curPageIdx = t;
    }
  };

  e.prototype.initListView = function (t, e) {
    for (var o = 0, n = this.view.content.childrenCount; o < n; o++) {
      this.view.content.children[o].active = !1;
    }

    var i = 0;

    for (var r in e) {
      var a;
      var s = e[r];
      var c = t[r] || 0;
      "feTime" == r && (c = this.timeFormat(c));
      this.view.content.childrenCount > i ? ((a = this.view.content.children[i]).active = !0, a.getChildByName("name").getComponent(cc.Label).string = s, a.getChildByName("num").getComponent(cc.Label).string = c) : ((a = cc.instantiate(this.viewItem)).parent = this.view.content, a.y = -i * this.rowSpace - this.top_offest, a.active = !0, a.getChildByName("name").getComponent(cc.Label).string = s, a.getChildByName("num").getComponent(cc.Label).string = c);
      i++;
    }
  };

  e.prototype.hideThis = function () {
    this.hide();
  };

  e.prototype.timeFormat = function (t, e) {
    void 0 === e && (e = !0);
    var o = this.PrefixInteger;

    if (t < 86400) {
      var n = o(Math.floor(t / 3600), 2);
      var i = o(Math.floor(t % 3600 / 60), 2);
      var r = o(t % 60, 2);
      return e && "00" == n ? i + ":" + r : n + ":" + i + ":" + r;
    }

    return Math.floor(t / 86400) + "d " + o(Math.floor(t % 86400 / 3600), 2) + ":" + o(Math.floor(t % 3600 / 60), 2) + ":" + o(t % 60, 2);
  };

  e.prototype.PrefixInteger = function (t, e) {
    return (t / Math.pow(10, e)).toFixed(e).substring(2);
  };

  __decorate([p(cc.ScrollView)], e.prototype, "view", void 0);

  __decorate([p(cc.Node)], e.prototype, "viewItem", void 0);

  __decorate([p(cc.Node)], e.prototype, "btnsNode", void 0);

  return __decorate([u], e);
}(_baseUI["default"]);

exports["default"] = d;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfcmVjb3JkLmpzIl0sIm5hbWVzIjpbIm4iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl9iYXNlVUkiLCJyZXF1aXJlIiwiX3BJbmZvIiwiX2NoYXB0QnRuIiwibCIsImNjIiwiX2RlY29yYXRvciIsInUiLCJjY2NsYXNzIiwicCIsInByb3BlcnR5IiwiZCIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJ2aWV3Iiwidmlld0l0ZW0iLCJidG5zTm9kZSIsIm5hbWVTdHJzIiwibWFpbiIsImdUaW1lcyIsIndUaW1lcyIsImhlV2lucyIsIndpblJhdGUiLCJkYWlseSIsInJhY2UiLCJ0UG9pbnRzIiwiaGVQb2ludHMiLCJhbGxEYXRhIiwiYnRuc0NvbXAiLCJyb3dTcGFjZSIsInRvcF9vZmZlc3QiLCJjdXJQYWdlSWR4IiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwic3RhcnQiLCJpbnMiLCJnZXRSZWNvcmREYXRhIiwibyIsImkiLCJyIiwiZ2V0Q29tcG9uZW50Iiwic2V0U3RhdGUiLCJwdXNoIiwib24iLCJjaGdWaWV3RGF0YSIsImNoaWxkcmVuIiwiYSIsImxlbmd0aCIsImFzc2lnbiIsInRvRml4ZWQiLCJpbml0TGlzdFZpZXciLCJjb250ZW50IiwiY2hpbGRyZW5Db3VudCIsImFjdGl2ZSIsInMiLCJjIiwidGltZUZvcm1hdCIsImdldENoaWxkQnlOYW1lIiwiTGFiZWwiLCJzdHJpbmciLCJpbnN0YW50aWF0ZSIsInBhcmVudCIsInkiLCJoaWRlVGhpcyIsImhpZGUiLCJQcmVmaXhJbnRlZ2VyIiwiTWF0aCIsImZsb29yIiwicG93Iiwic3Vic3RyaW5nIiwiX19kZWNvcmF0ZSIsIlNjcm9sbFZpZXciLCJOb2RlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7QUFDQUMsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEv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QWdCO0lBQ3hDLE9BQU8sQ0FBQ0QsQ0FBQyxHQUFHd0QsSUFBSSxDQUFDRSxHQUFMLENBQVMsRUFBVCxFQUFhekQsQ0FBYixDQUFMLEVBQXNCc0MsT0FBdEIsQ0FBOEJ0QyxDQUE5QixFQUFpQzBELFNBQWpDLENBQTJDLENBQTNDLENBQVA7RUFDSCxDQUZEOztFQUdBQyxVQUFVLENBQUMsQ0FBQy9ELENBQUMsQ0FBQ0osRUFBRSxDQUFDb0UsVUFBSixDQUFGLENBQUQsRUFBcUI1RCxDQUFDLENBQUNzQixTQUF2QixFQUFrQyxNQUFsQyxFQUEwQyxLQUFLLENBQS9DLENBQVY7O0VBQ0FxQyxVQUFVLENBQUMsQ0FBQy9ELENBQUMsQ0FBQ0osRUFBRSxDQUFDcUUsSUFBSixDQUFGLENBQUQsRUFBZTdELENBQUMsQ0FBQ3NCLFNBQWpCLEVBQTRCLFVBQTVCLEVBQXdDLEtBQUssQ0FBN0MsQ0FBVjs7RUFDQXFDLFVBQVUsQ0FBQyxDQUFDL0QsQ0FBQyxDQUFDSixFQUFFLENBQUNxRSxJQUFKLENBQUYsQ0FBRCxFQUFlN0QsQ0FBQyxDQUFDc0IsU0FBakIsRUFBNEIsVUFBNUIsRUFBd0MsS0FBSyxDQUE3QyxDQUFWOztFQUNBLE9BQU9xQyxVQUFVLENBQUMsQ0FBQ2pFLENBQUQsQ0FBRCxFQUFNTSxDQUFOLENBQWpCO0FBQ0gsQ0E3SE8sQ0E2SExiLE9BQU8sV0E3SEYsQ0FBUjs7QUE4SEFGLE9BQU8sV0FBUCxHQUFrQmEsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBuO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7dmFsdWU6ICEwfSk7XG52YXIgX2Jhc2VVSSA9IHJlcXVpcmUoXCJiYXNlVUlcIik7XG52YXIgX3BJbmZvID0gcmVxdWlyZShcInBJbmZvXCIpO1xudmFyIF9jaGFwdEJ0biA9IHJlcXVpcmUoXCJjaGFwdEJ0blwiKTtcbnZhciBsID0gY2MuX2RlY29yYXRvcjtcbnZhciB1ID0gbC5jY2NsYXNzO1xudmFyIHAgPSBsLnByb3BlcnR5O1xudmFyIGQgPSAoZnVuY3Rpb24gKHQpIHtcbiAgICBmdW5jdGlvbiBlKCkge1xuICAgICAgICB2YXIgZSA9IChudWxsICE9PSB0ICYmIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSkgfHwgdGhpcztcbiAgICAgICAgZS52aWV3ID0gbnVsbDtcbiAgICAgICAgZS52aWV3SXRlbSA9IG51bGw7XG4gICAgICAgIGUuYnRuc05vZGUgPSBudWxsO1xuICAgICAgICBlLm5hbWVTdHJzID0ge1xuICAgICAgICAgICAgbWFpbjoge2dUaW1lczogXCLmuLjmiI/mrKHmlbBcIiwgd1RpbWVzOiBcIuiDnOWIqeasoeaVsFwiLCBoZVdpbnM6IFwi5pyA6auY6L+e6IOcXCIsIHdpblJhdGU6IFwi6IOc546HXCJ9LFxuICAgICAgICAgICAgZGFpbHk6IHtnVGltZXM6IFwi5ri45oiP5qyh5pWwXCIsIHdUaW1lczogXCLog5zliKnmrKHmlbBcIiwgd2luUmF0ZTogXCLog5znjodcIn0sXG4gICAgICAgICAgICByYWNlOiB7Z1RpbWVzOiBcIua4uOaIj+asoeaVsFwiLCB0UG9pbnRzOiBcIuaAu+enr+WIhlwiLCBoZVBvaW50czogXCLmnIDpq5jnp6/liIZcIn1cbiAgICAgICAgfTtcbiAgICAgICAgZS5hbGxEYXRhID0ge307XG4gICAgICAgIGUuYnRuc0NvbXAgPSBbXTtcbiAgICAgICAgZS5yb3dTcGFjZSA9IDEwODtcbiAgICAgICAgZS50b3Bfb2ZmZXN0ID0gNTA7XG4gICAgICAgIGUuY3VyUGFnZUlkeCA9IDE7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBfX2V4dGVuZHMoZSwgdCk7XG4gICAgZS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgZSA9IF9wSW5mby5kZWZhdWx0Lmlucy5nZXRSZWNvcmREYXRhKCksXG4gICAgICAgICAgICAgICAgbyA9IGZ1bmN0aW9uIChlLCBvLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gb1tlXS5nZXRDb21wb25lbnQoX2NoYXB0QnRuLmRlZmF1bHQpO1xuICAgICAgICAgICAgICAgICAgICByLnNldFN0YXRlKCExKTtcbiAgICAgICAgICAgICAgICAgICAgaS5wdXNoKHIpO1xuICAgICAgICAgICAgICAgICAgICBvW2VdLm9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuY2hnVmlld0RhdGEoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgblxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbiA9IHRoaXMsXG4gICAgICAgICAgICAgICAgaSA9IDAsXG4gICAgICAgICAgICAgICAgciA9IHRoaXMuYnRuc05vZGUuY2hpbGRyZW4sXG4gICAgICAgICAgICAgICAgYSA9IHRoaXMuYnRuc0NvbXAsXG4gICAgICAgICAgICAgICAgbCA9IHIubGVuZ3RoO1xuICAgICAgICAgICAgaSA8IGw7XG4gICAgICAgICAgICBpKytcbiAgICAgICAgKVxuICAgICAgICAgICAgbyhpLCByLCBhKTtcbiAgICAgICAgdGhpcy5hbGxEYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgZSk7XG4gICAgICAgIHRoaXMuY2hnVmlld0RhdGEoMCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5jaGdWaWV3RGF0YSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBlID0gdGhpcy5jdXJQYWdlSWR4O1xuICAgICAgICBpZiAoZSAhPSB0KSB7XG4gICAgICAgICAgICB2YXIgbztcbiAgICAgICAgICAgIHZhciBuID0ge307XG4gICAgICAgICAgICB2YXIgaSA9IHt9O1xuICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAobiA9IHRoaXMuYWxsRGF0YS5tYWluKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChpID0gdGhpcy5uYW1lU3Rycy5tYWluKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIChvID0gKG4ud1RpbWVzIC8gbi5nVGltZXMpICogMTAwIHx8IDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgKG4ud2luUmF0ZSA9IG8udG9GaXhlZCgwKSArIFwiJVwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAobiA9IHRoaXMuYWxsRGF0YS5kYWlseSksXG4gICAgICAgICAgICAgICAgICAgICAgICAoaSA9IHRoaXMubmFtZVN0cnMuZGFpbHkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgKG8gPSAobi53VGltZXMgLyBuLmdUaW1lcykgKiAxMDAgfHwgMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAobi53aW5SYXRlID0gby50b0ZpeGVkKDApICsgXCIlXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIChuID0gdGhpcy5hbGxEYXRhLnJhY2UpLCAoaSA9IHRoaXMubmFtZVN0cnMucmFjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmluaXRMaXN0VmlldyhuLCBpKTtcbiAgICAgICAgICAgIHZhciByID0gdGhpcy5idG5zQ29tcDtcbiAgICAgICAgICAgIHJbZV0uc2V0U3RhdGUoITEpO1xuICAgICAgICAgICAgclt0XS5zZXRTdGF0ZSghMCk7XG4gICAgICAgICAgICB0aGlzLmN1clBhZ2VJZHggPSB0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5pbml0TGlzdFZpZXcgPSBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICBmb3IgKHZhciBvID0gMCwgbiA9IHRoaXMudmlldy5jb250ZW50LmNoaWxkcmVuQ291bnQ7IG8gPCBuOyBvKyspIHRoaXMudmlldy5jb250ZW50LmNoaWxkcmVuW29dLmFjdGl2ZSA9ICExO1xuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIGZvciAodmFyIHIgaW4gZSkge1xuICAgICAgICAgICAgdmFyIGE7XG4gICAgICAgICAgICB2YXIgcyA9IGVbcl07XG4gICAgICAgICAgICB2YXIgYyA9IHRbcl0gfHwgMDtcbiAgICAgICAgICAgIFwiZmVUaW1lXCIgPT0gciAmJiAoYyA9IHRoaXMudGltZUZvcm1hdChjKSk7XG4gICAgICAgICAgICB0aGlzLnZpZXcuY29udGVudC5jaGlsZHJlbkNvdW50ID4gaVxuICAgICAgICAgICAgICAgID8gKCgoYSA9IHRoaXMudmlldy5jb250ZW50LmNoaWxkcmVuW2ldKS5hY3RpdmUgPSAhMCksXG4gICAgICAgICAgICAgICAgICAoYS5nZXRDaGlsZEJ5TmFtZShcIm5hbWVcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBzKSxcbiAgICAgICAgICAgICAgICAgIChhLmdldENoaWxkQnlOYW1lKFwibnVtXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gYykpXG4gICAgICAgICAgICAgICAgOiAoKChhID0gY2MuaW5zdGFudGlhdGUodGhpcy52aWV3SXRlbSkpLnBhcmVudCA9IHRoaXMudmlldy5jb250ZW50KSxcbiAgICAgICAgICAgICAgICAgIChhLnkgPSAtaSAqIHRoaXMucm93U3BhY2UgLSB0aGlzLnRvcF9vZmZlc3QpLFxuICAgICAgICAgICAgICAgICAgKGEuYWN0aXZlID0gITApLFxuICAgICAgICAgICAgICAgICAgKGEuZ2V0Q2hpbGRCeU5hbWUoXCJuYW1lXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gcyksXG4gICAgICAgICAgICAgICAgICAoYS5nZXRDaGlsZEJ5TmFtZShcIm51bVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IGMpKTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgfVxuICAgIH07XG4gICAgZS5wcm90b3R5cGUuaGlkZVRoaXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUudGltZUZvcm1hdCA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9ICEwKTtcbiAgICAgICAgdmFyIG8gPSB0aGlzLlByZWZpeEludGVnZXI7XG4gICAgICAgIGlmICh0IDwgODY0MDApIHtcbiAgICAgICAgICAgIHZhciBuID0gbyhNYXRoLmZsb29yKHQgLyAzNjAwKSwgMik7XG4gICAgICAgICAgICB2YXIgaSA9IG8oTWF0aC5mbG9vcigodCAlIDM2MDApIC8gNjApLCAyKTtcbiAgICAgICAgICAgIHZhciByID0gbyh0ICUgNjAsIDIpO1xuICAgICAgICAgICAgcmV0dXJuIGUgJiYgXCIwMFwiID09IG4gPyBpICsgXCI6XCIgKyByIDogbiArIFwiOlwiICsgaSArIFwiOlwiICsgcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgTWF0aC5mbG9vcih0IC8gODY0MDApICtcbiAgICAgICAgICAgIFwiZCBcIiArXG4gICAgICAgICAgICBvKE1hdGguZmxvb3IoKHQgJSA4NjQwMCkgLyAzNjAwKSwgMikgK1xuICAgICAgICAgICAgXCI6XCIgK1xuICAgICAgICAgICAgbyhNYXRoLmZsb29yKCh0ICUgMzYwMCkgLyA2MCksIDIpICtcbiAgICAgICAgICAgIFwiOlwiICtcbiAgICAgICAgICAgIG8odCAlIDYwLCAyKVxuICAgICAgICApO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuUHJlZml4SW50ZWdlciA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgIHJldHVybiAodCAvIE1hdGgucG93KDEwLCBlKSkudG9GaXhlZChlKS5zdWJzdHJpbmcoMik7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtwKGNjLlNjcm9sbFZpZXcpXSwgZS5wcm90b3R5cGUsIFwidmlld1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW3AoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJ2aWV3SXRlbVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW3AoY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJidG5zTm9kZVwiLCB2b2lkIDApO1xuICAgIHJldHVybiBfX2RlY29yYXRlKFt1XSwgZSk7XG59KShfYmFzZVVJLmRlZmF1bHQpO1xuZXhwb3J0cy5kZWZhdWx0ID0gZDtcbiJdfQ==