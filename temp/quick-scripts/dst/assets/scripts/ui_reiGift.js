
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_reiGift.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '9a9f1ncodlJC6kx1e5N1SaD', 'ui_reiGift');
// scripts/ui_reiGift.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _cfgMgr = require("cfgMgr");

var _item = require("item");

var _bagMgr = require("bagMgr");

var _pInfo = require("pInfo");

var _baseUI = require("baseUI");

var p = cc._decorator;
var d = p.ccclass;
var h = p.property;

var f = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.itemSc = null;
    e.itemPre = null;
    return e;
  }

  __extends(e, t);

  e.prototype.init = function (t) {
    var e;
    var o;
    var n;
    var i;
    var r;
    var u;
    var p = t.serPacks;
    var d = {};
    var h = {};
    var f = null === (o = null === (e = _cfgMgr["default"].serverCfg) || void 0 === e ? void 0 : e.shop_config) || void 0 === o ? void 0 : o.gift;
    var g = {};
    if (f) for (var y in f) {
      var m = f[y];
      g[m.key] = m;
      d[m.key] = m;
    }
    var v = null === (i = null === (n = _cfgMgr["default"].serverCfg) || void 0 === n ? void 0 : n.buy_stamina) || void 0 === i ? void 0 : i.stamina;
    if (v) for (var y in v) {
      (b = v[y]) && (g[b.key] = b, h[b.key] = b);
    }

    var _ = null === (u = null === (r = _cfgMgr["default"].serverCfg) || void 0 === r ? void 0 : r.buy_gold_coins) || void 0 === u ? void 0 : u.gold_coins;

    if (_) for (var y in _) {
      var b;
      (b = _[y]) && (g[b.key] = b, h[b.key] = b);
    }
    this.itemSc.node.width = 530;

    for (var w = 0, S = p.length; w < S; w++) {
      var T = p[w];

      if (T) {
        var I = g[null == T ? void 0 : T.gift_id];
        var D = d[null == T ? void 0 : T.gift_id];
        var P = h[null == T ? void 0 : T.gift_id];
        if (D && _pInfo["default"].ins.addShopRecord(null == T ? void 0 : T.gift_id), P && _pInfo["default"].ins.addShopUnreset(null == T ? void 0 : T.gift_id), I && I.props) for (var k = 0; k < T.gift_num; k++) {
          for (var y in I.props) {
            var R = I.props[y];
            T.is_double && (R *= 2);

            _bagMgr["default"].ins.addItem(y, R);

            var N = cc.instantiate(this.itemPre);
            N.active = !0;
            this.itemSc.content.addChild(N);
            N.getComponent(_item["default"]).initByData(y, R);
          }
        }
      }
    }

    var C = this.itemSc.content.children[0].width * this.itemSc.content.childrenCount;
    this.itemSc.node.x = C > this.itemSc.node.width ? -262 : (this.itemSc.node.width - C) / 2 - 262;
    C = Math.min(C, 530);
    this.itemSc.node.width = C;
    this.itemSc.scrollToLeft();
  };

  e.prototype.hideThis = function () {
    this.hide();
  };

  __decorate([h(cc.ScrollView)], e.prototype, "itemSc", void 0);

  __decorate([h(cc.Node)], e.prototype, "itemPre", void 0);

  return __decorate([d], e);
}(_baseUI["default"]);

exports["default"] = f;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfcmVpR2lmdC5qcyJdLCJuYW1lcyI6WyJuIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJfY2ZnTWdyIiwicmVxdWlyZSIsIl9pdGVtIiwiX2JhZ01nciIsIl9wSW5mbyIsIl9iYXNlVUkiLCJwIiwiY2MiLCJfZGVjb3JhdG9yIiwiZCIsImNjY2xhc3MiLCJoIiwicHJvcGVydHkiLCJmIiwidCIsImUiLCJhcHBseSIsImFyZ3VtZW50cyIsIml0ZW1TYyIsIml0ZW1QcmUiLCJfX2V4dGVuZHMiLCJwcm90b3R5cGUiLCJpbml0IiwibyIsImkiLCJyIiwidSIsInNlclBhY2tzIiwic2VydmVyQ2ZnIiwic2hvcF9jb25maWciLCJnaWZ0IiwiZyIsInkiLCJtIiwia2V5IiwidiIsImJ1eV9zdGFtaW5hIiwic3RhbWluYSIsImIiLCJfIiwiYnV5X2dvbGRfY29pbnMiLCJnb2xkX2NvaW5zIiwibm9kZSIsIndpZHRoIiwidyIsIlMiLCJsZW5ndGgiLCJUIiwiSSIsImdpZnRfaWQiLCJEIiwiUCIsImlucyIsImFkZFNob3BSZWNvcmQiLCJhZGRTaG9wVW5yZXNldCIsInByb3BzIiwiayIsImdpZnRfbnVtIiwiUiIsImlzX2RvdWJsZSIsImFkZEl0ZW0iLCJOIiwiaW5zdGFudGlhdGUiLCJhY3RpdmUiLCJjb250ZW50IiwiYWRkQ2hpbGQiLCJnZXRDb21wb25lbnQiLCJpbml0QnlEYXRhIiwiQyIsImNoaWxkcmVuIiwiY2hpbGRyZW5Db3VudCIsIngiLCJNYXRoIiwibWluIiwic2Nyb2xsVG9MZWZ0IiwiaGlkZVRoaXMiLCJoaWRlIiwiX19kZWNvcmF0ZSIsIlNjcm9sbFZpZXciLCJOb2RlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7QUFDQUMsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztFQUFDQyxLQUFLLEVBQUUs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ZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHt2YWx1ZTogITB9KTtcbnZhciBfY2ZnTWdyID0gcmVxdWlyZShcImNmZ01nclwiKTtcbnZhciBfaXRlbSA9IHJlcXVpcmUoXCJpdGVtXCIpO1xudmFyIF9iYWdNZ3IgPSByZXF1aXJlKFwiYmFnTWdyXCIpO1xudmFyIF9wSW5mbyA9IHJlcXVpcmUoXCJwSW5mb1wiKTtcbnZhciBfYmFzZVVJID0gcmVxdWlyZShcImJhc2VVSVwiKTtcbnZhciBwID0gY2MuX2RlY29yYXRvcjtcbnZhciBkID0gcC5jY2NsYXNzO1xudmFyIGggPSBwLnByb3BlcnR5O1xudmFyIGYgPSAoZnVuY3Rpb24gKHQpIHtcbiAgICBmdW5jdGlvbiBlKCkge1xuICAgICAgICB2YXIgZSA9IChudWxsICE9PSB0ICYmIHQuYXBwbHkodGhpcywgYXJndW1lbnRzKSkgfHwgdGhpcztcbiAgICAgICAgZS5pdGVtU2MgPSBudWxsO1xuICAgICAgICBlLml0ZW1QcmUgPSBudWxsO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgX19leHRlbmRzKGUsIHQpO1xuICAgIGUucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgdmFyIG87XG4gICAgICAgIHZhciBuO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgdmFyIHI7XG4gICAgICAgIHZhciB1O1xuICAgICAgICB2YXIgcCA9IHQuc2VyUGFja3M7XG4gICAgICAgIHZhciBkID0ge307XG4gICAgICAgIHZhciBoID0ge307XG4gICAgICAgIHZhciBmID1cbiAgICAgICAgICAgIG51bGwgPT09IChvID0gbnVsbCA9PT0gKGUgPSBfY2ZnTWdyLmRlZmF1bHQuc2VydmVyQ2ZnKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnNob3BfY29uZmlnKSB8fFxuICAgICAgICAgICAgdm9pZCAwID09PSBvXG4gICAgICAgICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgICAgICAgICA6IG8uZ2lmdDtcbiAgICAgICAgdmFyIGcgPSB7fTtcbiAgICAgICAgaWYgKGYpXG4gICAgICAgICAgICBmb3IgKHZhciB5IGluIGYpIHtcbiAgICAgICAgICAgICAgICB2YXIgbSA9IGZbeV07XG4gICAgICAgICAgICAgICAgZ1ttLmtleV0gPSBtO1xuICAgICAgICAgICAgICAgIGRbbS5rZXldID0gbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgdmFyIHYgPVxuICAgICAgICAgICAgbnVsbCA9PT0gKGkgPSBudWxsID09PSAobiA9IF9jZmdNZ3IuZGVmYXVsdC5zZXJ2ZXJDZmcpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uYnV5X3N0YW1pbmEpIHx8XG4gICAgICAgICAgICB2b2lkIDAgPT09IGlcbiAgICAgICAgICAgICAgICA/IHZvaWQgMFxuICAgICAgICAgICAgICAgIDogaS5zdGFtaW5hO1xuICAgICAgICBpZiAodikgZm9yICh2YXIgeSBpbiB2KSAoYiA9IHZbeV0pICYmICgoZ1tiLmtleV0gPSBiKSwgKGhbYi5rZXldID0gYikpO1xuICAgICAgICB2YXIgXyA9XG4gICAgICAgICAgICBudWxsID09PSAodSA9IG51bGwgPT09IChyID0gX2NmZ01nci5kZWZhdWx0LnNlcnZlckNmZykgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci5idXlfZ29sZF9jb2lucykgfHxcbiAgICAgICAgICAgIHZvaWQgMCA9PT0gdVxuICAgICAgICAgICAgICAgID8gdm9pZCAwXG4gICAgICAgICAgICAgICAgOiB1LmdvbGRfY29pbnM7XG4gICAgICAgIGlmIChfKVxuICAgICAgICAgICAgZm9yICh2YXIgeSBpbiBfKSB7XG4gICAgICAgICAgICAgICAgdmFyIGI7XG4gICAgICAgICAgICAgICAgKGIgPSBfW3ldKSAmJiAoKGdbYi5rZXldID0gYiksIChoW2Iua2V5XSA9IGIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgdGhpcy5pdGVtU2Mubm9kZS53aWR0aCA9IDUzMDtcbiAgICAgICAgZm9yICh2YXIgdyA9IDAsIFMgPSBwLmxlbmd0aDsgdyA8IFM7IHcrKykge1xuICAgICAgICAgICAgdmFyIFQgPSBwW3ddO1xuICAgICAgICAgICAgaWYgKFQpIHtcbiAgICAgICAgICAgICAgICB2YXIgSSA9IGdbbnVsbCA9PSBUID8gdm9pZCAwIDogVC5naWZ0X2lkXTtcbiAgICAgICAgICAgICAgICB2YXIgRCA9IGRbbnVsbCA9PSBUID8gdm9pZCAwIDogVC5naWZ0X2lkXTtcbiAgICAgICAgICAgICAgICB2YXIgUCA9IGhbbnVsbCA9PSBUID8gdm9pZCAwIDogVC5naWZ0X2lkXTtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIChEICYmIF9wSW5mby5kZWZhdWx0Lmlucy5hZGRTaG9wUmVjb3JkKG51bGwgPT0gVCA/IHZvaWQgMCA6IFQuZ2lmdF9pZCksXG4gICAgICAgICAgICAgICAgICAgIFAgJiYgX3BJbmZvLmRlZmF1bHQuaW5zLmFkZFNob3BVbnJlc2V0KG51bGwgPT0gVCA/IHZvaWQgMCA6IFQuZ2lmdF9pZCksXG4gICAgICAgICAgICAgICAgICAgIEkgJiYgSS5wcm9wcylcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgVC5naWZ0X251bTsgaysrKVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgeSBpbiBJLnByb3BzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIFIgPSBJLnByb3BzW3ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQuaXNfZG91YmxlICYmIChSICo9IDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9iYWdNZ3IuZGVmYXVsdC5pbnMuYWRkSXRlbSh5LCBSKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgTiA9IGNjLmluc3RhbnRpYXRlKHRoaXMuaXRlbVByZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTi5hY3RpdmUgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1TYy5jb250ZW50LmFkZENoaWxkKE4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE4uZ2V0Q29tcG9uZW50KF9pdGVtLmRlZmF1bHQpLmluaXRCeURhdGEoeSwgUik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIEMgPSB0aGlzLml0ZW1TYy5jb250ZW50LmNoaWxkcmVuWzBdLndpZHRoICogdGhpcy5pdGVtU2MuY29udGVudC5jaGlsZHJlbkNvdW50O1xuICAgICAgICB0aGlzLml0ZW1TYy5ub2RlLnggPSBDID4gdGhpcy5pdGVtU2Mubm9kZS53aWR0aCA/IC0yNjIgOiAodGhpcy5pdGVtU2Mubm9kZS53aWR0aCAtIEMpIC8gMiAtIDI2MjtcbiAgICAgICAgQyA9IE1hdGgubWluKEMsIDUzMCk7XG4gICAgICAgIHRoaXMuaXRlbVNjLm5vZGUud2lkdGggPSBDO1xuICAgICAgICB0aGlzLml0ZW1TYy5zY3JvbGxUb0xlZnQoKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLmhpZGVUaGlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW2goY2MuU2Nyb2xsVmlldyldLCBlLnByb3RvdHlwZSwgXCJpdGVtU2NcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtoKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiaXRlbVByZVwiLCB2b2lkIDApO1xuICAgIHJldHVybiBfX2RlY29yYXRlKFtkXSwgZSk7XG59KShfYmFzZVVJLmRlZmF1bHQpO1xuZXhwb3J0cy5kZWZhdWx0ID0gZjtcbiJdfQ==