
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_set.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'c09d2zIpI5PIYKJIScOxgZY', 'ui_set');
// scripts/ui_set.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _idx = require("idx");

var _uData = require("uData");

var _baseUI = require("baseUI");

var _swBtn = require("swBtn");

var _sound = require("sound");

var _global = require("global");

var _res = require("res");

var _pConst = require("pConst");

var _panelMgr = require("panelMgr");

var _slider = require("slider");

var y = cc._decorator;
var m = y.ccclass;
var v = y.property;

var _ = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.audioBtn = null;
    e.musicBtn = null;
    e.vibrateBtn = null;
    e.headImg = null;
    e.txt_name = null;
    e.txt_lv = null;
    e.versionLbl = null;
    e.btnService = null;
    e.btnPrivacy = null;
    e.bgmSlider = null;
    e.effSlider = null;
    e.isMusic = !0;
    e.isAudio = !0;
    e.isVb = !0;
    return e;
  }

  __extends(e, t);

  e.prototype.start = function () {
    var t = _uData["default"].ins.getSetting();

    this.isAudio = t.effectSound;
    this.isMusic = t.bgmSound;
    this.isVb = t.vibrate;
    this.upAudioBtn();
    this.updateMusicBtn();
    this.upVbBtn();
    this.initData();
    this.initSlider();
    var e = _idx.platform.version;

    if (e && (this.versionLbl.string = "v " + e), _idx.platform.string() == _pConst.PFCode.Wechat || _idx.platform.isQQ) {
      var o = this.btnService.node;
      var n = this.btnPrivacy.node;
      o.active = n.active = !0;
      o.on(cc.Node.EventType.TOUCH_END, function () {
        return _panelMgr["default"].ins.open("ui/ui_info", {
          type: 1
        });
      }, this);
      n.on(cc.Node.EventType.TOUCH_END, function () {
        return _panelMgr["default"].ins.open("ui/ui_info", {
          type: 2
        });
      }, this);
    }
  };

  e.prototype.initData = function () {
    var t = this;
    this.txt_name.string = _uData["default"].ins.getName();

    var e = _uData["default"].ins.getHeadImg();

    e ? cc.assetManager.loadRemote(e, {
      ext: _global.headImgExt
    }, function (e, o) {
      t.node && t.node.isValid && (e ? t.setDefaultHead() : t.headImg.spriteFrame = new cc.SpriteFrame(o));
    }) : this.setDefaultHead();
  };

  e.prototype.setDefaultHead = function () {
    var t = this;

    _res["default"].ins.getBundleByString("resSps").then(function (e) {
      e.load("common/head_1", cc.SpriteFrame, function (e, o) {
        !e && t.node && t.node.isValid && (t.headImg.spriteFrame = o);
      });
    })["catch"](function (t) {
      console.error("RTool.ins.getBundleByString('resSps')", t);
    });
  };

  e.prototype.onAudioBtnTap = function () {
    this.isAudio = !this.isAudio;
    this.upAudioBtn();

    _uData["default"].ins.setSetting({
      effectSound: this.isAudio
    });
  };

  e.prototype.upAudioBtn = function () {
    null != this.audioBtn && this.audioBtn.setState(this.isAudio);
  };

  e.prototype.onMusicBtnTap = function () {
    this.isMusic = !this.isMusic;

    _uData["default"].ins.setSetting({
      bgmSound: this.isMusic
    });

    this.updateMusicBtn();
  };

  e.prototype.updateMusicBtn = function () {
    _sound["default"].ins[this.isMusic ? "playBGM" : "stopBGM"]();

    null != this.musicBtn && this.musicBtn.setState(this.isMusic);
  };

  e.prototype.onVibrateBtnTap = function () {
    this.isVb = !this.isVb;
    this.upVbBtn();

    _uData["default"].ins.setSetting({
      vibrate: this.isVb
    });
  };

  e.prototype.upVbBtn = function () {
    null != this.vibrateBtn && this.vibrateBtn.setState(this.isVb);
  };

  e.prototype.hideThis = function () {
    this.hide();
  };

  e.prototype.initSlider = function () {
    var t = _uData["default"].ins.getSetting();

    var e = t.effectVolume;
    var o = t.bgmVolume;
    this.bgmSlider.init(o);
    this.effSlider.init(e);
  };

  e.prototype.onSliderChange = function (t, e) {
    var o;
    if ("bgmVolume" !== e && "effectVolume" !== e) return console.error("slider参数错了!!!!");

    _uData["default"].ins.setSetting(((o = {})[e] = t.progress, o));

    _sound["default"].ins[e] = t.progress;
  };

  e.prototype.onBtnSkin = function () {};

  __decorate([v(_swBtn["default"])], e.prototype, "audioBtn", void 0);

  __decorate([v(_swBtn["default"])], e.prototype, "musicBtn", void 0);

  __decorate([v(_swBtn["default"])], e.prototype, "vibrateBtn", void 0);

  __decorate([v(cc.Sprite)], e.prototype, "headImg", void 0);

  __decorate([v(cc.Label)], e.prototype, "txt_name", void 0);

  __decorate([v(cc.Label)], e.prototype, "txt_lv", void 0);

  __decorate([v(cc.Label)], e.prototype, "versionLbl", void 0);

  __decorate([v(cc.Label)], e.prototype, "btnService", void 0);

  __decorate([v(cc.Label)], e.prototype, "btnPrivacy", void 0);

  __decorate([v(_slider["default"])], e.prototype, "bgmSlider", void 0);

  __decorate([v(_slider["default"])], e.prototype, "effSlider", void 0);

  return __decorate([m], e);
}(_baseUI["default"]);

exports["default"] = _;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfc2V0LmpzIl0sIm5hbWVzIjpbIm4iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIl9pZHgiLCJyZXF1aXJlIiwiX3VEYXRhIiwiX2Jhc2VVSSIsIl9zd0J0biIsIl9zb3VuZCIsIl9nbG9iYWwiLCJfcmVzIiwiX3BDb25zdCIsIl9wYW5lbE1nciIsIl9zbGlkZXIiLCJ5IiwiY2MiLCJfZGVjb3JhdG9yIiwibSIsImNjY2xhc3MiLCJ2IiwicHJvcGVydHkiLCJfIiwidCIsImUiLCJhcHBseSIsImFyZ3VtZW50cyIsImF1ZGlvQnRuIiwibXVzaWNCdG4iLCJ2aWJyYXRlQnRuIiwiaGVhZEltZyIsInR4dF9uYW1lIiwidHh0X2x2IiwidmVyc2lvbkxibCIsImJ0blNlcnZpY2UiLCJidG5Qcml2YWN5IiwiYmdtU2xpZGVyIiwiZWZmU2xpZGVyIiwiaXNNdXNpYyIsImlzQXVkaW8iLCJpc1ZiIiwiX19leHRlbmRzIiwicHJvdG90eXBlIiwic3RhcnQiLCJpbnMiLCJnZXRTZXR0aW5nIiwiZWZmZWN0U291bmQiLCJiZ21Tb3VuZCIsInZpYnJhdGUiLCJ1cEF1ZGlvQnRuIiwidXBkYXRlTXVzaWNCdG4iLCJ1cFZiQnRuIiwiaW5pdERhdGEiLCJpbml0U2xpZGVyIiwicGxhdGZvcm0iLCJ2ZXJzaW9uIiwic3RyaW5nIiwiUEZDb2RlIiwiV2VjaGF0IiwiaXNRUSIsIm8iLCJub2RlIiwiYWN0aXZlIiwib24iLCJOb2RlIiwiRXZlbnRUeXBlIiwiVE9VQ0hfRU5EIiwib3BlbiIsInR5cGUiLCJnZXROYW1lIiwiZ2V0SGVhZEltZyIsImFzc2V0TWFuYWdlciIsImxvYWRSZW1vdGUiLCJleHQiLCJoZWFkSW1nRXh0IiwiaXNWYWxpZCIsInNldERlZmF1bHRIZWFkIiwic3ByaXRlRnJhbWUiLCJTcHJpdGVGcmFtZSIsImdldEJ1bmRsZUJ5U3RyaW5nIiwidGhlbiIsImxvYWQiLCJjb25zb2xlIiwiZXJyb3IiLCJvbkF1ZGlvQnRuVGFwIiwic2V0U2V0dGluZyIsInNldFN0YXRlIiwib25NdXNpY0J0blRhcCIsIm9uVmlicmF0ZUJ0blRhcCIsImhpZGVUaGlzIiwiaGlkZSIsImVmZmVjdFZvbHVtZSIsImJnbVZvbHVtZSIsImluaXQiLCJvblNsaWRlckNoYW5nZSIsInByb2dyZXNzIiwib25CdG5Ta2luIiwiX19kZWNvcmF0ZSIsIlNwcml0ZSIsIkxhYmVsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7QUFDQUMsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztFQUFDQyxLQUFLLEVBQUUsQ0FBQztBQUFULENBQTdDOztBQUNBLElBQUlDLElBQUksR0FBR0MsT0FBTyxDQUFDLEtBQUQsQ0FBbEI7O0FBQ0EsSUFBSUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsT0FBRCxDQUFwQjs7QUFDQSxJQUFJRSxPQUFPLEdBQUdGLE9BQU8sQ0FBQyxRQUFELENBQXJCOztBQUNBLElBQUlHLE1BQU0sR0FBR0gsT0FBTyxDQUFDLE9BQUQsQ0FBcEI7O0FBQ0EsSUFBSUksTUFBTSxHQUFHSixPQUFPLENBQUMsT0FBRCxDQUFwQjs7QUFDQSxJQUFJSyxPQUFPLEdBQUdMLE9BQU8sQ0FBQyxRQUFELENBQXJCOztBQUNBLElBQUlNLElBQUksR0FBR04sT0FBTyxDQUFDLEtBQUQsQ0FBbEI7O0FBQ0EsSUFBSU8sT0FBTyxHQUFHUCxPQUFPLENBQUMsUUFBRCxDQUFyQjs7QUFDQSxJQUFJUSxTQUFTLEdBQUdSLE9BQU8sQ0FBQyxVQUFELENBQXZCOztBQUNBLElBQUlTLE9BQU8sR0FBR1QsT0FBTyxDQUFDLFFBQUQsQ0FBckI7O0FBQ0EsSUFBSVUsQ0FBQyxHQUFHQyxFQUFFLENBQUNDLFVBQVg7QUFDQSxJQUFJQyxDQUFDLEdBQUdILENBQUMsQ0FBQ0ksT0FBVjtBQUNBLElBQUlDLENBQUMsR0FBR0wsQ0FBQyxDQUFDTSxRQUFWOztBQUNBLElBQUlDLENB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S0FBSixDQUFGLENBQUQsRUFBZ0IzRSxDQUFDLENBQUNrQixTQUFsQixFQUE2QixRQUE3QixFQUF1QyxLQUFLLENBQTVDLENBQVY7O0VBQ0F1RCxVQUFVLENBQUMsQ0FBQzdFLENBQUMsQ0FBQ0osRUFBRSxDQUFDbUYsS0FBSixDQUFGLENBQUQsRUFBZ0IzRSxDQUFDLENBQUNrQixTQUFsQixFQUE2QixZQUE3QixFQUEyQyxLQUFLLENBQWhELENBQVY7O0VBQ0F1RCxVQUFVLENBQUMsQ0FBQzdFLENBQUMsQ0FBQ0osRUFBRSxDQUFDbUYsS0FBSixDQUFGLENBQUQsRUFBZ0IzRSxDQUFDLENBQUNrQixTQUFsQixFQUE2QixZQUE3QixFQUEyQyxLQUFLLENBQWhELENBQVY7O0VBQ0F1RCxVQUFVLENBQUMsQ0FBQzdFLENBQUMsQ0FBQ0osRUFBRSxDQUFDbUYsS0FBSixDQUFGLENBQUQsRUFBZ0IzRSxDQUFDLENBQUNrQixTQUFsQixFQUE2QixZQUE3QixFQUEyQyxLQUFLLENBQWhELENBQVY7O0VBQ0F1RCxVQUFVLENBQUMsQ0FBQzdFLENBQUMsQ0FBQ04sT0FBTyxXQUFSLENBQUYsQ0FBRCxFQUF1QlUsQ0FBQyxDQUFDa0IsU0FBekIsRUFBb0MsV0FBcEMsRUFBaUQsS0FBSyxDQUF0RCxDQUFWOztFQUNBdUQsVUFBVSxDQUFDLENBQUM3RSxDQUFDLENBQUNOLE9BQU8sV0FBUixDQUFGLENBQUQsRUFBdUJVLENBQUMsQ0FBQ2tCLFNBQXpCLEVBQW9DLFdBQXBDLEVBQWlELEtBQUssQ0FBdEQsQ0FBVjs7RUFDQSxPQUFPdUQsVUFBVSxDQUFDLENBQUMvRSxDQUFELENBQUQsRUFBTU0sQ0FBTixDQUFqQjtBQUNILENBcklPLENBcUlMakIsT0FBTyxXQXJJRixDQUFSOztBQXNJQUwsT0FBTyxXQUFQLEdBQWtCb0IsQ0FBbEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBuO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7dmFsdWU6ICEwfSk7XG52YXIgX2lkeCA9IHJlcXVpcmUoXCJpZHhcIik7XG52YXIgX3VEYXRhID0gcmVxdWlyZShcInVEYXRhXCIpO1xudmFyIF9iYXNlVUkgPSByZXF1aXJlKFwiYmFzZVVJXCIpO1xudmFyIF9zd0J0biA9IHJlcXVpcmUoXCJzd0J0blwiKTtcbnZhciBfc291bmQgPSByZXF1aXJlKFwic291bmRcIik7XG52YXIgX2dsb2JhbCA9IHJlcXVpcmUoXCJnbG9iYWxcIik7XG52YXIgX3JlcyA9IHJlcXVpcmUoXCJyZXNcIik7XG52YXIgX3BDb25zdCA9IHJlcXVpcmUoXCJwQ29uc3RcIik7XG52YXIgX3BhbmVsTWdyID0gcmVxdWlyZShcInBhbmVsTWdyXCIpO1xudmFyIF9zbGlkZXIgPSByZXF1aXJlKFwic2xpZGVyXCIpO1xudmFyIHkgPSBjYy5fZGVjb3JhdG9yO1xudmFyIG0gPSB5LmNjY2xhc3M7XG52YXIgdiA9IHkucHJvcGVydHk7XG52YXIgXyA9IChmdW5jdGlvbiAodCkge1xuICAgIGZ1bmN0aW9uIGUoKSB7XG4gICAgICAgIHZhciBlID0gKG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzO1xuICAgICAgICBlLmF1ZGlvQnRuID0gbnVsbDtcbiAgICAgICAgZS5tdXNpY0J0biA9IG51bGw7XG4gICAgICAgIGUudmlicmF0ZUJ0biA9IG51bGw7XG4gICAgICAgIGUuaGVhZEltZyA9IG51bGw7XG4gICAgICAgIGUudHh0X25hbWUgPSBudWxsO1xuICAgICAgICBlLnR4dF9sdiA9IG51bGw7XG4gICAgICAgIGUudmVyc2lvbkxibCA9IG51bGw7XG4gICAgICAgIGUuYnRuU2VydmljZSA9IG51bGw7XG4gICAgICAgIGUuYnRuUHJpdmFjeSA9IG51bGw7XG4gICAgICAgIGUuYmdtU2xpZGVyID0gbnVsbDtcbiAgICAgICAgZS5lZmZTbGlkZXIgPSBudWxsO1xuICAgICAgICBlLmlzTXVzaWMgPSAhMDtcbiAgICAgICAgZS5pc0F1ZGlvID0gITA7XG4gICAgICAgIGUuaXNWYiA9ICEwO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgX19leHRlbmRzKGUsIHQpO1xuICAgIGUucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IF91RGF0YS5kZWZhdWx0Lmlucy5nZXRTZXR0aW5nKCk7XG4gICAgICAgIHRoaXMuaXNBdWRpbyA9IHQuZWZmZWN0U291bmQ7XG4gICAgICAgIHRoaXMuaXNNdXNpYyA9IHQuYmdtU291bmQ7XG4gICAgICAgIHRoaXMuaXNWYiA9IHQudmlicmF0ZTtcbiAgICAgICAgdGhpcy51cEF1ZGlvQnRuKCk7XG4gICAgICAgIHRoaXMudXBkYXRlTXVzaWNCdG4oKTtcbiAgICAgICAgdGhpcy51cFZiQnRuKCk7XG4gICAgICAgIHRoaXMuaW5pdERhdGEoKTtcbiAgICAgICAgdGhpcy5pbml0U2xpZGVyKCk7XG4gICAgICAgIHZhciBlID0gX2lkeC5wbGF0Zm9ybS52ZXJzaW9uO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICAoZSAmJiAodGhpcy52ZXJzaW9uTGJsLnN0cmluZyA9IFwidiBcIiArIGUpLFxuICAgICAgICAgICAgX2lkeC5wbGF0Zm9ybS5zdHJpbmcoKSA9PSBfcENvbnN0LlBGQ29kZS5XZWNoYXQgfHwgX2lkeC5wbGF0Zm9ybS5pc1FRKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHZhciBvID0gdGhpcy5idG5TZXJ2aWNlLm5vZGU7XG4gICAgICAgICAgICB2YXIgbiA9IHRoaXMuYnRuUHJpdmFjeS5ub2RlO1xuICAgICAgICAgICAgby5hY3RpdmUgPSBuLmFjdGl2ZSA9ICEwO1xuICAgICAgICAgICAgby5vbihcbiAgICAgICAgICAgICAgICBjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3BhbmVsTWdyLmRlZmF1bHQuaW5zLm9wZW4oXCJ1aS91aV9pbmZvXCIsIHt0eXBlOiAxfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbi5vbihcbiAgICAgICAgICAgICAgICBjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3BhbmVsTWdyLmRlZmF1bHQuaW5zLm9wZW4oXCJ1aS91aV9pbmZvXCIsIHt0eXBlOiAyfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0aGlzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5pbml0RGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzO1xuICAgICAgICB0aGlzLnR4dF9uYW1lLnN0cmluZyA9IF91RGF0YS5kZWZhdWx0Lmlucy5nZXROYW1lKCk7XG4gICAgICAgIHZhciBlID0gX3VEYXRhLmRlZmF1bHQuaW5zLmdldEhlYWRJbWcoKTtcbiAgICAgICAgZVxuICAgICAgICAgICAgPyBjYy5hc3NldE1hbmFnZXIubG9hZFJlbW90ZShlLCB7ZXh0OiBfZ2xvYmFsLmhlYWRJbWdFeHR9LCBmdW5jdGlvbiAoZSwgbykge1xuICAgICAgICAgICAgICAgICAgdC5ub2RlICYmXG4gICAgICAgICAgICAgICAgICAgICAgdC5ub2RlLmlzVmFsaWQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAoZSA/IHQuc2V0RGVmYXVsdEhlYWQoKSA6ICh0LmhlYWRJbWcuc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUobykpKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIDogdGhpcy5zZXREZWZhdWx0SGVhZCgpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuc2V0RGVmYXVsdEhlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgX3Jlcy5kZWZhdWx0Lmluc1xuICAgICAgICAgICAgLmdldEJ1bmRsZUJ5U3RyaW5nKFwicmVzU3BzXCIpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUubG9hZChcImNvbW1vbi9oZWFkXzFcIiwgY2MuU3ByaXRlRnJhbWUsIGZ1bmN0aW9uIChlLCBvKSB7XG4gICAgICAgICAgICAgICAgICAgICFlICYmIHQubm9kZSAmJiB0Lm5vZGUuaXNWYWxpZCAmJiAodC5oZWFkSW1nLnNwcml0ZUZyYW1lID0gbyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlJUb29sLmlucy5nZXRCdW5kbGVCeVN0cmluZygncmVzU3BzJylcIiwgdCk7XG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uQXVkaW9CdG5UYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNBdWRpbyA9ICF0aGlzLmlzQXVkaW87XG4gICAgICAgIHRoaXMudXBBdWRpb0J0bigpO1xuICAgICAgICBfdURhdGEuZGVmYXVsdC5pbnMuc2V0U2V0dGluZyh7ZWZmZWN0U291bmQ6IHRoaXMuaXNBdWRpb30pO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUudXBBdWRpb0J0biA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbnVsbCAhPSB0aGlzLmF1ZGlvQnRuICYmIHRoaXMuYXVkaW9CdG4uc2V0U3RhdGUodGhpcy5pc0F1ZGlvKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uTXVzaWNCdG5UYXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNNdXNpYyA9ICF0aGlzLmlzTXVzaWM7XG4gICAgICAgIF91RGF0YS5kZWZhdWx0Lmlucy5zZXRTZXR0aW5nKHtiZ21Tb3VuZDogdGhpcy5pc011c2ljfSk7XG4gICAgICAgIHRoaXMudXBkYXRlTXVzaWNCdG4oKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLnVwZGF0ZU11c2ljQnRuID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc291bmQuZGVmYXVsdC5pbnNbdGhpcy5pc011c2ljID8gXCJwbGF5QkdNXCIgOiBcInN0b3BCR01cIl0oKTtcbiAgICAgICAgbnVsbCAhPSB0aGlzLm11c2ljQnRuICYmIHRoaXMubXVzaWNCdG4uc2V0U3RhdGUodGhpcy5pc011c2ljKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uVmlicmF0ZUJ0blRhcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc1ZiID0gIXRoaXMuaXNWYjtcbiAgICAgICAgdGhpcy51cFZiQnRuKCk7XG4gICAgICAgIF91RGF0YS5kZWZhdWx0Lmlucy5zZXRTZXR0aW5nKHt2aWJyYXRlOiB0aGlzLmlzVmJ9KTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLnVwVmJCdG4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG51bGwgIT0gdGhpcy52aWJyYXRlQnRuICYmIHRoaXMudmlicmF0ZUJ0bi5zZXRTdGF0ZSh0aGlzLmlzVmIpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuaGlkZVRoaXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuaW5pdFNsaWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQgPSBfdURhdGEuZGVmYXVsdC5pbnMuZ2V0U2V0dGluZygpO1xuICAgICAgICB2YXIgZSA9IHQuZWZmZWN0Vm9sdW1lO1xuICAgICAgICB2YXIgbyA9IHQuYmdtVm9sdW1lO1xuICAgICAgICB0aGlzLmJnbVNsaWRlci5pbml0KG8pO1xuICAgICAgICB0aGlzLmVmZlNsaWRlci5pbml0KGUpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUub25TbGlkZXJDaGFuZ2UgPSBmdW5jdGlvbiAodCwgZSkge1xuICAgICAgICB2YXIgbztcbiAgICAgICAgaWYgKFwiYmdtVm9sdW1lXCIgIT09IGUgJiYgXCJlZmZlY3RWb2x1bWVcIiAhPT0gZSkgcmV0dXJuIGNvbnNvbGUuZXJyb3IoXCJzbGlkZXLlj4LmlbDplJnkuoYhISEhXCIpO1xuICAgICAgICBfdURhdGEuZGVmYXVsdC5pbnMuc2V0U2V0dGluZygoKChvID0ge30pW2VdID0gdC5wcm9ncmVzcyksIG8pKTtcbiAgICAgICAgX3NvdW5kLmRlZmF1bHQuaW5zW2VdID0gdC5wcm9ncmVzcztcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uQnRuU2tpbiA9IGZ1bmN0aW9uICgpIHt9O1xuICAgIF9fZGVjb3JhdGUoW3YoX3N3QnRuLmRlZmF1bHQpXSwgZS5wcm90b3R5cGUsIFwiYXVkaW9CdG5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFt2KF9zd0J0bi5kZWZhdWx0KV0sIGUucHJvdG90eXBlLCBcIm11c2ljQnRuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbdihfc3dCdG4uZGVmYXVsdCldLCBlLnByb3RvdHlwZSwgXCJ2aWJyYXRlQnRuXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbdihjYy5TcHJpdGUpXSwgZS5wcm90b3R5cGUsIFwiaGVhZEltZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW3YoY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwidHh0X25hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFt2KGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcInR4dF9sdlwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW3YoY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwidmVyc2lvbkxibFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW3YoY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwiYnRuU2VydmljZVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW3YoY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwiYnRuUHJpdmFjeVwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW3YoX3NsaWRlci5kZWZhdWx0KV0sIGUucHJvdG90eXBlLCBcImJnbVNsaWRlclwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW3YoX3NsaWRlci5kZWZhdWx0KV0sIGUucHJvdG90eXBlLCBcImVmZlNsaWRlclwiLCB2b2lkIDApO1xuICAgIHJldHVybiBfX2RlY29yYXRlKFttXSwgZSk7XG59KShfYmFzZVVJLmRlZmF1bHQpO1xuZXhwb3J0cy5kZWZhdWx0ID0gXztcbiJdfQ==