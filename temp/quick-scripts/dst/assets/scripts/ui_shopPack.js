
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_shopPack.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '04bfcWd8wxNsb58fYw/OdLP', 'ui_shopPack');
// scripts/ui_shopPack.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _cfgMgr = require("cfgMgr");

var _shopMgr = require("shopMgr");

var _baseUI = require("baseUI");

var _chaptBtn = require("chaptBtn");

var _packItem1 = require("packItem1");

var p = cc._decorator;
var d = p.ccclass;
var h = p.property;

var f = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.itemScroll = null;
    e.btnScroll = null;
    e.packItem = null;
    e.btnItem = null;
    e.btnsComp = [];
    e.curPageIdx = -1;
    e.datasArr = [];
    e.tabIds = [];
    e._packItem = [];
    return e;
  }

  __extends(e, t);

  e.prototype.init = function () {
    var t;
    var e;
    var o = this;
    var n = null === (e = null === (t = _cfgMgr["default"].serverCfg) || void 0 === t ? void 0 : t.shop_config) || void 0 === e ? void 0 : e.gift;

    if (n) {
      var i = {};

      for (var r in n) {
        var c = n[r];
        var u = c.tag || 0;
        c.is_shop && (i[u] ? i[u].push(c) : (i[u] = [], i[u].push(c)));
      }

      var p = _shopMgr["default"].ins.getTabsRed();

      for (var d in i) {
        var h = i[d];

        if (h) {
          this.tabIds.push(d);
          var f = h[0].gift || "礼包";
          var g = cc.instantiate(this.btnItem);
          g.active = !0;
          g.parent = this.btnScroll.content;
          var y = g.getComponent(_chaptBtn["default"]);
          y.setLb(f);
          y.setState(!1);
          this.btnsComp.push(y);
          this.datasArr.push(h);
          var m = 1;
          if (p[d]) m = 0;else for (var v = h.length, _ = 0; _ < v; _++) {
            0 == (h[_].price || 0) && m++;
          }
          y.setRed(m);
        }
      }

      var b = this.btnsComp.length;

      var w = function w(t) {
        S.btnsComp[t].node.on("click", function () {
          o.chgViewData(t);
        }, S);
      };

      var S = this;

      for (_ = 0; _ < b; _++) {
        w(_);
      }

      this.btnScroll.node.width = 550;
      var T = this.btnScroll.content.children[0].width * this.btnScroll.content.childrenCount;
      this.btnScroll.node.x = T > this.btnScroll.node.width ? -274 : (this.btnScroll.node.width - T) / 2 - 274;
      T = Math.min(T, 550);
      this.btnScroll.node.width = T;
      this.btnScroll.scrollToLeft();
      this.chgViewData(0);
    }
  };

  e.prototype.chgViewData = function (t) {
    var e = this.curPageIdx;

    if (e != t) {
      var o = this.btnsComp;

      var n = _shopMgr["default"].ins.getTabsRed();

      o[e] && (o[e].setState(!1), o[e].setRed(0), n[this.tabIds[e]] = 1);
      o[t] && (o[t].setState(!0), n[this.tabIds[t]] = 1);

      _shopMgr["default"].ins.setTabsRed(n);

      this.curPageIdx = t;
      this.initListView();
    }
  };

  e.prototype.initListView = function () {
    var t = this;
    var e = this.itemScroll.content;
    e.children.forEach(function (e) {
      t._packItem.push(e);
    });
    e.removeAllChildren();

    for (var o = this.datasArr[this.curPageIdx], n = o.length, i = 0; i < n; i++) {
      var r = o[i];

      var a = this._packItem.shift();

      a || (a = cc.instantiate(this.packItem));
      a.active = !0;
      a.parent = e;
      a.getComponent(_packItem1["default"]).initItem(r);
    }

    e.setContentSize(580, 182 * n);
  };

  e.prototype.hideThis = function () {
    t.prototype.hide.call(this);
  };

  __decorate([h(cc.ScrollView)], e.prototype, "itemScroll", void 0);

  __decorate([h(cc.ScrollView)], e.prototype, "btnScroll", void 0);

  __decorate([h(cc.Node)], e.prototype, "packItem", void 0);

  __decorate([h(cc.Node)], e.prototype, "btnItem", void 0);

  return __decorate([d], e);
}(_baseUI["default"]);

exports["default"] = f;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfc2hvcFBhY2suanMiXSwibmFtZXMiOlsibiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiX2NmZ01nciIsInJlcXVpcmUiLCJfc2hvcE1nciIsIl9iYXNlVUkiLCJfY2hhcHRCdG4iLCJfcGFja0l0ZW0xIiwicCIsImNjIiwiX2RlY29yYXRvciIsImQiLCJjY2NsYXNzIiwiaCIsInByb3BlcnR5IiwiZiIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJpdGVtU2Nyb2xsIiwiYnRuU2Nyb2xsIiwicGFja0l0ZW0iLCJidG5JdGVtIiwiYnRuc0NvbXAiLCJjdXJQYWdlSWR4IiwiZGF0YXNBcnIiLCJ0YWJJZHMiLCJfcGFja0l0ZW0iLCJfX2V4dGVuZHMiLCJwcm90b3R5cGUiLCJpbml0IiwibyIsInNlcnZlckNmZyIsInNob3BfY29uZmlnIiwiZ2lmdCIsImkiLCJyIiwiYyIsInUiLCJ0YWciLCJpc19zaG9wIiwicHVzaCIsImlucyIsImdldFRhYnNSZWQiLCJnIiwiaW5zdGFudGlhdGUiLCJhY3RpdmUiLCJwYXJlbnQiLCJjb250ZW50IiwieSIsImdldENvbXBvbmVudCIsInNldExiIiwic2V0U3RhdGUiLCJtIiwidiIsImxlbmd0aCIsIl8iLCJwcmljZSIsInNldFJlZCIsImIiLCJ3IiwiUyIsIm5vZGUiLCJvbiIsImNoZ1ZpZXdEYXRhIiwid2lkdGgiLCJUIiwiY2hpbGRyZW4iLCJjaGlsZHJlbkNvdW50IiwieCIsIk1hdGgiLCJtaW4iLCJzY3JvbGxUb0xlZnQiLCJzZXRUYWJzUmVkIiwiaW5pdExpc3RWaWV3IiwiZm9yRWFjaCIsInJlbW92ZUFsbENoaWxkcmVuIiwiYSIsInNoaWZ0IiwiaW5pdEl0ZW0iLCJzZXRDb250ZW50U2l6ZSIsImhpZGVUaGlzIiwiaGlkZSIsImNhbGwiLCJfX2RlY29yYXRlIiwiU2Nyb2xsVmlldyIsIk5vZGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsQ0FBSjtBQUNBQyxNQUFNLENBQUNDLGNBQVAsQ0FBc0JDLE9BQXRCLEVBQStCLFlBQS9CLEVBQTZDO0VBQUNDLEtBQUssRUFBRSxDQUFDO0FBQVQsQ0FBN0M7O0FBQ0EsSUFBSUMsT0FBTyxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFyQjs7QUFDQSxJQUFJQyxRQUFRLEdBQUdELE9BQU8sQ0FBQyxTQUFELENBQXRCOztBQUNBLElBQUlFLE9BQU8sR0FBR0YsT0FBTyxDQUFDLFFBQUQsQ0FBckI7O0FBQ0EsSUFBSUcsU0FBUyxHQUFHSCxPQUFPLENBQUMsVUFBRCxDQUF2Qjs7QUFDQSxJQUFJSSxVQUFVLEdBQUdKLE9BQU8sQ0FBQyxXQUFELENBQXhCOztBQUNBLElBQUlLLENBQUMsR0FBR0MsRUFBRSxDQUFDQyxVQUFYO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHSCxDQUFDLENBQUNJLE9BQVY7QUFDQSxJQUFJQyxDQUFDLEdBQUdMLENBQUMsQ0FBQ00sUUFBVjs7QUFDQSxJQUFJQyxDQUFDLEdBQUksVUFBVUMsQ0FBVixFQUFhO0VBQ2xCLFNBQVNDLENBQVQsR0FBYTtJQUNULElBQUlBLENBQUMsR0FBSSxTQUFTRCxDQUFULElBQWNBLENBQUMsQ0FBQ0UsS0FBRixDQUFRLElBQVIsRUFBY0MsU0FBZCxDQUFmLElBQTRDLElBQXBEO0lBQ0FGLENBQUMsQ0FBQ0csVUFBRixHQUFlLElBQWY7SUFDQUgsQ0FBQyxDQUFDSSxTQUFGLEdBQWMsSUFBZDtJQUNBSixDQUFDLENBQUNLLFFBQUYsR0FBYSxJQUFiO0lBQ0FMLENBQUMsQ0FBQ00sT0FBRixHQUFZLElBQVo7SUFDQU4sQ0FBQyxDQUFDTyxRQUFGLEdBQWEsRUFBYjtJQUNBUCxDQUFDLENBQUNRLFVBQUYsR0FBZSxDQUFDLENBQWhCO0lBQ0FSLENBQUMsQ0FBQ1MsUUFBRixHQUFhLEVBQWI7SUFDQVQsQ0FBQyxDQUFDVSxNQUFGLEdBQVcsRUFBWDtJQUNBVixDQUFDLENBQUNXLFNBQUYsR0FBYyxFQUFkO0lBQ0EsT0FBT1gsQ0FBUDtFQUNIOztFQUNEWSxTQUFTLENBQUNaLENBQUQsRUFBSUQsQ0FBSixDQUFUOztFQUNBQyxDQUFDLENBQUNhLFNBQUYsQ0FBWUMsSUFBWixHQUFtQixZQUFZO0lBQzNCLElBQUlmLENBQUo7SUFDQSxJQUFJQyxDQUFKO0lBQ0EsSUFBSWUsQ0FBQyxHQUFHLElBQVI7SUFDQSxJQUFJbkMsQ0FBQyxHQUNELFVBQVVvQixDQUFDLEdBQUcsVUFBVUQsQ0FBQyxHQUFHZCxPQUFPLFdBQVAsQ0FBZ0IrQixTQUE5QixLQUE0QyxLQUFLLENBQUwsS0FBV2pCLENBQXZELEdBQTJELEtBQUssQ0FBaEUsR0FBb0VBLENBQUMsQ0FBQ2tCLFdBQXBGLEtBQ0EsS0FBSyxDQUFMLEtBQVdqQixDQURYLEdBRU0sS0FBSyxDQUZYLEdBR01BLENBQUMsQ0FBQ2tCLElBSlo7O0lBS0EsSUFBSXRDLENBQUosRUFBTztNQUNILElBQUl1QyxDQUFDLEdBQUcsRUFBUjs7TUFDQSxLQUFLLElBQUlDLENBQVQsSUFBY3hDLENBQWQsRUFBaUI7UUFDYixJQUFJeUMsQ0FBQyxHQUFHekMsQ0FBQyxDQUFDd0MsQ0FBRCxDQUFUO1FBQ0EsSUFBSUUsQ0FBQyxHQUFHRCxDQUFDLENBQUNFLEdBQUYsSUFBUyxDQUFqQjtRQUNBRixDQUFDLENBQUNHLE9BQUYsS0FBY0wsQ0FBQyxDQUFDRyxDQUFELENBQUQsR0FBT0gsQ0FBQyxDQUFDRyxDQUFELENBQUQsQ0FBS0csSUFBTCxDQUFVSixDQUFWLENBQVAsSUFBd0JGLENBQUMsQ0FBQ0csQ0FBRCxDQUFELEdBQU8sRUFBUixFQUFhSCxDQUFDLENBQUNHLENBQUQsQ0FBRCxDQUFLRyxJQUFMLENBQVVKLENBQVYsQ0FBcEMsQ0FBZDtNQUNIOztNQUNELElBQUk5QixDQUFDLEdBQUdKLFFBQVEsV0FBUixDQUFpQnVDLEdBQWpCLENBQXFCQyxVQUFyQixFQUFSOztNQUNBLEtBQUssSUFBSWpDLENBQVQsSUFBY3lCLENBQWQsRUFBaUI7UUFDYixJQUFJdkIsQ0FBQyxHQUFHdUIsQ0FBQyxDQUFDekIsQ0FBRCxDQUFUOztRQUNBLElBQUlFLENBQUosRUFBTztVQUNILEtBQUtjLE1BQUwsQ0FBWWUsSUFBWixDQUFpQi9CLENBQWpCO1VBQ0EsSUFBSUksQ0FBQyxHQUFHRixDQUFDLENBQUMsQ0FBRCxDQUFELENBQUtzQixJQUFMLElBQWEsSUFBckI7VUFDQSxJQUFJVSxDQUFDLEdBQUdwQyxFQUFFLENBQUNxQyxXQUFILENBQWUsS0FBS3ZCLE9BQXBCLENBQVI7VUFDQXNCLENBQUMsQ0FBQ0UsTUFBRixHQUFXLENBQUMsQ0FBWjtVQUNBRixDQUFDLENBQUNHLE1BQUYsR0FBVyxLQUFLM0IsU0FBTCxDQUFlNEIsT0FBMUI7VUFDQSxJQUFJQyxDQUFDLEdBQUdMLENBQUMsQ0FBQ00sWUFBRixDQUFlN0MsU0FBUyxXQUF4QixDQUFSO1VBQ0E0QyxDQUFDLENBQUNFLEtBQUYsQ0FBUXJDLENBQVI7VUFDQW1DLENBQUMsQ0FBQ0csUUFBRixDQUFXLENBQUMsQ0FBWjtVQUNBLEtBQUs3QixRQUFMLENBQWNrQixJQUFkLENBQW1CUSxDQUFuQjtVQUNBLEtBQUt4QixRQUFMLENBQWNnQixJQUFkLENBQW1CN0IsQ0FBbkI7VUFDQSxJQUFJeUMsQ0FBQyxHQUFHLENBQVI7VUFDQSxJQUFJOUMsQ0FBQyxDQUFDRyxDQUFELENBQUwsRUFBVTJDLENBQUMsR0FBRyxDQUFKLENBQVYsS0FDSyxLQUFLLElBQUlDLENBQUMsR0FBRzFDLENBQUMsQ0FBQzJDLE1BQVYsRUFBa0JDLENBQUMsR0FBRyxDQUEzQixFQUE4QkEsQ0FBQyxHQUFHRixDQUFsQyxFQUFxQ0UsQ0FBQyxFQUF0QztZQUEwQyxNQUFNNUMsQ0FBQyxDQUFDNEMsQ0FBRCxDQUFELENBQUtDLEtBQUwsSUFBYyxDQUFwQixLQUEwQkosQ0FBQyxFQUEzQjtVQUExQztVQUNMSixDQUFDLENBQUNTLE1BQUYsQ0FBU0wsQ0FBVDtRQUNIO01BQ0o7O01BQ0QsSUFBSU0sQ0FBQyxHQUFHLEtBQUtwQyxRQUFMLENBQWNnQyxNQUF0Qjs7TUFDQSxJQUFJSyxDQUFDLEdBQUcsU0FBSkEsQ0FBSSxDQUFVN0MsQ0FBVixFQUFhO1FBQ2pCOEMsQ0FBQyxDQUFDdEMsUUFBRixDQUFXUixDQUFYLEVBQWMrQyxJQUFkLENBQW1CQyxFQUFuQixDQUNJLE9BREosRUFFSSxZQUFZO1VBQ1JoQyxDQUFDLENBQUNpQyxXQUFGLENBQWNqRCxDQUFkO1FBQ0gsQ0FKTCxFQUtJOEMsQ0FMSjtNQU9ILENBUkQ7O01BU0EsSUFBSUEsQ0FBQyxHQUFHLElBQVI7O01BQ0EsS0FBS0wsQ0FBQyxHQUFHLENBQVQsRUFBWUEsQ0FBQyxHQUFHRyxDQUFoQixFQUFtQkgsQ0FBQyxFQUFwQjtRQUF3QkksQ0FBQyxDQUFDSixDQUFELENBQUQ7TUFBeEI7O01BQ0EsS0FBS3BDLFNBQUwsQ0FBZTBDLElBQWYsQ0FBb0JHLEtBQXBCLEdBQTRCLEdBQTVCO01BQ0EsSUFBSUMsQ0FBQyxHQUFHLEtBQUs5QyxTQUFMLENBQWU0QixPQUFmLENBQXVCbUIsUUFBdkIsQ0FBZ0MsQ0FBaEMsRUFBbUNGLEtBQW5DLEdBQTJDLEtBQUs3QyxTQUFMLENBQWU0QixPQUFmLENBQXVCb0IsYUFBMUU7TUFDQSxLQUFLaEQsU0FBTCxDQUFlMEMsSUFBZixDQUFvQk8sQ0FBcEIsR0FBd0JILENBQUMsR0FBRyxLQUFLOUMsU0FBTCxDQUFlMEMsSUFBZixDQUFvQkcsS0FBeEIsR0FBZ0MsQ0FBQyxHQUFqQyxHQUF1QyxDQUFDLEtBQUs3QyxTQUFMLENBQWUwQyxJQUFmLENBQW9CRyxLQUFwQixHQUE0QkMsQ0FBN0IsSUFBa0MsQ0FBbEMsR0FBc0MsR0FBckc7TUFDQUEsQ0FBQyxHQUFHSSxJQUFJLENBQUNDLEdBQUwsQ0FBU0wsQ0FBVCxFQUFZLEdBQVosQ0FBSjtNQUNBLEtBQUs5QyxTQUFMLENBQWUwQyxJQUFmLENBQW9CRyxLQUFwQixHQUE0QkMsQ0FBNUI7TUFDQSxLQUFLOUMsU0FBTCxDQUFlb0QsWUFBZjtNQUNBLEtBQUtSLFdBQUwsQ0FBaUIsQ0FBakI7SUFDSDtFQUNKLENBeEREOztFQXlEQWhELENBQUMsQ0FBQ2EsU0FBRixDQUFZbUMsV0FBWixHQUEwQixVQUFVakQsQ0FBVixFQUFhO0lBQ25DLElBQUlDLENBQUMsR0FBRyxLQUFLUSxVQUFiOztJQUNBLElBQUlSLENBQUMsSUFBSUQsQ0FBVCxFQUFZO01BQ1IsSUFBSWdCLENBQUMsR0FBRyxLQUFLUixRQUFiOztNQUNBLElBQUkzQixDQUFDLEdBQUdPLFFBQVEsV0FBUixDQUFpQnVDLEdBQWpCLENBQXFCQyxVQUFyQixFQUFSOztNQUNBWixDQUFDLENBQUNmLENBQUQsQ0FBRCxLQUFTZSxDQUFDLENBQUNmLENBQUQsQ0FBRCxDQUFLb0MsUUFBTCxDQUFjLENBQUMsQ0FBZixHQUFtQnJCLENBQUMsQ0FBQ2YsQ0FBRCxDQUFELENBQUswQyxNQUFMLENBQVksQ0FBWixDQUFuQixFQUFvQzlELENBQUMsQ0FBQyxLQUFLOEIsTUFBTCxDQUFZVixDQUFaLENBQUQsQ0FBRCxHQUFvQixDQUFqRTtNQUNBZSxDQUFDLENBQUNoQixDQUFELENBQUQsS0FBU2dCLENBQUMsQ0FBQ2hCLENBQUQsQ0FBRCxDQUFLcUMsUUFBTCxDQUFjLENBQUMsQ0FBZixHQUFvQnhELENBQUMsQ0FBQyxLQUFLOEIsTUFBTCxDQUFZWCxDQUFaLENBQUQsQ0FBRCxHQUFvQixDQUFqRDs7TUFDQVosUUFBUSxXQUFSLENBQWlCdUMsR0FBakIsQ0FBcUIrQixVQUFyQixDQUFnQzdFLENBQWhDOztNQUNBLEtBQUs0QixVQUFMLEdBQWtCVCxDQUFsQjtNQUNBLEtBQUsyRCxZQUFMO0lBQ0g7RUFDSixDQVhEOztFQVlBMUQsQ0FBQyxDQUFDYSxTQUFGLENBQVk2QyxZQUFaLEdBQTJCLFlBQVk7SUFDbkMsSUFBSTNELENBQUMsR0FBRyxJQUFSO0lBQ0EsSUFBSUMsQ0FBQyxHQUFHLEtBQUtHLFVBQUwsQ0FBZ0I2QixPQUF4QjtJQUNBaEMsQ0FBQyxDQUFDbUQsUUFBRixDQUFXUSxPQUFYLENBQW1CLFVBQVUzRCxDQUFWLEVBQWE7TUFDNUJELENBQUMsQ0FBQ1ksU0FBRixDQUFZYyxJQUFaLENBQWlCekIsQ0FBakI7SUFDSCxDQUZEO0lBR0FBLENBQUMsQ0FBQzRELGlCQUFGOztJQUNBLEtBQUssSUFBSTdDLENBQUMsR0FBRyxLQUFLTixRQUFMLENBQWMsS0FBS0QsVUFBbkIsQ0FBUixFQUF3QzVCLENBQUMsR0FBR21DLENBQUMsQ0FBQ3dCLE1BQTlDLEVBQXNEcEIsQ0FBQyxHQUFHLENBQS9ELEVBQWtFQSxDQUFDLEdBQUd2QyxDQUF0RSxFQUF5RXVDLENBQUMsRUFBMUUsRUFBOEU7TUFDMUUsSUFBSUMsQ0FBQyxHQUFHTCxDQUFDLENBQUNJLENBQUQsQ0FBVDs7TUFDQSxJQUFJMEMsQ0FBQyxHQUFHLEtBQUtsRCxTQUFMLENBQWVtRCxLQUFmLEVBQVI7O01BQ0FELENBQUMsS0FBS0EsQ0FBQyxHQUFHckUsRUFBRSxDQUFDcUMsV0FBSCxDQUFlLEtBQUt4QixRQUFwQixDQUFULENBQUQ7TUFDQXdELENBQUMsQ0FBQy9CLE1BQUYsR0FBVyxDQUFDLENBQVo7TUFDQStCLENBQUMsQ0FBQzlCLE1BQUYsR0FBVy9CLENBQVg7TUFDQTZELENBQUMsQ0FBQzNCLFlBQUYsQ0FBZTVDLFVBQVUsV0FBekIsRUFBbUN5RSxRQUFuQyxDQUE0QzNDLENBQTVDO0lBQ0g7O0lBQ0RwQixDQUFDLENBQUNnRSxjQUFGLENBQWlCLEdBQWpCLEVBQXNCLE1BQU1wRixDQUE1QjtFQUNILENBaEJEOztFQWlCQW9CLENBQUMsQ0FBQ2EsU0FBRixDQUFZb0QsUUFBWixHQUF1QixZQUFZO0lBQy9CbEUsQ0FBQyxDQUFDYyxTQUFGLENBQVlxRCxJQUFaLENBQWlCQyxJQUFqQixDQUFzQixJQUF0QjtFQUNILENBRkQ7O0VBR0FDLFVBQVUsQ0FBQyxDQUFDeEUsQ0FBQyxDQUFDSixFQUFFLENBQUM2RSxVQUFKLENBQUYsQ0FBRCxFQUFxQnJFLENBQUMsQ0FBQ2EsU0FBdkIsRUFBa0MsWUFBbEMsRUFBZ0QsS0FBSyxDQUFyRCxDQUFWOztFQUNBdUQsVUFBVSxDQUFDLENBQUN4RSxDQUFDLENBQUNKLEVBQUUsQ0FBQzZFLFVBQUosQ0FBRixDQUFELEVBQXFCckUsQ0FBQyxDQUFDYSxTQUF2QixFQUFrQyxXQUFsQyxFQUErQyxLQUFLLENBQXBELENBQVY7O0VBQ0F1RCxVQUFVLENBQUMsQ0FBQ3hFLENBQUMsQ0FBQ0osRUFBRSxDQUFDOEUsSUFBSixDQUFGLENBQUQsRUFBZXRFLENBQUMsQ0FBQ2EsU0FBakIsRUFBNEIsVUFBNUIsRUFBd0MsS0FBSyxDQUE3QyxDQUFWOztFQUNBdUQsVUFBVSxDQUFDLENBQUN4RSxDQUFDLENBQUNKLEVBQUUsQ0FBQzhFLElBQUosQ0FBRixDQUFELEVBQWV0RSxDQUFDLENBQUNhLFNBQWpCLEVBQTRCLFNBQTVCLEVBQXVDLEtBQUssQ0FBNUMsQ0FBVjs7RUFDQSxPQUFPdUQsVUFBVSxDQUFDLENBQUMxRSxDQUFELENBQUQsRUFBTU0sQ0FBTixDQUFqQjtBQUNILENBN0dPLENBNkdMWixPQUFPLFdBN0dGLENBQVI7O0FBOEdBTCxPQUFPLFdBQVAsR0FBa0JlLENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge3ZhbHVlOiAhMH0pO1xudmFyIF9jZmdNZ3IgPSByZXF1aXJlKFwiY2ZnTWdyXCIpO1xudmFyIF9zaG9wTWdyID0gcmVxdWlyZShcInNob3BNZ3JcIik7XG52YXIgX2Jhc2VVSSA9IHJlcXVpcmUoXCJiYXNlVUlcIik7XG52YXIgX2NoYXB0QnRuID0gcmVxdWlyZShcImNoYXB0QnRuXCIpO1xudmFyIF9wYWNrSXRlbTEgPSByZXF1aXJlKFwicGFja0l0ZW0xXCIpO1xudmFyIHAgPSBjYy5fZGVjb3JhdG9yO1xudmFyIGQgPSBwLmNjY2xhc3M7XG52YXIgaCA9IHAucHJvcGVydHk7XG52YXIgZiA9IChmdW5jdGlvbiAodCkge1xuICAgIGZ1bmN0aW9uIGUoKSB7XG4gICAgICAgIHZhciBlID0gKG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzO1xuICAgICAgICBlLml0ZW1TY3JvbGwgPSBudWxsO1xuICAgICAgICBlLmJ0blNjcm9sbCA9IG51bGw7XG4gICAgICAgIGUucGFja0l0ZW0gPSBudWxsO1xuICAgICAgICBlLmJ0bkl0ZW0gPSBudWxsO1xuICAgICAgICBlLmJ0bnNDb21wID0gW107XG4gICAgICAgIGUuY3VyUGFnZUlkeCA9IC0xO1xuICAgICAgICBlLmRhdGFzQXJyID0gW107XG4gICAgICAgIGUudGFiSWRzID0gW107XG4gICAgICAgIGUuX3BhY2tJdGVtID0gW107XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBfX2V4dGVuZHMoZSwgdCk7XG4gICAgZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB2YXIgbyA9IHRoaXM7XG4gICAgICAgIHZhciBuID1cbiAgICAgICAgICAgIG51bGwgPT09IChlID0gbnVsbCA9PT0gKHQgPSBfY2ZnTWdyLmRlZmF1bHQuc2VydmVyQ2ZnKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LnNob3BfY29uZmlnKSB8fFxuICAgICAgICAgICAgdm9pZCAwID09PSBlXG4gICAgICAgICAgICAgICAgPyB2b2lkIDBcbiAgICAgICAgICAgICAgICA6IGUuZ2lmdDtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIHZhciBpID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciByIGluIG4pIHtcbiAgICAgICAgICAgICAgICB2YXIgYyA9IG5bcl07XG4gICAgICAgICAgICAgICAgdmFyIHUgPSBjLnRhZyB8fCAwO1xuICAgICAgICAgICAgICAgIGMuaXNfc2hvcCAmJiAoaVt1XSA/IGlbdV0ucHVzaChjKSA6ICgoaVt1XSA9IFtdKSwgaVt1XS5wdXNoKGMpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcCA9IF9zaG9wTWdyLmRlZmF1bHQuaW5zLmdldFRhYnNSZWQoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGQgaW4gaSkge1xuICAgICAgICAgICAgICAgIHZhciBoID0gaVtkXTtcbiAgICAgICAgICAgICAgICBpZiAoaCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhYklkcy5wdXNoKGQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGhbMF0uZ2lmdCB8fCBcIuekvOWMhVwiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IGNjLmluc3RhbnRpYXRlKHRoaXMuYnRuSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIGcuYWN0aXZlID0gITA7XG4gICAgICAgICAgICAgICAgICAgIGcucGFyZW50ID0gdGhpcy5idG5TY3JvbGwuY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBnLmdldENvbXBvbmVudChfY2hhcHRCdG4uZGVmYXVsdCk7XG4gICAgICAgICAgICAgICAgICAgIHkuc2V0TGIoZik7XG4gICAgICAgICAgICAgICAgICAgIHkuc2V0U3RhdGUoITEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJ0bnNDb21wLnB1c2goeSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YXNBcnIucHVzaChoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAocFtkXSkgbSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgZm9yICh2YXIgdiA9IGgubGVuZ3RoLCBfID0gMDsgXyA8IHY7IF8rKykgMCA9PSAoaFtfXS5wcmljZSB8fCAwKSAmJiBtKys7XG4gICAgICAgICAgICAgICAgICAgIHkuc2V0UmVkKG0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5idG5zQ29tcC5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgdyA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgUy5idG5zQ29tcFt0XS5ub2RlLm9uKFxuICAgICAgICAgICAgICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8uY2hnVmlld0RhdGEodCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBTID0gdGhpcztcbiAgICAgICAgICAgIGZvciAoXyA9IDA7IF8gPCBiOyBfKyspIHcoXyk7XG4gICAgICAgICAgICB0aGlzLmJ0blNjcm9sbC5ub2RlLndpZHRoID0gNTUwO1xuICAgICAgICAgICAgdmFyIFQgPSB0aGlzLmJ0blNjcm9sbC5jb250ZW50LmNoaWxkcmVuWzBdLndpZHRoICogdGhpcy5idG5TY3JvbGwuY29udGVudC5jaGlsZHJlbkNvdW50O1xuICAgICAgICAgICAgdGhpcy5idG5TY3JvbGwubm9kZS54ID0gVCA+IHRoaXMuYnRuU2Nyb2xsLm5vZGUud2lkdGggPyAtMjc0IDogKHRoaXMuYnRuU2Nyb2xsLm5vZGUud2lkdGggLSBUKSAvIDIgLSAyNzQ7XG4gICAgICAgICAgICBUID0gTWF0aC5taW4oVCwgNTUwKTtcbiAgICAgICAgICAgIHRoaXMuYnRuU2Nyb2xsLm5vZGUud2lkdGggPSBUO1xuICAgICAgICAgICAgdGhpcy5idG5TY3JvbGwuc2Nyb2xsVG9MZWZ0KCk7XG4gICAgICAgICAgICB0aGlzLmNoZ1ZpZXdEYXRhKDApO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5jaGdWaWV3RGF0YSA9IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIHZhciBlID0gdGhpcy5jdXJQYWdlSWR4O1xuICAgICAgICBpZiAoZSAhPSB0KSB7XG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMuYnRuc0NvbXA7XG4gICAgICAgICAgICB2YXIgbiA9IF9zaG9wTWdyLmRlZmF1bHQuaW5zLmdldFRhYnNSZWQoKTtcbiAgICAgICAgICAgIG9bZV0gJiYgKG9bZV0uc2V0U3RhdGUoITEpLCBvW2VdLnNldFJlZCgwKSwgKG5bdGhpcy50YWJJZHNbZV1dID0gMSkpO1xuICAgICAgICAgICAgb1t0XSAmJiAob1t0XS5zZXRTdGF0ZSghMCksIChuW3RoaXMudGFiSWRzW3RdXSA9IDEpKTtcbiAgICAgICAgICAgIF9zaG9wTWdyLmRlZmF1bHQuaW5zLnNldFRhYnNSZWQobik7XG4gICAgICAgICAgICB0aGlzLmN1clBhZ2VJZHggPSB0O1xuICAgICAgICAgICAgdGhpcy5pbml0TGlzdFZpZXcoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgZS5wcm90b3R5cGUuaW5pdExpc3RWaWV3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IHRoaXM7XG4gICAgICAgIHZhciBlID0gdGhpcy5pdGVtU2Nyb2xsLmNvbnRlbnQ7XG4gICAgICAgIGUuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdC5fcGFja0l0ZW0ucHVzaChlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGUucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcbiAgICAgICAgZm9yICh2YXIgbyA9IHRoaXMuZGF0YXNBcnJbdGhpcy5jdXJQYWdlSWR4XSwgbiA9IG8ubGVuZ3RoLCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgdmFyIHIgPSBvW2ldO1xuICAgICAgICAgICAgdmFyIGEgPSB0aGlzLl9wYWNrSXRlbS5zaGlmdCgpO1xuICAgICAgICAgICAgYSB8fCAoYSA9IGNjLmluc3RhbnRpYXRlKHRoaXMucGFja0l0ZW0pKTtcbiAgICAgICAgICAgIGEuYWN0aXZlID0gITA7XG4gICAgICAgICAgICBhLnBhcmVudCA9IGU7XG4gICAgICAgICAgICBhLmdldENvbXBvbmVudChfcGFja0l0ZW0xLmRlZmF1bHQpLmluaXRJdGVtKHIpO1xuICAgICAgICB9XG4gICAgICAgIGUuc2V0Q29udGVudFNpemUoNTgwLCAxODIgKiBuKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLmhpZGVUaGlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0LnByb3RvdHlwZS5oaWRlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBfX2RlY29yYXRlKFtoKGNjLlNjcm9sbFZpZXcpXSwgZS5wcm90b3R5cGUsIFwiaXRlbVNjcm9sbFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2goY2MuU2Nyb2xsVmlldyldLCBlLnByb3RvdHlwZSwgXCJidG5TY3JvbGxcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtoKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwicGFja0l0ZW1cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtoKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiYnRuSXRlbVwiLCB2b2lkIDApO1xuICAgIHJldHVybiBfX2RlY29yYXRlKFtkXSwgZSk7XG59KShfYmFzZVVJLmRlZmF1bHQpO1xuZXhwb3J0cy5kZWZhdWx0ID0gZjtcbiJdfQ==