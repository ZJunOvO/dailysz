
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_skin.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'd45c3iSApZP3p940Sl9LSeE', 'ui_skin');
// scripts/ui_skin.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _baseUI = require("baseUI");

var _pInfo = require("pInfo");

var _uData = require("uData");

var _chgBtn = require("chgBtn");

var _skinContent = require("skinContent");

var _head = require("head");

var _res = require("res");

var _skinMgr = require("skinMgr");

var _evts = require("evts");

var g = cc._decorator;
var y = g.ccclass;
var m = g.property;

var v = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.scrollView = null;
    e.btnsNode = null;
    e.headComp = null;
    e.pNameTxt = null;
    e.bgSp = null;
    e.roleNode = null;
    e.curPageIdx = 1;
    e.contentArr = [];
    e.btnsComp = [];
    return e;
  }

  __extends(e, t);

  e.prototype.onLoad = function () {
    var t = this;
    this.eventFunc = this.onOperTap.bind(this);

    _evts["default"].opE.on(this.eventFunc);

    this.scrollView.content.parent.children.forEach(function (e) {
      t.contentArr.push(e.getComponent(_skinContent["default"]));
      e.active = !1;
    });

    for (var e = function e(_e, n, i) {
      i.push(n[_e].getComponent(_chgBtn["default"]));

      n[_e].on("click", function () {
        t.chgViewData(_e);
      }, o);
    }, o = this, n = 0, i = this.btnsNode.children, r = this.btnsComp, a = i.length; n < a; n++) {
      e(n, i, r);
    }
  };

  e.prototype.start = function () {
    this.chgViewData(0);

    _res["default"].ins.getBundleByString("resSps").then(function (t) {
      t.preloadDir("game/skin");
    });

    _res["default"].ins.getBundleByString("prefab").then(function (t) {
      t.preloadDir("skin");
    });
  };

  e.prototype.onDestroy = function () {
    _evts["default"].opE.off(this.eventFunc);

    this.eventFunc = null;
  };

  e.prototype.init = function () {
    for (var t = [], e = 0; e < arguments.length; e++) {
      t[e] = arguments[e];
    }

    var o = _pInfo["default"].ins.getUsingSkin();

    var n = _uData["default"].ins.getHeadImg();

    if (this.pNameTxt.string = _uData["default"].ins.getName(), this.headComp.loadHeadImg(n), o) for (var i in o) {
      var r = i;
      var a = o[i];
      this.updateShow(r, a);
    }
  };

  e.prototype.hideThis = function () {
    this.hide();
  };

  e.prototype.chgViewData = function (t) {
    var e = this.curPageIdx;

    if (e != t) {
      var o = {
        0: _skinMgr.SkinIdEnum.bg,
        1: _skinMgr.SkinIdEnum.headFrame,
        2: _skinMgr.SkinIdEnum.nameFrame,
        3: _skinMgr.SkinIdEnum.role
      };

      var n = _skinMgr["default"].ins.getSkinConfig(o[t]);

      this.contentArr[t].initContent(n);
      this.changeBtnState(e, t);
      this.changeContentState(e, t);
      this.curPageIdx = t;
    }
  };

  e.prototype.changeBtnState = function (t, e) {
    var o = this.btnsComp;
    o[t].setState(!1);
    o[e].setState(!0);
  };

  e.prototype.changeContentState = function (t, e) {
    var o = this.contentArr;
    var n = this.scrollView;
    o[t].node.active = !1;
    o[e].node.active = !0;
    n.content = o[e].node;
    n.scrollToTop(0.1);
  };

  e.prototype.onOperTap = function (t) {
    if ((null == t ? void 0 : t.action) === _evts["default"].SKIN_CHG && t.data && t.data.isUse) {
      var e = t.data;
      var o = e.skinId;
      var n = e.ref;
      this.updateShow(o, n);
    }
  };

  e.prototype.updateShow = function (t, e) {
    switch (t) {
      case _skinMgr.SkinIdEnum.bg:
        _skinMgr["default"].ins.updateBg(e, this.bgSp);

        break;

      case _skinMgr.SkinIdEnum.role:
        _skinMgr["default"].ins.updateRole(e, this.roleNode);

    }
  };

  __decorate([m(cc.ScrollView)], e.prototype, "scrollView", void 0);

  __decorate([m(cc.Node)], e.prototype, "btnsNode", void 0);

  __decorate([m(_head["default"])], e.prototype, "headComp", void 0);

  __decorate([m(cc.Label)], e.prototype, "pNameTxt", void 0);

  __decorate([m(cc.Sprite)], e.prototype, "bgSp", void 0);

  __decorate([m(cc.Node)], e.prototype, "roleNode", void 0);

  return __decorate([y], e);
}(_baseUI["default"]);

exports["default"] = v;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfc2tpbi5qcyJdLCJuYW1lcyI6WyJuIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJfYmFzZVVJIiwicmVxdWlyZSIsIl9wSW5mbyIsIl91RGF0YSIsIl9jaGdCdG4iLCJfc2tpbkNvbnRlbnQiLCJfaGVhZCIsIl9yZXMiLCJfc2tpbk1nciIsIl9ldnRzIiwiZyIsImNjIiwiX2RlY29yYXRvciIsInkiLCJjY2NsYXNzIiwibSIsInByb3BlcnR5IiwidiIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJzY3JvbGxWaWV3IiwiYnRuc05vZGUiLCJoZWFkQ29tcCIsInBOYW1lVHh0IiwiYmdTcCIsInJvbGVOb2RlIiwiY3VyUGFnZUlkeCIsImNvbnRlbnRBcnIiLCJidG5zQ29tcCIsIl9fZXh0ZW5kcyIsInByb3RvdHlwZSIsIm9uTG9hZCIsImV2ZW50RnVuYyIsIm9uT3BlclRhcCIsImJpbmQiLCJvcEUiLCJvbiIsImNvbnRlbnQiLCJwYXJlbnQiLCJjaGlsZHJlbiIsImZvckVhY2giLCJwdXNoIiwiZ2V0Q29tcG9uZW50IiwiYWN0aXZlIiwiaSIsImNoZ1ZpZXdEYXRhIiwibyIsInIiLCJhIiwibGVuZ3RoIiwic3RhcnQiLCJpbnMiLCJnZXRCdW5kbGVCeVN0cmluZyIsInRoZW4iLCJwcmVsb2FkRGlyIiwib25EZXN0cm95Iiwib2ZmIiwiaW5pdCIsImdldFVzaW5nU2tpbiIsImdldEhlYWRJbWciLCJzdHJpbmciLCJnZXROYW1lIiwibG9hZEhlYWRJbWciLCJ1cGRhdGVTaG93IiwiaGlkZVRoaXMiLCJoaWRlIiwiU2tpbklkRW51bSIsImJnIiwiaGVhZEZyYW1lIiwibmFtZUZyYW1lIiwicm9sZSIsImdldFNraW5Db25maWciLCJpbml0Q29udGVudCIsImNoYW5nZUJ0blN0YXRlIiwiY2hhbmdlQ29udGVudFN0YXRlIiwic2V0U3RhdGUiLCJub2RlIiwic2Nyb2xsVG9Ub3AiLCJhY3Rpb24iLCJTS0lOX0NIRyIsImRhdGEiLCJpc1VzZSIsInNraW5JZCIsInJlZiIsInVwZGF0ZUJnIiwidXBkYXRlUm9sZSIsIl9fZGVjb3JhdGUiLCJTY3JvbGxWaWV3IiwiTm9kZSIsIkxhYmVsIiwiU3ByaXRlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7QUFDQUMsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztFQUFDQyxLQUFLLEVBQUUsQ0FBQztBQUFULENBQTdDOztBQUNBLElBQUlDLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFFBQUQsQ0FBckI7O0FBQ0EsSUFBSUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsT0FBRCxDQUFwQjs7QUFDQSxJQUFJRSxNQUFNLEdBQUdGLE9BQU8sQ0FBQyxPQUFELENBQXBCOztBQUNBLElBQUlHLE9BQU8sR0FBR0gsT0FBTyxDQUFDLFFBQUQsQ0FBckI7O0FBQ0EsSUFBSUksWUFBWSxHQUFHSixPQUFPLENBQUMsYUFBRCxDQUExQjs7QUFDQSxJQUFJSyxLQUFLLEdBQUdMLE9BQU8sQ0FBQyxNQUFELENBQW5COztBQUNBLElBQUlNLElBQUksR0FBR04sT0FBTyxDQUFDLEtBQUQsQ0FBbEI7O0FBQ0EsSUFBSU8sUUFBUSxHQUFHUCxPQUFPLENBQUMsU0FBRCxDQUF0Qjs7QUFDQSxJQUFJUSxLQUFLLEdBQUdSLE9BQU8sQ0FBQyxNQUFELENBQW5COztBQUNBLElBQUlTLENBQUMsR0FBR0MsRUFBRSxDQUFDQyxVQUFYO0FBQ0EsSUFBSUMsQ0FBQyxHQUFHSCxDQUFDLENBQUNJLE9BQVY7QUFDQSxJQUFJQyxDQUFDLEdBQUdMLENBQUMsQ0FBQ00sUUFBVjs7QUFDQSxJQUFJQyxDQUFDLEdBQUksVUFBVUMsQ0FBVixFQUFhO0VBQ2xCLFNBQVNDLENBQVQsR0FBYTtJQUNULElBQUlBLENBQUMsR0FBSSxTQUFTRCxDQUFULElBQWNBLENBQUMsQ0FBQ0UsS0FBRixDQUFRLElBQVIsRUFBY0MsU0FBZCxD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LENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge3ZhbHVlOiAhMH0pO1xudmFyIF9iYXNlVUkgPSByZXF1aXJlKFwiYmFzZVVJXCIpO1xudmFyIF9wSW5mbyA9IHJlcXVpcmUoXCJwSW5mb1wiKTtcbnZhciBfdURhdGEgPSByZXF1aXJlKFwidURhdGFcIik7XG52YXIgX2NoZ0J0biA9IHJlcXVpcmUoXCJjaGdCdG5cIik7XG52YXIgX3NraW5Db250ZW50ID0gcmVxdWlyZShcInNraW5Db250ZW50XCIpO1xudmFyIF9oZWFkID0gcmVxdWlyZShcImhlYWRcIik7XG52YXIgX3JlcyA9IHJlcXVpcmUoXCJyZXNcIik7XG52YXIgX3NraW5NZ3IgPSByZXF1aXJlKFwic2tpbk1nclwiKTtcbnZhciBfZXZ0cyA9IHJlcXVpcmUoXCJldnRzXCIpO1xudmFyIGcgPSBjYy5fZGVjb3JhdG9yO1xudmFyIHkgPSBnLmNjY2xhc3M7XG52YXIgbSA9IGcucHJvcGVydHk7XG52YXIgdiA9IChmdW5jdGlvbiAodCkge1xuICAgIGZ1bmN0aW9uIGUoKSB7XG4gICAgICAgIHZhciBlID0gKG51bGwgIT09IHQgJiYgdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB8fCB0aGlzO1xuICAgICAgICBlLnNjcm9sbFZpZXcgPSBudWxsO1xuICAgICAgICBlLmJ0bnNOb2RlID0gbnVsbDtcbiAgICAgICAgZS5oZWFkQ29tcCA9IG51bGw7XG4gICAgICAgIGUucE5hbWVUeHQgPSBudWxsO1xuICAgICAgICBlLmJnU3AgPSBudWxsO1xuICAgICAgICBlLnJvbGVOb2RlID0gbnVsbDtcbiAgICAgICAgZS5jdXJQYWdlSWR4ID0gMTtcbiAgICAgICAgZS5jb250ZW50QXJyID0gW107XG4gICAgICAgIGUuYnRuc0NvbXAgPSBbXTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIF9fZXh0ZW5kcyhlLCB0KTtcbiAgICBlLnByb3RvdHlwZS5vbkxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcztcbiAgICAgICAgdGhpcy5ldmVudEZ1bmMgPSB0aGlzLm9uT3BlclRhcC5iaW5kKHRoaXMpO1xuICAgICAgICBfZXZ0cy5kZWZhdWx0Lm9wRS5vbih0aGlzLmV2ZW50RnVuYyk7XG4gICAgICAgIHRoaXMuc2Nyb2xsVmlldy5jb250ZW50LnBhcmVudC5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0LmNvbnRlbnRBcnIucHVzaChlLmdldENvbXBvbmVudChfc2tpbkNvbnRlbnQuZGVmYXVsdCkpO1xuICAgICAgICAgICAgZS5hY3RpdmUgPSAhMTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAoXG4gICAgICAgICAgICB2YXIgZSA9IGZ1bmN0aW9uIChlLCBuLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGkucHVzaChuW2VdLmdldENvbXBvbmVudChfY2hnQnRuLmRlZmF1bHQpKTtcbiAgICAgICAgICAgICAgICAgICAgbltlXS5vbihcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmNoZ1ZpZXdEYXRhKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG8gPSB0aGlzLFxuICAgICAgICAgICAgICAgIG4gPSAwLFxuICAgICAgICAgICAgICAgIGkgPSB0aGlzLmJ0bnNOb2RlLmNoaWxkcmVuLFxuICAgICAgICAgICAgICAgIHIgPSB0aGlzLmJ0bnNDb21wLFxuICAgICAgICAgICAgICAgIGEgPSBpLmxlbmd0aDtcbiAgICAgICAgICAgIG4gPCBhO1xuICAgICAgICAgICAgbisrXG4gICAgICAgIClcbiAgICAgICAgICAgIGUobiwgaSwgcik7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jaGdWaWV3RGF0YSgwKTtcbiAgICAgICAgX3Jlcy5kZWZhdWx0Lmlucy5nZXRCdW5kbGVCeVN0cmluZyhcInJlc1Nwc1wiKS50aGVuKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICB0LnByZWxvYWREaXIoXCJnYW1lL3NraW5cIik7XG4gICAgICAgIH0pO1xuICAgICAgICBfcmVzLmRlZmF1bHQuaW5zLmdldEJ1bmRsZUJ5U3RyaW5nKFwicHJlZmFiXCIpLnRoZW4oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHQucHJlbG9hZERpcihcInNraW5cIik7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUub25EZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfZXZ0cy5kZWZhdWx0Lm9wRS5vZmYodGhpcy5ldmVudEZ1bmMpO1xuICAgICAgICB0aGlzLmV2ZW50RnVuYyA9IG51bGw7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciB0ID0gW10sIGUgPSAwOyBlIDwgYXJndW1lbnRzLmxlbmd0aDsgZSsrKSB0W2VdID0gYXJndW1lbnRzW2VdO1xuICAgICAgICB2YXIgbyA9IF9wSW5mby5kZWZhdWx0Lmlucy5nZXRVc2luZ1NraW4oKTtcbiAgICAgICAgdmFyIG4gPSBfdURhdGEuZGVmYXVsdC5pbnMuZ2V0SGVhZEltZygpO1xuICAgICAgICBpZiAoKCh0aGlzLnBOYW1lVHh0LnN0cmluZyA9IF91RGF0YS5kZWZhdWx0Lmlucy5nZXROYW1lKCkpLCB0aGlzLmhlYWRDb21wLmxvYWRIZWFkSW1nKG4pLCBvKSlcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gbykge1xuICAgICAgICAgICAgICAgIHZhciByID0gaTtcbiAgICAgICAgICAgICAgICB2YXIgYSA9IG9baV07XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTaG93KHIsIGEpO1xuICAgICAgICAgICAgfVxuICAgIH07XG4gICAgZS5wcm90b3R5cGUuaGlkZVRoaXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuY2hnVmlld0RhdGEgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZSA9IHRoaXMuY3VyUGFnZUlkeDtcbiAgICAgICAgaWYgKGUgIT0gdCkge1xuICAgICAgICAgICAgdmFyIG8gPSB7XG4gICAgICAgICAgICAgICAgMDogX3NraW5NZ3IuU2tpbklkRW51bS5iZyxcbiAgICAgICAgICAgICAgICAxOiBfc2tpbk1nci5Ta2luSWRFbnVtLmhlYWRGcmFtZSxcbiAgICAgICAgICAgICAgICAyOiBfc2tpbk1nci5Ta2luSWRFbnVtLm5hbWVGcmFtZSxcbiAgICAgICAgICAgICAgICAzOiBfc2tpbk1nci5Ta2luSWRFbnVtLnJvbGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgbiA9IF9za2luTWdyLmRlZmF1bHQuaW5zLmdldFNraW5Db25maWcob1t0XSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRBcnJbdF0uaW5pdENvbnRlbnQobik7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZUJ0blN0YXRlKGUsIHQpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VDb250ZW50U3RhdGUoZSwgdCk7XG4gICAgICAgICAgICB0aGlzLmN1clBhZ2VJZHggPSB0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5jaGFuZ2VCdG5TdGF0ZSA9IGZ1bmN0aW9uICh0LCBlKSB7XG4gICAgICAgIHZhciBvID0gdGhpcy5idG5zQ29tcDtcbiAgICAgICAgb1t0XS5zZXRTdGF0ZSghMSk7XG4gICAgICAgIG9bZV0uc2V0U3RhdGUoITApO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUuY2hhbmdlQ29udGVudFN0YXRlID0gZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgdmFyIG8gPSB0aGlzLmNvbnRlbnRBcnI7XG4gICAgICAgIHZhciBuID0gdGhpcy5zY3JvbGxWaWV3O1xuICAgICAgICBvW3RdLm5vZGUuYWN0aXZlID0gITE7XG4gICAgICAgIG9bZV0ubm9kZS5hY3RpdmUgPSAhMDtcbiAgICAgICAgbi5jb250ZW50ID0gb1tlXS5ub2RlO1xuICAgICAgICBuLnNjcm9sbFRvVG9wKDAuMSk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbk9wZXJUYXAgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICBpZiAoKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuYWN0aW9uKSA9PT0gX2V2dHMuZGVmYXVsdC5TS0lOX0NIRyAmJiB0LmRhdGEgJiYgdC5kYXRhLmlzVXNlKSB7XG4gICAgICAgICAgICB2YXIgZSA9IHQuZGF0YTtcbiAgICAgICAgICAgIHZhciBvID0gZS5za2luSWQ7XG4gICAgICAgICAgICB2YXIgbiA9IGUucmVmO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTaG93KG8sIG4pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS51cGRhdGVTaG93ID0gZnVuY3Rpb24gKHQsIGUpIHtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICBjYXNlIF9za2luTWdyLlNraW5JZEVudW0uYmc6XG4gICAgICAgICAgICAgICAgX3NraW5NZ3IuZGVmYXVsdC5pbnMudXBkYXRlQmcoZSwgdGhpcy5iZ1NwKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgX3NraW5NZ3IuU2tpbklkRW51bS5yb2xlOlxuICAgICAgICAgICAgICAgIF9za2luTWdyLmRlZmF1bHQuaW5zLnVwZGF0ZVJvbGUoZSwgdGhpcy5yb2xlTm9kZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW20oY2MuU2Nyb2xsVmlldyldLCBlLnByb3RvdHlwZSwgXCJzY3JvbGxWaWV3XCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbbShjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImJ0bnNOb2RlXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbbShfaGVhZC5kZWZhdWx0KV0sIGUucHJvdG90eXBlLCBcImhlYWRDb21wXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbbShjYy5MYWJlbCldLCBlLnByb3RvdHlwZSwgXCJwTmFtZVR4dFwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW20oY2MuU3ByaXRlKV0sIGUucHJvdG90eXBlLCBcImJnU3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFttKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwicm9sZU5vZGVcIiwgdm9pZCAwKTtcbiAgICByZXR1cm4gX19kZWNvcmF0ZShbeV0sIGUpO1xufSkoX2Jhc2VVSS5kZWZhdWx0KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHY7XG4iXX0=