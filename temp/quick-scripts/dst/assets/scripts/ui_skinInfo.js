
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/ui_skinInfo.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7c070pF1aJJsYPevQtZg0rw', 'ui_skinInfo');
// scripts/ui_skinInfo.js

"use strict";

var n;
Object.defineProperty(exports, "__esModule", {
  value: !0
});

var _uData = require("uData");

var _lang = require("lang");

var _head = require("head");

var _skinMgr = require("skinMgr");

var _tipMgr = require("tipMgr");

var _pInfo = require("pInfo");

var _baseUI = require("baseUI");

var h = cc._decorator;
var f = h.ccclass;
var g = h.property;

var y = function (t) {
  function e() {
    var e = null !== t && t.apply(this, arguments) || this;
    e.skinName = null;
    e.skinDesc = null;
    e.buyBtn = null;
    e.videoBtn = null;
    e.useBtn = null;
    e.headComp = null;
    e.bgSp = null;
    e.nameFrameSp = null;
    e.roleNode = null;
    e.frameBg = null;
    e.needCoin = null;
    e.needPro = null;
    return e;
  }

  __extends(e, t);

  e.prototype.start = function () {};

  e.prototype.init = function (t) {
    var e;
    var o = this;
    var n = t.ref;
    var i = t.skinId;
    var r = t.showNode;
    var s = t.unlockState;

    var c = _skinMgr["default"].ins.getSkinData(i, n);

    var u = c.name;
    var p = c.desc;
    var d = c.unlockType;
    var h = c.unlockValue;

    switch (this.skinName.string = u, this.skinDesc.string = p, this.skinId = i, this.ref = n, this.unlockValue = h, this.headComp.node.parent.active = i === _skinMgr.SkinIdEnum.headFrame, this.bgSp.node.active = i === _skinMgr.SkinIdEnum.bg, this.roleNode.active = i === _skinMgr.SkinIdEnum.role, this.nameFrameSp.node.parent.active = i === _skinMgr.SkinIdEnum.nameFrame, this.buyBtn.active = 2 === d && s === _skinMgr.SkinState.lock, this.videoBtn.active = 1 === d && s === _skinMgr.SkinState.lock, this.useBtn.active = _skinMgr.SkinState.using !== s && _skinMgr.SkinState.lock !== s, d) {
      case _skinMgr.SkinUnlockType.coin:
        this.setCoin();
        break;

      case _skinMgr.SkinUnlockType.video:
        this.setVideoPro();
    }

    var f = null === (e = r.getComponent(cc.Sprite)) || void 0 === e ? void 0 : e.spriteFrame;

    switch (i) {
      case _skinMgr.SkinIdEnum.role:
        this.roleNode.removeAllChildren();
        var g = cc.instantiate(r);
        g.y = -100, this.roleNode.addChild(g);
        break;

      case _skinMgr.SkinIdEnum.bg:
        this.bgSp.spriteFrame = f;
        break;

      case _skinMgr.SkinIdEnum.nameFrame:
        this.nameFrameSp.spriteFrame = f;
        break;

      case _skinMgr.SkinIdEnum.headFrame:
        var y = _uData["default"].ins.getHeadImg();

        this.headComp.loadHeadImg(y, n);
    }

    this.scheduleOnce(function () {
      o.setCloseBtnPos();
    });
  };

  e.prototype.hideThis = function () {
    this.hide();
  };

  e.prototype.setCoin = function () {
    this.needCoin.string = this.unlockValue.toString();
  };

  e.prototype.setVideoPro = function () {
    var t = _pInfo["default"].ins.getSkinAdPro(this.skinId, this.ref);

    void 0 !== t && (this.needPro.string = t + "/" + this.unlockValue, t >= this.unlockValue && (_skinMgr["default"].ins.addSkin(this.skinId, this.ref), this.videoBtn.active = !1, this.useBtn.active = !0));
  };

  e.prototype.setCloseBtnPos = function () {
    this.closeBtn.node.x = this.frameBg.width / 2 + this.frameBg.x - this.closeBtn.node.width / 2 - 15;
    this.closeBtn.node.y = this.frameBg.height / 2 + this.frameBg.y - this.closeBtn.node.height / 2 - 15;
  };

  e.prototype.onBtnUseSkin = function () {
    this.hide();

    _skinMgr["default"].ins.usingSkin(this.skinId, this.ref);
  };

  e.prototype.onBtnCoin = function () {
    _pInfo["default"].ins.getCoin() >= this.unlockValue ? (_pInfo["default"].ins.addCoin(-this.unlockValue), _skinMgr["default"].ins.addSkin(this.skinId, this.ref), this.buyBtn.active = !1, this.useBtn.active = !0, _tipMgr["default"].ins.showTip("购买成功")) : _tipMgr["default"].ins.showTip(_lang.lang[10001]);
  };

  e.prototype.onBtnVideo = function () {
    _pInfo["default"].ins.addSkinAdPro(this.skinId, this.ref);

    this.setVideoPro();
  };

  __decorate([g(cc.Label)], e.prototype, "skinName", void 0);

  __decorate([g(cc.Label)], e.prototype, "skinDesc", void 0);

  __decorate([g(cc.Node)], e.prototype, "buyBtn", void 0);

  __decorate([g(cc.Node)], e.prototype, "videoBtn", void 0);

  __decorate([g(cc.Node)], e.prototype, "useBtn", void 0);

  __decorate([g(_head["default"])], e.prototype, "headComp", void 0);

  __decorate([g(cc.Sprite)], e.prototype, "bgSp", void 0);

  __decorate([g(cc.Sprite)], e.prototype, "nameFrameSp", void 0);

  __decorate([g(cc.Node)], e.prototype, "roleNode", void 0);

  __decorate([g(cc.Node)], e.prototype, "frameBg", void 0);

  __decorate([g(cc.Label)], e.prototype, "needCoin", void 0);

  __decorate([g(cc.Label)], e.prototype, "needPro", void 0);

  return __decorate([f], e);
}(_baseUI["default"]);

exports["default"] = y;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcdWlfc2tpbkluZm8uanMiXSwibmFtZXMiOlsibiIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiX3VEYXRhIiwicmVxdWlyZSIsIl9sYW5nIiwiX2hlYWQiLCJfc2tpbk1nciIsIl90aXBNZ3IiLCJfcEluZm8iLCJfYmFzZVVJIiwiaCIsImNjIiwiX2RlY29yYXRvciIsImYiLCJjY2NsYXNzIiwiZyIsInByb3BlcnR5IiwieSIsInQiLCJlIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJza2luTmFtZSIsInNraW5EZXNjIiwiYnV5QnRuIiwidmlkZW9CdG4iLCJ1c2VCdG4iLCJoZWFkQ29tcCIsImJnU3AiLCJuYW1lRnJhbWVTcCIsInJvbGVOb2RlIiwiZnJhbWVCZyIsIm5lZWRDb2luIiwibmVlZFBybyIsIl9fZXh0ZW5kcyIsInByb3RvdHlwZSIsInN0YXJ0IiwiaW5pdCIsIm8iLCJyZWYiLCJpIiwic2tpbklkIiwiciIsInNob3dOb2RlIiwicyIsInVubG9ja1N0YXRlIiwiYyIsImlucyIsImdldFNraW5EYXRhIiwidSIsIm5hbWUiLCJwIiwiZGVzYyIsImQiLCJ1bmxvY2tUeXBlIiwidW5sb2NrVmFsdWUiLCJzdHJpbmciLCJub2RlIiwicGFyZW50IiwiYWN0aXZlIiwiU2tpbklkRW51bSIsImhlYWRGcmFtZSIsImJnIiwicm9sZSIsIm5hbWVGcmFtZSIsIlNraW5TdGF0ZSIsImxvY2siLCJ1c2luZyIsIlNraW5VbmxvY2tUeXBlIiwiY29pbiIsInNldENvaW4iLCJ2aWRlbyIsInNldFZpZGVvUHJvIiwiZ2V0Q29tcG9uZW50IiwiU3ByaXRlIiwic3ByaXRlRnJhbWUiLCJyZW1vdmVBbGxDaGlsZHJlbiIsImluc3RhbnRpYXRlIiwiYWRkQ2hpbGQiLCJnZXRIZWFkSW1nIiwibG9hZEhlYWRJbWciLCJzY2hlZHVsZU9uY2UiLCJzZXRDbG9zZUJ0blBvcyIsImhpZGVUaGlzIiwiaGlkZSIsInRvU3RyaW5nIiwiZ2V0U2tpbkFkUHJvIiwiYWRkU2tpbiIsImNsb3NlQnRuIiwieCIsIndpZHRoIiwiaGVpZ2h0Iiwib25CdG5Vc2VTa2luIiwidXNpbmdTa2luIiwib25CdG5Db2luIiwiZ2V0Q29pbiIsImFkZENvaW4iLCJzaG93VGlwIiwibGFuZyIsIm9uQnRuVmlkZW8iLCJhZGRTa2luQWRQcm8iLCJfX2RlY29yYXRlIiwiTGFiZWwiLCJOb2RlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLENBQUo7QUFDQUMsTUFBTSxDQUFDQyxjQUFQLENBQXNCQyxPQUF0QixFQUErQixZQUEvQixFQUE2QztFQUFDQyxLQUFLLEVBQUUsQ0FBQztBQUFULENBQTdDOztBQUNBLElBQUlDLE1BQU0sR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBcEI7O0FBQ0EsSUFBSUMsS0FBSyxHQUFHRCxPQUFPLENBQUMsTUFBRCxDQUFuQjs7QUFDQSxJQUFJRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxNQUFELENBQW5COztBQUNBLElBQUlHLFFBQVEsR0FBR0gsT0FBTyxDQUFDLFNBQUQsQ0FBdEI7O0FBQ0EsSUFBSUksT0FBTyxHQUFHSixPQUFPLENBQUMsUUFBRCxDQUFyQjs7QUFDQSxJQUFJSyxNQUFNLEdBQUdMLE9BQU8sQ0FBQyxPQUFELENBQXBCOztBQUNBLElBQUlNLE9BQU8sR0FBR04sT0FBTyxDQUFDLFFBQUQsQ0FBckI7O0FBQ0EsSUFBSU8sQ0FBQyxHQUFHQyxFQUFFLENBQUNDLFVBQVg7QUFDQSxJQUFJQyxDQUFDLEdBQUdILENBQUMsQ0FBQ0ksT0FBVjtBQUNBLElBQUlDLENBQUMsR0FBR0wsQ0FBQyxDQUFDTSxRQUFWOztBQUNBLElBQUlDLENBQUMsR0FBSSxVQUFVQyxDQUFWLEVBQWE7RUFDbEIsU0FBU0MsQ0FBVCxHQUFhO0lBQ1QsSUFBSUEsQ0FBQyxHQUFJLFNBQVNELENBQVQsSUFBY0EsQ0FBQyxDQUFDRSxLQUFGLENBQVEsSUFBUixFQUFjQyxTQUFkLENBQWYsSUFBNEMsSUFB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O0FBQ0gsQ0ExSE8sQ0EwSExWLE9BQU8sV0ExSEYsQ0FBUjs7QUEySEFULE9BQU8sV0FBUCxHQUFrQmlCLENBQWxCIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge3ZhbHVlOiAhMH0pO1xudmFyIF91RGF0YSA9IHJlcXVpcmUoXCJ1RGF0YVwiKTtcbnZhciBfbGFuZyA9IHJlcXVpcmUoXCJsYW5nXCIpO1xudmFyIF9oZWFkID0gcmVxdWlyZShcImhlYWRcIik7XG52YXIgX3NraW5NZ3IgPSByZXF1aXJlKFwic2tpbk1nclwiKTtcbnZhciBfdGlwTWdyID0gcmVxdWlyZShcInRpcE1nclwiKTtcbnZhciBfcEluZm8gPSByZXF1aXJlKFwicEluZm9cIik7XG52YXIgX2Jhc2VVSSA9IHJlcXVpcmUoXCJiYXNlVUlcIik7XG52YXIgaCA9IGNjLl9kZWNvcmF0b3I7XG52YXIgZiA9IGguY2NjbGFzcztcbnZhciBnID0gaC5wcm9wZXJ0eTtcbnZhciB5ID0gKGZ1bmN0aW9uICh0KSB7XG4gICAgZnVuY3Rpb24gZSgpIHtcbiAgICAgICAgdmFyIGUgPSAobnVsbCAhPT0gdCAmJiB0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHx8IHRoaXM7XG4gICAgICAgIGUuc2tpbk5hbWUgPSBudWxsO1xuICAgICAgICBlLnNraW5EZXNjID0gbnVsbDtcbiAgICAgICAgZS5idXlCdG4gPSBudWxsO1xuICAgICAgICBlLnZpZGVvQnRuID0gbnVsbDtcbiAgICAgICAgZS51c2VCdG4gPSBudWxsO1xuICAgICAgICBlLmhlYWRDb21wID0gbnVsbDtcbiAgICAgICAgZS5iZ1NwID0gbnVsbDtcbiAgICAgICAgZS5uYW1lRnJhbWVTcCA9IG51bGw7XG4gICAgICAgIGUucm9sZU5vZGUgPSBudWxsO1xuICAgICAgICBlLmZyYW1lQmcgPSBudWxsO1xuICAgICAgICBlLm5lZWRDb2luID0gbnVsbDtcbiAgICAgICAgZS5uZWVkUHJvID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIF9fZXh0ZW5kcyhlLCB0KTtcbiAgICBlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHt9O1xuICAgIGUucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgdmFyIG8gPSB0aGlzO1xuICAgICAgICB2YXIgbiA9IHQucmVmO1xuICAgICAgICB2YXIgaSA9IHQuc2tpbklkO1xuICAgICAgICB2YXIgciA9IHQuc2hvd05vZGU7XG4gICAgICAgIHZhciBzID0gdC51bmxvY2tTdGF0ZTtcbiAgICAgICAgdmFyIGMgPSBfc2tpbk1nci5kZWZhdWx0Lmlucy5nZXRTa2luRGF0YShpLCBuKTtcbiAgICAgICAgdmFyIHUgPSBjLm5hbWU7XG4gICAgICAgIHZhciBwID0gYy5kZXNjO1xuICAgICAgICB2YXIgZCA9IGMudW5sb2NrVHlwZTtcbiAgICAgICAgdmFyIGggPSBjLnVubG9ja1ZhbHVlO1xuICAgICAgICBzd2l0Y2ggKFxuICAgICAgICAgICAgKCh0aGlzLnNraW5OYW1lLnN0cmluZyA9IHUpLFxuICAgICAgICAgICAgKHRoaXMuc2tpbkRlc2Muc3RyaW5nID0gcCksXG4gICAgICAgICAgICAodGhpcy5za2luSWQgPSBpKSxcbiAgICAgICAgICAgICh0aGlzLnJlZiA9IG4pLFxuICAgICAgICAgICAgKHRoaXMudW5sb2NrVmFsdWUgPSBoKSxcbiAgICAgICAgICAgICh0aGlzLmhlYWRDb21wLm5vZGUucGFyZW50LmFjdGl2ZSA9IGkgPT09IF9za2luTWdyLlNraW5JZEVudW0uaGVhZEZyYW1lKSxcbiAgICAgICAgICAgICh0aGlzLmJnU3Aubm9kZS5hY3RpdmUgPSBpID09PSBfc2tpbk1nci5Ta2luSWRFbnVtLmJnKSxcbiAgICAgICAgICAgICh0aGlzLnJvbGVOb2RlLmFjdGl2ZSA9IGkgPT09IF9za2luTWdyLlNraW5JZEVudW0ucm9sZSksXG4gICAgICAgICAgICAodGhpcy5uYW1lRnJhbWVTcC5ub2RlLnBhcmVudC5hY3RpdmUgPSBpID09PSBfc2tpbk1nci5Ta2luSWRFbnVtLm5hbWVGcmFtZSksXG4gICAgICAgICAgICAodGhpcy5idXlCdG4uYWN0aXZlID0gMiA9PT0gZCAmJiBzID09PSBfc2tpbk1nci5Ta2luU3RhdGUubG9jayksXG4gICAgICAgICAgICAodGhpcy52aWRlb0J0bi5hY3RpdmUgPSAxID09PSBkICYmIHMgPT09IF9za2luTWdyLlNraW5TdGF0ZS5sb2NrKSxcbiAgICAgICAgICAgICh0aGlzLnVzZUJ0bi5hY3RpdmUgPSBfc2tpbk1nci5Ta2luU3RhdGUudXNpbmcgIT09IHMgJiYgX3NraW5NZ3IuU2tpblN0YXRlLmxvY2sgIT09IHMpLFxuICAgICAgICAgICAgZClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjYXNlIF9za2luTWdyLlNraW5VbmxvY2tUeXBlLmNvaW46XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb2luKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIF9za2luTWdyLlNraW5VbmxvY2tUeXBlLnZpZGVvOlxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmlkZW9Qcm8oKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZiA9IG51bGwgPT09IChlID0gci5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5zcHJpdGVGcmFtZTtcbiAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgICBjYXNlIF9za2luTWdyLlNraW5JZEVudW0ucm9sZTpcbiAgICAgICAgICAgICAgICB0aGlzLnJvbGVOb2RlLnJlbW92ZUFsbENoaWxkcmVuKCk7XG4gICAgICAgICAgICAgICAgdmFyIGcgPSBjYy5pbnN0YW50aWF0ZShyKTtcbiAgICAgICAgICAgICAgICAoZy55ID0gLTEwMCksIHRoaXMucm9sZU5vZGUuYWRkQ2hpbGQoZyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIF9za2luTWdyLlNraW5JZEVudW0uYmc6XG4gICAgICAgICAgICAgICAgdGhpcy5iZ1NwLnNwcml0ZUZyYW1lID0gZjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgX3NraW5NZ3IuU2tpbklkRW51bS5uYW1lRnJhbWU6XG4gICAgICAgICAgICAgICAgdGhpcy5uYW1lRnJhbWVTcC5zcHJpdGVGcmFtZSA9IGY7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIF9za2luTWdyLlNraW5JZEVudW0uaGVhZEZyYW1lOlxuICAgICAgICAgICAgICAgIHZhciB5ID0gX3VEYXRhLmRlZmF1bHQuaW5zLmdldEhlYWRJbWcoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWRDb21wLmxvYWRIZWFkSW1nKHksIG4pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG8uc2V0Q2xvc2VCdG5Qb3MoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5oaWRlVGhpcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5zZXRDb2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm5lZWRDb2luLnN0cmluZyA9IHRoaXMudW5sb2NrVmFsdWUudG9TdHJpbmcoKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLnNldFZpZGVvUHJvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdCA9IF9wSW5mby5kZWZhdWx0Lmlucy5nZXRTa2luQWRQcm8odGhpcy5za2luSWQsIHRoaXMucmVmKTtcbiAgICAgICAgdm9pZCAwICE9PSB0ICYmXG4gICAgICAgICAgICAoKHRoaXMubmVlZFByby5zdHJpbmcgPSB0ICsgXCIvXCIgKyB0aGlzLnVubG9ja1ZhbHVlKSxcbiAgICAgICAgICAgIHQgPj0gdGhpcy51bmxvY2tWYWx1ZSAmJlxuICAgICAgICAgICAgICAgIChfc2tpbk1nci5kZWZhdWx0Lmlucy5hZGRTa2luKHRoaXMuc2tpbklkLCB0aGlzLnJlZiksXG4gICAgICAgICAgICAgICAgKHRoaXMudmlkZW9CdG4uYWN0aXZlID0gITEpLFxuICAgICAgICAgICAgICAgICh0aGlzLnVzZUJ0bi5hY3RpdmUgPSAhMCkpKTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLnNldENsb3NlQnRuUG9zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNsb3NlQnRuLm5vZGUueCA9IHRoaXMuZnJhbWVCZy53aWR0aCAvIDIgKyB0aGlzLmZyYW1lQmcueCAtIHRoaXMuY2xvc2VCdG4ubm9kZS53aWR0aCAvIDIgLSAxNTtcbiAgICAgICAgdGhpcy5jbG9zZUJ0bi5ub2RlLnkgPSB0aGlzLmZyYW1lQmcuaGVpZ2h0IC8gMiArIHRoaXMuZnJhbWVCZy55IC0gdGhpcy5jbG9zZUJ0bi5ub2RlLmhlaWdodCAvIDIgLSAxNTtcbiAgICB9O1xuICAgIGUucHJvdG90eXBlLm9uQnRuVXNlU2tpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIF9za2luTWdyLmRlZmF1bHQuaW5zLnVzaW5nU2tpbih0aGlzLnNraW5JZCwgdGhpcy5yZWYpO1xuICAgIH07XG4gICAgZS5wcm90b3R5cGUub25CdG5Db2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfcEluZm8uZGVmYXVsdC5pbnMuZ2V0Q29pbigpID49IHRoaXMudW5sb2NrVmFsdWVcbiAgICAgICAgICAgID8gKF9wSW5mby5kZWZhdWx0Lmlucy5hZGRDb2luKC10aGlzLnVubG9ja1ZhbHVlKSxcbiAgICAgICAgICAgICAgX3NraW5NZ3IuZGVmYXVsdC5pbnMuYWRkU2tpbih0aGlzLnNraW5JZCwgdGhpcy5yZWYpLFxuICAgICAgICAgICAgICAodGhpcy5idXlCdG4uYWN0aXZlID0gITEpLFxuICAgICAgICAgICAgICAodGhpcy51c2VCdG4uYWN0aXZlID0gITApLFxuICAgICAgICAgICAgICBfdGlwTWdyLmRlZmF1bHQuaW5zLnNob3dUaXAoXCLotK3kubDmiJDlip9cIikpXG4gICAgICAgICAgICA6IF90aXBNZ3IuZGVmYXVsdC5pbnMuc2hvd1RpcChfbGFuZy5sYW5nWzEwMDAxXSk7XG4gICAgfTtcbiAgICBlLnByb3RvdHlwZS5vbkJ0blZpZGVvID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfcEluZm8uZGVmYXVsdC5pbnMuYWRkU2tpbkFkUHJvKHRoaXMuc2tpbklkLCB0aGlzLnJlZik7XG4gICAgICAgIHRoaXMuc2V0VmlkZW9Qcm8oKTtcbiAgICB9O1xuICAgIF9fZGVjb3JhdGUoW2coY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwic2tpbk5hbWVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcInNraW5EZXNjXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbZyhjYy5Ob2RlKV0sIGUucHJvdG90eXBlLCBcImJ1eUJ0blwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2coY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJ2aWRlb0J0blwiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2coY2MuTm9kZSldLCBlLnByb3RvdHlwZSwgXCJ1c2VCdG5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKF9oZWFkLmRlZmF1bHQpXSwgZS5wcm90b3R5cGUsIFwiaGVhZENvbXBcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLlNwcml0ZSldLCBlLnByb3RvdHlwZSwgXCJiZ1NwXCIsIHZvaWQgMCk7XG4gICAgX19kZWNvcmF0ZShbZyhjYy5TcHJpdGUpXSwgZS5wcm90b3R5cGUsIFwibmFtZUZyYW1lU3BcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwicm9sZU5vZGVcIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLk5vZGUpXSwgZS5wcm90b3R5cGUsIFwiZnJhbWVCZ1wiLCB2b2lkIDApO1xuICAgIF9fZGVjb3JhdGUoW2coY2MuTGFiZWwpXSwgZS5wcm90b3R5cGUsIFwibmVlZENvaW5cIiwgdm9pZCAwKTtcbiAgICBfX2RlY29yYXRlKFtnKGNjLkxhYmVsKV0sIGUucHJvdG90eXBlLCBcIm5lZWRQcm9cIiwgdm9pZCAwKTtcbiAgICByZXR1cm4gX19kZWNvcmF0ZShbZl0sIGUpO1xufSkoX2Jhc2VVSS5kZWZhdWx0KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHk7XG4iXX0=