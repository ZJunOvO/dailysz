{"version":3,"sources":["assets\\scripts\\bagMgr.js"],"names":["Object","defineProperty","exports","value","bagItem","_evts","require","_idx","_cfgMgr","_lang","_pInfo","c","t","_propTag","_ins","Error","get","enumerable","configurable","prototype","initBag","e","serverCfg","qw_line_rules","rules","times","set","basic_times","val","chgItemCount","updItem","_bagItem","ins","Bag","clearItem","useItem","o","r","gemeTypeKey","platform","reportEvent","ERepEvt","gameType","itemId","reportKey","opE","emit","action","UPD_MAIN_RED","cc","log","checkItemEnough","addItem","i","specialItemCheck","UPDJIGSAWGAME","getItemCount","addCoin","addExp","addPower","count"],"mappings":"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","sourceRoot":"/","sourcesContent":["//电子邮件puhalskijsemen@gmail.com\n//源码网站 开vpn全局模式打开 http://web3incubators.com/\n//电报https://t.me/gamecode999\n//网页客服 http://web3incubators.com/kefu.html\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nexports.bagItem = void 0;\nvar _evts = require(\"evts\");\nvar _idx = require(\"idx\");\nvar _cfgMgr = require(\"cfgMgr\");\nvar _lang = require(\"lang\");\nvar _pInfo = require(\"pInfo\");\nvar c = (function () {\n    function t() {\n        if (((this._propTag = \"props\"), t._ins)) throw new Error(\"bagMgr can only be one！\");\n        t._ins = this;\n    }\n    Object.defineProperty(t, \"ins\", {\n        get: function () {\n            t._ins || new t();\n            return t._ins;\n        },\n        enumerable: !1,\n        configurable: !0\n    });\n    t.prototype.initBag = function (t) {\n        if (t) {\n            var e = _cfgMgr.default.serverCfg.qw_line_rules.rules.times.set.basic_times.val;\n            this.chgItemCount(\"qw_line_ticket\", e, !1);\n            this.updItem();\n        }\n    };\n    Object.defineProperty(t.prototype, \"bagItem\", {\n        get: function () {\n            this._bagItem || (this._bagItem = _pInfo.default.ins.Bag);\n            return this._bagItem;\n        },\n        enumerable: !1,\n        configurable: !0\n    });\n    t.prototype.clearItem = function () {\n        this._bagItem = null;\n    };\n    t.prototype.updItem = function () {\n        _pInfo.default.ins.Bag = this._bagItem;\n    };\n    t.prototype.useItem = function (t, e, o) {\n        if ((void 0 === e && (e = 1), t))\n            if (this.bagItem[t]) {\n                this.bagItem[t] -= e;\n                this.bagItem[t] <= 0 && delete this.bagItem[t];\n                this.updItem();\n                var r = \"拼图\";\n                _lang.gemeTypeKey[o] && (r = _lang.gemeTypeKey[o]);\n                _idx.platform.reportEvent(_idx.ERepEvt.useItem, {gameType: r, itemId: _lang.reportKey[t]});\n                _evts.default.opE.emit({action: _evts.default.UPD_MAIN_RED});\n            } else cc.log(\"使用失败，无该道具：\" + t);\n    };\n    t.prototype.checkItemEnough = function (t, e) {\n        void 0 === e && (e = 1);\n        return this.bagItem[t] && this.bagItem[t] >= e;\n    };\n    t.prototype.addItem = function (t, e, o, i) {\n        void 0 === e && (e = 1);\n        void 0 === o && (o = !0);\n        void 0 === i && (i = !0);\n        this.specialItemCheck(t, e) ||\n            (t &&\n                (null == this.bagItem[t] && (this.bagItem[t] = 0),\n                (this.bagItem[t] += e),\n                o && this.updItem(),\n                (\"puzzle_pieces\" !== t && \"newYear_pieces\" !== t) ||\n                    _evts.default.opE.emit({action: _evts.default.UPDJIGSAWGAME}),\n                i && _evts.default.opE.emit({action: _evts.default.UPD_MAIN_RED})));\n    };\n    t.prototype.chgItemCount = function (t, e, o) {\n        void 0 === e && (e = 1);\n        void 0 === o && (o = !0);\n        t && (null == this.bagItem[t] && (this.bagItem[t] = 0), (this.bagItem[t] = e), o && this.updItem());\n    };\n    t.prototype.getItemCount = function (t) {\n        return t && this.bagItem[t] ? this.bagItem[t] : 0;\n    };\n    t.prototype.specialItemCheck = function (t, e) {\n        switch (t) {\n            case \"coin\":\n                return _pInfo.default.ins.addCoin(e), !0;\n            case \"exp\":\n                return _pInfo.default.ins.addExp(e), !0;\n            case \"times\":\n                return _pInfo.default.ins.addPower(e), !0;\n            default:\n                return !1;\n        }\n    };\n    return t;\n})();\nexports.default = c;\nexports.bagItem = function () {\n    this.count = 0;\n};\n"]}