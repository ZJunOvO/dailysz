{"version":3,"sources":["assets\\scripts\\page_race.js"],"names":["n","Object","defineProperty","exports","value","a","_evts","require","_idx","_mySafeArea","_pConst","_request","_time","_uData","_rankItem","_global","_bagMgr","_panelMgr","_rankMgr","_taskMgr","_pInfo","w","cc","_decorator","S","ccclass","T","property","t","today","yday","I","e","apply","arguments","scrollView","dayTypeBtnsSps","friendRankBtn","viewItem","rankTop","myRank","ticketCount","topNode","loadingNode","bgSpr","last_view_inner_y","THEME_H","top_offest","designContH","itemCount","items","bottom_offest","rankData","nowDataTag","isFirstLoad","playAni","__extends","prototype","onLoad","node","height","winSize","padScale","scale","vertical","opE","on","onOperTap","bind","action","UPD_PANEL","UPD_MAIN_RED","initData","SKIN_CHG","setMySelf","start","scheduleOnce","adapter","RefreshThemesVisible","refreshData","updateFriendRankBtn","getSafeAreaRect","yMin","getChildByName","y","position","onEnable","scrollToTop","ins","serverTime","Math","floor","Date","getTime","getRankLastTimeData","isOpenLock","setRankLastTimeData","o","platform","getUserInfo","getComponent","then","updateUserInfo","setHeadSp","getHeadImg","setDefaultHead","onDisable","initAni","getItemCount","string","getRankData","getTodayRaceData","getYdayRaceData","dealData","data","setYdayRaceRankData","console","error","active","getMyRaceTodayData","getMyRaceYdayData","i","concat","r","game_uid","getUid","nickname","getName","sort_value","avatar","push","sort","refreshPanel","content","setContentSize","size","width","setRankTop","getContentPosition","abs","s","c","l","d","u","convertToWorldSpaceAR","v2","convertToNodeSpaceAR","p","setItemInfo","x","opacity","showChgAni","instantiate","v3","parent","h","showLoadAni","setRankData","setGameUid","setScore","setSkin","getUsingSkin","setNickName","uSkin","clearFrame","setIdx","Number","toString","tween","to","easing","onBtnStart","open","itemId","cb","gType","gameType","race","chgScene","sceneType","game","useItem","taskCheck","onBtnTip","pageIdx","onBtnChange","unscheduleAllCallbacks","length","Tween","stopAllByTarget","stopAutoScroll","PFCode","Bytedance","onBtnFriendRank","showFriendRank","SDKConfig","ttZoneId","onDestroy","assetManager","releaseAsset","spriteFrame","__decorate","ScrollView","Node","Label","Sprite","Component"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar a;\nvar _evts = require(\"evts\");\nvar _idx = require(\"idx\");\nvar _mySafeArea = require(\"mySafeArea\");\nvar _pConst = require(\"pConst\");\nvar _request = require(\"request\");\nvar _time = require(\"time\");\nvar _uData = require(\"uData\");\nvar _rankItem = require(\"rankItem\");\nvar _global = require(\"global\");\nvar _bagMgr = require(\"bagMgr\");\nvar _panelMgr = require(\"panelMgr\");\nvar _rankMgr = require(\"rankMgr\");\nvar _taskMgr = require(\"taskMgr\");\nvar _pInfo = require(\"pInfo\");\nvar w = cc._decorator;\nvar S = w.ccclass;\nvar T = w.property;\n(function (t) {\n    t[(t.today = 0)] = \"today\";\n    t[(t.yday = 1)] = \"yday\";\n})(a || (a = {}));\nvar I = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.scrollView = null;\n        e.dayTypeBtnsSps = [];\n        e.friendRankBtn = null;\n        e.viewItem = null;\n        e.rankTop = [];\n        e.myRank = null;\n        e.ticketCount = null;\n        e.topNode = null;\n        e.loadingNode = null;\n        e.bgSpr = null;\n        e.last_view_inner_y = -1;\n        e.THEME_H = 122;\n        e.top_offest = 61;\n        e.designContH = 410;\n        e.itemCount = 0;\n        e.items = [];\n        e.bottom_offest = 0;\n        e.rankData = [];\n        e.nowDataTag = a.today;\n        e.isFirstLoad = !0;\n        e.playAni = !0;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {\n        this.node.height = cc.winSize.height;\n        _global.default.padScale && (this.bgSpr.node.scale = _global.default.padScale);\n        this.scrollView.vertical = !1;\n        _evts.default.opE.on(this.onOperTap.bind(this));\n    };\n    e.prototype.onOperTap = function (t) {\n        var e = null == t ? void 0 : t.action;\n        if (e)\n            switch (e) {\n                case _evts.default.UPD_PANEL:\n                case _evts.default.UPD_MAIN_RED:\n                    this.initData();\n                    break;\n                case _evts.default.SKIN_CHG:\n                    this.setMySelf();\n            }\n    };\n    e.prototype.start = function () {\n        var t = this;\n        this.scheduleOnce(function () {\n            t.adapter();\n            t.scrollView.node.on(\n                \"scrolling\",\n                function () {\n                    t.RefreshThemesVisible();\n                },\n                t\n            );\n            t.initData();\n            t.refreshData();\n            t.updateFriendRankBtn();\n        });\n    };\n    e.prototype.adapter = function () {\n        var t = _mySafeArea.getSafeAreaRect().yMin;\n        var e = this.node.height - 1280 - t;\n        this.scrollView.node.height = this.designContH + e;\n        this.scrollView.node.getChildByName(\"view\").height = this.designContH + e;\n        this.topNode.y -= t;\n        this.scrollView.node.y -= t / 2;\n        this.loadingNode.position = this.scrollView.node.position;\n    };\n    e.prototype.onEnable = function () {\n        var t = this;\n        this.isFirstLoad ||\n            ((this.scrollView.vertical = !1),\n            this.scheduleOnce(function () {\n                t.adapter(),\n                    t.scrollView.scrollToTop(),\n                    (t.playAni = !0),\n                    (t.last_view_inner_y = -1),\n                    t.RefreshThemesVisible();\n            }, 0.2));\n        this.isFirstLoad = !1;\n        var e = _time.default.ins.serverTime || Math.floor(new Date().getTime() / 1e3);\n        if (e - _pInfo.default.ins.getRankLastTimeData() >= 3600 && !_pInfo.default.ins.isOpenLock) {\n            _pInfo.default.ins.setRankLastTimeData(e);\n            var o = _idx.platform.getUserInfo();\n            var n = this.myRank.getComponent(_rankItem.default);\n            o\n                ? o.then(\n                      function (t) {\n                          _request.default.ins.updateUserInfo(t);\n                          n.setHeadSp(_uData.default.ins.getHeadImg());\n                      },\n                      function () {\n                          n.setDefaultHead();\n                      }\n                  )\n                : n.setDefaultHead();\n        }\n    };\n    e.prototype.onDisable = function () {\n        this.initAni();\n    };\n    e.prototype.initData = function () {\n        var t = _bagMgr.default.ins.getItemCount(\"qw_line_ticket\") || 0;\n        this.ticketCount.string = t + \"/1\";\n    };\n    e.prototype.refreshData = function () {\n        this.getRankData();\n    };\n    e.prototype.getRankData = function () {\n        var t;\n        var e = this;\n        this.nowDataTag === a.today\n            ? (t = _rankMgr.default.ins.getTodayRaceData())\n            : this.nowDataTag === a.yday && (t = _rankMgr.default.ins.getYdayRaceData());\n        t.then(function (t) {\n            e.dealData(t.data);\n            e.nowDataTag === a.yday && _rankMgr.default.ins.setYdayRaceRankData(t.data);\n        }).catch(function (t) {\n            console.error(\"getRankDataErr\" + t);\n        });\n    };\n    e.prototype.dealData = function (t) {\n        this.node && (this.loadingNode.active = !1);\n        var e = !1;\n        var o = [];\n        var n = 0;\n        if (\n            (this.nowDataTag === a.today\n                ? (n = _rankMgr.default.ins.getMyRaceTodayData())\n                : this.nowDataTag === a.yday && (n = _rankMgr.default.ins.getMyRaceYdayData()),\n            t)\n        )\n            for (var i in (o = o.concat(t)))\n                if ((r = o[i]).game_uid == _uData.default.ins.getUid()) {\n                    r.nickname = _uData.default.ins.getName();\n                    r.sort_value = n;\n                    r.game_uid = _uData.default.ins.getUid();\n                    r.avatar = _uData.default.ins.getHeadImg();\n                    e = !0;\n                    break;\n                }\n        if (!e) {\n            var r = {\n                nickname: _uData.default.ins.getName(),\n                sort_value: n,\n                game_uid: _uData.default.ins.getUid(),\n                avatar: _uData.default.ins.getHeadImg()\n            };\n            o.push(r);\n        }\n        o.sort(function (t, e) {\n            return e.sort_value - t.sort_value;\n        });\n        this.rankData = o;\n        this.refreshPanel();\n    };\n    e.prototype.refreshPanel = function () {\n        this.setMySelf();\n        this.last_view_inner_y = -1;\n        this.itemCount = 97;\n        var t = this.THEME_H * this.itemCount + this.top_offest / 2;\n        this.scrollView.content.setContentSize(cc.size(cc.winSize.width, t));\n        this.scrollView.scrollToTop();\n        for (var e = 0; e < 3; e++) {\n            var o = this.rankData[e];\n            var n = this.rankTop[e];\n            this.setRankTop(n, o);\n        }\n        this.RefreshThemesVisible();\n    };\n    e.prototype.RefreshThemesVisible = function (t) {\n        var e = this;\n        void 0 === t && (t = 0);\n        var o = this.scrollView.getContentPosition();\n        if (!(Math.abs(this.last_view_inner_y - o.y) < 0.01)) {\n            this.last_view_inner_y = o.y;\n            for (\n                var n,\n                    i,\n                    r,\n                    a,\n                    s,\n                    c,\n                    l = function () {\n                        n = -d * u.THEME_H - u.top_offest;\n                        i = u.scrollView.content.convertToWorldSpaceAR(cc.v2(0, n));\n                        r = u.node.convertToNodeSpaceAR(i);\n                        a = r.y < -p || r.y + u.THEME_H > p;\n                        s = d;\n                        var t = d + 3;\n                        var o = u.rankData[t];\n                        if (a) u.items[s] && (u.items[s].active = !1);\n                        else if (u.items[s]) {\n                            u.setItemInfo(u.items[s], t, o);\n                            var l = u.playAni;\n                            if (((u.items[s].x = 0), l))\n                                return (\n                                    (u.items[s].opacity = 0),\n                                    u.scheduleOnce(function () {\n                                        e.items[s].active = !0;\n                                        e.last_view_inner_y = -1;\n                                        e.RefreshThemesVisible(d + 1);\n                                        l && e.showChgAni(e.items[s]);\n                                    }, 0.06),\n                                    \"break\"\n                                );\n                            u.items[s].opacity = 255;\n                            u.items[s].active = !0;\n                        } else {\n                            (c = cc.instantiate(u.viewItem)).active = !0;\n                            c.position = cc.v3(0, -d * u.THEME_H - u.top_offest);\n                            c.parent = u.scrollView.content;\n                            u.items[s] = c;\n                            u.setItemInfo(c, t, o);\n                            var h = u.playAni;\n                            if (h)\n                                return (\n                                    (c.x = (cc.winSize.width + u.items[s].width) / 2),\n                                    (c.opacity = 255),\n                                    u.scheduleOnce(function () {\n                                        e.last_view_inner_y = -1;\n                                        e.RefreshThemesVisible(d + 1);\n                                        h && e.showLoadAni(c);\n                                    }, 0.02),\n                                    \"break\"\n                                );\n                            c.opacity = 255;\n                            c.x = 0;\n                        }\n                        u.playAni = !1;\n                        d === u.itemCount - 1 &&\n                            u.scheduleOnce(function () {\n                                e.scrollView.vertical = !0;\n                            }, 0.5);\n                    },\n                    u = this,\n                    p = (this.scrollView.node.height / 5) * 4,\n                    d = t;\n                d < this.itemCount && \"break\" !== l();\n                d++\n            );\n        }\n    };\n    e.prototype.setRankTop = function (t, e) {\n        var o = t.getComponent(_rankItem.default);\n        e\n            ? (o.setRankData(e),\n              o.setGameUid(e.game_uid),\n              o.setScore(e.sort_value),\n              e.game_uid == _uData.default.ins.getUid()\n                  ? (o.setSkin(_pInfo.default.ins.getUsingSkin(), !1, !0),\n                    o.setNickName(_uData.default.ins.getName()),\n                    o.setHeadSp(_uData.default.ins.getHeadImg()))\n                  : (o.setSkin(null == e ? void 0 : e.uSkin, !1, !0),\n                    o.setNickName(e.nickname),\n                    e.avatar ? o.setHeadSp(e.avatar) : o.setDefaultHead()))\n            : (o.clearFrame(), o.setNickName(\"暂无\"), o.setScore(\"0\"), o.setDefaultHead());\n    };\n    e.prototype.setItemInfo = function (t, e, o, n) {\n        void 0 === n && (n = !1);\n        var i = t.getComponent(_rankItem.default);\n        i.setIdx(Number(e) + 1 + \"\");\n        o\n            ? (i.setRankData(o),\n              i.setGameUid(o.game_uid),\n              i.setScore(o.sort_value),\n              o.game_uid == _uData.default.ins.getUid()\n                  ? (i.setSkin(_pInfo.default.ins.getUsingSkin(), n),\n                    i.setNickName(_uData.default.ins.getName()),\n                    i.setHeadSp(_uData.default.ins.getHeadImg()))\n                  : (i.setSkin(null == o ? void 0 : o.uSkin),\n                    i.setNickName(o.nickname),\n                    o.avatar ? i.setHeadSp(o.avatar) : i.setDefaultHead()))\n            : (i.clearFrame(), i.setNickName(\"暂无\"), i.setScore(\"0\"), i.setDefaultHead());\n    };\n    e.prototype.setMySelf = function () {\n        var t = this.rankData;\n        for (var e in t) {\n            var o = t[e];\n            if (o.game_uid == _uData.default.ins.getUid() && Number(e) < 100)\n                return void this.setItemInfo(this.myRank, e, o, !0);\n        }\n        var n = 0;\n        this.nowDataTag === a.today\n            ? (n = _rankMgr.default.ins.getMyRaceTodayData())\n            : this.nowDataTag === a.yday && (n = _rankMgr.default.ins.getMyRaceYdayData());\n        var i = this.myRank.getComponent(_rankItem.default);\n        i.setSkin(_pInfo.default.ins.getUsingSkin(), !0);\n        i.setGameUid(_uData.default.ins.getUid().toString());\n        i.setIdx(\"99+\");\n        i.setNickName(_uData.default.ins.getName());\n        i.setScore(n + \"\");\n        _uData.default.ins.getHeadImg() ? i.setHeadSp(_uData.default.ins.getHeadImg()) : i.setDefaultHead();\n    };\n    e.prototype.showLoadAni = function (t) {\n        cc.tween(t).to(0.5, {x: 0}, {easing: \"backInOut\"}).start();\n    };\n    e.prototype.showChgAni = function (t) {\n        cc.tween(t).to(0.5, {opacity: 255}).start();\n    };\n    e.prototype.onBtnStart = function () {\n        _bagMgr.default.ins.getItemCount(\"qw_line_ticket\") <= 0\n            ? _panelMgr.default.ins.open(\"ui/ui_getItem\", {\n                  itemId: \"qw_line_ticket\",\n                  cb: this.initData.bind(this),\n                  gType: _pInfo.gameType.race\n              })\n            : (_pInfo.chgScene(_pInfo.sceneType.game, {gameType: _pInfo.gameType.race}),\n              _bagMgr.default.ins.useItem(\"qw_line_ticket\", 1, _pInfo.gameType.race),\n              _taskMgr.default.taskCheck(_pInfo.gameType.race));\n    };\n    e.prototype.onBtnTip = function () {\n        _panelMgr.default.ins.open(\"ui/ui_raceTip\", {pageIdx: 2});\n    };\n    e.prototype.onBtnChange = function () {\n        this.initAni();\n        this.nowDataTag === a.yday\n            ? ((this.nowDataTag = a.today),\n              (this.dayTypeBtnsSps[0].active = !1),\n              (this.dayTypeBtnsSps[1].active = !0),\n              this.refreshData())\n            : this.nowDataTag === a.today &&\n              ((this.nowDataTag = a.yday),\n              (this.dayTypeBtnsSps[0].active = !0),\n              (this.dayTypeBtnsSps[1].active = !1),\n              this.refreshData());\n    };\n    e.prototype.initAni = function () {\n        this.unscheduleAllCallbacks();\n        for (var t = 0, e = this.items.length; t < e; t++) {\n            var o = this.items[t];\n            cc.Tween.stopAllByTarget(o);\n            o && (o.opacity = 0);\n        }\n        this.scrollView.stopAutoScroll();\n        this.scrollView.scrollToTop();\n        this.scrollView.vertical = !1;\n        this.playAni = !0;\n    };\n    e.prototype.updateFriendRankBtn = function () {\n        this.friendRankBtn.active = _idx.platform.string() === _pConst.PFCode.Bytedance;\n    };\n    e.prototype.onBtnFriendRank = function () {\n        _idx.platform.showFriendRank(_pConst.SDKConfig.ttZoneId.race);\n    };\n    e.prototype.onDestroy = function () {\n        cc.assetManager.releaseAsset(this.bgSpr.spriteFrame);\n    };\n    __decorate([T(cc.ScrollView)], e.prototype, \"scrollView\", void 0);\n    __decorate([T([cc.Node])], e.prototype, \"dayTypeBtnsSps\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"friendRankBtn\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"viewItem\", void 0);\n    __decorate([T([cc.Node])], e.prototype, \"rankTop\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"myRank\", void 0);\n    __decorate([T(cc.Label)], e.prototype, \"ticketCount\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"topNode\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"loadingNode\", void 0);\n    __decorate([T(cc.Sprite)], e.prototype, \"bgSpr\", void 0);\n    return __decorate([S], e);\n})(cc.Component);\nexports.default = I;\n"]}