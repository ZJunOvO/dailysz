{"version":3,"sources":["assets\\scripts\\shopMgr.js"],"names":["Object","defineProperty","exports","value","_idx","require","_cfgMgr","r","t","localData","get","_ins","enumerable","configurable","prototype","getAllRed","e","o","serverCfg","shop_config","gift","n","a","s","c","tag","is_shop","push","l","getTabsRed","u","p","d","h","length","f","price","getLocalShopRedData","tabsRed","setTabsRed","setLocalShopRedData","getPackRed","packRed","setPackRed","assign","platform","setStorage","getStorage"],"mappings":"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","sourceRoot":"/","sourcesContent":["Object.defineProperty(exports, \"__esModule\", {value: !0});\nvar _idx = require(\"idx\");\nvar _cfgMgr = require(\"cfgMgr\");\nvar r = (function () {\n    function t() {\n        this.localData = null;\n    }\n    Object.defineProperty(t, \"ins\", {\n        get: function () {\n            return this._ins || (this._ins = new t());\n        },\n        enumerable: !1,\n        configurable: !0\n    });\n    t.prototype.getAllRed = function () {\n        var t;\n        var e;\n        var o =\n            null === (e = null === (t = _cfgMgr.default.serverCfg) || void 0 === t ? void 0 : t.shop_config) ||\n            void 0 === e\n                ? void 0\n                : e.gift;\n        var n = 0;\n        if (o) {\n            var r = {};\n            for (var a in o) {\n                var s = o[a];\n                var c = s.tag || 0;\n                s.is_shop && (r[c] ? r[c].push(s) : ((r[c] = []), r[c].push(s)));\n            }\n            var l = this.getTabsRed();\n            for (var u in r) {\n                var p = r[u];\n                if (p) {\n                    var d = 1;\n                    if (l[u]) d = 0;\n                    else for (var h = p.length, f = 0; f < h; f++) 0 == (p[f].price || 0) && d++;\n                    n += d;\n                }\n            }\n        }\n        return n;\n    };\n    t.prototype.getTabsRed = function () {\n        var t = this.getLocalShopRedData().tabsRed;\n        return null == t ? {} : t;\n    };\n    t.prototype.setTabsRed = function (t) {\n        this.setLocalShopRedData({tabsRed: t});\n    };\n    t.prototype.getPackRed = function () {\n        var t = this.getLocalShopRedData().packRed;\n        return null == t ? {} : t;\n    };\n    t.prototype.setPackRed = function (t) {\n        this.setLocalShopRedData({packRed: t});\n    };\n    t.prototype.setLocalShopRedData = function (t) {\n        var e = this.getLocalShopRedData();\n        this.localData = Object.assign(Object.assign({}, e), t);\n        _idx.platform.setStorage(\"shopRed\", this.localData);\n    };\n    t.prototype.getLocalShopRedData = function () {\n        null == this.localData && (this.localData = _idx.platform.getStorage(\"shopRed\") || {});\n        return this.localData;\n    };\n    return t;\n})();\nexports.default = r;\n"]}