{"version":3,"sources":["assets\\scripts\\skinItemBase.js"],"names":["n","Object","defineProperty","exports","value","_evts","require","_panelMgr","_skinMgr","l","cc","_decorator","u","ccclass","p","property","d","t","e","apply","arguments","usingNode","lockNode","state","SkinState","none","ref","id","__extends","prototype","onLoad","node","getContentSize","setContentSize","setPosition","start","onEnable","on","clickItem","eventFunc","onOperTap","bind","opE","onDisable","off","action","SKIN_CHG","updateState","initItem","loadItem","ins","isHasSkin","unlock","lock","isUsingSkin","using","setState","active","openSkinInfo","o","open","skinId","showNode","unlockState","__decorate","Node","Component"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _evts = require(\"evts\");\nvar _panelMgr = require(\"panelMgr\");\nvar _skinMgr = require(\"skinMgr\");\nvar l = cc._decorator;\nvar u = l.ccclass;\nvar p = l.property;\nvar d = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.usingNode = null;\n        e.lockNode = null;\n        e.state = _skinMgr.SkinState.none;\n        e.ref = -1;\n        e.id = \"\";\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {\n        var t = this.node.getContentSize();\n        this.lockNode.setContentSize(t);\n        this.usingNode.setPosition(0, 0);\n    };\n    e.prototype.start = function () {};\n    e.prototype.onEnable = function () {\n        this.node.on(\"click\", this.clickItem, this);\n        this.eventFunc = this.onOperTap.bind(this);\n        _evts.default.opE.on(this.eventFunc);\n    };\n    e.prototype.onDisable = function () {\n        this.node.off(\"click\", this.clickItem, this);\n        _evts.default.opE.off(this.eventFunc);\n        this.eventFunc = null;\n    };\n    e.prototype.onOperTap = function (t) {\n        t.action === _evts.default.SKIN_CHG && this.updateState();\n    };\n    e.prototype.initItem = function (t, e) {\n        this.ref = t.ref;\n        this.id = e;\n        this.updateState();\n        this.loadItem();\n    };\n    e.prototype.updateState = function () {\n        var t = _skinMgr.default.ins.isHasSkin(this.id, this.ref) ? _skinMgr.SkinState.unlock : _skinMgr.SkinState.lock;\n        t === _skinMgr.SkinState.unlock &&\n            _skinMgr.default.ins.isUsingSkin(this.id, this.ref) &&\n            (t = _skinMgr.SkinState.using);\n        this.setState(t);\n    };\n    e.prototype.setState = function (t) {\n        this.state = t;\n        this.usingNode.active = t == _skinMgr.SkinState.using;\n        this.lockNode.active = t == _skinMgr.SkinState.lock;\n    };\n    e.prototype.loadItem = function () {};\n    e.prototype.clickItem = function () {};\n    e.prototype.openSkinInfo = function (t) {\n        var e = this.ref;\n        var o = this.id;\n        _panelMgr.default.ins.open(\"ui/ui_skinInfo\", {ref: e, skinId: o, showNode: t, unlockState: this.state});\n    };\n    __decorate([p(cc.Node)], e.prototype, \"usingNode\", void 0);\n    __decorate([p(cc.Node)], e.prototype, \"lockNode\", void 0);\n    return __decorate([u], e);\n})(cc.Component);\nexports.default = d;\n"]}