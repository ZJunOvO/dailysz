{"version":3,"sources":["assets\\scripts\\tb.js"],"names":["n","Object","defineProperty","exports","value","_ali","require","_uData","_evts","_pConst","_sound","_idx","_time","h","t","e","call","__extends","prototype","get","enumerable","configurable","string","PFCode","TaoBao","login","Promise","resolve","initAliListener","my","onShow","plE","emit","isSharing","ins","syncLaunchOption","reenter","bySlider","query","sourceChannel","opE","action","Slider_Chg","onHide","onHideT","serverTime","SDKConfig","shareData","canUse","onShareAppMessage","title","desc","imageUrl","onMemoryWarning","triggerGC","initCommonSetting","getNetworkType","success","fail","chE","on","syncTime","platform","cloud","callContainer","path","init","method","header","timeout","o","data","JSON","parse","doWatchAD","share","showSharePanel","from","playBGM","console","error"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", { value: !0 });\nvar _ali = require(\"ali\");\nvar _uData = require(\"uData\");\nvar _evts = require(\"evts\");\nvar _pConst = require(\"pConst\");\nvar _sound = require(\"sound\");\nvar _idx = require(\"idx\");\nvar _time = require(\"time\");\nvar _ali = require(\"ali\");\nvar h = (function(t) {\n    function e() {\n        return t.call(this) || this;\n    }\n    __extends(e, t);\n    Object.defineProperty(e.prototype, \"appId\", {\n        get: function() {\n            return \"3000000107678912\";\n        },\n        enumerable: !1,\n        configurable: !0\n    });\n    e.prototype.string = function() {\n        return _pConst.PFCode.TaoBao;\n    };\n    e.prototype.login = function() {\n        return Promise.resolve();\n    };\n    e.prototype.initAliListener = function() {\n        var t = this;\n        _ali.my.onShow(function(e) {\n            _evts.default.plE.emit({ onShow: !0, isSharing: t.isSharing }),\n                _uData.default.ins.syncLaunchOption(e),\n                t.isSharing || t.reenter(),\n                (t.bySlider = \"gamecenter\" == e.query.sourceChannel),\n                _evts.default.opE.emit({ action: _evts.default.Slider_Chg });\n        });\n        _ali.my.onHide(function() {\n            t.onHideT = _time.default.ins.serverTime;\n            _evts.default.plE.emit({ onHide: !0 });\n        });\n        var e = _pConst.SDKConfig.shareData();\n        this.canUse(\"8.8.0\") &&\n            (_ali.my.onShareAppMessage = function() {\n                return {\n                    title: e.title,\n                    desc: \"\",\n                    imageUrl: \"https://tjkj300.oss-cn-shenzhen.aliyuncs.com/web/tjkj300web/other/share.jpg\"\n                };\n            });\n        _ali.my.onMemoryWarning &&\n            _ali.my.onMemoryWarning(function() {\n                _ali.my.triggerGC && _ali.my.triggerGC();\n            });\n    };\n    e.prototype.initCommonSetting = function() {\n        _ali.my.getNetworkType({ success: function() {}, fail: function() {} });\n        _evts.default.chE.on(function() {});\n    };\n    e.prototype.syncTime = function() {\n        return new Promise(function(t) {\n            var e = _idx.platform.cloud;\n            e\n                ?\n                e.callContainer({\n                    path: \"/api/gTime\",\n                    init: { method: \"GET\", header: { \"content-type\": \"application/json\" }, timeout: 2e3 },\n                    success: function(e) {\n                        var o;\n                        var n = e.data;\n                        if (n)\n                            if (\"string\" == typeof n)\n                                try {\n                                    o = JSON.parse(n).t;\n                                } catch (e) {}\n                            else o = n.t;\n                        t(o || null);\n                    },\n                    fail: function() {\n                        return t(null);\n                    }\n                }) :\n                t(null);\n        });\n    };\n    e.prototype.doWatchAD = function() {};\n    e.prototype.share = function() {\n        return new Promise(function(t) {\n            _ali.my.showSharePanel({\n                from: \"code\",\n                success: function() {\n                    _sound.default.ins.playBGM();\n                    t(1);\n                },\n                fail: function(e) {\n                    console.error(\"alisharedata fail:\", e);\n                    _sound.default.ins.playBGM();\n                    t(0);\n                }\n            });\n        });\n    };\n    return e;\n})(_ali.default);\nexports.default = h;"]}