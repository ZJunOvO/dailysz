{"version":3,"sources":["assets\\scripts\\top.js"],"names":["n","Object","defineProperty","exports","value","_evts","require","_idx","_mySafeArea","_pConst","_res","_time","_uData","_cfgMgr","_lang","_global","_mailMgr","_panelMgr","_taskMgr","_pInfo","_head","_rewardMgr","w","cc","_decorator","S","ccclass","T","property","I","Math","floor","D","ceil","P","t","e","apply","arguments","countDownNode","coinLbl","cashLbl","powerLbl","powerCdLbl","powerSp","sidebarNode","desktopNode","newGiftBtn","newGiftBtnLight","friendRankBtn","clearBtn","sidebarRedPointNode","mailRedPointLbl","txt_name","deskLb","saveBtn","signRedLb","headComp","serviceNode","taskRedLb","__extends","prototype","onLoad","console","log","updateDesktop","updateSidebar","updateMail","updateCoin","scheduleOnce","updateCash","bind","updatePower","upChapter","loadNewGift","updateNewGift","updateHead","updateFriendRank","updateSignRed","upserviceNode","upDTaskRed","opE","on","onOperTap","plE","onOperTap2","destroy","start","node","y","getSafeAreaRect","yMin","removeComponent","Widget","padScale","view","getVisibleSize","width","children","x","action","COIN_CHG","getCashDisplay","POWER_CHG","Slider_Chg","UPDMAIL","UPD_NEW_GIFT","UPD_TOP_HEADINFO","ADD_DESKTOP","addDesktopCb","data","ALIPAY_MAIN","getDesktopReward","Desktop_Chg","SIGN_RED","UPD_MAIN_RED","onHide","pause","onShow","parent","active","getUnFinishNum","string","getCharXOffset","platform","PFCode","Bytedance","getSystemData","appName","ins","getAddDesk","o","serverCfg","add_desktop","rules","times","Alipay","getLocalData","aliAddHome","cDeskCatch","sidebarExist","bySlider","getIsGetSlider","open","getMail","isValid","errMsg","i","mailInfo","mail","mailState","noRead","getCoin","cashDisplay","schedule","_updatePower","macro","REPEAT_FOREVER","unschedule","getBundleByString","then","load","sp","SkeletonData","Node","addComponent","Skeleton","skeletonData","animation","error","tween","by","angle","repeatForever","sequence","to","scale","getName","length","substring","getHeadImg","loadHeadImg","getPowerFullTime","serverTime","getPower","r","forUser","a","getIsNewUser","new_user","basic_times","val","all","s","getPerPowerNeedTime","c","l","u","f","g","setPowerFullTime","setPower","onBtnGetPower","itemId","onBtnSet","onBtnRecord","onBtnRank","onBtnGetCoin","gType","gameType","normal","useTo","getCoinFor","Main","onBtnGetCash","onBtnChapter","onBtnSidebar","onBtnEmail","onBtnTip","pageIdx","onBtnNewGift","hideCb","onBtnDesktop","addShortcut","addGamesetlattice","call","onBtnFriendRank","showFriendRank","SDKConfig","ttZoneId","onBtnSkin","onBtnSave","onBtnSign","onBtnQuest","onBtnService","openService","onTest","clearDailyData","testCashRewardSystem","difficulties","testResults","difficulty","beforeBalance","getCash","hasReward","onPuzzleComplete","afterBalance","rewardAmount","toFixed","push","reward","setAddDesk","addPower","position","deskTopNodePos","convertToWorldSpaceAR","itemDatas","worldPos","__decorate","Label","Sprite","Component"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _evts = require(\"evts\");\nvar _idx = require(\"idx\");\nvar _mySafeArea = require(\"mySafeArea\");\nvar _pConst = require(\"pConst\");\nvar _res = require(\"res\");\nvar _time = require(\"time\");\nvar _uData = require(\"uData\");\nvar _cfgMgr = require(\"cfgMgr\");\nvar _lang = require(\"lang\");\nvar _global = require(\"global\");\nvar _mailMgr = require(\"mailMgr\");\nvar _panelMgr = require(\"panelMgr\");\nvar _taskMgr = require(\"taskMgr\");\nvar _pInfo = require(\"pInfo\");\nvar _head = require(\"head\");\nvar _rewardMgr = require(\"rewardMgr\");\nvar w = cc._decorator;\nvar S = w.ccclass;\nvar T = w.property;\nvar I = Math.floor;\nvar D = Math.ceil;\nvar P = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.countDownNode = null;\n        e.coinLbl = null;\n        e.cashLbl = null;\n        e.powerLbl = null;\n        e.powerCdLbl = null;\n        e.powerSp = null;\n        e.sidebarNode = null;\n        e.desktopNode = null;\n        e.newGiftBtn = null;\n        e.newGiftBtnLight = null;\n        e.friendRankBtn = null;\n        e.clearBtn = null;\n        e.sidebarRedPointNode = null;\n        e.mailRedPointLbl = null;\n        e.txt_name = null;\n        e.deskLb = null;\n        e.saveBtn = null;\n        e.signRedLb = null;\n        e.headComp = null;\n        e.serviceNode = null;\n        e.taskRedLb = null;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {\n        console.log(\"🎮 Top组件onLoad开始\");\n        this.updateDesktop();\n        this.updateSidebar();\n        this.updateMail();\n        this.updateCoin();\n        // 💝 游戏进入时立即更新现金余额显示\n        console.log(\"🎮 准备调用updateCash，cashLbl状态:\", !!this.cashLbl);\n        this.scheduleOnce(this.updateCash.bind(this), 0.1);\n        console.log(\"🎮 scheduleOnce updateCash已设置\");\n        \n        // 💝 多次尝试更新，确保绑定成功后能更新\n        this.scheduleOnce(this.updateCash.bind(this), 0.5);\n        this.scheduleOnce(this.updateCash.bind(this), 1.0);\n        this.updatePower();\n        this.upChapter();\n        this.loadNewGift();\n        this.updateNewGift();\n        this.updateHead();\n        this.updateFriendRank();\n        this.updateSignRed();\n        this.upserviceNode();\n        this.upDTaskRed();\n        _evts.default.opE.on(this.onOperTap.bind(this));\n        _evts.default.plE.on(this.onOperTap2.bind(this));\n        this.clearBtn.destroy();\n    };\n    e.prototype.start = function () {\n        var t = this;\n        this.scheduleOnce(function () {\n            if (\n                ((t.node.y -= _mySafeArea.getSafeAreaRect().yMin),\n                t.node.removeComponent(cc.Widget),\n                _global.default.padScale)\n            ) {\n                var e = (cc.view.getVisibleSize().width - 720) / 2;\n                t.node.children[0].x -= e;\n                t.node.children[1].x += e;\n            }\n            \n            // 💝 UI初始化完成\n        });\n    };\n    e.prototype.onOperTap = function (t) {\n        var e = null == t ? void 0 : t.action;\n        if (e)\n            switch (e) {\n                case _evts.default.COIN_CHG:\n                    this.updateCoin();\n                    break;\n                case 'CASH_CHG':\n                    // 💝 现金余额UI更新\n                    this.updateCash();\n                    console.log(\"💰 卷卷的现金余额更新了: ￥\" + _rewardMgr.default.getCashDisplay());\n                    break;\n                case _evts.default.POWER_CHG:\n                    this.updatePower();\n                    break;\n                case _evts.default.Slider_Chg:\n                    this.updateSidebar();\n                    break;\n                case _evts.default.UPDMAIL:\n                    this.updateMail();\n                    break;\n                case _evts.default.UPD_NEW_GIFT:\n                    this.updateNewGift();\n                    break;\n                case _evts.default.UPD_TOP_HEADINFO:\n                    this.updateHead();\n                    break;\n                case _evts.default.ADD_DESKTOP:\n                    this.addDesktopCb(t.data);\n                    break;\n                case _evts.default.ALIPAY_MAIN:\n                    this.getDesktopReward();\n                case _evts.default.Desktop_Chg:\n                    this.updateDesktop();\n                    break;\n                case _evts.default.SIGN_RED:\n                    this.updateSignRed();\n                    break;\n                case _evts.default.UPD_MAIN_RED:\n                    this.upDTaskRed();\n            }\n    };\n    e.prototype.onOperTap2 = function (t) {\n        t && (t.onHide && this.pause(), t.onShow && this.updatePower());\n    };\n    e.prototype.updateSignRed = function () {\n        this.signRedLb.node.parent.parent.active = !1;\n    };\n    e.prototype.upDTaskRed = function () {\n        var t = _taskMgr.default.getUnFinishNum();\n        var e = this.taskRedLb;\n        e &&\n            (t > 0\n                ? ((e.node.parent.active = !0),\n                  (e.string = t + \"\"),\n                  (e.node.x = _global.default.getCharXOffset(e.string)))\n                : (e.node.parent.active = !1));\n    };\n    e.prototype.upserviceNode = function () {\n        if (((this.serviceNode.active = !1), _idx.platform.string() == _pConst.PFCode.Bytedance)) {\n            var t = _idx.platform.getSystemData();\n            t && ((\"Douyin\" != t.appName && \"douyin_lite\" != t.appName) || (this.serviceNode.active = !0));\n        }\n    };\n    e.prototype.updateDesktop = function () {\n        var t;\n        var e;\n        switch (_idx.platform.string()) {\n            case _pConst.PFCode.Bytedance:\n                if (((this.desktopNode.active = !0), _pInfo.default.ins.getAddDesk()))\n                    this.deskLb.node.parent.active = !1;\n                else {\n                    var o =\n                        (null ===\n                            (e =\n                                null === (t = _cfgMgr.default.serverCfg.add_desktop) || void 0 === t\n                                    ? void 0\n                                    : t.rules) || void 0 === e\n                            ? void 0\n                            : e.times) || 50;\n                    this.deskLb.string = \"+\" + o;\n                    this.deskLb.node.parent.active = !0;\n                }\n                break;\n            case _pConst.PFCode.Alipay:\n                0 === _uData.default.ins.getLocalData().aliAddHome || _idx.platform.cDeskCatch\n                    ? (this.desktopNode.active = !1)\n                    : (this.desktopNode.active = !0);\n                break;\n            default:\n                this.desktopNode.active = !1;\n        }\n    };\n    e.prototype.updateSidebar = function () {\n        this.sidebarNode.active = _idx.platform.sidebarExist;\n        var t = _idx.platform.bySlider && !_pInfo.default.ins.getIsGetSlider();\n        this.sidebarRedPointNode.active = t;\n        t &&\n            this.scheduleOnce(function () {\n                _panelMgr.default.ins.open(\"ui/ui_sidebar\", null);\n            });\n    };\n    e.prototype.updateMail = function () {\n        var t = this;\n        _mailMgr.default.ins.getMail(function (e) {\n            var o = 0;\n            var n = t.mailRedPointLbl;\n            if (n && n.isValid) {\n                if (e && e.errMsg && \"error\" === e.errMsg) return void (t.mailRedPointLbl.node.parent.active = !1);\n                for (var i in _mailMgr.default.ins.mailInfo.mail)\n                    _mailMgr.default.ins.mailInfo.mail[i] == _mailMgr.mailState.noRead && o++;\n                t.mailRedPointLbl.string = o + \"\";\n                t.mailRedPointLbl.node.parent.active = o > 0;\n            }\n        });\n    };\n    e.prototype.updateFriendRank = function () {\n        this.friendRankBtn.active = _idx.platform.string() == _pConst.PFCode.Bytedance;\n    };\n    e.prototype.updateCoin = function () {\n        this.coinLbl.string = _pInfo.default.ins.getCoin() + \"\";\n    };\n    e.prototype.updateCash = function () {\n        var cashDisplay = _rewardMgr.default.getCashDisplay();\n        console.log(\"🔍 updateCash调用 - cashLbl存在:\", !!this.cashLbl, \"现金余额:\", cashDisplay);\n        console.log(\"🔍 cashLbl详细信息:\", this.cashLbl);\n        \n        if (this.cashLbl) {\n            console.log(\"🔍 更新前卷卷现金显示:\", this.cashLbl.string);\n            this.cashLbl.string = cashDisplay;\n            console.log(\"🔍 更新后卷卷现金显示:\", this.cashLbl.string);\n            console.log(\"✅ 卷卷的现金余额UI已更新: ￥\" + cashDisplay);\n        } else {\n            console.log(\"❌ cashLbl未绑定！需要在Cocos Creator编辑器中将现金Label绑定到cashLbl属性\");\n            console.log(\"💰 卷卷的现金余额数据正常: ￥\" + cashDisplay + \" (但UI无法显示)\");\n        }\n    };\n\n    e.prototype.updatePower = function () {\n        this.schedule(this._updatePower, 1, cc.macro.REPEAT_FOREVER);\n        this._updatePower();\n    };\n    e.prototype.pause = function () {\n        this.unschedule(this._updatePower);\n    };\n    e.prototype.loadNewGift = function () {\n        var t = this;\n        _res.default.ins\n            .getBundleByString(\"resSps\")\n            .then(function (e) {\n                e.load(\"spine/light/action\", sp.SkeletonData, function (e, o) {\n                    if (!e && t.node && t.node.isValid) {\n                        var n = new cc.Node();\n                        var i = n.addComponent(sp.Skeleton);\n                        (i.skeletonData = o), (i.animation = \"animation\"), (n.parent = t.newGiftBtn);\n                    }\n                });\n            })\n            .catch(function (t) {\n                console.error(\"RTool.ins.getBundleByString('resSps')\", t);\n            });\n        cc.tween(this.newGiftBtnLight).by(3, {angle: -360}).repeatForever().start();\n        cc.tween(this.newGiftBtn)\n            .sequence(cc.tween().to(1, {scale: 0.9}), cc.tween().to(1, {scale: 1}))\n            .repeatForever()\n            .start();\n    };\n    e.prototype.updateNewGift = function () {\n        this.newGiftBtn.active = this.newGiftBtnLight.active = !1;\n    };\n    e.prototype.updateHead = function () {\n        var t = _uData.default.ins.getName() || \"卷卷大王\";\n        t.length > 7 && (t = t.substring(0, 6) + \"...\");\n        this.txt_name.string = t;\n        var e = _uData.default.ins.getHeadImg();\n        this.headComp.loadHeadImg(e);\n    };\n    e.prototype.upChapter = function () {};\n    e.prototype._updatePower = function () {\n        if (this.isValid) {\n            var t = _pInfo.default.ins;\n            var e = t.getPowerFullTime() - _time.default.ins.serverTime;\n            var o = t.getPower();\n            var n = o;\n            var i = e > 0;\n            var r = _cfgMgr.default.serverCfg.times.forUser;\n            var a =\n                (_uData.default.ins.getIsNewUser() ? r.new_user.rules.basic_times.val : r.all.rules.basic_times.val) ||\n                100;\n            if (i) {\n                var s = t.getPerPowerNeedTime();\n                n = a - D(e / s);\n                var c = e % s;\n                var l = I(c / 60);\n                var u = I(c % 60);\n                var f = l < 10 ? \"0\" : \"\";\n                var g = u < 10 ? \"0\" : \"\";\n                this.powerCdLbl.string = f + l + \":\" + g + u;\n            } else n < a && (n = a), this.unschedule(this._updatePower), _pInfo.default.ins.setPowerFullTime(0);\n            this.countDownNode.active = i;\n            n != o && t.setPower(n);\n            this.powerLbl.string = n + \"/\" + a;\n        }\n    };\n    e.prototype.onBtnGetPower = function () {\n        _panelMgr.default.ins.open(\"ui/ui_getRes\", {itemId: \"times\"});\n    };\n    e.prototype.onBtnSet = function () {\n        _panelMgr.default.ins.open(\"ui/ui_set\", null);\n    };\n    e.prototype.onBtnRecord = function () {\n        _panelMgr.default.ins.open(\"ui/ui_record\", null);\n    };\n    e.prototype.onBtnRank = function () {\n        _panelMgr.default.ins.open(\"ui/ui_rank\", null);\n    };\n    e.prototype.onBtnGetCoin = function () {\n        _panelMgr.default.ins.open(\"ui/ui_getRes\", {\n            itemId: \"coin\",\n            gType: _pInfo.gameType.normal,\n            useTo: _lang.getCoinFor.Main\n        });\n    };\n    e.prototype.onBtnGetCash = function () {\n        // 💝 手动测试现金奖励功能（已暂时注释）\n        /*\n        try {\n            console.log(\"🧪 开始现金奖励测试...\");\n            \n            // 显示当前现金余额\n            console.log(\"当前现金余额:\", _rewardMgr.default.getCashDisplay());\n            \n            // 触发现金奖励（手动测试模式）\n            var hasReward = _rewardMgr.default.onPuzzleComplete('easy', true, true);\n            \n            if (hasReward) {\n                console.log(\"✅ 获得现金奖励！\");\n                console.log(\"新的现金余额:\", _rewardMgr.default.getCashDisplay());\n            } else {\n                console.log(\"⭕ 本次没有触发现金奖励（随机概率）\");\n            }\n            \n        } catch (error) {\n            console.log(\"❌ 现金奖励测试失败:\", error);\n            console.error(error);\n        }\n        */\n        console.log(\"💝 现金奖励手动测试已暂时禁用\");\n    };\n    e.prototype.onBtnChapter = function () {\n        _panelMgr.default.ins.open(\"ui/ui_chapter\", null);\n    };\n    e.prototype.onBtnSidebar = function () {\n        _panelMgr.default.ins.open(\"ui/ui_sidebar\", null);\n    };\n    e.prototype.onBtnEmail = function () {\n        _panelMgr.default.ins.open(\"ui/ui_mail\", null);\n    };\n    e.prototype.onBtnTip = function () {\n        _panelMgr.default.ins.open(\"ui/ui_raceTip\", {pageIdx: 0});\n    };\n    e.prototype.onBtnNewGift = function () {\n        _panelMgr.default.ins.open(\"ui/ui_newGift\", {hideCb: null});\n    };\n    e.prototype.onBtnDesktop = function () {\n        var t;\n        switch (_idx.platform.string()) {\n            case _pConst.PFCode.Bytedance:\n                _idx.platform.addShortcut();\n                break;\n            case _pConst.PFCode.Alipay:\n                null === (t = _idx.platform.addGamesetlattice) || void 0 === t || t.call(_idx.platform);\n        }\n    };\n    e.prototype.onBtnFriendRank = function () {\n        _idx.platform.showFriendRank(_pConst.SDKConfig.ttZoneId.normal);\n    };\n    e.prototype.onBtnSkin = function () {\n        _panelMgr.default.ins.open(\"ui/ui_skin\", null);\n    };\n    e.prototype.onBtnSave = function () {\n        _panelMgr.default.ins.open(\"ui/ui_save\", null);\n    };\n    e.prototype.onBtnSign = function () {\n        _panelMgr.default.ins.open(\"ui/ui_sevenDay\", null);\n    };\n    e.prototype.onBtnQuest = function () {\n        _panelMgr.default.ins.open(\"ui/ui_quest\", null);\n    };\n    e.prototype.onBtnService = function () {\n        if (_idx.platform.string() == _pConst.PFCode.Bytedance) {\n            var t = _idx.platform.getSystemData();\n            if (t) {\n                var e = 0;\n                switch (t.appName) {\n                    case \"Douyin\":\n                        e = 2;\n                        break;\n                    case \"douyin_lite\":\n                        e = 1;\n                }\n                e && _idx.platform.openService(e);\n            }\n        }\n    };\n    e.prototype.onTest = function () {\n        _pInfo.default.ins.clearDailyData();\n    };\n    \n    // 💝 现金奖励测试方法（通过开发者控制台调用）\n    e.prototype.testCashRewardSystem = function() {\n        try {\n            console.log(\"🧪=== 现金奖励系统测试开始 ===\");\n            console.log(\"当前现金余额:\", _rewardMgr.default.getCashDisplay());\n            \n            // 测试不同难度\n            var difficulties = ['beginner', 'easy', 'medium', 'hard', 'expert'];\n            var testResults = [];\n            \n            for (var i = 0; i < difficulties.length; i++) {\n                var difficulty = difficulties[i];\n                var beforeBalance = _rewardMgr.default.getCash();\n                var hasReward = _rewardMgr.default.onPuzzleComplete(difficulty, true);\n                var afterBalance = _rewardMgr.default.getCash();\n                \n                if (hasReward) {\n                    var rewardAmount = afterBalance - beforeBalance;\n                    console.log(\"✅\", difficulty, \"难度获得奖励:\", (rewardAmount/100).toFixed(2), \"元\");\n                    testResults.push({difficulty: difficulty, reward: rewardAmount});\n                } else {\n                    console.log(\"⭕\", difficulty, \"难度没有触发奖励\");\n                }\n            }\n            \n            console.log(\"🏆 测试完成！总余额:\", _rewardMgr.default.getCashDisplay());\n            console.log(\"📊 获得奖励的测试:\", testResults);\n            \n        } catch (error) {\n            console.log(\"❌ 测试失败:\", error);\n            console.error(error);\n        }\n    };\n    e.prototype.addDesktopCb = function (t) {\n        var e = _pInfo.default.ins.getAddDesk();\n        t && !e && (_pInfo.default.ins.setAddDesk(!0), this.getDesktopReward(), this.updateDesktop());\n    };\n    e.prototype.getDesktopReward = function () {\n        var t;\n        var e;\n        var o =\n            (null === (e = null === (t = _cfgMgr.default.serverCfg.add_desktop) || void 0 === t ? void 0 : t.rules) ||\n            void 0 === e\n                ? void 0\n                : e.times) || 50;\n        _pInfo.default.ins.addPower(o);\n        var n = this.desktopNode.isValid ? this.desktopNode.position : this.deskTopNodePos;\n        var i = this.node.convertToWorldSpaceAR(n);\n        _panelMgr.default.ins.open(\"ui/ui_flyAni\", {itemDatas: [{itemId: \"times\", worldPos: i, value: o}]});\n    };\n    __decorate([T(cc.Node)], e.prototype, \"countDownNode\", void 0);\n    __decorate([T(cc.Label)], e.prototype, \"coinLbl\", void 0);\n    __decorate([T(cc.Label)], e.prototype, \"cashLbl\", void 0);\n    __decorate([T(cc.Label)], e.prototype, \"powerLbl\", void 0);\n    __decorate([T(cc.Label)], e.prototype, \"powerCdLbl\", void 0);\n    __decorate([T(cc.Sprite)], e.prototype, \"powerSp\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"sidebarNode\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"desktopNode\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"newGiftBtn\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"newGiftBtnLight\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"friendRankBtn\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"clearBtn\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"sidebarRedPointNode\", void 0);\n    __decorate([T(cc.Label)], e.prototype, \"mailRedPointLbl\", void 0);\n    __decorate([T(cc.Label)], e.prototype, \"txt_name\", void 0);\n    __decorate([T(cc.Label)], e.prototype, \"deskLb\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"saveBtn\", void 0);\n    __decorate([T(cc.Label)], e.prototype, \"signRedLb\", void 0);\n    __decorate([T(_head.default)], e.prototype, \"headComp\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"serviceNode\", void 0);\n    __decorate([T(cc.Label)], e.prototype, \"taskRedLb\", void 0);\n    return __decorate([S], e);\n})(cc.Component);\nexports.default = P;\n"]}