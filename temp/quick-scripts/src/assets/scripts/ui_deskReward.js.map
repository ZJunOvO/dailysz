{"version":3,"sources":["assets\\scripts\\ui_deskReward.js"],"names":["n","Object","defineProperty","exports","value","_evts","require","_idx","_pConst","_res","_cfgMgr","_panelMgr","_pInfo","_baseUI","f","cc","_decorator","g","ccclass","y","property","m","t","e","apply","arguments","iconSpr","deskSpr","numLb","infoLb","__extends","prototype","onLoad","opE","on","onOperTap","bind","action","ADD_DESKTOP","addDesktopCb","data","init","o","ins","l","SpriteFrame","then","node","isValid","spriteFrame","console","error","serverCfg","add_desktop","rules","times","string","hideThis","hide","onBtnAdd","platform","PFCode","Bytedance","addShortcut","getAddDesk","setAddDesk","i","addPower","r","a","parent","convertToWorldSpaceAR","position","open","itemDatas","itemId","worldPos","onDestroy","assetManager","releaseAsset","__decorate","Sprite","Label"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _evts = require(\"evts\");\nvar _idx = require(\"idx\");\nvar _pConst = require(\"pConst\");\nvar _res = require(\"res\");\nvar _cfgMgr = require(\"cfgMgr\");\nvar _panelMgr = require(\"panelMgr\");\nvar _pInfo = require(\"pInfo\");\nvar _baseUI = require(\"baseUI\");\nvar f = cc._decorator;\nvar g = f.ccclass;\nvar y = f.property;\nvar m = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.iconSpr = null;\n        e.deskSpr = null;\n        e.numLb = null;\n        e.infoLb = null;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {\n        _evts.default.opE.on(this.onOperTap.bind(this));\n    };\n    e.prototype.onOperTap = function (t) {\n        var e = null == t ? void 0 : t.action;\n        if (e)\n            switch (e) {\n                case _evts.default.ADD_DESKTOP:\n                    this.addDesktopCb(t.data);\n            }\n    };\n    e.prototype.init = function () {\n        var t;\n        var e;\n        var o = this;\n        _res.default.ins\n            .l(\"pages/page_level/zhuxian_07_3\", cc.SpriteFrame, \"resSps\")\n            .then(function (t) {\n                o.node && o.node.isValid && (o.deskSpr.spriteFrame = t);\n            })\n            .catch(function () {\n                console.error(\"getResSpErr\");\n            });\n        var n =\n            (null === (e = null === (t = _cfgMgr.default.serverCfg.add_desktop) || void 0 === t ? void 0 : t.rules) ||\n            void 0 === e\n                ? void 0\n                : e.times) || 50;\n        this.numLb.string = \"+\" + n;\n    };\n    e.prototype.hideThis = function () {\n        this.hide();\n    };\n    e.prototype.onBtnAdd = function () {\n        switch (_idx.platform.string()) {\n            case _pConst.PFCode.Bytedance:\n                _idx.platform.addShortcut();\n        }\n    };\n    e.prototype.addDesktopCb = function (t) {\n        var e;\n        var o;\n        var n = _pInfo.default.ins.getAddDesk();\n        if (t && !n) {\n            _pInfo.default.ins.setAddDesk(!0);\n            var i =\n                (null ===\n                    (o = null === (e = _cfgMgr.default.serverCfg.add_desktop) || void 0 === e ? void 0 : e.rules) ||\n                void 0 === o\n                    ? void 0\n                    : o.times) || 50;\n            _pInfo.default.ins.addPower(i);\n            var r = this.numLb.node;\n            var a = r.parent.convertToWorldSpaceAR(r.position);\n            _panelMgr.default.ins.open(\"ui/ui_flyAni\", {itemDatas: [{itemId: \"times\", worldPos: a, value: i}]});\n            this.hideThis();\n        }\n    };\n    e.prototype.onDestroy = function () {\n        cc.assetManager.releaseAsset(this.iconSpr.spriteFrame);\n    };\n    __decorate([y(cc.Sprite)], e.prototype, \"iconSpr\", void 0);\n    __decorate([y(cc.Sprite)], e.prototype, \"deskSpr\", void 0);\n    __decorate([y(cc.Label)], e.prototype, \"numLb\", void 0);\n    __decorate([y(cc.Label)], e.prototype, \"infoLb\", void 0);\n    return __decorate([g], e);\n})(_baseUI.default);\nexports.default = m;\n"]}