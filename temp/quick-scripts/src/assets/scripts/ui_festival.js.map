{"version":3,"sources":["assets\\scripts\\ui_festival.js"],"names":["n","Object","defineProperty","exports","value","_evts","require","_idx","_mySafeArea","_res","_time","_global","_bagMgr","_festivalMgr","_newJigMgr","_panelMgr","_tipMgr","_pInfo","_baseUI","_","cc","_decorator","b","ccclass","w","property","S","t","e","apply","arguments","proLb","taskLb","timeLb","imgNode","tianNode","dayTimeLb","costLb","startBtn","topNode","upEggNode","eggNode","spineNode","jigsawNum","__extends","prototype","onLoad","node","height","winSize","checkEndTime","start","initPanel","upNewJigRed","scheduleOnce","adapter","getSafeAreaRect","yMin","y","ins","getUnPlacedNum","parent","active","string","x","getCharXOffset","initTask","initImg","initBtn","initReward","getNowTaskData","o","nums","getNowTaskPro","title","format","schedule","showTime","isTaskLocked","getFesPuzzleLv","children","length","isPuzzleMax","i","position","v3","getFesLevelCost","checkShowFinger","angle","Tween","stopAllByTarget","tween","sequence","to","easing","delay","repeatForever","_fingerNode","lPre","then","instantiate","addChild","setPosition","nextZeroTime","unschedule","getFormatHMS","fesEndTime","serverTime","Math","floor","showEndTime","hideThis","opE","emit","action","UPD_FES_RED","hide","onBtnGet","showTip","getFesPro","r","val","a","c","l","u","p","convertToWorldSpaceAR","f","itemId","worldPos","Number","push","addItem","open","itemDatas","m","platform","reportEvent","ERepEvt","fesTaskFinish","id","finishFesTask","onBtnStart","getPower","isPuzzleLocked","updPro","fesTaskKey","costPower","addPower","chgScene","sceneType","game","gameType","festival","onBtnJig","MAINJUMP","data","param","onBtnGo","get_by","raceScore","raceTimes","throughMain","levelDone","finishPuzzle","__decorate","Label","Node"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _evts = require(\"evts\");\nvar _idx = require(\"idx\");\nvar _mySafeArea = require(\"mySafeArea\");\nvar _res = require(\"res\");\nvar _time = require(\"time\");\nvar _global = require(\"global\");\nvar _bagMgr = require(\"bagMgr\");\nvar _festivalMgr = require(\"festivalMgr\");\nvar _newJigMgr = require(\"newJigMgr\");\nvar _panelMgr = require(\"panelMgr\");\nvar _tipMgr = require(\"tipMgr\");\nvar _pInfo = require(\"pInfo\");\nvar _baseUI = require(\"baseUI\");\nvar _ = cc._decorator;\nvar b = _.ccclass;\nvar w = _.property;\nvar S = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.proLb = null;\n        e.taskLb = null;\n        e.timeLb = null;\n        e.imgNode = null;\n        e.tianNode = null;\n        e.dayTimeLb = null;\n        e.costLb = null;\n        e.startBtn = null;\n        e.topNode = null;\n        e.upEggNode = null;\n        e.eggNode = null;\n        e.spineNode = null;\n        e.jigsawNum = null;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {\n        this.node.height = cc.winSize.height;\n        this.checkEndTime();\n    };\n    e.prototype.start = function () {\n        var t = this;\n        this.initPanel();\n        this.upNewJigRed();\n        this.scheduleOnce(function () {\n            t.adapter();\n        });\n    };\n    e.prototype.adapter = function () {\n        var t = _mySafeArea.getSafeAreaRect().yMin;\n        this.topNode.y -= t;\n    };\n    e.prototype.upNewJigRed = function () {\n        var t = _newJigMgr.default.ins.getUnPlacedNum();\n        if (t > 0) {\n            var e = t > 99 ? \"99+\" : t + \"\";\n            this.jigsawNum.node.parent.active = !0;\n            this.jigsawNum.string = e + \"\";\n            this.jigsawNum.node.x = _global.default.getCharXOffset(this.jigsawNum.string);\n        } else this.jigsawNum.node.parent.active = !1;\n    };\n    e.prototype.initPanel = function () {\n        this.initTask();\n        this.initImg();\n        this.initBtn();\n        this.initReward();\n    };\n    e.prototype.initTask = function () {\n        var t = _festivalMgr.default.ins;\n        var e = t.getNowTaskData();\n        var o = e.nums;\n        var n = t.getNowTaskPro();\n        this.taskLb.string = e.title.format(o);\n        this.schedule(this.showTime, 1);\n        this.showTime();\n        t.isTaskLocked()\n            ? ((this.proLb.string = \"\"), (this.upEggNode.active = !1))\n            : ((this.proLb.string = n + \"/\" + o), (this.upEggNode.active = !0));\n    };\n    e.prototype.initImg = function () {\n        for (\n            var t = _festivalMgr.default.ins.getFesPuzzleLv() - 1, e = this.imgNode.children, o = 0, n = e.length;\n            o < n;\n            o++\n        )\n            e[o].active = o >= t;\n        if (_festivalMgr.default.ins.isPuzzleMax()) this.spineNode.active = !1;\n        else {\n            this.spineNode.active = !0;\n            var i = this.imgNode.children[t];\n            this.spineNode.position = cc.v3(i.x + this.imgNode.x + 54, i.y + this.imgNode.y - 55);\n        }\n    };\n    e.prototype.initBtn = function () {\n        var t = _festivalMgr.default.ins.getFesLevelCost();\n        this.costLb.string = \"-\" + t;\n        this.startBtn.active = !_festivalMgr.default.ins.isPuzzleMax();\n    };\n    e.prototype.initReward = function () {\n        var t = this.upEggNode;\n        if (_festivalMgr.default.ins.isTaskLocked())\n            return (\n                this.checkShowFinger(!1),\n                (this.eggNode.angle = 0),\n                cc.Tween.stopAllByTarget(this.eggNode),\n                void (t.active = !1)\n            );\n        t.active = !0;\n        var e = _festivalMgr.default.ins;\n        var o = e.getNowTaskData().nums;\n        e.getNowTaskPro() >= o\n            ? (this.checkShowFinger(!0),\n              cc.Tween.stopAllByTarget(this.eggNode),\n              cc\n                  .tween(this.eggNode)\n                  .sequence(\n                      cc.tween().to(0.5, {angle: 10}),\n                      cc.tween().to(1, {angle: 0}, {easing: \"elasticOut\"}).delay(0.5)\n                  )\n                  .repeatForever()\n                  .start())\n            : (this.checkShowFinger(!1), (this.eggNode.angle = 0), cc.Tween.stopAllByTarget(this.eggNode));\n    };\n    e.prototype.checkShowFinger = function (t) {\n        var e = this;\n        t\n            ? this._fingerNode\n                ? (this._fingerNode.active = !0)\n                : _res.default.ins\n                      .lPre(\"prefab/finger\")\n                      .then(function (t) {\n                          e._fingerNode = cc.instantiate(t);\n                          e.eggNode.parent.addChild(e._fingerNode);\n                          var o = cc.v3(0, 105);\n                          e._fingerNode.setPosition(o);\n                          e._fingerNode.active = !0;\n                      })\n                      .catch(function () {})\n            : this._fingerNode && this._fingerNode.active && (this._fingerNode.active = !1);\n    };\n    e.prototype.showTime = function () {\n        var t = _time.default.ins.nextZeroTime / 1e3;\n        if (t <= 0) return this.initTask(), void this.unschedule(this.showTime);\n        this.dayTimeLb.string = _time.default.getFormatHMS(t);\n    };\n    e.prototype.checkEndTime = function () {\n        var t = _festivalMgr.default.ins.fesEndTime - _time.default.ins.serverTime;\n        if (t > 0) {\n            var e = Math.floor(t / 86400);\n            if (e <= 0) (this.tianNode.active = !1), this.schedule(this.showEndTime, 1), this.showEndTime();\n            else {\n                var o = (this.timeLb.string = e + \"\");\n                this.tianNode.active = !0;\n                1 == o.length && (this.tianNode.x = 112);\n            }\n        } else (this.timeLb.string = \"\"), (this.tianNode.active = !1);\n    };\n    e.prototype.showEndTime = function () {\n        var t = _festivalMgr.default.ins.fesEndTime - _time.default.ins.serverTime;\n        if (t <= 0) return this.initTask(), (this.timeLb.string = \"已结束\"), void this.unschedule(this.showTime);\n        this.timeLb.string = _time.default.getFormatHMS(t);\n    };\n    e.prototype.hideThis = function () {\n        _evts.default.opE.emit({action: _evts.default.UPD_FES_RED});\n        this.hide();\n    };\n    e.prototype.onBtnGet = function () {\n        if (_festivalMgr.default.ins.isTaskLocked()) _tipMgr.default.ins.showTip(\"今日任务已完成\");\n        else {\n            var t = _festivalMgr.default.ins;\n            var e = t.getFesPro();\n            var o = t.getNowTaskData();\n            var n = o.nums;\n            var i = t.getNowTaskPro();\n            var r = o.val;\n            var a = [];\n            for (var c in r) {\n                var l = r[c];\n                var u = this.imgNode.children[e];\n                var p = u.parent.convertToWorldSpaceAR(u.position);\n                var f = {};\n                f.itemId = c;\n                f.worldPos = p;\n                f.value = Number(l);\n                a.push(f);\n            }\n            if (i >= n) {\n                for (var c in r) (l = r[c]), _bagMgr.default.ins.addItem(c, Number(l));\n                _panelMgr.default.ins.open(\"ui/ui_flyAni\", {itemDatas: a});\n                var m = Number(t.getFesPro());\n                _idx.platform.reportEvent(_idx.ERepEvt.fesTaskFinish, {id: m});\n                _festivalMgr.default.ins.finishFesTask();\n                this.initPanel();\n            } else _panelMgr.default.ins.open(\"ui/ui_preReward\", {itemDatas: a});\n        }\n    };\n    e.prototype.onBtnStart = function () {\n        var t = _festivalMgr.default.ins.getFesLevelCost();\n        _pInfo.default.ins.getPower() < t\n            ? _panelMgr.default.ins.open(\"ui/ui_getRes\", {itemId: \"times\"})\n            : _festivalMgr.default.ins.isPuzzleLocked()\n            ? _tipMgr.default.ins.showTip(\"明天开启\")\n            : (_festivalMgr.default.ins.updPro(_festivalMgr.fesTaskKey.costPower, t),\n              _pInfo.default.ins.addPower(-t),\n              _pInfo.chgScene(_pInfo.sceneType.game, {gameType: _pInfo.gameType.festival}));\n    };\n    e.prototype.onBtnJig = function () {\n        this.hideThis();\n        _evts.default.opE.emit({action: _evts.default.MAINJUMP, data: 0, param: \"festival\"});\n    };\n    e.prototype.onBtnGo = function () {\n        var t = _festivalMgr.default.ins.getNowTaskData();\n        switch ((this.hideThis(), t.get_by)) {\n            case _festivalMgr.fesTaskKey.raceScore:\n            case _festivalMgr.fesTaskKey.raceTimes:\n                _evts.default.opE.emit({action: _evts.default.MAINJUMP, data: 4});\n                break;\n            case _festivalMgr.fesTaskKey.costPower:\n            case _festivalMgr.fesTaskKey.throughMain:\n                _global.default.levelDone\n                    ? _panelMgr.default.ins.open(\"ui/ui_selectMode\", null)\n                    : _panelMgr.default.ins.open(\"ui/ui_lvInfo\", null);\n                break;\n            case _festivalMgr.fesTaskKey.finishPuzzle:\n                _evts.default.opE.emit({action: _evts.default.MAINJUMP, data: 0});\n        }\n    };\n    __decorate([w(cc.Label)], e.prototype, \"proLb\", void 0);\n    __decorate([w(cc.Label)], e.prototype, \"taskLb\", void 0);\n    __decorate([w(cc.Label)], e.prototype, \"timeLb\", void 0);\n    __decorate([w(cc.Node)], e.prototype, \"imgNode\", void 0);\n    __decorate([w(cc.Node)], e.prototype, \"tianNode\", void 0);\n    __decorate([w(cc.Label)], e.prototype, \"dayTimeLb\", void 0);\n    __decorate([w(cc.Label)], e.prototype, \"costLb\", void 0);\n    __decorate([w(cc.Node)], e.prototype, \"startBtn\", void 0);\n    __decorate([w(cc.Node)], e.prototype, \"topNode\", void 0);\n    __decorate([w(cc.Node)], e.prototype, \"upEggNode\", void 0);\n    __decorate([w(cc.Node)], e.prototype, \"eggNode\", void 0);\n    __decorate([w(cc.Node)], e.prototype, \"spineNode\", void 0);\n    __decorate([w(cc.Label)], e.prototype, \"jigsawNum\", void 0);\n    return __decorate([b], e);\n})(_baseUI.default);\nexports.default = S;\n"]}