{"version":3,"sources":["assets\\scripts\\ui_rank.js"],"names":["n","Object","defineProperty","exports","value","a","s","_idx","require","_mySafeArea","_request","_res","_time","_uData","_lang","_global","_rankMgr","_tipMgr","_pInfo","_baseUI","_rankItem","w","cc","_decorator","S","ccclass","T","property","t","mian","daily","race","score","win","I","e","apply","arguments","scrollView","dataTagBtnsSps","levelTagBtnsSps","dayTypeBtnsSps","viewItem","rankTop","myRank","topNode","loadingNode","closeNode","bgSpr","type","rankType","Total","tag","rankTag","mainScore","levelTag","dataTag","last_view_inner_y","THEME_H","top_offest","itemCount","items","rankData","playAni","__extends","prototype","onLoad","node","height","winSize","padScale","scale","view","getVisibleSize","width","x","getChildByName","vertical","o","ins","serverTime","Math","floor","Date","getTime","getRankLastTimeData","setRankLastTimeData","platform","getUserInfo","i","getComponent","then","updateUserInfo","setHeadSp","getHeadImg","setDefaultHead","start","scheduleOnce","getSafeAreaRect","yMin","y","content","on","RefreshThemesVisible","position","initData","uploadRankData","refreshData","mainWin","dailyScore","dailyWin","getRankdata","getRankDataByType","dealData","data","active","getMyRankDataByTag","concat","r","game_uid","getUid","nickname","getName","sort_value","avatar","push","sort","refreshPanel","setMySelf","setContentSize","size","stopAutoScroll","scrollToTop","setRankTop","getContentPosition","abs","c","l","d","u","convertToWorldSpaceAR","v2","convertToNodeSpaceAR","p","setItemInfo","opacity","showChgAni","instantiate","v3","parent","h","showLoadAni","setRankData","setGameUid","setScore","setSkin","getUsingSkin","setNickName","uSkin","setIdx","Number","toString","setHeadOnLine","assetManager","loadRemote","isValid","spriteFrame","SpriteFrame","getBundleByString","load","console","error","tween","to","easing","onBtnChgDayType","initAni","Today","onBtnMain","chgLevelTagBtns","onBtnDaily","showTip","lang","onBtnChgDataType","unscheduleAllCallbacks","length","Tween","stopAllByTarget","hideThis","hide","onDestroy","releaseAsset","__decorate","ScrollView","Node","Sprite"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar a;\nvar s;\nvar _idx = require(\"idx\");\nvar _mySafeArea = require(\"mySafeArea\");\nvar _request = require(\"request\");\nvar _res = require(\"res\");\nvar _time = require(\"time\");\nvar _uData = require(\"uData\");\nvar _lang = require(\"lang\");\nvar _global = require(\"global\");\nvar _rankMgr = require(\"rankMgr\");\nvar _tipMgr = require(\"tipMgr\");\nvar _pInfo = require(\"pInfo\");\nvar _baseUI = require(\"baseUI\");\nvar _rankItem = require(\"rankItem\");\nvar w = cc._decorator;\nvar S = w.ccclass;\nvar T = w.property;\n(function (t) {\n    (t[(t.mian = 0)] = \"mian\"), (t[(t.daily = 1)] = \"daily\"), (t[(t.race = 2)] = \"race\");\n})(a || (a = {}));\n(function (t) {\n    t[(t.score = 0)] = \"score\";\n    t[(t.win = 1)] = \"win\";\n})(s || (s = {}));\nvar I = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.scrollView = null;\n        e.dataTagBtnsSps = [];\n        e.levelTagBtnsSps = [];\n        e.dayTypeBtnsSps = [];\n        e.viewItem = null;\n        e.rankTop = [];\n        e.myRank = null;\n        e.topNode = null;\n        e.loadingNode = null;\n        e.closeNode = null;\n        e.bgSpr = null;\n        e.type = _rankMgr.rankType.Total;\n        e.tag = _rankMgr.rankTag.mainScore;\n        e.levelTag = a.mian;\n        e.dataTag = s.score;\n        e.last_view_inner_y = -1;\n        e.THEME_H = 122;\n        e.top_offest = 61;\n        e.itemCount = 0;\n        e.items = [];\n        e.rankData = [];\n        e.playAni = !0;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {\n        if (((this.node.height = cc.winSize.height), _global.default.padScale)) {\n            this.bgSpr.node.scale = _global.default.padScale;\n            var t = (cc.view.getVisibleSize().width - 720) / 2;\n            this.closeNode.x -= t;\n        }\n        var e = this.node.height - 1280;\n        this.scrollView.node.height += e;\n        this.scrollView.node.getChildByName(\"view\").height += e;\n        this.scrollView.vertical = !1;\n        var o = _time.default.ins.serverTime || Math.floor(new Date().getTime() / 1e3);\n        if (o - _pInfo.default.ins.getRankLastTimeData() >= 3600) {\n            _pInfo.default.ins.setRankLastTimeData(o);\n            var n = _idx.platform.getUserInfo();\n            var i = this.myRank.getComponent(_rankItem.default);\n            n\n                ? n.then(\n                      function (t) {\n                          _request.default.ins.updateUserInfo(t);\n                          i.setHeadSp(_uData.default.ins.getHeadImg());\n                      },\n                      function () {\n                          i.setDefaultHead();\n                      }\n                  )\n                : i.setDefaultHead();\n        }\n    };\n    e.prototype.start = function () {\n        var t = this;\n        this.scheduleOnce(function () {\n            var e = _mySafeArea.getSafeAreaRect().yMin;\n            t.topNode.y -= e;\n            t.scrollView.node.y -= e / 2;\n            t.scrollView.node.getChildByName(\"view\").height -= e;\n            t.scrollView.content.y -= e / 2;\n            t.scrollView.node.on(\n                \"scrolling\",\n                function () {\n                    t.RefreshThemesVisible();\n                },\n                t\n            );\n            t.loadingNode.position = t.scrollView.node.position;\n            t.initData();\n            _rankMgr.default.ins.uploadRankData();\n        });\n    };\n    e.prototype.initData = function () {\n        this.refreshData();\n    };\n    e.prototype.refreshData = function () {\n        this.levelTag === a.mian\n            ? this.dataTag === s.score\n                ? (this.tag = _rankMgr.rankTag.mainScore)\n                : (this.tag = _rankMgr.rankTag.mainWin)\n            : this.levelTag === a.daily &&\n              (this.dataTag === s.score\n                  ? (this.tag = _rankMgr.rankTag.dailyScore)\n                  : (this.tag = _rankMgr.rankTag.dailyWin));\n        this.getRankdata();\n    };\n    e.prototype.getRankdata = function () {\n        var t = this;\n        _rankMgr.default.ins.getRankDataByType(this.tag, this.type).then(\n            function (e) {\n                t.dealData(e.data);\n            },\n            function () {\n                t.dealData([]);\n            }\n        );\n    };\n    e.prototype.dealData = function (t) {\n        this.node && (this.loadingNode.active = !1);\n        var e = !1;\n        var o = [];\n        var n = _rankMgr.default.ins.getMyRankDataByTag(this.tag, this.type) || 0;\n        if (t)\n            for (var i in (o = o.concat(t)))\n                if ((r = o[i]).game_uid == _uData.default.ins.getUid()) {\n                    r.nickname = _uData.default.ins.getName();\n                    r.sort_value = n;\n                    r.game_uid = _uData.default.ins.getUid();\n                    r.avatar = _uData.default.ins.getHeadImg();\n                    e = !0;\n                    break;\n                }\n        if (!e) {\n            var r = {\n                nickname: _uData.default.ins.getName(),\n                sort_value: n,\n                game_uid: _uData.default.ins.getUid(),\n                avatar: _uData.default.ins.getHeadImg()\n            };\n            o.push(r);\n        }\n        o.sort(function (t, e) {\n            return e.sort_value - t.sort_value;\n        });\n        this.rankData = o;\n        this.refreshPanel();\n    };\n    e.prototype.refreshPanel = function () {\n        this.setMySelf();\n        this.itemCount = 97;\n        var t = this.THEME_H * this.itemCount + this.top_offest;\n        this.scrollView.content.setContentSize(cc.size(cc.winSize.width, t));\n        this.last_view_inner_y = -1;\n        this.scrollView.stopAutoScroll();\n        this.scrollView.scrollToTop();\n        for (var e = 0; e < 3; e++) {\n            var o = this.rankData[e];\n            var n = this.rankTop[e];\n            this.setRankTop(n, o);\n        }\n        this.RefreshThemesVisible();\n    };\n    e.prototype.RefreshThemesVisible = function (t) {\n        var e = this;\n        void 0 === t && (t = 0);\n        var o = this.scrollView.getContentPosition();\n        if (!(Math.abs(this.last_view_inner_y - o.y) < 0.01)) {\n            this.last_view_inner_y = o.y;\n            for (\n                var n,\n                    i,\n                    r,\n                    a,\n                    s,\n                    c,\n                    l = function () {\n                        n = -d * u.THEME_H - u.top_offest;\n                        i = u.scrollView.content.convertToWorldSpaceAR(cc.v2(0, n));\n                        r = u.node.convertToNodeSpaceAR(i);\n                        a = r.y < -p || r.y + u.THEME_H > p;\n                        s = d;\n                        var t = d + 3;\n                        var o = u.rankData[t];\n                        if (a) u.items[s] && (u.items[s].active = !1);\n                        else if (u.items[s]) {\n                            u.setItemInfo(u.items[s], t, o);\n                            var l = u.playAni;\n                            if (l)\n                                return (\n                                    (u.items[s].x = 0),\n                                    (u.items[s].opacity = 0),\n                                    u.scheduleOnce(function () {\n                                        e.items[s].active = !0;\n                                        e.last_view_inner_y = -1;\n                                        e.RefreshThemesVisible(d + 1);\n                                        l && e.showChgAni(e.items[s]);\n                                    }, 0.06),\n                                    \"break\"\n                                );\n                            u.items[s].x = 0;\n                            u.items[s].opacity = 255;\n                            u.items[s].active = !0;\n                        } else {\n                            (c = cc.instantiate(u.viewItem)).active = !0;\n                            c.position = cc.v3(0, -d * u.THEME_H - u.top_offest);\n                            c.parent = u.scrollView.content;\n                            u.items[s] = c;\n                            u.setItemInfo(c, t, o);\n                            var h = u.playAni;\n                            if (h)\n                                return (\n                                    (c.x = (cc.winSize.width + u.items[s].width) / 2),\n                                    (c.opacity = 255),\n                                    u.scheduleOnce(function () {\n                                        e.last_view_inner_y = -1;\n                                        e.RefreshThemesVisible(d + 1);\n                                        h && e.showLoadAni(c);\n                                    }, 0.02),\n                                    \"break\"\n                                );\n                            c.opacity = 255;\n                            c.x = 0;\n                        }\n                        u.playAni = !1;\n                        d === u.itemCount - 1 &&\n                            u.scheduleOnce(function () {\n                                e.scrollView.vertical = !0;\n                            }, 0.5);\n                    },\n                    u = this,\n                    p = (this.scrollView.node.height / 4) * 3,\n                    d = t;\n                d < this.itemCount && \"break\" !== l();\n                d++\n            );\n        }\n    };\n    e.prototype.setRankTop = function (t, e) {\n        var o = t.getComponent(_rankItem.default);\n        e\n            ? (o.setRankData(e),\n              o.setGameUid(e.game_uid),\n              o.setScore(e.sort_value),\n              e.game_uid == _uData.default.ins.getUid()\n                  ? (o.setSkin(_pInfo.default.ins.getUsingSkin(), !1, !0),\n                    o.setNickName(_uData.default.ins.getName()),\n                    o.setHeadSp(_uData.default.ins.getHeadImg()))\n                  : (o.setSkin(null == e ? void 0 : e.uSkin, !1, !0),\n                    o.setNickName(e.nickname),\n                    e.avatar ? o.setHeadSp(e.avatar) : o.setDefaultHead()))\n            : (o.setNickName(\"暂无\"), o.setScore(\"0\"), o.setDefaultHead());\n    };\n    e.prototype.setItemInfo = function (t, e, o, n) {\n        void 0 === n && (n = !1);\n        var i = t.getComponent(_rankItem.default);\n        i.setIdx(Number(e) + 1 + \"\");\n        o\n            ? (i.setRankData(o),\n              i.setGameUid(o.game_uid),\n              i.setScore(o.sort_value),\n              o.game_uid == _uData.default.ins.getUid()\n                  ? (i.setSkin(_pInfo.default.ins.getUsingSkin(), n),\n                    i.setNickName(_uData.default.ins.getName()),\n                    i.setHeadSp(_uData.default.ins.getHeadImg()))\n                  : (i.setSkin(null == o ? void 0 : o.uSkin),\n                    i.setNickName(o.nickname),\n                    o.avatar ? i.setHeadSp(o.avatar) : i.setDefaultHead()))\n            : (i.setNickName(\"暂无\"), i.setScore(\"0\"), i.setDefaultHead());\n    };\n    e.prototype.setMySelf = function () {\n        var t = this.rankData;\n        for (var e in t) {\n            var o = t[e];\n            if (o.game_uid == _uData.default.ins.getUid() && Number(e) < 100)\n                return void this.setItemInfo(this.myRank, e, o, !0);\n        }\n        var n = _rankMgr.default.ins.getMyRankDataByTag(this.tag, this.type);\n        var i = this.myRank.getComponent(_rankItem.default);\n        i.setSkin(_pInfo.default.ins.getUsingSkin(), !0);\n        i.setGameUid(_uData.default.ins.getUid().toString());\n        i.setIdx(\"99+\");\n        i.setNickName(_uData.default.ins.getName());\n        i.setScore(n + \"\");\n        _uData.default.ins.getHeadImg() ? i.setHeadSp(_uData.default.ins.getHeadImg()) : i.setDefaultHead();\n    };\n    e.prototype.setHeadOnLine = function (t, e) {\n        var o = this;\n        cc.assetManager.loadRemote(e, function (e, n) {\n            !e && o.node && o.node.isValid && (t.spriteFrame = new cc.SpriteFrame(n));\n        });\n    };\n    e.prototype.setDefaultHead = function (t) {\n        var e = this;\n        _res.default.ins\n            .getBundleByString(\"resSps\")\n            .then(function (o) {\n                o.load(\"common/head_1\", cc.SpriteFrame, function (o, n) {\n                    !o && e.node && e.node.isValid && (t.spriteFrame = n);\n                });\n            })\n            .catch(function (t) {\n                console.error(\"RTool.ins.getBundleByString('resSps')\", t);\n            });\n    };\n    e.prototype.showLoadAni = function (t) {\n        cc.tween(t).to(0.5, {x: 0}, {easing: \"backInOut\"}).start();\n    };\n    e.prototype.showChgAni = function (t) {\n        cc.tween(t).to(0.5, {opacity: 255}).start();\n    };\n    e.prototype.onBtnChgDayType = function () {\n        this.initAni();\n        this.type == _rankMgr.rankType.Total\n            ? ((this.type = _rankMgr.rankType.Today),\n              this.refreshData(),\n              (this.dayTypeBtnsSps[0].active = !1),\n              (this.dayTypeBtnsSps[1].active = !0))\n            : this.type == _rankMgr.rankType.Today &&\n              ((this.type = _rankMgr.rankType.Total),\n              this.refreshData(),\n              (this.dayTypeBtnsSps[0].active = !0),\n              (this.dayTypeBtnsSps[1].active = !1));\n    };\n    e.prototype.onBtnMain = function () {\n        this.levelTag !== a.mian &&\n            (this.initAni(), (this.levelTag = a.mian), this.refreshData(), this.chgLevelTagBtns(!0));\n    };\n    e.prototype.onBtnDaily = function () {\n        _tipMgr.default.ins.showTip(_lang.lang[10004]);\n    };\n    e.prototype.chgLevelTagBtns = function (t) {\n        this.levelTagBtnsSps[0].active = t;\n        this.levelTagBtnsSps[1].active = !t;\n        this.levelTagBtnsSps[2].active = !t;\n        this.levelTagBtnsSps[3].active = t;\n    };\n    e.prototype.onBtnChgDataType = function () {\n        this.initAni();\n        this.dataTag == s.score\n            ? ((this.dataTag = s.win),\n              this.refreshData(),\n              (this.dataTagBtnsSps[0].active = !1),\n              (this.dataTagBtnsSps[1].active = !0))\n            : this.dataTag == s.win &&\n              ((this.dataTag = s.score),\n              this.refreshData(),\n              (this.dataTagBtnsSps[0].active = !0),\n              (this.dataTagBtnsSps[1].active = !1));\n    };\n    e.prototype.initAni = function () {\n        this.unscheduleAllCallbacks();\n        for (var t = 0, e = this.items.length; t < e; t++) {\n            var o = this.items[t];\n            cc.Tween.stopAllByTarget(o);\n            o && (o.opacity = 0);\n        }\n        this.scrollView.stopAutoScroll();\n        this.scrollView.scrollToTop();\n        this.scrollView.vertical = !1;\n        this.playAni = !0;\n    };\n    e.prototype.hideThis = function () {\n        this.hide();\n    };\n    e.prototype.onDestroy = function () {\n        cc.assetManager.releaseAsset(this.bgSpr.spriteFrame);\n    };\n    __decorate([T(cc.ScrollView)], e.prototype, \"scrollView\", void 0);\n    __decorate([T([cc.Node])], e.prototype, \"dataTagBtnsSps\", void 0);\n    __decorate([T([cc.Node])], e.prototype, \"levelTagBtnsSps\", void 0);\n    __decorate([T([cc.Node])], e.prototype, \"dayTypeBtnsSps\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"viewItem\", void 0);\n    __decorate([T([cc.Node])], e.prototype, \"rankTop\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"myRank\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"topNode\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"loadingNode\", void 0);\n    __decorate([T(cc.Node)], e.prototype, \"closeNode\", void 0);\n    __decorate([T(cc.Sprite)], e.prototype, \"bgSpr\", void 0);\n    return __decorate([S], e);\n})(_baseUI.default);\nexports.default = I;\n"]}