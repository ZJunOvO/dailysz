{"version":3,"sources":["assets\\scripts\\ui_set.js"],"names":["n","Object","defineProperty","exports","value","_idx","require","_uData","_baseUI","_swBtn","_sound","_global","_res","_pConst","_panelMgr","_slider","y","cc","_decorator","m","ccclass","v","property","_","t","e","apply","arguments","audioBtn","musicBtn","vibrateBtn","headImg","txt_name","txt_lv","versionLbl","btnService","btnPrivacy","bgmSlider","effSlider","isMusic","isAudio","isVb","__extends","prototype","start","ins","getSetting","effectSound","bgmSound","vibrate","upAudioBtn","updateMusicBtn","upVbBtn","initData","initSlider","platform","version","string","PFCode","Wechat","isQQ","o","node","active","on","Node","EventType","TOUCH_END","open","type","getName","getHeadImg","assetManager","loadRemote","ext","headImgExt","isValid","setDefaultHead","spriteFrame","SpriteFrame","getBundleByString","then","load","console","error","onAudioBtnTap","setSetting","setState","onMusicBtnTap","onVibrateBtnTap","hideThis","hide","effectVolume","bgmVolume","init","onSliderChange","progress","onBtnSkin","__decorate","Sprite","Label"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _idx = require(\"idx\");\nvar _uData = require(\"uData\");\nvar _baseUI = require(\"baseUI\");\nvar _swBtn = require(\"swBtn\");\nvar _sound = require(\"sound\");\nvar _global = require(\"global\");\nvar _res = require(\"res\");\nvar _pConst = require(\"pConst\");\nvar _panelMgr = require(\"panelMgr\");\nvar _slider = require(\"slider\");\nvar y = cc._decorator;\nvar m = y.ccclass;\nvar v = y.property;\nvar _ = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.audioBtn = null;\n        e.musicBtn = null;\n        e.vibrateBtn = null;\n        e.headImg = null;\n        e.txt_name = null;\n        e.txt_lv = null;\n        e.versionLbl = null;\n        e.btnService = null;\n        e.btnPrivacy = null;\n        e.bgmSlider = null;\n        e.effSlider = null;\n        e.isMusic = !0;\n        e.isAudio = !0;\n        e.isVb = !0;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.start = function () {\n        var t = _uData.default.ins.getSetting();\n        this.isAudio = t.effectSound;\n        this.isMusic = t.bgmSound;\n        this.isVb = t.vibrate;\n        this.upAudioBtn();\n        this.updateMusicBtn();\n        this.upVbBtn();\n        this.initData();\n        this.initSlider();\n        var e = _idx.platform.version;\n        if (\n            (e && (this.versionLbl.string = \"v \" + e),\n            _idx.platform.string() == _pConst.PFCode.Wechat || _idx.platform.isQQ)\n        ) {\n            var o = this.btnService.node;\n            var n = this.btnPrivacy.node;\n            o.active = n.active = !0;\n            o.on(\n                cc.Node.EventType.TOUCH_END,\n                function () {\n                    return _panelMgr.default.ins.open(\"ui/ui_info\", {type: 1});\n                },\n                this\n            );\n            n.on(\n                cc.Node.EventType.TOUCH_END,\n                function () {\n                    return _panelMgr.default.ins.open(\"ui/ui_info\", {type: 2});\n                },\n                this\n            );\n        }\n    };\n    e.prototype.initData = function () {\n        var t = this;\n        this.txt_name.string = _uData.default.ins.getName();\n        var e = _uData.default.ins.getHeadImg();\n        e\n            ? cc.assetManager.loadRemote(e, {ext: _global.headImgExt}, function (e, o) {\n                  t.node &&\n                      t.node.isValid &&\n                      (e ? t.setDefaultHead() : (t.headImg.spriteFrame = new cc.SpriteFrame(o)));\n              })\n            : this.setDefaultHead();\n    };\n    e.prototype.setDefaultHead = function () {\n        var t = this;\n        _res.default.ins\n            .getBundleByString(\"resSps\")\n            .then(function (e) {\n                e.load(\"common/head_1\", cc.SpriteFrame, function (e, o) {\n                    !e && t.node && t.node.isValid && (t.headImg.spriteFrame = o);\n                });\n            })\n            .catch(function (t) {\n                console.error(\"RTool.ins.getBundleByString('resSps')\", t);\n            });\n    };\n    e.prototype.onAudioBtnTap = function () {\n        this.isAudio = !this.isAudio;\n        this.upAudioBtn();\n        _uData.default.ins.setSetting({effectSound: this.isAudio});\n    };\n    e.prototype.upAudioBtn = function () {\n        null != this.audioBtn && this.audioBtn.setState(this.isAudio);\n    };\n    e.prototype.onMusicBtnTap = function () {\n        this.isMusic = !this.isMusic;\n        _uData.default.ins.setSetting({bgmSound: this.isMusic});\n        this.updateMusicBtn();\n    };\n    e.prototype.updateMusicBtn = function () {\n        _sound.default.ins[this.isMusic ? \"playBGM\" : \"stopBGM\"]();\n        null != this.musicBtn && this.musicBtn.setState(this.isMusic);\n    };\n    e.prototype.onVibrateBtnTap = function () {\n        this.isVb = !this.isVb;\n        this.upVbBtn();\n        _uData.default.ins.setSetting({vibrate: this.isVb});\n    };\n    e.prototype.upVbBtn = function () {\n        null != this.vibrateBtn && this.vibrateBtn.setState(this.isVb);\n    };\n    e.prototype.hideThis = function () {\n        this.hide();\n    };\n    e.prototype.initSlider = function () {\n        var t = _uData.default.ins.getSetting();\n        var e = t.effectVolume;\n        var o = t.bgmVolume;\n        this.bgmSlider.init(o);\n        this.effSlider.init(e);\n    };\n    e.prototype.onSliderChange = function (t, e) {\n        var o;\n        if (\"bgmVolume\" !== e && \"effectVolume\" !== e) return console.error(\"slider参数错了!!!!\");\n        _uData.default.ins.setSetting((((o = {})[e] = t.progress), o));\n        _sound.default.ins[e] = t.progress;\n    };\n    e.prototype.onBtnSkin = function () {};\n    __decorate([v(_swBtn.default)], e.prototype, \"audioBtn\", void 0);\n    __decorate([v(_swBtn.default)], e.prototype, \"musicBtn\", void 0);\n    __decorate([v(_swBtn.default)], e.prototype, \"vibrateBtn\", void 0);\n    __decorate([v(cc.Sprite)], e.prototype, \"headImg\", void 0);\n    __decorate([v(cc.Label)], e.prototype, \"txt_name\", void 0);\n    __decorate([v(cc.Label)], e.prototype, \"txt_lv\", void 0);\n    __decorate([v(cc.Label)], e.prototype, \"versionLbl\", void 0);\n    __decorate([v(cc.Label)], e.prototype, \"btnService\", void 0);\n    __decorate([v(cc.Label)], e.prototype, \"btnPrivacy\", void 0);\n    __decorate([v(_slider.default)], e.prototype, \"bgmSlider\", void 0);\n    __decorate([v(_slider.default)], e.prototype, \"effSlider\", void 0);\n    return __decorate([m], e);\n})(_baseUI.default);\nexports.default = _;\n"]}