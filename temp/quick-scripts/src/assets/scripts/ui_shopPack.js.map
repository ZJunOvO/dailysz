{"version":3,"sources":["assets\\scripts\\ui_shopPack.js"],"names":["n","Object","defineProperty","exports","value","_cfgMgr","require","_shopMgr","_baseUI","_chaptBtn","_packItem1","p","cc","_decorator","d","ccclass","h","property","f","t","e","apply","arguments","itemScroll","btnScroll","packItem","btnItem","btnsComp","curPageIdx","datasArr","tabIds","_packItem","__extends","prototype","init","o","serverCfg","shop_config","gift","i","r","c","u","tag","is_shop","push","ins","getTabsRed","g","instantiate","active","parent","content","y","getComponent","setLb","setState","m","v","length","_","price","setRed","b","w","S","node","on","chgViewData","width","T","children","childrenCount","x","Math","min","scrollToLeft","setTabsRed","initListView","forEach","removeAllChildren","a","shift","initItem","setContentSize","hideThis","hide","call","__decorate","ScrollView","Node"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _cfgMgr = require(\"cfgMgr\");\nvar _shopMgr = require(\"shopMgr\");\nvar _baseUI = require(\"baseUI\");\nvar _chaptBtn = require(\"chaptBtn\");\nvar _packItem1 = require(\"packItem1\");\nvar p = cc._decorator;\nvar d = p.ccclass;\nvar h = p.property;\nvar f = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.itemScroll = null;\n        e.btnScroll = null;\n        e.packItem = null;\n        e.btnItem = null;\n        e.btnsComp = [];\n        e.curPageIdx = -1;\n        e.datasArr = [];\n        e.tabIds = [];\n        e._packItem = [];\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.init = function () {\n        var t;\n        var e;\n        var o = this;\n        var n =\n            null === (e = null === (t = _cfgMgr.default.serverCfg) || void 0 === t ? void 0 : t.shop_config) ||\n            void 0 === e\n                ? void 0\n                : e.gift;\n        if (n) {\n            var i = {};\n            for (var r in n) {\n                var c = n[r];\n                var u = c.tag || 0;\n                c.is_shop && (i[u] ? i[u].push(c) : ((i[u] = []), i[u].push(c)));\n            }\n            var p = _shopMgr.default.ins.getTabsRed();\n            for (var d in i) {\n                var h = i[d];\n                if (h) {\n                    this.tabIds.push(d);\n                    var f = h[0].gift || \"礼包\";\n                    var g = cc.instantiate(this.btnItem);\n                    g.active = !0;\n                    g.parent = this.btnScroll.content;\n                    var y = g.getComponent(_chaptBtn.default);\n                    y.setLb(f);\n                    y.setState(!1);\n                    this.btnsComp.push(y);\n                    this.datasArr.push(h);\n                    var m = 1;\n                    if (p[d]) m = 0;\n                    else for (var v = h.length, _ = 0; _ < v; _++) 0 == (h[_].price || 0) && m++;\n                    y.setRed(m);\n                }\n            }\n            var b = this.btnsComp.length;\n            var w = function (t) {\n                S.btnsComp[t].node.on(\n                    \"click\",\n                    function () {\n                        o.chgViewData(t);\n                    },\n                    S\n                );\n            };\n            var S = this;\n            for (_ = 0; _ < b; _++) w(_);\n            this.btnScroll.node.width = 550;\n            var T = this.btnScroll.content.children[0].width * this.btnScroll.content.childrenCount;\n            this.btnScroll.node.x = T > this.btnScroll.node.width ? -274 : (this.btnScroll.node.width - T) / 2 - 274;\n            T = Math.min(T, 550);\n            this.btnScroll.node.width = T;\n            this.btnScroll.scrollToLeft();\n            this.chgViewData(0);\n        }\n    };\n    e.prototype.chgViewData = function (t) {\n        var e = this.curPageIdx;\n        if (e != t) {\n            var o = this.btnsComp;\n            var n = _shopMgr.default.ins.getTabsRed();\n            o[e] && (o[e].setState(!1), o[e].setRed(0), (n[this.tabIds[e]] = 1));\n            o[t] && (o[t].setState(!0), (n[this.tabIds[t]] = 1));\n            _shopMgr.default.ins.setTabsRed(n);\n            this.curPageIdx = t;\n            this.initListView();\n        }\n    };\n    e.prototype.initListView = function () {\n        var t = this;\n        var e = this.itemScroll.content;\n        e.children.forEach(function (e) {\n            t._packItem.push(e);\n        });\n        e.removeAllChildren();\n        for (var o = this.datasArr[this.curPageIdx], n = o.length, i = 0; i < n; i++) {\n            var r = o[i];\n            var a = this._packItem.shift();\n            a || (a = cc.instantiate(this.packItem));\n            a.active = !0;\n            a.parent = e;\n            a.getComponent(_packItem1.default).initItem(r);\n        }\n        e.setContentSize(580, 182 * n);\n    };\n    e.prototype.hideThis = function () {\n        t.prototype.hide.call(this);\n    };\n    __decorate([h(cc.ScrollView)], e.prototype, \"itemScroll\", void 0);\n    __decorate([h(cc.ScrollView)], e.prototype, \"btnScroll\", void 0);\n    __decorate([h(cc.Node)], e.prototype, \"packItem\", void 0);\n    __decorate([h(cc.Node)], e.prototype, \"btnItem\", void 0);\n    return __decorate([d], e);\n})(_baseUI.default);\nexports.default = f;\n"]}