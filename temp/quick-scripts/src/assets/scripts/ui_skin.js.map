{"version":3,"sources":["assets\\scripts\\ui_skin.js"],"names":["n","Object","defineProperty","exports","value","_baseUI","require","_pInfo","_uData","_chgBtn","_skinContent","_head","_res","_skinMgr","_evts","g","cc","_decorator","y","ccclass","m","property","v","t","e","apply","arguments","scrollView","btnsNode","headComp","pNameTxt","bgSp","roleNode","curPageIdx","contentArr","btnsComp","__extends","prototype","onLoad","eventFunc","onOperTap","bind","opE","on","content","parent","children","forEach","push","getComponent","active","i","chgViewData","o","r","a","length","start","ins","getBundleByString","then","preloadDir","onDestroy","off","init","getUsingSkin","getHeadImg","string","getName","loadHeadImg","updateShow","hideThis","hide","SkinIdEnum","bg","headFrame","nameFrame","role","getSkinConfig","initContent","changeBtnState","changeContentState","setState","node","scrollToTop","action","SKIN_CHG","data","isUse","skinId","ref","updateBg","updateRole","__decorate","ScrollView","Node","Label","Sprite"],"mappings":";;;;;;AAAA,IAAIA,CAAJ;AACAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAACC,KAAK,EAAE,CAAC;AAAT,CAA7C;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,QAAD,CAArB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,OAAD,CAApB;;AACA,IAAIE,MAAM,GAAGF,OAAO,CAAC,OAAD,CAApB;;AACA,IAAIG,OAAO,GAAGH,OAAO,CAAC,QAAD,CAArB;;AACA,IAAII,YAAY,GAAGJ,OAAO,CAAC,aAAD,CAA1B;;AACA,IAAIK,KAAK,GAAGL,OAAO,CAAC,MAAD,CAAnB;;AACA,IAAIM,IAAI,GAAGN,OAAO,CAAC,KAAD,CAAlB;;AACA,IAAIO,QAAQ,GAAGP,OAAO,CAAC,SAAD,CAAtB;;AACA,IAAIQ,KAAK,GAAGR,OAAO,CAAC,MAAD,CAAnB;;AACA,IAAIS,CAAC,GAAGC,EAAE,CAACC,UAAX;AACA,IAAIC,CAAC,GAAGH,CAAC,CAACI,OAAV;AACA,IAAIC,CAAC,GAAGL,CAAC,CAACM,QAAV;;AACA,IAAIC,CAAC,GAAI,UAAUC,CAAV,EAAa;EAClB,SAASC,CAAT,GAAa;IACT,IAAIA,CAAC,GAAI,SAASD,CAAT,IAAcA,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAcC,SAAd,CAAf,IAA4C,IAApD;IACAF,CAAC,CAACG,UAAF,GAAe,IAAf;IACAH,CAAC,CAACI,QAAF,GAAa,IAAb;IACAJ,CAAC,CAACK,QAAF,GAAa,IAAb;IACAL,CAAC,CAACM,QAAF,GAAa,IAAb;IACAN,CAAC,CAACO,IAAF,GAAS,IAAT;IACAP,CAAC,CAACQ,QAAF,GAAa,IAAb;IACAR,CAAC,CAACS,UAAF,GAAe,CAAf;IACAT,CAAC,CAACU,UAAF,GAAe,EAAf;IACAV,CAAC,CAACW,QAAF,GAAa,EAAb;IACA,OAAOX,CAAP;EACH;;EACDY,SAAS,CAACZ,CAAD,EAAID,CAAJ,CAAT;;EACAC,CAAC,CAACa,SAAF,CAAYC,MAAZ,GAAqB,YAAY;IAC7B,IAAIf,CAAC,GAAG,IAAR;IACA,KAAKgB,SAAL,GAAiB,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAjB;;IACA3B,KAAK,WAAL,CAAc4B,GAAd,CAAkBC,EAAlB,CAAqB,KAAKJ,SAA1B;;IACA,KAAKZ,UAAL,CAAgBiB,OAAhB,CAAwBC,MAAxB,CAA+BC,QAA/B,CAAwCC,OAAxC,CAAgD,UAAUvB,CAAV,EAAa;MACzDD,CAAC,CAACW,UAAF,CAAac,IAAb,CAAkBxB,CAAC,CAACyB,YAAF,CAAevC,YAAY,WAA3B,CAAlB;MACAc,CAAC,CAAC0B,MAAF,GAAW,CAAC,CAAZ;IACH,CAHD;;IAIA,KACI,IAAI1B,CAAC,GAAG,WAAUA,EAAV,EAAaxB,CAAb,EAAgBmD,CAAhB,EAAmB;MACnBA,CAAC,CAACH,IAAF,CAAOhD,CAAC,CAACwB,EAAD,CAAD,CAAKyB,YAAL,CAAkBxC,OAAO,WAAzB,CAAP;;MACAT,CAAC,CAACwB,EAAD,CAAD,CAAKmB,EAAL,CACI,OADJ,EAEI,YAAY;QACRpB,CAAC,CAAC6B,WAAF,CAAc5B,EAAd;MACH,CAJL,EAKI6B,CALJ;IAOH,CATL,EAUIA,CAAC,GAAG,IAVR,EAWIrD,CAAC,GAAG,CAXR,EAYImD,CAAC,GAAG,KAAKvB,QAAL,CAAckB,QAZtB,EAaIQ,CAAC,GAAG,KAAKnB,QAbb,EAcIoB,CAAC,GAAGJ,CAAC,CAACK,MAfd,EAgBIxD,CAAC,GAAGuD,CAhBR,EAiBIvD,CAAC,EAjBL;MAmBIwB,CAAC,CAACxB,CAAD,EAAImD,CAAJ,EAAOG,CAAP,CAAD;IAnBJ;EAoBH,CA5BD;;EA6BA9B,CAAC,CAACa,SAAF,CAAYoB,KAAZ,GAAoB,YAAY;IAC5B,KAAKL,WAAL,CAAiB,CAAjB;;IACAxC,IAAI,WAAJ,CAAa8C,GAAb,CAAiBC,iBAAjB,CAAmC,QAAnC,EAA6CC,IAA7C,CAAkD,UAAUrC,CAAV,EAAa;MAC3DA,CAAC,CAACsC,UAAF,CAAa,WAAb;IACH,CAFD;;IAGAjD,IAAI,WAAJ,CAAa8C,GAAb,CAAiBC,iBAAjB,CAAmC,QAAnC,EAA6CC,IAA7C,CAAkD,UAAUrC,CAAV,EAAa;MAC3DA,CAAC,CAACsC,UAAF,CAAa,MAAb;IACH,CAFD;EAGH,CARD;;EASArC,CAAC,CAACa,SAAF,CAAYyB,SAAZ,GAAwB,YAAY;IAChChD,KAAK,WAAL,CAAc4B,GAAd,CAAkBqB,GAAlB,CAAsB,KAAKxB,SAA3B;;IACA,KAAKA,SAAL,GAAiB,IAAjB;EACH,CAHD;;EAIAf,CAAC,CAACa,SAAF,CAAY2B,IAAZ,GAAmB,YAAY;IAC3B,KAAK,IAAIzC,CAAC,GAAG,EAAR,EAAYC,CAAC,GAAG,CAArB,EAAwBA,CAAC,GAAGE,SAAS,CAAC8B,MAAtC,EAA8ChC,CAAC,EAA/C;MAAmDD,CAAC,CAACC,CAAD,CAAD,GAAOE,SAAS,CAACF,CAAD,CAAhB;IAAnD;;IACA,IAAI6B,CAAC,GAAG9C,MAAM,WAAN,CAAemD,GAAf,CAAmBO,YAAnB,EAAR;;IACA,IAAIjE,CAAC,GAAGQ,MAAM,WAAN,CAAekD,GAAf,CAAmBQ,UAAnB,EAAR;;IACA,IAAM,KAAKpC,QAAL,CAAcqC,MAAd,GAAuB3D,MAAM,WAAN,CAAekD,GAAf,CAAmBU,OAAnB,EAAxB,EAAuD,KAAKvC,QAAL,CAAcwC,WAAd,CAA0BrE,CAA1B,CAAvD,EAAqFqD,CAA1F,EACI,KAAK,IAAIF,CAAT,IAAcE,CAAd,EAAiB;MACb,IAAIC,CAAC,GAAGH,CAAR;MACA,IAAII,CAAC,GAAGF,CAAC,CAACF,CAAD,CAAT;MACA,KAAKmB,UAAL,CAAgBhB,CAAhB,EAAmBC,CAAnB;IACH;EACR,CAVD;;EAWA/B,CAAC,CAACa,SAAF,CAAYkC,QAAZ,GAAuB,YAAY;IAC/B,KAAKC,IAAL;EACH,CAFD;;EAGAhD,CAAC,CAACa,SAAF,CAAYe,WAAZ,GAA0B,UAAU7B,CAAV,EAAa;IACnC,IAAIC,CAAC,GAAG,KAAKS,UAAb;;IACA,IAAIT,CAAC,IAAID,CAAT,EAAY;MACR,IAAI8B,CAAC,GAAG;QACJ,GAAGxC,QAAQ,CAAC4D,UAAT,CAAoBC,EADnB;QAEJ,GAAG7D,QAAQ,CAAC4D,UAAT,CAAoBE,SAFnB;QAGJ,GAAG9D,QAAQ,CAAC4D,UAAT,CAAoBG,SAHnB;QAIJ,GAAG/D,QAAQ,CAAC4D,UAAT,CAAoBI;MAJnB,CAAR;;MAMA,IAAI7E,CAAC,GAAGa,QAAQ,WAAR,CAAiB6C,GAAjB,CAAqBoB,aAArB,CAAmCzB,CAAC,CAAC9B,CAAD,CAApC,CAAR;;MACA,KAAKW,UAAL,CAAgBX,CAAhB,EAAmBwD,WAAnB,CAA+B/E,CAA/B;MACA,KAAKgF,cAAL,CAAoBxD,CAApB,EAAuBD,CAAvB;MACA,KAAK0D,kBAAL,CAAwBzD,CAAxB,EAA2BD,CAA3B;MACA,KAAKU,UAAL,GAAkBV,CAAlB;IACH;EACJ,CAfD;;EAgBAC,CAAC,CAACa,SAAF,CAAY2C,cAAZ,GAA6B,UAAUzD,CAAV,EAAaC,CAAb,EAAgB;IACzC,IAAI6B,CAAC,GAAG,KAAKlB,QAAb;IACAkB,CAAC,CAAC9B,CAAD,CAAD,CAAK2D,QAAL,CAAc,CAAC,CAAf;IACA7B,CAAC,CAAC7B,CAAD,CAAD,CAAK0D,QAAL,CAAc,CAAC,CAAf;EACH,CAJD;;EAKA1D,CAAC,CAACa,SAAF,CAAY4C,kBAAZ,GAAiC,UAAU1D,CAAV,EAAaC,CAAb,EAAgB;IAC7C,IAAI6B,CAAC,GAAG,KAAKnB,UAAb;IACA,IAAIlC,CAAC,GAAG,KAAK2B,UAAb;IACA0B,CAAC,CAAC9B,CAAD,CAAD,CAAK4D,IAAL,CAAUjC,MAAV,GAAmB,CAAC,CAApB;IACAG,CAAC,CAAC7B,CAAD,CAAD,CAAK2D,IAAL,CAAUjC,MAAV,GAAmB,CAAC,CAApB;IACAlD,CAAC,CAAC4C,OAAF,GAAYS,CAAC,CAAC7B,CAAD,CAAD,CAAK2D,IAAjB;IACAnF,CAAC,CAACoF,WAAF,CAAc,GAAd;EACH,CAPD;;EAQA5D,CAAC,CAACa,SAAF,CAAYG,SAAZ,GAAwB,UAAUjB,CAAV,EAAa;IACjC,IAAI,CAAC,QAAQA,CAAR,GAAY,KAAK,CAAjB,GAAqBA,CAAC,CAAC8D,MAAxB,MAAoCvE,KAAK,WAAL,CAAcwE,QAAlD,IAA8D/D,CAAC,CAACgE,IAAhE,IAAwEhE,CAAC,CAACgE,IAAF,CAAOC,KAAnF,EAA0F;MACtF,IAAIhE,CAAC,GAAGD,CAAC,CAACgE,IAAV;MACA,IAAIlC,CAAC,GAAG7B,CAAC,CAACiE,MAAV;MACA,IAAIzF,CAAC,GAAGwB,CAAC,CAACkE,GAAV;MACA,KAAKpB,UAAL,CAAgBjB,CAAhB,EAAmBrD,CAAnB;IACH;EACJ,CAPD;;EAQAwB,CAAC,CAACa,SAAF,CAAYiC,UAAZ,GAAyB,UAAU/C,CAAV,EAAaC,CAAb,EAAgB;IACrC,QAAQD,CAAR;MACI,KAAKV,QAAQ,CAAC4D,UAAT,CAAoBC,EAAzB;QACI7D,QAAQ,WAAR,CAAiB6C,GAAjB,CAAqBiC,QAArB,CAA8BnE,CAA9B,EAAiC,KAAKO,IAAtC;;QACA;;MACJ,KAAKlB,QAAQ,CAAC4D,UAAT,CAAoBI,IAAzB;QACIhE,QAAQ,WAAR,CAAiB6C,GAAjB,CAAqBkC,UAArB,CAAgCpE,CAAhC,EAAmC,KAAKQ,QAAxC;;IALR;EAOH,CARD;;EASA6D,UAAU,CAAC,CAACzE,CAAC,CAACJ,EAAE,CAAC8E,UAAJ,CAAF,CAAD,EAAqBtE,CAAC,CAACa,SAAvB,EAAkC,YAAlC,EAAgD,KAAK,CAArD,CAAV;;EACAwD,UAAU,CAAC,CAACzE,CAAC,CAACJ,EAAE,CAAC+E,IAAJ,CAAF,CAAD,EAAevE,CAAC,CAACa,SAAjB,EAA4B,UAA5B,EAAwC,KAAK,CAA7C,CAAV;;EACAwD,UAAU,CAAC,CAACzE,CAAC,CAACT,KAAK,WAAN,CAAF,CAAD,EAAqBa,CAAC,CAACa,SAAvB,EAAkC,UAAlC,EAA8C,KAAK,CAAnD,CAAV;;EACAwD,UAAU,CAAC,CAACzE,CAAC,CAACJ,EAAE,CAACgF,KAAJ,CAAF,CAAD,EAAgBxE,CAAC,CAACa,SAAlB,EAA6B,UAA7B,EAAyC,KAAK,CAA9C,CAAV;;EACAwD,UAAU,CAAC,CAACzE,CAAC,CAACJ,EAAE,CAACiF,MAAJ,CAAF,CAAD,EAAiBzE,CAAC,CAACa,SAAnB,EAA8B,MAA9B,EAAsC,KAAK,CAA3C,CAAV;;EACAwD,UAAU,CAAC,CAACzE,CAAC,CAACJ,EAAE,CAAC+E,IAAJ,CAAF,CAAD,EAAevE,CAAC,CAACa,SAAjB,EAA4B,UAA5B,EAAwC,KAAK,CAA7C,CAAV;;EACA,OAAOwD,UAAU,CAAC,CAAC3E,CAAD,CAAD,EAAMM,CAAN,CAAjB;AACH,CA5HO,CA4HLnB,OAAO,WA5HF,CAAR;;AA6HAF,OAAO,WAAP,GAAkBmB,CAAlB","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _baseUI = require(\"baseUI\");\nvar _pInfo = require(\"pInfo\");\nvar _uData = require(\"uData\");\nvar _chgBtn = require(\"chgBtn\");\nvar _skinContent = require(\"skinContent\");\nvar _head = require(\"head\");\nvar _res = require(\"res\");\nvar _skinMgr = require(\"skinMgr\");\nvar _evts = require(\"evts\");\nvar g = cc._decorator;\nvar y = g.ccclass;\nvar m = g.property;\nvar v = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.scrollView = null;\n        e.btnsNode = null;\n        e.headComp = null;\n        e.pNameTxt = null;\n        e.bgSp = null;\n        e.roleNode = null;\n        e.curPageIdx = 1;\n        e.contentArr = [];\n        e.btnsComp = [];\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.onLoad = function () {\n        var t = this;\n        this.eventFunc = this.onOperTap.bind(this);\n        _evts.default.opE.on(this.eventFunc);\n        this.scrollView.content.parent.children.forEach(function (e) {\n            t.contentArr.push(e.getComponent(_skinContent.default));\n            e.active = !1;\n        });\n        for (\n            var e = function (e, n, i) {\n                    i.push(n[e].getComponent(_chgBtn.default));\n                    n[e].on(\n                        \"click\",\n                        function () {\n                            t.chgViewData(e);\n                        },\n                        o\n                    );\n                },\n                o = this,\n                n = 0,\n                i = this.btnsNode.children,\n                r = this.btnsComp,\n                a = i.length;\n            n < a;\n            n++\n        )\n            e(n, i, r);\n    };\n    e.prototype.start = function () {\n        this.chgViewData(0);\n        _res.default.ins.getBundleByString(\"resSps\").then(function (t) {\n            t.preloadDir(\"game/skin\");\n        });\n        _res.default.ins.getBundleByString(\"prefab\").then(function (t) {\n            t.preloadDir(\"skin\");\n        });\n    };\n    e.prototype.onDestroy = function () {\n        _evts.default.opE.off(this.eventFunc);\n        this.eventFunc = null;\n    };\n    e.prototype.init = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];\n        var o = _pInfo.default.ins.getUsingSkin();\n        var n = _uData.default.ins.getHeadImg();\n        if (((this.pNameTxt.string = _uData.default.ins.getName()), this.headComp.loadHeadImg(n), o))\n            for (var i in o) {\n                var r = i;\n                var a = o[i];\n                this.updateShow(r, a);\n            }\n    };\n    e.prototype.hideThis = function () {\n        this.hide();\n    };\n    e.prototype.chgViewData = function (t) {\n        var e = this.curPageIdx;\n        if (e != t) {\n            var o = {\n                0: _skinMgr.SkinIdEnum.bg,\n                1: _skinMgr.SkinIdEnum.headFrame,\n                2: _skinMgr.SkinIdEnum.nameFrame,\n                3: _skinMgr.SkinIdEnum.role\n            };\n            var n = _skinMgr.default.ins.getSkinConfig(o[t]);\n            this.contentArr[t].initContent(n);\n            this.changeBtnState(e, t);\n            this.changeContentState(e, t);\n            this.curPageIdx = t;\n        }\n    };\n    e.prototype.changeBtnState = function (t, e) {\n        var o = this.btnsComp;\n        o[t].setState(!1);\n        o[e].setState(!0);\n    };\n    e.prototype.changeContentState = function (t, e) {\n        var o = this.contentArr;\n        var n = this.scrollView;\n        o[t].node.active = !1;\n        o[e].node.active = !0;\n        n.content = o[e].node;\n        n.scrollToTop(0.1);\n    };\n    e.prototype.onOperTap = function (t) {\n        if ((null == t ? void 0 : t.action) === _evts.default.SKIN_CHG && t.data && t.data.isUse) {\n            var e = t.data;\n            var o = e.skinId;\n            var n = e.ref;\n            this.updateShow(o, n);\n        }\n    };\n    e.prototype.updateShow = function (t, e) {\n        switch (t) {\n            case _skinMgr.SkinIdEnum.bg:\n                _skinMgr.default.ins.updateBg(e, this.bgSp);\n                break;\n            case _skinMgr.SkinIdEnum.role:\n                _skinMgr.default.ins.updateRole(e, this.roleNode);\n        }\n    };\n    __decorate([m(cc.ScrollView)], e.prototype, \"scrollView\", void 0);\n    __decorate([m(cc.Node)], e.prototype, \"btnsNode\", void 0);\n    __decorate([m(_head.default)], e.prototype, \"headComp\", void 0);\n    __decorate([m(cc.Label)], e.prototype, \"pNameTxt\", void 0);\n    __decorate([m(cc.Sprite)], e.prototype, \"bgSp\", void 0);\n    __decorate([m(cc.Node)], e.prototype, \"roleNode\", void 0);\n    return __decorate([y], e);\n})(_baseUI.default);\nexports.default = v;\n"]}