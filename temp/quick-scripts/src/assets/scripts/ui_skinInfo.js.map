{"version":3,"sources":["assets\\scripts\\ui_skinInfo.js"],"names":["n","Object","defineProperty","exports","value","_uData","require","_lang","_head","_skinMgr","_tipMgr","_pInfo","_baseUI","h","cc","_decorator","f","ccclass","g","property","y","t","e","apply","arguments","skinName","skinDesc","buyBtn","videoBtn","useBtn","headComp","bgSp","nameFrameSp","roleNode","frameBg","needCoin","needPro","__extends","prototype","start","init","o","ref","i","skinId","r","showNode","s","unlockState","c","ins","getSkinData","u","name","p","desc","d","unlockType","unlockValue","string","node","parent","active","SkinIdEnum","headFrame","bg","role","nameFrame","SkinState","lock","using","SkinUnlockType","coin","setCoin","video","setVideoPro","getComponent","Sprite","spriteFrame","removeAllChildren","instantiate","addChild","getHeadImg","loadHeadImg","scheduleOnce","setCloseBtnPos","hideThis","hide","toString","getSkinAdPro","addSkin","closeBtn","x","width","height","onBtnUseSkin","usingSkin","onBtnCoin","getCoin","addCoin","showTip","lang","onBtnVideo","addSkinAdPro","__decorate","Label","Node"],"mappings":"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","sourceRoot":"/","sourcesContent":["var n;\nObject.defineProperty(exports, \"__esModule\", {value: !0});\nvar _uData = require(\"uData\");\nvar _lang = require(\"lang\");\nvar _head = require(\"head\");\nvar _skinMgr = require(\"skinMgr\");\nvar _tipMgr = require(\"tipMgr\");\nvar _pInfo = require(\"pInfo\");\nvar _baseUI = require(\"baseUI\");\nvar h = cc._decorator;\nvar f = h.ccclass;\nvar g = h.property;\nvar y = (function (t) {\n    function e() {\n        var e = (null !== t && t.apply(this, arguments)) || this;\n        e.skinName = null;\n        e.skinDesc = null;\n        e.buyBtn = null;\n        e.videoBtn = null;\n        e.useBtn = null;\n        e.headComp = null;\n        e.bgSp = null;\n        e.nameFrameSp = null;\n        e.roleNode = null;\n        e.frameBg = null;\n        e.needCoin = null;\n        e.needPro = null;\n        return e;\n    }\n    __extends(e, t);\n    e.prototype.start = function () {};\n    e.prototype.init = function (t) {\n        var e;\n        var o = this;\n        var n = t.ref;\n        var i = t.skinId;\n        var r = t.showNode;\n        var s = t.unlockState;\n        var c = _skinMgr.default.ins.getSkinData(i, n);\n        var u = c.name;\n        var p = c.desc;\n        var d = c.unlockType;\n        var h = c.unlockValue;\n        switch (\n            ((this.skinName.string = u),\n            (this.skinDesc.string = p),\n            (this.skinId = i),\n            (this.ref = n),\n            (this.unlockValue = h),\n            (this.headComp.node.parent.active = i === _skinMgr.SkinIdEnum.headFrame),\n            (this.bgSp.node.active = i === _skinMgr.SkinIdEnum.bg),\n            (this.roleNode.active = i === _skinMgr.SkinIdEnum.role),\n            (this.nameFrameSp.node.parent.active = i === _skinMgr.SkinIdEnum.nameFrame),\n            (this.buyBtn.active = 2 === d && s === _skinMgr.SkinState.lock),\n            (this.videoBtn.active = 1 === d && s === _skinMgr.SkinState.lock),\n            (this.useBtn.active = _skinMgr.SkinState.using !== s && _skinMgr.SkinState.lock !== s),\n            d)\n        ) {\n            case _skinMgr.SkinUnlockType.coin:\n                this.setCoin();\n                break;\n            case _skinMgr.SkinUnlockType.video:\n                this.setVideoPro();\n        }\n        var f = null === (e = r.getComponent(cc.Sprite)) || void 0 === e ? void 0 : e.spriteFrame;\n        switch (i) {\n            case _skinMgr.SkinIdEnum.role:\n                this.roleNode.removeAllChildren();\n                var g = cc.instantiate(r);\n                (g.y = -100), this.roleNode.addChild(g);\n                break;\n            case _skinMgr.SkinIdEnum.bg:\n                this.bgSp.spriteFrame = f;\n                break;\n            case _skinMgr.SkinIdEnum.nameFrame:\n                this.nameFrameSp.spriteFrame = f;\n                break;\n            case _skinMgr.SkinIdEnum.headFrame:\n                var y = _uData.default.ins.getHeadImg();\n                this.headComp.loadHeadImg(y, n);\n        }\n        this.scheduleOnce(function () {\n            o.setCloseBtnPos();\n        });\n    };\n    e.prototype.hideThis = function () {\n        this.hide();\n    };\n    e.prototype.setCoin = function () {\n        this.needCoin.string = this.unlockValue.toString();\n    };\n    e.prototype.setVideoPro = function () {\n        var t = _pInfo.default.ins.getSkinAdPro(this.skinId, this.ref);\n        void 0 !== t &&\n            ((this.needPro.string = t + \"/\" + this.unlockValue),\n            t >= this.unlockValue &&\n                (_skinMgr.default.ins.addSkin(this.skinId, this.ref),\n                (this.videoBtn.active = !1),\n                (this.useBtn.active = !0)));\n    };\n    e.prototype.setCloseBtnPos = function () {\n        this.closeBtn.node.x = this.frameBg.width / 2 + this.frameBg.x - this.closeBtn.node.width / 2 - 15;\n        this.closeBtn.node.y = this.frameBg.height / 2 + this.frameBg.y - this.closeBtn.node.height / 2 - 15;\n    };\n    e.prototype.onBtnUseSkin = function () {\n        this.hide();\n        _skinMgr.default.ins.usingSkin(this.skinId, this.ref);\n    };\n    e.prototype.onBtnCoin = function () {\n        _pInfo.default.ins.getCoin() >= this.unlockValue\n            ? (_pInfo.default.ins.addCoin(-this.unlockValue),\n              _skinMgr.default.ins.addSkin(this.skinId, this.ref),\n              (this.buyBtn.active = !1),\n              (this.useBtn.active = !0),\n              _tipMgr.default.ins.showTip(\"购买成功\"))\n            : _tipMgr.default.ins.showTip(_lang.lang[10001]);\n    };\n    e.prototype.onBtnVideo = function () {\n        _pInfo.default.ins.addSkinAdPro(this.skinId, this.ref);\n        this.setVideoPro();\n    };\n    __decorate([g(cc.Label)], e.prototype, \"skinName\", void 0);\n    __decorate([g(cc.Label)], e.prototype, \"skinDesc\", void 0);\n    __decorate([g(cc.Node)], e.prototype, \"buyBtn\", void 0);\n    __decorate([g(cc.Node)], e.prototype, \"videoBtn\", void 0);\n    __decorate([g(cc.Node)], e.prototype, \"useBtn\", void 0);\n    __decorate([g(_head.default)], e.prototype, \"headComp\", void 0);\n    __decorate([g(cc.Sprite)], e.prototype, \"bgSp\", void 0);\n    __decorate([g(cc.Sprite)], e.prototype, \"nameFrameSp\", void 0);\n    __decorate([g(cc.Node)], e.prototype, \"roleNode\", void 0);\n    __decorate([g(cc.Node)], e.prototype, \"frameBg\", void 0);\n    __decorate([g(cc.Label)], e.prototype, \"needCoin\", void 0);\n    __decorate([g(cc.Label)], e.prototype, \"needPro\", void 0);\n    return __decorate([f], e);\n})(_baseUI.default);\nexports.default = y;\n"]}