# ğŸ”§ æœ€åè°ƒè¯•å°è¯•

## å°è¯•æŸ¥æ‰¾æ­£ç¡®çš„ç»„ä»¶åç§°

```javascript
// 1. åˆ—å‡ºæ‰€æœ‰åœºæ™¯ä¸­çš„ç»„ä»¶
function listAllComponents() {
    var scene = cc.director.getScene();
    function traverse(node, depth) {
        var indent = "  ".repeat(depth);
        var components = [];
        if (node._components) {
            components = node._components.map(c => c.constructor.name || c.__classname__ || 'Unknown');
        }
        console.log(indent + node.name + " -> " + components.join(", "));
        
        if (node.children) {
            node.children.forEach(child => traverse(child, depth + 1));
        }
    }
    traverse(scene, 0);
}
listAllComponents();

// 2. ä¸“é—¨æŸ¥æ‰¾åŒ…å«winã€gameã€rewardç­‰å…³é”®è¯çš„æ–¹æ³•
function findGameMethods() {
    var scene = cc.director.getScene();
    function searchMethods(node, path) {
        if (node._components) {
            node._components.forEach(comp => {
                var methods = Object.getOwnPropertyNames(comp.__proto__);
                var gameMethods = methods.filter(m => 
                    m.includes('win') || m.includes('game') || m.includes('reward') || m.includes('Win')
                );
                if (gameMethods.length > 0) {
                    console.log("ğŸ¯ åœ¨", path + "/" + node.name, "æ‰¾åˆ°ç›¸å…³æ–¹æ³•:", gameMethods);
                    console.log("ç»„ä»¶ç±»å‹:", comp.constructor.name);
                    window.foundGameComp = comp; // ä¿å­˜åˆ°å…¨å±€å˜é‡
                }
            });
        }
        
        if (node.children) {
            node.children.forEach(child => searchMethods(child, path + "/" + node.name));
        }
    }
    searchMethods(scene, "");
}
findGameMethods();

// 3. å¦‚æœæ‰¾åˆ°äº†ï¼Œå°è¯•è°ƒç”¨
if (window.foundGameComp && window.foundGameComp.directWin) {
    console.log("ğŸš€ å°è¯•è°ƒç”¨directWin");
    window.foundGameComp.directWin();
}
```

## å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œå°è¯•ç›´æ¥ä¿®æ”¹æ•°æ®æ¥æµ‹è¯•

```javascript
// ç›´æ¥æµ‹è¯•ç°é‡‘å¥–åŠ±ç³»ç»Ÿ
try {
    // æ–¹æ³•1ï¼šé€šè¿‡requireè·å–
    var rewardMgr = require("rewardMgr");
    if (rewardMgr && rewardMgr.default) {
        console.log("âœ… æ‰¾åˆ°rewardMgr");
        console.log("å½“å‰ä½™é¢:", rewardMgr.default.getCashDisplay());
        
        // å¼ºåˆ¶æ·»åŠ ç°é‡‘
        rewardMgr.default.addCash(520);
        console.log("æ·»åŠ åä½™é¢:", rewardMgr.default.getCashDisplay());
    }
} catch (e) {
    console.log("âŒ requireæ–¹å¼å¤±è´¥:", e);
}

// æ–¹æ³•2ï¼šé€šè¿‡å…¨å±€æŸ¥æ‰¾
if (typeof window !== 'undefined') {
    // æŸ¥çœ‹æ˜¯å¦æœ‰å…¨å±€çš„æµ‹è¯•æ–¹æ³•
    console.log("å…¨å±€æµ‹è¯•æ–¹æ³•:", typeof window.testCashReward);
    if (window.testCashReward) {
        window.testCashReward();
    }
}
```