# 数独游戏项目认知地图

## 🎯 关键功能位置速查

### 👤 用户相关
- **用户名设置**: 
  - `assets/scripts/loading.js:297` - 登录时默认昵称
  - `assets/scripts/top.js:231` - 顶部显示用户名
- **用户数据**: `assets/scripts/uData.js` - 用户数据管理

### 🎮 关卡相关  
- **关卡解锁**: `assets/scripts/pInfo.js:135-144`
  - `getPuzzleLvl()` - 获取当前关卡
  - `setPuzzleLvl(level)` - 设置关卡等级
- **关卡数据**: `assets/scripts/levelMgr.js` - 关卡数据加载管理
- **自动解锁逻辑**: `assets/scripts/main.js:71-76` - 游戏启动时解锁前51关
- **💫 自由关卡选择**: `assets/scripts/page_level.js:119-141` - 允许点击任意已解锁关卡
  - `startSelectedLevel()` - 开始选择的关卡
  - `_global.selectedLevel` - 临时存储选择的关卡
  - `_global.originalLevel` - 保存原始关卡进度
- **关卡难度系统**: `assets/scripts/game.js:574-581` - 根据关卡号判断难度等级

### 💰 经济系统
- **金币管理**: `assets/scripts/pInfo.js:172-185`
  - `getCoin()` - 获取金币
  - `addCoin(amount)` - 添加金币
- **💝 卷宝专属现金奖励系统**: `assets/scripts/rewardMgr.js` - 为女朋友定制的现金奖励
  - `getCash()` - 获取现金余额(¥0.52-5.20)
  - `addCash(amount)` - 添加现金
  - `onPuzzleComplete()` - 游戏完成奖励触发(60%概率)
  - 难度加成：简单x1, 中等x1.2, 困难x1.5, 专家x2
  - 连胜加成：连续完成关卡+20%~100%
  - 特殊日期：生日、纪念日双倍奖励
- **商店系统**: `assets/scripts/shopMgr.js` - 商店管理
- **背包系统**: `assets/scripts/bagMgr.js` - 道具背包

### 🎨 界面相关
- **主界面**: `assets/scripts/main.js` - 主界面逻辑
- **顶部UI**: `assets/scripts/top.js` - 顶部状态栏(含现金显示)
- **设置界面**: `assets/scripts/ui_set.js` - 游戏设置(解锁开关)
- **弹窗管理**: `assets/scripts/panelMgr.js` - 弹窗统一管理
- **皮肤系统**: `assets/scripts/skinMgr.js` - 主题皮肤

### 🎯 游戏玩法
- **数独逻辑**: 
  - `assets/scripts/Puzzle.js` - 数独谜题
  - `assets/scripts/Solver.js` - 数独求解器
- **游戏场景**: `assets/scripts/game.js` - 游戏主逻辑
- **挑战模式**: `assets/scripts/challengeMgr.js` - 挑战管理

### 🌍 多语言
- **文本配置**: `assets/scripts/lang.js` - 所有游戏文本

### 📱 平台相关
- **平台适配**: `assets/scripts/idx.js` - 平台检测
- **微信**: `assets/scripts/wx.js`
- **字节跳动**: `assets/scripts/tt.js`
- **支付宝**: `assets/scripts/ali.js`

### 🎵 音效相关
- **音效管理**: `assets/scripts/sound.js` - 音效控制

### 🗂️ 资源结构
- **场景文件**: `assets/scene/` - .fire场景文件
- **关卡数据**: `assets/101-118/` - 各章节关卡数据
- **拼图数据**: `assets/jigsaw/` - 拼图模式资源
- **UI预制体**: 通过panelMgr动态加载

## 💡 架构特点
- 基于Cocos Creator 2.4.10
- 模块化设计，各功能独立管理
- 事件驱动架构(`evts.js`)
- 统一的数据存储(`uData.js`)
- 动态资源加载系统
- **装饰器属性系统**：脚本属性需要`__decorate`才能在编辑器显示

## 🎨 定制化潜力
- ✅ 用户界面完全可定制
- ✅ 游戏规则可修改
- ✅ 奖励系统可扩展
- ✅ 皮肤主题可新增
- ✅ 关卡数据可替换